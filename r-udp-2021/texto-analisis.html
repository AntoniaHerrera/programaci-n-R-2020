<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>06A - Análisis de texto | Programación en Ciencias Sociales</title>
  <meta name="description" content="Sitio web CPO3523 (2021)" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="06A - Análisis de texto | Programación en Ciencias Sociales" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Sitio web CPO3523 (2021)" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="06A - Análisis de texto | Programación en Ciencias Sociales" />
  
  <meta name="twitter:description" content="Sitio web CPO3523 (2021)" />
  

<meta name="author" content="Andrés Cruz" />


<meta name="date" content="2021-05-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="part-análisis-de-texto.html"/>
<link rel="next" href="texto-cadenas.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./index.html">Prog. Cs. Sociales</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Inicio</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#links-importantes"><i class="fa fa-check"></i>Links importantes</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#cronograma-y-materiales-del-curso"><i class="fa fa-check"></i>Cronograma y materiales del curso</a></li>
</ul></li>
<li class="part"><span><b>I Intro a R, RStudio y R Markdown</b></span></li>
<li class="chapter" data-level="" data-path="rbasico.html"><a href="rbasico.html"><i class="fa fa-check"></i>01A - R básico</a>
<ul>
<li class="chapter" data-level="" data-path="rbasico.html"><a href="rbasico.html#introducción-comandos-y-código"><i class="fa fa-check"></i>Introducción: comandos y código</a></li>
<li class="chapter" data-level="" data-path="rbasico.html"><a href="rbasico.html#paquetes"><i class="fa fa-check"></i>Paquetes</a></li>
<li class="chapter" data-level="" data-path="rbasico.html"><a href="rbasico.html#comandos-básicos-y-tipos-de-objeto-en-r"><i class="fa fa-check"></i>Comandos básicos y tipos de objeto en R</a></li>
<li class="chapter" data-level="" data-path="rbasico.html"><a href="rbasico.html#sintaxis-de-r-markdown"><i class="fa fa-check"></i>Sintaxis de R Markdown</a></li>
<li class="chapter" data-level="" data-path="rbasico.html"><a href="rbasico.html#título-de-prueba"><i class="fa fa-check"></i>Título de prueba</a></li>
<li class="chapter" data-level="" data-path="rbasico.html"><a href="rbasico.html#siguiente-script"><i class="fa fa-check"></i>Siguiente script</a></li>
</ul></li>
<li class="part"><span><b>II Manejo de datos</b></span></li>
<li class="chapter" data-level="" data-path="manejo-02a.html"><a href="manejo-02a.html"><i class="fa fa-check"></i>02A - Manejo de datos</a>
<ul>
<li class="chapter" data-level="" data-path="manejo-02a.html"><a href="manejo-02a.html#manejo-de-bases-de-datos"><i class="fa fa-check"></i>Manejo de bases de datos</a></li>
<li class="chapter" data-level="" data-path="manejo-02a.html"><a href="manejo-02a.html#la-base-de-datos-ideal-tidy"><i class="fa fa-check"></i>La base de datos ideal: tidy</a></li>
<li><a href="manejo-02a.html#operaciones-básicas-en-bases-de-datos-wickham-2014">Operaciones básicas en bases de datos <span>(Wickham, 2014)</span></a></li>
<li class="chapter" data-level="" data-path="manejo-02a.html"><a href="manejo-02a.html#trabajo-con-r"><i class="fa fa-check"></i>Trabajo con R</a></li>
<li class="chapter" data-level="" data-path="manejo-02a.html"><a href="manejo-02a.html#manejo-de-datos-operaciones-básicas"><i class="fa fa-check"></i>Manejo de datos: operaciones básicas</a></li>
<li><a href="manejo-02a.html#agregarcolapsar-con-summarize-hacer-operaciones-por-grupos-con-group_by">Agregar/colapsar con <code>summarize()</code> / hacer operaciones por grupos con <code>group_by()</code></a></li>
<li><a href="manejo-02a.html#hacer-cadenas-de-operaciones-con-las-pipes">Hacer cadenas de operaciones con las pipes (<code>%&gt;%</code>)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="manejo-02b.html"><a href="manejo-02b.html"><i class="fa fa-check"></i>02B - Manejo de datos (ejercicio)</a>
<ul>
<li class="chapter" data-level="" data-path="manejo-02b.html"><a href="manejo-02b.html#contexto"><i class="fa fa-check"></i>Contexto</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="manejo-02c.html"><a href="manejo-02c.html"><i class="fa fa-check"></i>02C - Manejo de datos (extras)</a>
<ul>
<li class="chapter" data-level="" data-path="manejo-02c.html"><a href="manejo-02c.html#cargar-y-guardar-bases-de-datos"><i class="fa fa-check"></i>Cargar y guardar bases de datos</a></li>
<li><a href="manejo-02c.html#versiones-iterativas-de-summarize-y-mutate">Versiones iterativas de <code>summarize()</code> y <code>mutate()</code></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="manejo-02d.html"><a href="manejo-02d.html"><i class="fa fa-check"></i>02D - Manejo de datos (ejercicio int.)</a></li>
<li class="part"><span><b>III Visualización de datos</b></span></li>
<li class="chapter" data-level="" data-path="visualizacion.html"><a href="visualizacion.html"><i class="fa fa-check"></i>03A - Visualización de datos (intro)</a>
<ul>
<li class="chapter" data-level="" data-path="visualizacion.html"><a href="visualizacion.html#inicio-cargar-paquetes-base-de-datos"><i class="fa fa-check"></i>Inicio: cargar paquetes, base de datos</a></li>
<li class="chapter" data-level="" data-path="visualizacion.html"><a href="visualizacion.html#gráficos-univariados"><i class="fa fa-check"></i>Gráficos univariados</a></li>
<li class="chapter" data-level="" data-path="visualizacion.html"><a href="visualizacion.html#gráficos-bivariados"><i class="fa fa-check"></i>Gráficos bivariados</a></li>
<li class="chapter" data-level="" data-path="visualizacion.html"><a href="visualizacion.html#un-poco-de-personalización-etiquetas"><i class="fa fa-check"></i>Un poco de personalización: etiquetas</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="visualizacion-ext.html"><a href="visualizacion-ext.html"><i class="fa fa-check"></i>03B - Visualización de datos (extensiones)</a>
<ul>
<li class="chapter" data-level="" data-path="visualizacion-ext.html"><a href="visualizacion-ext.html#cargar-paquetes-y-datos"><i class="fa fa-check"></i>Cargar paquetes y datos</a></li>
<li class="chapter" data-level="" data-path="visualizacion-ext.html"><a href="visualizacion-ext.html#gráfico-de-ránking"><i class="fa fa-check"></i>Gráfico de ránking</a></li>
<li class="chapter" data-level="" data-path="visualizacion-ext.html"><a href="visualizacion-ext.html#facetas"><i class="fa fa-check"></i>Facetas</a></li>
<li class="chapter" data-level="" data-path="visualizacion-ext.html"><a href="visualizacion-ext.html#gráficos-de-líneas"><i class="fa fa-check"></i>Gráficos de líneas</a></li>
<li class="chapter" data-level="" data-path="visualizacion-ext.html"><a href="visualizacion-ext.html#más-personalización"><i class="fa fa-check"></i>Más personalización</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="visualizacion-personalizacion.html"><a href="visualizacion-personalizacion.html"><i class="fa fa-check"></i>03C - Visualización de datos (personalización)</a>
<ul>
<li class="chapter" data-level="" data-path="visualizacion-personalizacion.html"><a href="visualizacion-personalizacion.html#inicio-cargar-paquetes-base-de-datos-1"><i class="fa fa-check"></i>Inicio: cargar paquetes, base de datos</a></li>
<li class="chapter" data-level="" data-path="visualizacion-personalizacion.html"><a href="visualizacion-personalizacion.html#gráfico-de-ejemplo"><i class="fa fa-check"></i>Gráfico de ejemplo</a></li>
<li class="chapter" data-level="" data-path="visualizacion-personalizacion.html"><a href="visualizacion-personalizacion.html#gráficos-como-objetos-guardar-gráficos-en-el-disco"><i class="fa fa-check"></i>Gráficos como objetos / guardar gráficos en el disco</a></li>
<li class="chapter" data-level="" data-path="visualizacion-personalizacion.html"><a href="visualizacion-personalizacion.html#personalización-de-gráficos"><i class="fa fa-check"></i>Personalización de gráficos</a></li>
</ul></li>
<li class="part"><span><b>IV Búsqueda de ayuda</b></span></li>
<li class="chapter" data-level="" data-path="busqueda-ayuda.html"><a href="busqueda-ayuda.html"><i class="fa fa-check"></i>04 - Guía búsqueda de ayuda</a>
<ul>
<li class="chapter" data-level="" data-path="busqueda-ayuda.html"><a href="busqueda-ayuda.html#leer-archivos-de-ayuda-de-r"><i class="fa fa-check"></i>Leer archivos de ayuda de R</a></li>
<li class="chapter" data-level="" data-path="busqueda-ayuda.html"><a href="busqueda-ayuda.html#encontrar-funciones-en-línea"><i class="fa fa-check"></i>Encontrar funciones en línea</a></li>
<li class="chapter" data-level="" data-path="busqueda-ayuda.html"><a href="busqueda-ayuda.html#solucionar-problemas"><i class="fa fa-check"></i>Solucionar problemas</a></li>
<li class="chapter" data-level="" data-path="busqueda-ayuda.html"><a href="busqueda-ayuda.html#pedir-ayuda-con-ejemplos-reproducibles-reprex"><i class="fa fa-check"></i>Pedir ayuda con ejemplos reproducibles (reprex)</a></li>
</ul></li>
<li class="part"><span><b>V Manejo avanzado de datos</b></span></li>
<li class="chapter" data-level="" data-path="manejo-av.html"><a href="manejo-av.html"><i class="fa fa-check"></i>05A - Manejo avanzado de datos (intro)</a>
<ul>
<li class="chapter" data-level="" data-path="manejo-av.html"><a href="manejo-av.html#inicio-cargar-paquetes-base-de-datos-2"><i class="fa fa-check"></i>Inicio: cargar paquetes, base de datos</a></li>
<li class="chapter" data-level="" data-path="manejo-av.html"><a href="manejo-av.html#pivotear-bases-de-datos-wide---long"><i class="fa fa-check"></i>Pivotear bases de datos (wide &lt;-&gt; long)</a></li>
<li class="chapter" data-level="" data-path="manejo-av.html"><a href="manejo-av.html#recodificar-variables"><i class="fa fa-check"></i>Recodificar variables</a></li>
<li class="chapter" data-level="" data-path="manejo-av.html"><a href="manejo-av.html#valores-perdidosmissingna"><i class="fa fa-check"></i>Valores perdidos/missing/NA</a></li>
<li class="chapter" data-level="" data-path="manejo-av.html"><a href="manejo-av.html#unir-bases-de-datos"><i class="fa fa-check"></i>Unir bases de datos</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="manejo-av-ej.html"><a href="manejo-av-ej.html"><i class="fa fa-check"></i>05B - Visualización de datos (extensiones)</a></li>
<li class="part"><span><b>VI Análisis de texto</b></span></li>
<li class="chapter" data-level="" data-path="texto-analisis.html"><a href="texto-analisis.html"><i class="fa fa-check"></i>06A - Análisis de texto</a>
<ul>
<li class="chapter" data-level="" data-path="texto-analisis.html"><a href="texto-analisis.html#inicio-cargar-paquetes-base-de-datos-3"><i class="fa fa-check"></i>Inicio: cargar paquetes, base de datos</a></li>
<li class="chapter" data-level="" data-path="texto-analisis.html"><a href="texto-analisis.html#tokens-y-frecuencias"><i class="fa fa-check"></i>Tokens y frecuencias</a></li>
<li class="chapter" data-level="" data-path="texto-analisis.html"><a href="texto-analisis.html#separar-el-análisis-de-frecuencias-por-secciones"><i class="fa fa-check"></i>Separar el análisis de frecuencias por secciones</a></li>
<li class="chapter" data-level="" data-path="texto-analisis.html"><a href="texto-analisis.html#comparar-frecuencias-de-palabras-entre-documentos"><i class="fa fa-check"></i>Comparar frecuencias de palabras entre documentos</a></li>
<li class="chapter" data-level="" data-path="texto-analisis.html"><a href="texto-analisis.html#obtener-las-palabras-más-distintivas-entre-documentos"><i class="fa fa-check"></i>Obtener las palabras más distintivas entre documentos</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="texto-cadenas.html"><a href="texto-cadenas.html"><i class="fa fa-check"></i>06B - Cadenas de texto</a>
<ul>
<li class="chapter" data-level="" data-path="texto-cadenas.html"><a href="texto-cadenas.html#inicio-cargar-paquetes-base-de-datos-4"><i class="fa fa-check"></i>Inicio: cargar paquetes, base de datos</a></li>
<li class="chapter" data-level="" data-path="texto-cadenas.html"><a href="texto-cadenas.html#cadenas-de-texto"><i class="fa fa-check"></i>Cadenas de texto</a></li>
<li class="chapter" data-level="" data-path="texto-cadenas.html"><a href="texto-cadenas.html#algunas-operaciones-simples-con-texto"><i class="fa fa-check"></i>Algunas operaciones simples con texto</a></li>
<li class="chapter" data-level="" data-path="texto-cadenas.html"><a href="texto-cadenas.html#funciones-para-trabajar-con-patrones"><i class="fa fa-check"></i>Funciones para trabajar con patrones</a></li>
<li><a href="texto-cadenas.html#patrones-más-complejos-con-expresiones-regulares-regex">Patrones más complejos con expresiones regulares (<em>regex</em>)</a></li>
<li class="chapter" data-level="" data-path="texto-cadenas.html"><a href="texto-cadenas.html#ejercicio-f"><i class="fa fa-check"></i>(Ejercicio f)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="texto-libros.html"><a href="texto-libros.html"><i class="fa fa-check"></i>06C - Descarga de libros</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Publicado con bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Programación en Ciencias Sociales</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="texto-analisis" class="section level1 unnumbered">
<h1>06A - Análisis de texto</h1>
<blockquote>
<p>Si quieres correr estos scripts localmente, acá puedes <a href="./static/06_analisis_texto.zip">descargar el proyecto comprimido en .zip</a>. Paquetes que necesitas tener instalados antes de comenzar con el proyecto (06A, 06B, 06C): <code>tidyverse</code>, <code>tidytext</code>, <code>stopwords</code>, <code>gutenbergr</code>.</p>
</blockquote>
<div id="inicio-cargar-paquetes-base-de-datos-3" class="section level2">
<h2>Inicio: cargar paquetes, base de datos</h2>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="texto-analisis.html#cb295-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb295-2"><a href="texto-analisis.html#cb295-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb295-3"><a href="texto-analisis.html#cb295-3" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(&quot;tidytext&quot;)</span></span>
<span id="cb295-4"><a href="texto-analisis.html#cb295-4" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(&quot;stopwords&quot;)</span></span>
<span id="cb295-5"><a href="texto-analisis.html#cb295-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb295-6"><a href="texto-analisis.html#cb295-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidytext)</span>
<span id="cb295-7"><a href="texto-analisis.html#cb295-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(SnowballC)  <span class="co"># se instala solo con tidytext</span></span>
<span id="cb295-8"><a href="texto-analisis.html#cb295-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stopwords)</span></code></pre></div>
<p>Hoy trabajaremos con el texto de tres libros clásicos de teoría política: “Leviathan” de Hobbes (1651), “A Vindication of the Rights of Woman” de Mary Wollstonecraft (1792) y “On Liberty” de John Stuart Mill (1859). Como son libros antiguos, ya son parte del dominio público y se pueden descargar desde <a href="https://www.gutenberg.org/">Project Gutenberg</a>. Hay un paquete de R que ayuda a hacer esto automáticamente: pueden ver cómo descargué los libros y edité ligeramente las bases en el script 06c de este proyecto. Carguemos las bases:</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="texto-analisis.html#cb296-1" aria-hidden="true" tabindex="-1"></a>leviathan <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;datos/leviathan.csv&quot;</span>)</span></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   author = col_character(),
##   book = col_character(),
##   gutenberg_id = col_double(),
##   chapter = col_double(),
##   line = col_double(),
##   text = col_character()
## )</code></pre>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="texto-analisis.html#cb298-1" aria-hidden="true" tabindex="-1"></a>rights <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;datos/rights_of_women.csv&quot;</span>)</span></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   author = col_character(),
##   book = col_character(),
##   gutenberg_id = col_double(),
##   chapter = col_double(),
##   line = col_double(),
##   text = col_character()
## )</code></pre>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="texto-analisis.html#cb300-1" aria-hidden="true" tabindex="-1"></a>on_liberty <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;datos/on_liberty.csv&quot;</span>)</span></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   author = col_character(),
##   book = col_character(),
##   gutenberg_id = col_double(),
##   chapter = col_double(),
##   line = col_double(),
##   text = col_character()
## )</code></pre>
<p>Vamos a comenzar trabajando con “Leviathan” y “A Vindication of the Rights of Woman”, dejando “On Liberty” para algunos ejercicios.</p>
</div>
<div id="tokens-y-frecuencias" class="section level2">
<h2>Tokens y frecuencias</h2>
<p>La unidad de análisis de estas bases de datos es la línea de texto. Esto es bastante común en los cuerpos de texto que provienen de libros / recursos impresos (la mayoría). Es probable que sea igual en, por ejemplo, programas de candidaturas políticas.</p>
<p>Lo más común en análisis de texto, sin embargo, es analizar palabras o n-gramas (conjuntos de palabras). Esto no quita que a veces otras unidades de análisis sean interesantes (líneas, párrafos, capítulos, etc.), dependiendo de nuestras preguntas de investigación.</p>
<p>Estas diferentes unidades de análisis de texto se llaman “tokens” en <code>tidytext</code>, y es posible pasar una base a una unidad de análisis más pequeña con la función <code>unnest_tokens()</code>. Obtengamos las palabras en “Leviathan”:</p>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="texto-analisis.html#cb302-1" aria-hidden="true" tabindex="-1"></a>palabras_leviathan <span class="ot">&lt;-</span> leviathan <span class="sc">%&gt;%</span> </span>
<span id="cb302-2"><a href="texto-analisis.html#cb302-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(<span class="at">output =</span> word, <span class="at">input =</span> text, <span class="at">token =</span> <span class="st">&quot;words&quot;</span>)</span></code></pre></div>
<p>¿Cuáles son las palabras más usadas en el libro?</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="texto-analisis.html#cb303-1" aria-hidden="true" tabindex="-1"></a>palabras_leviathan <span class="sc">%&gt;%</span> </span>
<span id="cb303-2"><a href="texto-analisis.html#cb303-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 9,965 x 2
##    word      n
##    &lt;chr&gt; &lt;int&gt;
##  1 the   14969
##  2 of    10867
##  3 and    7336
##  4 to     7275
##  5 is     4863
##  6 that   4810
##  7 in     4155
##  8 a      3145
##  9 by     2635
## 10 for    2523
## # ... with 9,955 more rows</code></pre>
<div id="eliminar-palabras-vacías-stop-words-y-enraizar-stem" class="section level3">
<h3>Eliminar palabras vacías (<em>stop words</em>) y enraizar (<em>stem</em>)</h3>
<p>Que este tipo de palabras sean las más comunes es lógico. Sin embargo, no suelen darnos mucha información sobre los textos. Por suerte existen diccionarios de palabras vacías (<em>stop words</em>), que nos permitirán eliminarlas de nuestra base:</p>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="texto-analisis.html#cb305-1" aria-hidden="true" tabindex="-1"></a>stop_words_en <span class="ot">&lt;-</span> <span class="fu">stopwords</span>(<span class="at">language =</span> <span class="st">&quot;en&quot;</span>, <span class="at">source =</span> <span class="st">&quot;smart&quot;</span>)</span>
<span id="cb305-2"><a href="texto-analisis.html#cb305-2" aria-hidden="true" tabindex="-1"></a><span class="co"># si es que fuera en español...</span></span>
<span id="cb305-3"><a href="texto-analisis.html#cb305-3" aria-hidden="true" tabindex="-1"></a><span class="co"># stop_words_es &lt;- stopwords(language = &quot;es&quot;, source = &quot;snowball&quot;)</span></span>
<span id="cb305-4"><a href="texto-analisis.html#cb305-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb305-5"><a href="texto-analisis.html#cb305-5" aria-hidden="true" tabindex="-1"></a>stop_words_en</span></code></pre></div>
<pre><code>##   [1] &quot;a&quot;             &quot;a&#39;s&quot;          
##   [3] &quot;able&quot;          &quot;about&quot;        
##   [5] &quot;above&quot;         &quot;according&quot;    
##   [7] &quot;accordingly&quot;   &quot;across&quot;       
##   [9] &quot;actually&quot;      &quot;after&quot;        
##  [11] &quot;afterwards&quot;    &quot;again&quot;        
##  [13] &quot;against&quot;       &quot;ain&#39;t&quot;        
##  [15] &quot;all&quot;           &quot;allow&quot;        
##  [17] &quot;allows&quot;        &quot;almost&quot;       
##  [19] &quot;alone&quot;         &quot;along&quot;        
##  [21] &quot;already&quot;       &quot;also&quot;         
##  [23] &quot;although&quot;      &quot;always&quot;       
##  [25] &quot;am&quot;            &quot;among&quot;        
##  [27] &quot;amongst&quot;       &quot;an&quot;           
##  [29] &quot;and&quot;           &quot;another&quot;      
##  [31] &quot;any&quot;           &quot;anybody&quot;      
##  [33] &quot;anyhow&quot;        &quot;anyone&quot;       
##  [35] &quot;anything&quot;      &quot;anyway&quot;       
##  [37] &quot;anyways&quot;       &quot;anywhere&quot;     
##  [39] &quot;apart&quot;         &quot;appear&quot;       
##  [41] &quot;appreciate&quot;    &quot;appropriate&quot;  
##  [43] &quot;are&quot;           &quot;aren&#39;t&quot;       
##  [45] &quot;around&quot;        &quot;as&quot;           
##  [47] &quot;aside&quot;         &quot;ask&quot;          
##  [49] &quot;asking&quot;        &quot;associated&quot;   
##  [51] &quot;at&quot;            &quot;available&quot;    
##  [53] &quot;away&quot;          &quot;awfully&quot;      
##  [55] &quot;b&quot;             &quot;be&quot;           
##  [57] &quot;became&quot;        &quot;because&quot;      
##  [59] &quot;become&quot;        &quot;becomes&quot;      
##  [61] &quot;becoming&quot;      &quot;been&quot;         
##  [63] &quot;before&quot;        &quot;beforehand&quot;   
##  [65] &quot;behind&quot;        &quot;being&quot;        
##  [67] &quot;believe&quot;       &quot;below&quot;        
##  [69] &quot;beside&quot;        &quot;besides&quot;      
##  [71] &quot;best&quot;          &quot;better&quot;       
##  [73] &quot;between&quot;       &quot;beyond&quot;       
##  [75] &quot;both&quot;          &quot;brief&quot;        
##  [77] &quot;but&quot;           &quot;by&quot;           
##  [79] &quot;c&quot;             &quot;c&#39;mon&quot;        
##  [81] &quot;c&#39;s&quot;           &quot;came&quot;         
##  [83] &quot;can&quot;           &quot;can&#39;t&quot;        
##  [85] &quot;cannot&quot;        &quot;cant&quot;         
##  [87] &quot;cause&quot;         &quot;causes&quot;       
##  [89] &quot;certain&quot;       &quot;certainly&quot;    
##  [91] &quot;changes&quot;       &quot;clearly&quot;      
##  [93] &quot;co&quot;            &quot;com&quot;          
##  [95] &quot;come&quot;          &quot;comes&quot;        
##  [97] &quot;concerning&quot;    &quot;consequently&quot; 
##  [99] &quot;consider&quot;      &quot;considering&quot;  
## [101] &quot;contain&quot;       &quot;containing&quot;   
## [103] &quot;contains&quot;      &quot;corresponding&quot;
## [105] &quot;could&quot;         &quot;couldn&#39;t&quot;     
## [107] &quot;course&quot;        &quot;currently&quot;    
## [109] &quot;d&quot;             &quot;definitely&quot;   
## [111] &quot;described&quot;     &quot;despite&quot;      
## [113] &quot;did&quot;           &quot;didn&#39;t&quot;       
## [115] &quot;different&quot;     &quot;do&quot;           
## [117] &quot;does&quot;          &quot;doesn&#39;t&quot;      
## [119] &quot;doing&quot;         &quot;don&#39;t&quot;        
## [121] &quot;done&quot;          &quot;down&quot;         
## [123] &quot;downwards&quot;     &quot;during&quot;       
## [125] &quot;e&quot;             &quot;each&quot;         
## [127] &quot;edu&quot;           &quot;eg&quot;           
## [129] &quot;eight&quot;         &quot;either&quot;       
## [131] &quot;else&quot;          &quot;elsewhere&quot;    
## [133] &quot;enough&quot;        &quot;entirely&quot;     
## [135] &quot;especially&quot;    &quot;et&quot;           
## [137] &quot;etc&quot;           &quot;even&quot;         
## [139] &quot;ever&quot;          &quot;every&quot;        
## [141] &quot;everybody&quot;     &quot;everyone&quot;     
## [143] &quot;everything&quot;    &quot;everywhere&quot;   
## [145] &quot;ex&quot;            &quot;exactly&quot;      
## [147] &quot;example&quot;       &quot;except&quot;       
## [149] &quot;f&quot;             &quot;far&quot;          
## [151] &quot;few&quot;           &quot;fifth&quot;        
## [153] &quot;first&quot;         &quot;five&quot;         
## [155] &quot;followed&quot;      &quot;following&quot;    
## [157] &quot;follows&quot;       &quot;for&quot;          
## [159] &quot;former&quot;        &quot;formerly&quot;     
## [161] &quot;forth&quot;         &quot;four&quot;         
## [163] &quot;from&quot;          &quot;further&quot;      
## [165] &quot;furthermore&quot;   &quot;g&quot;            
## [167] &quot;get&quot;           &quot;gets&quot;         
## [169] &quot;getting&quot;       &quot;given&quot;        
## [171] &quot;gives&quot;         &quot;go&quot;           
## [173] &quot;goes&quot;          &quot;going&quot;        
## [175] &quot;gone&quot;          &quot;got&quot;          
## [177] &quot;gotten&quot;        &quot;greetings&quot;    
## [179] &quot;h&quot;             &quot;had&quot;          
## [181] &quot;hadn&#39;t&quot;        &quot;happens&quot;      
## [183] &quot;hardly&quot;        &quot;has&quot;          
## [185] &quot;hasn&#39;t&quot;        &quot;have&quot;         
## [187] &quot;haven&#39;t&quot;       &quot;having&quot;       
## [189] &quot;he&quot;            &quot;he&#39;s&quot;         
## [191] &quot;hello&quot;         &quot;help&quot;         
## [193] &quot;hence&quot;         &quot;her&quot;          
## [195] &quot;here&quot;          &quot;here&#39;s&quot;       
## [197] &quot;hereafter&quot;     &quot;hereby&quot;       
## [199] &quot;herein&quot;        &quot;hereupon&quot;     
## [201] &quot;hers&quot;          &quot;herself&quot;      
## [203] &quot;hi&quot;            &quot;him&quot;          
## [205] &quot;himself&quot;       &quot;his&quot;          
## [207] &quot;hither&quot;        &quot;hopefully&quot;    
## [209] &quot;how&quot;           &quot;howbeit&quot;      
## [211] &quot;however&quot;       &quot;i&quot;            
## [213] &quot;i&#39;d&quot;           &quot;i&#39;ll&quot;         
## [215] &quot;i&#39;m&quot;           &quot;i&#39;ve&quot;         
## [217] &quot;ie&quot;            &quot;if&quot;           
## [219] &quot;ignored&quot;       &quot;immediate&quot;    
## [221] &quot;in&quot;            &quot;inasmuch&quot;     
## [223] &quot;inc&quot;           &quot;indeed&quot;       
## [225] &quot;indicate&quot;      &quot;indicated&quot;    
## [227] &quot;indicates&quot;     &quot;inner&quot;        
## [229] &quot;insofar&quot;       &quot;instead&quot;      
## [231] &quot;into&quot;          &quot;inward&quot;       
## [233] &quot;is&quot;            &quot;isn&#39;t&quot;        
## [235] &quot;it&quot;            &quot;it&#39;d&quot;         
## [237] &quot;it&#39;ll&quot;         &quot;it&#39;s&quot;         
## [239] &quot;its&quot;           &quot;itself&quot;       
## [241] &quot;j&quot;             &quot;just&quot;         
## [243] &quot;k&quot;             &quot;keep&quot;         
## [245] &quot;keeps&quot;         &quot;kept&quot;         
## [247] &quot;know&quot;          &quot;knows&quot;        
## [249] &quot;known&quot;         &quot;l&quot;            
## [251] &quot;last&quot;          &quot;lately&quot;       
## [253] &quot;later&quot;         &quot;latter&quot;       
## [255] &quot;latterly&quot;      &quot;least&quot;        
## [257] &quot;less&quot;          &quot;lest&quot;         
## [259] &quot;let&quot;           &quot;let&#39;s&quot;        
## [261] &quot;like&quot;          &quot;liked&quot;        
## [263] &quot;likely&quot;        &quot;little&quot;       
## [265] &quot;look&quot;          &quot;looking&quot;      
## [267] &quot;looks&quot;         &quot;ltd&quot;          
## [269] &quot;m&quot;             &quot;mainly&quot;       
## [271] &quot;many&quot;          &quot;may&quot;          
## [273] &quot;maybe&quot;         &quot;me&quot;           
## [275] &quot;mean&quot;          &quot;meanwhile&quot;    
## [277] &quot;merely&quot;        &quot;might&quot;        
## [279] &quot;more&quot;          &quot;moreover&quot;     
## [281] &quot;most&quot;          &quot;mostly&quot;       
## [283] &quot;much&quot;          &quot;must&quot;         
## [285] &quot;my&quot;            &quot;myself&quot;       
## [287] &quot;n&quot;             &quot;name&quot;         
## [289] &quot;namely&quot;        &quot;nd&quot;           
## [291] &quot;near&quot;          &quot;nearly&quot;       
## [293] &quot;necessary&quot;     &quot;need&quot;         
## [295] &quot;needs&quot;         &quot;neither&quot;      
## [297] &quot;never&quot;         &quot;nevertheless&quot; 
## [299] &quot;new&quot;           &quot;next&quot;         
## [301] &quot;nine&quot;          &quot;no&quot;           
## [303] &quot;nobody&quot;        &quot;non&quot;          
## [305] &quot;none&quot;          &quot;noone&quot;        
## [307] &quot;nor&quot;           &quot;normally&quot;     
## [309] &quot;not&quot;           &quot;nothing&quot;      
## [311] &quot;novel&quot;         &quot;now&quot;          
## [313] &quot;nowhere&quot;       &quot;o&quot;            
## [315] &quot;obviously&quot;     &quot;of&quot;           
## [317] &quot;off&quot;           &quot;often&quot;        
## [319] &quot;oh&quot;            &quot;ok&quot;           
## [321] &quot;okay&quot;          &quot;old&quot;          
## [323] &quot;on&quot;            &quot;once&quot;         
## [325] &quot;one&quot;           &quot;ones&quot;         
## [327] &quot;only&quot;          &quot;onto&quot;         
## [329] &quot;or&quot;            &quot;other&quot;        
## [331] &quot;others&quot;        &quot;otherwise&quot;    
## [333] &quot;ought&quot;         &quot;our&quot;          
## [335] &quot;ours&quot;          &quot;ourselves&quot;    
## [337] &quot;out&quot;           &quot;outside&quot;      
## [339] &quot;over&quot;          &quot;overall&quot;      
## [341] &quot;own&quot;           &quot;p&quot;            
## [343] &quot;particular&quot;    &quot;particularly&quot; 
## [345] &quot;per&quot;           &quot;perhaps&quot;      
## [347] &quot;placed&quot;        &quot;please&quot;       
## [349] &quot;plus&quot;          &quot;possible&quot;     
## [351] &quot;presumably&quot;    &quot;probably&quot;     
## [353] &quot;provides&quot;      &quot;q&quot;            
## [355] &quot;que&quot;           &quot;quite&quot;        
## [357] &quot;qv&quot;            &quot;r&quot;            
## [359] &quot;rather&quot;        &quot;rd&quot;           
## [361] &quot;re&quot;            &quot;really&quot;       
## [363] &quot;reasonably&quot;    &quot;regarding&quot;    
## [365] &quot;regardless&quot;    &quot;regards&quot;      
## [367] &quot;relatively&quot;    &quot;respectively&quot; 
## [369] &quot;right&quot;         &quot;s&quot;            
## [371] &quot;said&quot;          &quot;same&quot;         
## [373] &quot;saw&quot;           &quot;say&quot;          
## [375] &quot;saying&quot;        &quot;says&quot;         
## [377] &quot;second&quot;        &quot;secondly&quot;     
## [379] &quot;see&quot;           &quot;seeing&quot;       
## [381] &quot;seem&quot;          &quot;seemed&quot;       
## [383] &quot;seeming&quot;       &quot;seems&quot;        
## [385] &quot;seen&quot;          &quot;self&quot;         
## [387] &quot;selves&quot;        &quot;sensible&quot;     
## [389] &quot;sent&quot;          &quot;serious&quot;      
## [391] &quot;seriously&quot;     &quot;seven&quot;        
## [393] &quot;several&quot;       &quot;shall&quot;        
## [395] &quot;she&quot;           &quot;should&quot;       
## [397] &quot;shouldn&#39;t&quot;     &quot;since&quot;        
## [399] &quot;six&quot;           &quot;so&quot;           
## [401] &quot;some&quot;          &quot;somebody&quot;     
## [403] &quot;somehow&quot;       &quot;someone&quot;      
## [405] &quot;something&quot;     &quot;sometime&quot;     
## [407] &quot;sometimes&quot;     &quot;somewhat&quot;     
## [409] &quot;somewhere&quot;     &quot;soon&quot;         
## [411] &quot;sorry&quot;         &quot;specified&quot;    
## [413] &quot;specify&quot;       &quot;specifying&quot;   
## [415] &quot;still&quot;         &quot;sub&quot;          
## [417] &quot;such&quot;          &quot;sup&quot;          
## [419] &quot;sure&quot;          &quot;t&quot;            
## [421] &quot;t&#39;s&quot;           &quot;take&quot;         
## [423] &quot;taken&quot;         &quot;tell&quot;         
## [425] &quot;tends&quot;         &quot;th&quot;           
## [427] &quot;than&quot;          &quot;thank&quot;        
## [429] &quot;thanks&quot;        &quot;thanx&quot;        
## [431] &quot;that&quot;          &quot;that&#39;s&quot;       
## [433] &quot;thats&quot;         &quot;the&quot;          
## [435] &quot;their&quot;         &quot;theirs&quot;       
## [437] &quot;them&quot;          &quot;themselves&quot;   
## [439] &quot;then&quot;          &quot;thence&quot;       
## [441] &quot;there&quot;         &quot;there&#39;s&quot;      
## [443] &quot;thereafter&quot;    &quot;thereby&quot;      
## [445] &quot;therefore&quot;     &quot;therein&quot;      
## [447] &quot;theres&quot;        &quot;thereupon&quot;    
## [449] &quot;these&quot;         &quot;they&quot;         
## [451] &quot;they&#39;d&quot;        &quot;they&#39;ll&quot;      
## [453] &quot;they&#39;re&quot;       &quot;they&#39;ve&quot;      
## [455] &quot;think&quot;         &quot;third&quot;        
## [457] &quot;this&quot;          &quot;thorough&quot;     
## [459] &quot;thoroughly&quot;    &quot;those&quot;        
## [461] &quot;though&quot;        &quot;three&quot;        
## [463] &quot;through&quot;       &quot;throughout&quot;   
## [465] &quot;thru&quot;          &quot;thus&quot;         
## [467] &quot;to&quot;            &quot;together&quot;     
## [469] &quot;too&quot;           &quot;took&quot;         
## [471] &quot;toward&quot;        &quot;towards&quot;      
## [473] &quot;tried&quot;         &quot;tries&quot;        
## [475] &quot;truly&quot;         &quot;try&quot;          
## [477] &quot;trying&quot;        &quot;twice&quot;        
## [479] &quot;two&quot;           &quot;u&quot;            
## [481] &quot;un&quot;            &quot;under&quot;        
## [483] &quot;unfortunately&quot; &quot;unless&quot;       
## [485] &quot;unlikely&quot;      &quot;until&quot;        
## [487] &quot;unto&quot;          &quot;up&quot;           
## [489] &quot;upon&quot;          &quot;us&quot;           
## [491] &quot;use&quot;           &quot;used&quot;         
## [493] &quot;useful&quot;        &quot;uses&quot;         
## [495] &quot;using&quot;         &quot;usually&quot;      
## [497] &quot;uucp&quot;          &quot;v&quot;            
## [499] &quot;value&quot;         &quot;various&quot;      
## [501] &quot;very&quot;          &quot;via&quot;          
## [503] &quot;viz&quot;           &quot;vs&quot;           
## [505] &quot;w&quot;             &quot;want&quot;         
## [507] &quot;wants&quot;         &quot;was&quot;          
## [509] &quot;wasn&#39;t&quot;        &quot;way&quot;          
## [511] &quot;we&quot;            &quot;we&#39;d&quot;         
## [513] &quot;we&#39;ll&quot;         &quot;we&#39;re&quot;        
## [515] &quot;we&#39;ve&quot;         &quot;welcome&quot;      
## [517] &quot;well&quot;          &quot;went&quot;         
## [519] &quot;were&quot;          &quot;weren&#39;t&quot;      
## [521] &quot;what&quot;          &quot;what&#39;s&quot;       
## [523] &quot;whatever&quot;      &quot;when&quot;         
## [525] &quot;whence&quot;        &quot;whenever&quot;     
## [527] &quot;where&quot;         &quot;where&#39;s&quot;      
## [529] &quot;whereafter&quot;    &quot;whereas&quot;      
## [531] &quot;whereby&quot;       &quot;wherein&quot;      
## [533] &quot;whereupon&quot;     &quot;wherever&quot;     
## [535] &quot;whether&quot;       &quot;which&quot;        
## [537] &quot;while&quot;         &quot;whither&quot;      
## [539] &quot;who&quot;           &quot;who&#39;s&quot;        
## [541] &quot;whoever&quot;       &quot;whole&quot;        
## [543] &quot;whom&quot;          &quot;whose&quot;        
## [545] &quot;why&quot;           &quot;will&quot;         
## [547] &quot;willing&quot;       &quot;wish&quot;         
## [549] &quot;with&quot;          &quot;within&quot;       
## [551] &quot;without&quot;       &quot;won&#39;t&quot;        
## [553] &quot;wonder&quot;        &quot;would&quot;        
## [555] &quot;would&quot;         &quot;wouldn&#39;t&quot;     
## [557] &quot;x&quot;             &quot;y&quot;            
## [559] &quot;yes&quot;           &quot;yet&quot;          
## [561] &quot;you&quot;           &quot;you&#39;d&quot;        
## [563] &quot;you&#39;ll&quot;        &quot;you&#39;re&quot;       
## [565] &quot;you&#39;ve&quot;        &quot;your&quot;         
## [567] &quot;yours&quot;         &quot;yourself&quot;     
## [569] &quot;yourselves&quot;    &quot;z&quot;            
## [571] &quot;zero&quot;</code></pre>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="texto-analisis.html#cb307-1" aria-hidden="true" tabindex="-1"></a>palabras_leviathan_limpio <span class="ot">&lt;-</span> leviathan <span class="sc">%&gt;%</span> </span>
<span id="cb307-2"><a href="texto-analisis.html#cb307-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(<span class="at">output =</span> word, <span class="at">input =</span> text, <span class="at">token =</span> <span class="st">&quot;words&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb307-3"><a href="texto-analisis.html#cb307-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filtrar stop words!</span></span>
<span id="cb307-4"><a href="texto-analisis.html#cb307-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>(word <span class="sc">%in%</span> stop_words_en))</span></code></pre></div>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="texto-analisis.html#cb308-1" aria-hidden="true" tabindex="-1"></a>palabras_leviathan_limpio</span></code></pre></div>
<pre><code>## # A tibble: 79,118 x 6
##    author  book  gutenberg_id chapter  line
##    &lt;chr&gt;   &lt;chr&gt;        &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;
##  1 Thomas~ Levi~         3207       0     1
##  2 Thomas~ Levi~         3207       0     2
##  3 Thomas~ Levi~         3207       0     2
##  4 Thomas~ Levi~         3207       0     3
##  5 Thomas~ Levi~         3207       0     4
##  6 Thomas~ Levi~         3207       0     4
##  7 Thomas~ Levi~         3207       0     4
##  8 Thomas~ Levi~         3207       0     4
##  9 Thomas~ Levi~         3207       0     4
## 10 Thomas~ Levi~         3207       0     4
## # ... with 79,108 more rows, and 1 more
## #   variable: word &lt;chr&gt;</code></pre>
<p>Ahora calculemos las frecuencias:</p>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="texto-analisis.html#cb310-1" aria-hidden="true" tabindex="-1"></a>palabras_leviathan_limpio <span class="sc">%&gt;%</span> </span>
<span id="cb310-2"><a href="texto-analisis.html#cb310-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> T)</span></code></pre></div>
<pre><code>## # A tibble: 9,559 x 2
##    word          n
##    &lt;chr&gt;     &lt;int&gt;
##  1 man        1071
##  2 god        1068
##  3 men         998
##  4 power       745
##  5 law         662
##  6 common      632
##  7 soveraign   497
##  8 hath        446
##  9 wealth      438
## 10 nature      420
## # ... with 9,549 more rows</code></pre>
<p>Por cierto, otra herramienta útil para limpiar el análisis posterior es el <em>stemming</em>, el ejercicio de llevar las palabras a su raíz. Por ejemplo:</p>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="texto-analisis.html#cb312-1" aria-hidden="true" tabindex="-1"></a>SnowballC<span class="sc">::</span><span class="fu">wordStem</span>(<span class="fu">c</span>(<span class="st">&quot;caminaba&quot;</span>, <span class="st">&quot;caminó&quot;</span>), <span class="at">language =</span> <span class="st">&quot;es&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;camin&quot; &quot;camin&quot;</code></pre>
<p>Podríamos realizar esto para las palabras de nuestra base:</p>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="texto-analisis.html#cb314-1" aria-hidden="true" tabindex="-1"></a>palabras_leviathan_limpio_ej_stemming <span class="ot">&lt;-</span> palabras_leviathan_limpio <span class="sc">%&gt;%</span> </span>
<span id="cb314-2"><a href="texto-analisis.html#cb314-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">word =</span> SnowballC<span class="sc">::</span><span class="fu">wordStem</span>(word, <span class="at">language =</span> <span class="st">&quot;en&quot;</span>))</span></code></pre></div>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="texto-analisis.html#cb315-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(palabras_leviathan_limpio<span class="sc">$</span>word))</span></code></pre></div>
<pre><code>## [1] 9559</code></pre>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="texto-analisis.html#cb317-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(palabras_leviathan_limpio_ej_stemming<span class="sc">$</span>word))</span></code></pre></div>
<pre><code>## [1] 6351</code></pre>
</div>
<div id="ejercicio-a-5" class="section level3">
<h3>(Ejercicio a)</h3>
<p>¿Cuáles son las palabras más comunes en “A Vindication of the Rights of Woman” de Mary Wollstonecraft, eliminando <em>stop words</em>? Incluye una columna con la proporción de aparición de cada palabra en el libro. Crea una base “palabras_rights_limpio”, similar a la que hicimos antes, en el proceso. Tu código:</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="texto-analisis.html#cb319-1" aria-hidden="true" tabindex="-1"></a>palabras_rights_limpio <span class="ot">&lt;-</span> rights <span class="sc">%&gt;%</span> </span>
<span id="cb319-2"><a href="texto-analisis.html#cb319-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(<span class="at">output =</span> word, <span class="at">input =</span> text, <span class="at">token =</span> <span class="st">&quot;words&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb319-3"><a href="texto-analisis.html#cb319-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filtrar stop words!</span></span>
<span id="cb319-4"><a href="texto-analisis.html#cb319-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>(word <span class="sc">%in%</span> stop_words_en))</span></code></pre></div>
</div>
<div id="hacer-un-ránking-de-las-palabras-más-comunes" class="section level3">
<h3>Hacer un ránking de las palabras más comunes</h3>
<p>Hagamos un gráfico de “ránking” para las diez palabras más comunes en el libro de Wollstonecraft:</p>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb320-1"><a href="texto-analisis.html#cb320-1" aria-hidden="true" tabindex="-1"></a>rank_rights <span class="ot">&lt;-</span> palabras_rights_limpio <span class="sc">%&gt;%</span> </span>
<span id="cb320-2"><a href="texto-analisis.html#cb320-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb320-3"><a href="texto-analisis.html#cb320-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span></code></pre></div>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="texto-analisis.html#cb321-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data    =</span> rank_rights,</span>
<span id="cb321-2"><a href="texto-analisis.html#cb321-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> n, <span class="at">y =</span> <span class="fu">fct_reorder</span>(<span class="fu">as.factor</span>(word), n), <span class="at">label =</span> n)) <span class="sc">+</span></span>
<span id="cb321-3"><a href="texto-analisis.html#cb321-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb321-4"><a href="texto-analisis.html#cb321-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label</span>() <span class="sc">+</span></span>
<span id="cb321-5"><a href="texto-analisis.html#cb321-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title    =</span> <span class="st">&quot;Palabras más comunes en el libro&quot;</span>,</span>
<span id="cb321-6"><a href="texto-analisis.html#cb321-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;&#39;A Vindication of the Rights of Woman&#39; (1792)&quot;</span>,</span>
<span id="cb321-7"><a href="texto-analisis.html#cb321-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x        =</span> <span class="st">&quot;Frecuencia&quot;</span>, <span class="at">y =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb321-8"><a href="texto-analisis.html#cb321-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption  =</span> <span class="st">&quot;Fuente: Elaboración propia en base a Wollstonecraft (1792)&quot;</span>)</span></code></pre></div>
<p><img src="udp_2021_bookdown_files/figure-html/unnamed-chunk-191-1.png" width="672" /></p>
</div>
<div id="ejercicio-b-4" class="section level3">
<h3>(Ejercicio b)</h3>
<p>Genera un gráfico con las palabras más comunes en “On Liberty” de John Stuart Mill. Tu código:</p>
</div>
</div>
<div id="separar-el-análisis-de-frecuencias-por-secciones" class="section level2">
<h2>Separar el análisis de frecuencias por secciones</h2>
<p>Obtengamos las diez palabras más comunes de cada capítulo, con un combo de <code>count()</code>, <code>group_by()</code> y <code>slice()</code>:</p>
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="texto-analisis.html#cb322-1" aria-hidden="true" tabindex="-1"></a>rank_rights_caps <span class="ot">&lt;-</span> palabras_rights_limpio <span class="sc">%&gt;%</span> </span>
<span id="cb322-2"><a href="texto-analisis.html#cb322-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, chapter, <span class="at">sort =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb322-3"><a href="texto-analisis.html#cb322-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(chapter) <span class="sc">%&gt;%</span> </span>
<span id="cb322-4"><a href="texto-analisis.html#cb322-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb322-5"><a href="texto-analisis.html#cb322-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code></pre></div>
<p>Ahora podemos graficarlas con las “facetas” de <code>ggplot2</code>:</p>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="texto-analisis.html#cb323-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data    =</span> rank_rights_caps <span class="sc">%&gt;%</span> <span class="fu">filter</span>(chapter <span class="sc">!=</span> <span class="dv">0</span>),</span>
<span id="cb323-2"><a href="texto-analisis.html#cb323-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> n, </span>
<span id="cb323-3"><a href="texto-analisis.html#cb323-3" aria-hidden="true" tabindex="-1"></a>                     <span class="co"># permite ordenar las barras dentro de cada faceta:</span></span>
<span id="cb323-4"><a href="texto-analisis.html#cb323-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> <span class="fu">reorder_within</span>(<span class="fu">as.factor</span>(word), n, chapter))) <span class="sc">+</span></span>
<span id="cb323-5"><a href="texto-analisis.html#cb323-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb323-6"><a href="texto-analisis.html#cb323-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>chapter, <span class="at">scales =</span> <span class="st">&quot;free_y&quot;</span>) <span class="sc">+</span></span>
<span id="cb323-7"><a href="texto-analisis.html#cb323-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># permite ordenar las barras dentro de cada faceta:</span></span>
<span id="cb323-8"><a href="texto-analisis.html#cb323-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_reordered</span>() <span class="sc">+</span></span>
<span id="cb323-9"><a href="texto-analisis.html#cb323-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Frecuencia&quot;</span>, <span class="at">y =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb323-10"><a href="texto-analisis.html#cb323-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">title    =</span> <span class="st">&quot;Palabras más comunes en cada capítulo&quot;</span>,</span>
<span id="cb323-11"><a href="texto-analisis.html#cb323-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;&#39;A Vindication of the Rights of Woman&#39; (1792)&quot;</span>,</span>
<span id="cb323-12"><a href="texto-analisis.html#cb323-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption  =</span> <span class="st">&quot;Elaboración propia en base a Wollstonecraft (1792)&quot;</span>)</span></code></pre></div>
<p><img src="udp_2021_bookdown_files/figure-html/unnamed-chunk-193-1.png" width="672" /></p>
<p>Por cierto, cuando se separa el análisis decimos que este se realiza por “documentos”. Estos documentos pueden ser capítulos/secciones, como vimos ahora, o simplemente distintos textos/libros.</p>
</div>
<div id="comparar-frecuencias-de-palabras-entre-documentos" class="section level2">
<h2>Comparar frecuencias de palabras entre documentos</h2>
<p>Es claro que los dos libros (documentos) ocupan un vocabulario marcadamente distinto. Podemos graficar esta diferencia.</p>
<p>Primero vamos a crear bases de datos para ambos libros, que contengan la proporción de cada palabra en el texto:</p>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="texto-analisis.html#cb324-1" aria-hidden="true" tabindex="-1"></a>prop_palabras_leviathan <span class="ot">&lt;-</span> palabras_leviathan_limpio <span class="sc">%&gt;%</span> </span>
<span id="cb324-2"><a href="texto-analisis.html#cb324-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb324-3"><a href="texto-analisis.html#cb324-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prop_leviathan =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span> </span>
<span id="cb324-4"><a href="texto-analisis.html#cb324-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>n)</span>
<span id="cb324-5"><a href="texto-analisis.html#cb324-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb324-6"><a href="texto-analisis.html#cb324-6" aria-hidden="true" tabindex="-1"></a>prop_palabras_leviathan</span></code></pre></div>
<pre><code>## # A tibble: 9,559 x 2
##    word      prop_leviathan
##    &lt;chr&gt;              &lt;dbl&gt;
##  1 man              0.0135 
##  2 god              0.0135 
##  3 men              0.0126 
##  4 power            0.00942
##  5 law              0.00837
##  6 common           0.00799
##  7 soveraign        0.00628
##  8 hath             0.00564
##  9 wealth           0.00554
## 10 nature           0.00531
## # ... with 9,549 more rows</code></pre>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="texto-analisis.html#cb326-1" aria-hidden="true" tabindex="-1"></a>prop_palabras_rights <span class="ot">&lt;-</span> palabras_rights_limpio <span class="sc">%&gt;%</span> </span>
<span id="cb326-2"><a href="texto-analisis.html#cb326-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb326-3"><a href="texto-analisis.html#cb326-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prop_rights =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span> </span>
<span id="cb326-4"><a href="texto-analisis.html#cb326-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>n)</span>
<span id="cb326-5"><a href="texto-analisis.html#cb326-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb326-6"><a href="texto-analisis.html#cb326-6" aria-hidden="true" tabindex="-1"></a>prop_palabras_rights</span></code></pre></div>
<pre><code>## # A tibble: 7,386 x 2
##    word   prop_rights
##    &lt;chr&gt;        &lt;dbl&gt;
##  1 women      0.0124 
##  2 man        0.00857
##  3 men        0.00832
##  4 reason     0.00735
##  5 mind       0.00645
##  6 virtue     0.00551
##  7 woman      0.00529
##  8 love       0.00481
##  9 life       0.00473
## 10 nature     0.00409
## # ... with 7,376 more rows</code></pre>
<p>Ahora vamos a unir las bases de datos, utilizando un <code>full_join()</code>, que básicamente conservará todas las filas y columnas de ambas. Cuando no encuentre un match para llenar una celda, <code>full_join</code> dejará un NA, por lo que en el segundo comando reemplazaremos esos NA por 0, utilizando <code>replace_na()</code>:</p>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="texto-analisis.html#cb328-1" aria-hidden="true" tabindex="-1"></a>props_lev_women <span class="ot">&lt;-</span> <span class="fu">full_join</span>(prop_palabras_leviathan, </span>
<span id="cb328-2"><a href="texto-analisis.html#cb328-2" aria-hidden="true" tabindex="-1"></a>                             prop_palabras_rights, </span>
<span id="cb328-3"><a href="texto-analisis.html#cb328-3" aria-hidden="true" tabindex="-1"></a>                             <span class="at">by =</span> <span class="st">&quot;word&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb328-4"><a href="texto-analisis.html#cb328-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_na</span>(<span class="at">replace =</span> <span class="fu">list</span>(<span class="at">prop_leviathan =</span> <span class="dv">0</span>, <span class="at">prop_rights =</span> <span class="dv">0</span>))</span>
<span id="cb328-5"><a href="texto-analisis.html#cb328-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb328-6"><a href="texto-analisis.html#cb328-6" aria-hidden="true" tabindex="-1"></a>props_lev_women</span></code></pre></div>
<pre><code>## # A tibble: 13,731 x 3
##    word      prop_leviathan prop_rights
##    &lt;chr&gt;              &lt;dbl&gt;       &lt;dbl&gt;
##  1 man              0.0135     0.00857 
##  2 god              0.0135     0.00153 
##  3 men              0.0126     0.00832 
##  4 power            0.00942    0.00267 
##  5 law              0.00837    0.000445
##  6 common           0.00799    0.00198 
##  7 soveraign        0.00628    0       
##  8 hath             0.00564    0.000223
##  9 wealth           0.00554    0.000390
## 10 nature           0.00531    0.00409 
## # ... with 13,721 more rows</code></pre>
<p>Ya podemos graficar la relación entre los dos libros:</p>
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb330-1"><a href="texto-analisis.html#cb330-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data    =</span> props_lev_women,</span>
<span id="cb330-2"><a href="texto-analisis.html#cb330-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> prop_leviathan, <span class="at">y =</span> prop_rights, <span class="at">label =</span> word)) <span class="sc">+</span></span>
<span id="cb330-3"><a href="texto-analisis.html#cb330-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>() <span class="sc">+</span></span>
<span id="cb330-4"><a href="texto-analisis.html#cb330-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>() <span class="sc">+</span></span>
<span id="cb330-5"><a href="texto-analisis.html#cb330-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.015</span>)) <span class="sc">+</span></span>
<span id="cb330-6"><a href="texto-analisis.html#cb330-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.015</span>)) <span class="sc">+</span></span>
<span id="cb330-7"><a href="texto-analisis.html#cb330-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Comparación de palabras en los libros&quot;</span>,</span>
<span id="cb330-8"><a href="texto-analisis.html#cb330-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Frecuencia proporcial de la palabra en Hobbes (1651)&quot;</span>,</span>
<span id="cb330-9"><a href="texto-analisis.html#cb330-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Frecuencia proporcial de la palabra en Wollstonecraft (1792)&quot;</span>,</span>
<span id="cb330-10"><a href="texto-analisis.html#cb330-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Elaboración propia en base a Hobbes (1651) y Wollstonecraft (1792)&quot;</span>)</span></code></pre></div>
<p><img src="udp_2021_bookdown_files/figure-html/unnamed-chunk-197-1.png" width="672" /></p>
<p>La mayoría de las palabras se repite con proporciones similares en ambos documentos, por eso poblan el sector inferior izquierdo del gráfico. Esta distribución es muy común. En la próxima sección veremos cómo obtener la palabras más distintivas de cada documento.</p>
<div id="ejercicio-c-2" class="section level3">
<h3>(Ejercicio c)</h3>
<p>Grafica la relación de palabras entre dos documentos: los capítulos 2 y 4 de “On liberty” de John Stuart Mill. Tu código:</p>
</div>
</div>
<div id="obtener-las-palabras-más-distintivas-entre-documentos" class="section level2">
<h2>Obtener las palabras más distintivas entre documentos</h2>
<p>Tal vez nuestro objetivo al comparar documentos es encontrar las palabras más distintivas de cada uno (¿por qué mirar las frecuencias puede no ser la mejor forma de hacer esto?). Un cálculo relativamente sencillo de esto es el llamado tf-idf (<em>term frequency - inverse document frequency</em>; <a href="https://www.tidytextmining.com/tfidf.html">Silge &amp; Robinson (2019, cap. 3)</a>).</p>
<p><strong>El tf-idf busca medir la frecuencia relativa de un término en un documento (tf) ponderada por qué tan raro es ese término a lo largo de todos los documentos (idf).</strong> Tiene dos partes:</p>
<p>tf: La frecuencia del término <span class="math inline">\(i\)</span> en el documento <span class="math inline">\(d\)</span> (<span class="math inline">\(\textit{tf}_{i,d}\)</span>) es simplemente el número de veces que este aparece en el documento divido el total de palabras en el documento. Esto espera ser una medida de qué tanto se repite la palabra en el documento:</p>
<p><span class="math display">\[
tf_{i,d} = \frac{n_{\ i\;en\;d}}{n_{\ total\ términos\ en\ d}}
\]</span></p>
<p>idf: Mientras tanto, la frecuencia inversa del término <span class="math inline">\(i\)</span> en los documentos (<span class="math inline">\(\textit{idf}_{i}\)</span>) es un poco más complicada. Busca ser una medida de qué tan poco común es el uso de una palabra a lo largo de varios documentos. Es el logaritmo natural de la división entre el número de documentos totales y el número de documentos que contienen el término <span class="math inline">\(i\)</span>:</p>
<p><span class="math display">\[
idf_i = ln(\frac{n_{\ docs}}{n_{\ docs\ que\ contienen\ i}})
\]</span></p>
<p>La tf-idf (<em>term frequency - inverse document frequency</em>) es simplemente la multiplicación de ambos números.</p>
<p><span class="math display">\[
\textit{tf-idf}_{i,d} = \textit{tf}_{i,d} \cdot \textit{idf}_i
\]</span></p>
<p>Por ejemplo:</p>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="texto-analisis.html#cb331-1" aria-hidden="true" tabindex="-1"></a>(<span class="dv">10</span> <span class="sc">/</span> <span class="dv">100</span>) <span class="sc">*</span> <span class="co"># término que aparece en un 10% de los términos del doc.</span></span>
<span id="cb331-2"><a href="texto-analisis.html#cb331-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span>(<span class="dv">8</span> <span class="sc">/</span> <span class="dv">8</span>) <span class="co"># está presente en todos los documentos</span></span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="texto-analisis.html#cb333-1" aria-hidden="true" tabindex="-1"></a>(<span class="dv">10</span> <span class="sc">/</span> <span class="dv">100</span>) <span class="sc">*</span> <span class="co"># término que aparece en un 10% de los términos del doc.</span></span>
<span id="cb333-2"><a href="texto-analisis.html#cb333-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span>(<span class="dv">8</span> <span class="sc">/</span> <span class="dv">4</span>) <span class="co"># está presente en la mitad de los documentos</span></span></code></pre></div>
<pre><code>## [1] 0.06931472</code></pre>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="texto-analisis.html#cb335-1" aria-hidden="true" tabindex="-1"></a>(<span class="dv">10</span> <span class="sc">/</span> <span class="dv">100</span>) <span class="sc">*</span> <span class="co"># término que aparece en un 10% de los términos del doc.</span></span>
<span id="cb335-2"><a href="texto-analisis.html#cb335-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span>(<span class="dv">8</span> <span class="sc">/</span> <span class="dv">1</span>) <span class="co"># está presente en un solo documento</span></span></code></pre></div>
<pre><code>## [1] 0.2079442</code></pre>
<p>La función <code>bind_tf_idf()</code> nos permite calcular rápidamente el tf_idf para un conteo de palabras. Obtengamos las diez palabras más distintivas de cada capítulo del libro de Wollstonecraft:</p>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="texto-analisis.html#cb337-1" aria-hidden="true" tabindex="-1"></a>tf_idf_rights <span class="ot">&lt;-</span> palabras_rights_limpio <span class="sc">%&gt;%</span> </span>
<span id="cb337-2"><a href="texto-analisis.html#cb337-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(chapter <span class="sc">!=</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb337-3"><a href="texto-analisis.html#cb337-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, chapter, <span class="at">sort =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb337-4"><a href="texto-analisis.html#cb337-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># fíjense en los argumentos:</span></span>
<span id="cb337-5"><a href="texto-analisis.html#cb337-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_tf_idf</span>(<span class="at">term =</span> word, <span class="at">document =</span> chapter, <span class="at">n =</span> n)</span>
<span id="cb337-6"><a href="texto-analisis.html#cb337-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb337-7"><a href="texto-analisis.html#cb337-7" aria-hidden="true" tabindex="-1"></a>tf_idf_rights</span></code></pre></div>
<pre><code>## # A tibble: 18,020 x 6
##    word   chapter     n      tf    idf
##    &lt;chr&gt;    &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt;  &lt;dbl&gt;
##  1 women        4    86 0.0183  0     
##  2 reason       5    68 0.0104  0     
##  3 man          5    61 0.00934 0     
##  4 women       12    51 0.0124  0     
##  5 women       13    51 0.0171  0     
##  6 women        2    48 0.0140  0     
##  7 men          4    47 0.0100  0.0800
##  8 woman        5    45 0.00689 0.167 
##  9 man          2    43 0.0126  0     
## 10 man          4    43 0.00917 0     
## # ... with 18,010 more rows, and 1 more
## #   variable: tf_idf &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="texto-analisis.html#cb339-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ahora vamos a quedarnos solo con los diez tf-idf más altos por documento (capítulo): </span></span>
<span id="cb339-2"><a href="texto-analisis.html#cb339-2" aria-hidden="true" tabindex="-1"></a>rank_tf_idf_rights <span class="ot">&lt;-</span> tf_idf_rights <span class="sc">%&gt;%</span> </span>
<span id="cb339-3"><a href="texto-analisis.html#cb339-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(chapter) <span class="sc">%&gt;%</span> </span>
<span id="cb339-4"><a href="texto-analisis.html#cb339-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>tf_idf) <span class="sc">%&gt;%</span> </span>
<span id="cb339-5"><a href="texto-analisis.html#cb339-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb339-6"><a href="texto-analisis.html#cb339-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb339-7"><a href="texto-analisis.html#cb339-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb339-8"><a href="texto-analisis.html#cb339-8" aria-hidden="true" tabindex="-1"></a>rank_tf_idf_rights</span></code></pre></div>
<pre><code>## # A tibble: 130 x 6
##    word         chapter     n      tf   idf
##    &lt;chr&gt;          &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;dbl&gt;
##  1 profession         1     5 0.00382 1.47 
##  2 barbarism          1     3 0.00229 1.87 
##  3 thousands          1     3 0.00229 1.87 
##  4 curate             1     2 0.00153 2.56 
##  5 deformity          1     2 0.00153 2.56 
##  6 monarchy           1     2 0.00153 2.56 
##  7 pushes             1     2 0.00153 2.56 
##  8 unsound            1     2 0.00153 2.56 
##  9 perfection         1     5 0.00382 0.956
## 10 civilization       1     6 0.00458 0.773
## # ... with 120 more rows, and 1 more
## #   variable: tf_idf &lt;dbl&gt;</code></pre>
<p>Ahora podemos graficarlas:</p>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="texto-analisis.html#cb341-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data    =</span> rank_tf_idf_rights,</span>
<span id="cb341-2"><a href="texto-analisis.html#cb341-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> tf_idf, </span>
<span id="cb341-3"><a href="texto-analisis.html#cb341-3" aria-hidden="true" tabindex="-1"></a>                     <span class="co"># permite ordenar las barras dentro de cada faceta:</span></span>
<span id="cb341-4"><a href="texto-analisis.html#cb341-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> <span class="fu">reorder_within</span>(<span class="fu">as.factor</span>(word), tf_idf, chapter))) <span class="sc">+</span></span>
<span id="cb341-5"><a href="texto-analisis.html#cb341-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb341-6"><a href="texto-analisis.html#cb341-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># permite ordenar las barras dentro de cada faceta:</span></span>
<span id="cb341-7"><a href="texto-analisis.html#cb341-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_reordered</span>() <span class="sc">+</span></span>
<span id="cb341-8"><a href="texto-analisis.html#cb341-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb341-9"><a href="texto-analisis.html#cb341-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>chapter, <span class="at">scales =</span> <span class="st">&quot;free_y&quot;</span>) <span class="sc">+</span></span>
<span id="cb341-10"><a href="texto-analisis.html#cb341-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;tf-idf&quot;</span>, <span class="at">y =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb341-11"><a href="texto-analisis.html#cb341-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">title    =</span> <span class="st">&quot;Palabras más distintivas de cada capítulo&quot;</span>,</span>
<span id="cb341-12"><a href="texto-analisis.html#cb341-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;&#39;A Vindication of the Rights of Woman&#39; (1792)&quot;</span>,</span>
<span id="cb341-13"><a href="texto-analisis.html#cb341-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption  =</span> <span class="st">&quot;Elaboración propia en base a Wollstonecraft (1792)&quot;</span>)</span></code></pre></div>
<p><img src="udp_2021_bookdown_files/figure-html/unnamed-chunk-203-1.png" width="768" /></p>
<div id="ejercicio-d-3" class="section level3">
<h3>(Ejercicio d)</h3>
<p>Grafica las palabras más distintivas al comparar los tres libros. Tip: un paso debería ser unir las tres bases. Hay varias formas de hacer esto, pero te recomiendo experimentar con <code>bind_rows()</code>. Tu código:</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="part-análisis-de-texto.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="texto-cadenas.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "serif",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
},
"search": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>

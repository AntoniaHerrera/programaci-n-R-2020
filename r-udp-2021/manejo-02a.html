<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>02A - Manejo de datos | Programación en Ciencias Sociales</title>
  <meta name="description" content="Sitio web CPO3523 (2021)" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="02A - Manejo de datos | Programación en Ciencias Sociales" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Sitio web CPO3523 (2021)" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="02A - Manejo de datos | Programación en Ciencias Sociales" />
  
  <meta name="twitter:description" content="Sitio web CPO3523 (2021)" />
  

<meta name="author" content="Andrés Cruz" />


<meta name="date" content="2021-05-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="rbasico.html"/>
<link rel="next" href="manejo-02b.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./index.html">Prog. Cs. Sociales</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Inicio</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#links-importantes"><i class="fa fa-check"></i>Links importantes</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#cronograma-y-materiales-del-curso"><i class="fa fa-check"></i>Cronograma y materiales del curso</a></li>
</ul></li>
<li class="part"><span><b>I Intro a R, RStudio y R Markdown</b></span></li>
<li class="chapter" data-level="" data-path="rbasico.html"><a href="rbasico.html"><i class="fa fa-check"></i>01A - R básico</a>
<ul>
<li class="chapter" data-level="" data-path="rbasico.html"><a href="rbasico.html#introducción-comandos-y-código"><i class="fa fa-check"></i>Introducción: comandos y código</a></li>
<li class="chapter" data-level="" data-path="rbasico.html"><a href="rbasico.html#paquetes"><i class="fa fa-check"></i>Paquetes</a></li>
<li class="chapter" data-level="" data-path="rbasico.html"><a href="rbasico.html#comandos-básicos-y-tipos-de-objeto-en-r"><i class="fa fa-check"></i>Comandos básicos y tipos de objeto en R</a></li>
<li class="chapter" data-level="" data-path="rbasico.html"><a href="rbasico.html#sintaxis-de-r-markdown"><i class="fa fa-check"></i>Sintaxis de R Markdown</a></li>
<li class="chapter" data-level="" data-path="rbasico.html"><a href="rbasico.html#título-de-prueba"><i class="fa fa-check"></i>Título de prueba</a></li>
<li class="chapter" data-level="" data-path="rbasico.html"><a href="rbasico.html#siguiente-script"><i class="fa fa-check"></i>Siguiente script</a></li>
</ul></li>
<li class="part"><span><b>II Manejo de datos</b></span></li>
<li class="chapter" data-level="" data-path="manejo-02a.html"><a href="manejo-02a.html"><i class="fa fa-check"></i>02A - Manejo de datos</a>
<ul>
<li class="chapter" data-level="" data-path="manejo-02a.html"><a href="manejo-02a.html#manejo-de-bases-de-datos"><i class="fa fa-check"></i>Manejo de bases de datos</a></li>
<li class="chapter" data-level="" data-path="manejo-02a.html"><a href="manejo-02a.html#la-base-de-datos-ideal-tidy"><i class="fa fa-check"></i>La base de datos ideal: tidy</a></li>
<li><a href="manejo-02a.html#operaciones-básicas-en-bases-de-datos-wickham-2014">Operaciones básicas en bases de datos <span>(Wickham, 2014)</span></a></li>
<li class="chapter" data-level="" data-path="manejo-02a.html"><a href="manejo-02a.html#trabajo-con-r"><i class="fa fa-check"></i>Trabajo con R</a></li>
<li class="chapter" data-level="" data-path="manejo-02a.html"><a href="manejo-02a.html#manejo-de-datos-operaciones-básicas"><i class="fa fa-check"></i>Manejo de datos: operaciones básicas</a></li>
<li><a href="manejo-02a.html#agregarcolapsar-con-summarize-hacer-operaciones-por-grupos-con-group_by">Agregar/colapsar con <code>summarize()</code> / hacer operaciones por grupos con <code>group_by()</code></a></li>
<li><a href="manejo-02a.html#hacer-cadenas-de-operaciones-con-las-pipes">Hacer cadenas de operaciones con las pipes (<code>%&gt;%</code>)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="manejo-02b.html"><a href="manejo-02b.html"><i class="fa fa-check"></i>02B - Manejo de datos (ejercicio)</a>
<ul>
<li class="chapter" data-level="" data-path="manejo-02b.html"><a href="manejo-02b.html#contexto"><i class="fa fa-check"></i>Contexto</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="manejo-02c.html"><a href="manejo-02c.html"><i class="fa fa-check"></i>02C - Manejo de datos (extras)</a>
<ul>
<li class="chapter" data-level="" data-path="manejo-02c.html"><a href="manejo-02c.html#cargar-y-guardar-bases-de-datos"><i class="fa fa-check"></i>Cargar y guardar bases de datos</a></li>
<li><a href="manejo-02c.html#versiones-iterativas-de-summarize-y-mutate">Versiones iterativas de <code>summarize()</code> y <code>mutate()</code></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="manejo-02d.html"><a href="manejo-02d.html"><i class="fa fa-check"></i>02D - Manejo de datos (ejercicio int.)</a></li>
<li class="part"><span><b>III Visualización de datos</b></span></li>
<li class="chapter" data-level="" data-path="visualizacion.html"><a href="visualizacion.html"><i class="fa fa-check"></i>03A - Visualización de datos (intro)</a>
<ul>
<li class="chapter" data-level="" data-path="visualizacion.html"><a href="visualizacion.html#inicio-cargar-paquetes-base-de-datos"><i class="fa fa-check"></i>Inicio: cargar paquetes, base de datos</a></li>
<li class="chapter" data-level="" data-path="visualizacion.html"><a href="visualizacion.html#gráficos-univariados"><i class="fa fa-check"></i>Gráficos univariados</a></li>
<li class="chapter" data-level="" data-path="visualizacion.html"><a href="visualizacion.html#gráficos-bivariados"><i class="fa fa-check"></i>Gráficos bivariados</a></li>
<li class="chapter" data-level="" data-path="visualizacion.html"><a href="visualizacion.html#un-poco-de-personalización-etiquetas"><i class="fa fa-check"></i>Un poco de personalización: etiquetas</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="visualizacion-ext.html"><a href="visualizacion-ext.html"><i class="fa fa-check"></i>03B - Visualización de datos (extensiones)</a>
<ul>
<li class="chapter" data-level="" data-path="visualizacion-ext.html"><a href="visualizacion-ext.html#cargar-paquetes-y-datos"><i class="fa fa-check"></i>Cargar paquetes y datos</a></li>
<li class="chapter" data-level="" data-path="visualizacion-ext.html"><a href="visualizacion-ext.html#gráfico-de-ránking"><i class="fa fa-check"></i>Gráfico de ránking</a></li>
<li class="chapter" data-level="" data-path="visualizacion-ext.html"><a href="visualizacion-ext.html#facetas"><i class="fa fa-check"></i>Facetas</a></li>
<li class="chapter" data-level="" data-path="visualizacion-ext.html"><a href="visualizacion-ext.html#gráficos-de-líneas"><i class="fa fa-check"></i>Gráficos de líneas</a></li>
<li class="chapter" data-level="" data-path="visualizacion-ext.html"><a href="visualizacion-ext.html#más-personalización"><i class="fa fa-check"></i>Más personalización</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="visualizacion-personalizacion.html"><a href="visualizacion-personalizacion.html"><i class="fa fa-check"></i>03C - Visualización de datos (personalización)</a>
<ul>
<li class="chapter" data-level="" data-path="visualizacion-personalizacion.html"><a href="visualizacion-personalizacion.html#inicio-cargar-paquetes-base-de-datos-1"><i class="fa fa-check"></i>Inicio: cargar paquetes, base de datos</a></li>
<li class="chapter" data-level="" data-path="visualizacion-personalizacion.html"><a href="visualizacion-personalizacion.html#gráfico-de-ejemplo"><i class="fa fa-check"></i>Gráfico de ejemplo</a></li>
<li class="chapter" data-level="" data-path="visualizacion-personalizacion.html"><a href="visualizacion-personalizacion.html#gráficos-como-objetos-guardar-gráficos-en-el-disco"><i class="fa fa-check"></i>Gráficos como objetos / guardar gráficos en el disco</a></li>
<li class="chapter" data-level="" data-path="visualizacion-personalizacion.html"><a href="visualizacion-personalizacion.html#personalización-de-gráficos"><i class="fa fa-check"></i>Personalización de gráficos</a></li>
</ul></li>
<li class="part"><span><b>IV Búsqueda de ayuda</b></span></li>
<li class="chapter" data-level="" data-path="busqueda-ayuda.html"><a href="busqueda-ayuda.html"><i class="fa fa-check"></i>04 - Guía búsqueda de ayuda</a>
<ul>
<li class="chapter" data-level="" data-path="busqueda-ayuda.html"><a href="busqueda-ayuda.html#leer-archivos-de-ayuda-de-r"><i class="fa fa-check"></i>Leer archivos de ayuda de R</a></li>
<li class="chapter" data-level="" data-path="busqueda-ayuda.html"><a href="busqueda-ayuda.html#encontrar-funciones-en-línea"><i class="fa fa-check"></i>Encontrar funciones en línea</a></li>
<li class="chapter" data-level="" data-path="busqueda-ayuda.html"><a href="busqueda-ayuda.html#solucionar-problemas"><i class="fa fa-check"></i>Solucionar problemas</a></li>
<li class="chapter" data-level="" data-path="busqueda-ayuda.html"><a href="busqueda-ayuda.html#pedir-ayuda-con-ejemplos-reproducibles-reprex"><i class="fa fa-check"></i>Pedir ayuda con ejemplos reproducibles (reprex)</a></li>
</ul></li>
<li class="part"><span><b>V Manejo avanzado de datos</b></span></li>
<li class="chapter" data-level="" data-path="manejo-av.html"><a href="manejo-av.html"><i class="fa fa-check"></i>05A - Manejo avanzado de datos (intro)</a>
<ul>
<li class="chapter" data-level="" data-path="manejo-av.html"><a href="manejo-av.html#inicio-cargar-paquetes-base-de-datos-2"><i class="fa fa-check"></i>Inicio: cargar paquetes, base de datos</a></li>
<li class="chapter" data-level="" data-path="manejo-av.html"><a href="manejo-av.html#pivotear-bases-de-datos-wide---long"><i class="fa fa-check"></i>Pivotear bases de datos (wide &lt;-&gt; long)</a></li>
<li class="chapter" data-level="" data-path="manejo-av.html"><a href="manejo-av.html#recodificar-variables"><i class="fa fa-check"></i>Recodificar variables</a></li>
<li class="chapter" data-level="" data-path="manejo-av.html"><a href="manejo-av.html#valores-perdidosmissingna"><i class="fa fa-check"></i>Valores perdidos/missing/NA</a></li>
<li class="chapter" data-level="" data-path="manejo-av.html"><a href="manejo-av.html#unir-bases-de-datos"><i class="fa fa-check"></i>Unir bases de datos</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="manejo-av-ej.html"><a href="manejo-av-ej.html"><i class="fa fa-check"></i>05B - Visualización de datos (extensiones)</a></li>
<li class="part"><span><b>VI Análisis de texto</b></span></li>
<li class="chapter" data-level="" data-path="texto-analisis.html"><a href="texto-analisis.html"><i class="fa fa-check"></i>06A - Análisis de texto</a>
<ul>
<li class="chapter" data-level="" data-path="texto-analisis.html"><a href="texto-analisis.html#inicio-cargar-paquetes-base-de-datos-3"><i class="fa fa-check"></i>Inicio: cargar paquetes, base de datos</a></li>
<li class="chapter" data-level="" data-path="texto-analisis.html"><a href="texto-analisis.html#tokens-y-frecuencias"><i class="fa fa-check"></i>Tokens y frecuencias</a></li>
<li class="chapter" data-level="" data-path="texto-analisis.html"><a href="texto-analisis.html#separar-el-análisis-de-frecuencias-por-secciones"><i class="fa fa-check"></i>Separar el análisis de frecuencias por secciones</a></li>
<li class="chapter" data-level="" data-path="texto-analisis.html"><a href="texto-analisis.html#comparar-frecuencias-de-palabras-entre-documentos"><i class="fa fa-check"></i>Comparar frecuencias de palabras entre documentos</a></li>
<li class="chapter" data-level="" data-path="texto-analisis.html"><a href="texto-analisis.html#obtener-las-palabras-más-distintivas-entre-documentos"><i class="fa fa-check"></i>Obtener las palabras más distintivas entre documentos</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="texto-cadenas.html"><a href="texto-cadenas.html"><i class="fa fa-check"></i>06B - Cadenas de texto</a>
<ul>
<li class="chapter" data-level="" data-path="texto-cadenas.html"><a href="texto-cadenas.html#inicio-cargar-paquetes-base-de-datos-4"><i class="fa fa-check"></i>Inicio: cargar paquetes, base de datos</a></li>
<li class="chapter" data-level="" data-path="texto-cadenas.html"><a href="texto-cadenas.html#cadenas-de-texto"><i class="fa fa-check"></i>Cadenas de texto</a></li>
<li class="chapter" data-level="" data-path="texto-cadenas.html"><a href="texto-cadenas.html#algunas-operaciones-simples-con-texto"><i class="fa fa-check"></i>Algunas operaciones simples con texto</a></li>
<li class="chapter" data-level="" data-path="texto-cadenas.html"><a href="texto-cadenas.html#funciones-para-trabajar-con-patrones"><i class="fa fa-check"></i>Funciones para trabajar con patrones</a></li>
<li><a href="texto-cadenas.html#patrones-más-complejos-con-expresiones-regulares-regex">Patrones más complejos con expresiones regulares (<em>regex</em>)</a></li>
<li class="chapter" data-level="" data-path="texto-cadenas.html"><a href="texto-cadenas.html#ejercicio-f"><i class="fa fa-check"></i>(Ejercicio f)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="texto-libros.html"><a href="texto-libros.html"><i class="fa fa-check"></i>06C - Descarga de libros</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Publicado con bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Programación en Ciencias Sociales</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="manejo-02a" class="section level1 unnumbered">
<h1>02A - Manejo de datos</h1>
<blockquote>
<p>Si quieres correr este script localmente, acá puedes <a href="./static/02_manejo_de_datos.zip">descargar el proyecto comprimido en .zip</a>. Paquetes que necesitas tener instalados antes de comenzar con el proyecto (2A, 2B, 2C, 2D): <code>tidyverse</code>, <code>janitor</code>, <code>writexl</code>, <code>learnr</code>.</p>
</blockquote>
<div id="manejo-de-bases-de-datos" class="section level2">
<h2>Manejo de bases de datos</h2>
<ul>
<li><p>Manejo de datos = limpiar y ordenar datos para poder analizarlos.</p></li>
<li><p>Se suele decir que el 80% del análisis de datos es solo manejo <a href="https://docs.google.com/viewer?url=https://www.jstatsoft.org/index.php/jss/article/view/v059i10/v59i10.pdf">(Wickham, 2014)</a>.</p></li>
</ul>
<div class="figure">
<img src="https://es.r4ds.hadley.nz/diagrams_w_text_as_path/es/data-science-explore.svg" alt="" />
<p class="caption">Fuente: Wickham &amp; Grolemund (2017)</p>
</div>
<div id="partes-de-una-base-de-datos-tabular" class="section level4">
<h4>Partes de una base de datos tabular</h4>
<p><img src="imgs/partes_df.png" /></p>
<ol style="list-style-type: decimal">
<li>Encabezado (header)</li>
<li>Fila (row)</li>
<li>Columna (column)</li>
<li>Celda (cell)</li>
</ol>
<p>Una pequeña mnemotecnia:</p>
<p><img src="imgs/df_columnas.png" /></p>
</div>
</div>
<div id="la-base-de-datos-ideal-tidy" class="section level2">
<h2>La base de datos ideal: tidy</h2>
<ul>
<li>En el paradigma “tidy” <a href="https://docs.google.com/viewer?url=https://www.jstatsoft.org/index.php/jss/article/view/v059i10/v59i10.pdf">(Wickham, 2014)</a>:
<ol style="list-style-type: decimal">
<li>Cada variable es una columna</li>
<li>Cada observación es una fila</li>
<li>Cada valor es una celda</li>
<li>Existe una base de datos para cada unidad observacional</li>
</ol></li>
</ul>
<p><img src="https://d33wubrfki0l68.cloudfront.net/6f1ddb544fc5c69a2478e444ab8112fb0eea23f8/91adc/images/tidy-1.png" /></p>
<div id="ejercicio-a-1" class="section level4">
<h4>(Ejercicio A)</h4>
<ul>
<li>Por favor revisar <a href="https://docs.google.com/spreadsheets/d/1BqA2ZR7fiuakpmQUnFNIXig1wMD7UxnPRLULUtoOd70/edit?usp=sharing">este link</a>.</li>
<li>Contiene un panel para las emisiones anuales de CO2 de los países americanos (unidad de medida: toneladas per capita).</li>
<li>Hay tres bases con la misma información, una por cada hoja. ¿Cuál es la “tidy”?</li>
</ul>
</div>
</div>
<div id="operaciones-básicas-en-bases-de-datos-wickham-2014" class="section level2">
<h2>Operaciones básicas en bases de datos <a href="https://docs.google.com/viewer?url=https://www.jstatsoft.org/index.php/jss/article/view/v059i10/v59i10.pdf">(Wickham, 2014)</a></h2>
<ul>
<li>Transformar columnas (añadir o modificar existentes)
<ul>
<li>Puede ser en una sola columna o en múltiples columnas</li>
<li>En el tidyverse, <code>mutate()</code></li>
</ul></li>
<li>Seleccionar columnas (y excluir otras)
<ul>
<li>En el tidyverse, <code>select()</code></li>
</ul></li>
<li>Filtrar observaciones en base a una condición
<ul>
<li>En el tidyverse, <code>filter()</code></li>
</ul></li>
<li>Ordenar la base de datos, en base a una(s) variable(s)
<ul>
<li>En el tidyverse, <code>arrange()</code></li>
</ul></li>
<li>Agregar/colapsar la base de datos
<ul>
<li>Colapsar múltiples valores en algún resumen (por ejemplo, media o suma)</li>
<li>Puede ser para toda la base o por subgrupos</li>
<li>En el tidyverse, <code>summarize()</code></li>
</ul></li>
</ul>
<div id="ejercicio-b-1" class="section level4">
<h4>(Ejercicio B)</h4>
<ul>
<li><p>Favor ir a <a href="https://docs.google.com/spreadsheets/d/12PQs1hcBs6OjveI1nMmeZDgR4GBphkzJZGJdMxxRquQ/edit?usp=sharing">este link</a></p></li>
<li><p>¿Qué operaciones básicas pueden ser interesantes para comenzar a analizar estos datos? Contesta con dos ejemplos:</p></li>
</ul>
</div>
</div>
<div id="trabajo-con-r" class="section level2">
<h2>Trabajo con R</h2>
<p>Comenzaremos cargando el <code>tidyverse</code>:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="manejo-02a.html#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<div id="base-de-datos-aprobación-de-presidentesas-en-latinoamérica" class="section level4">
<h4>Base de datos: aprobación de presidentes/as en Latinoamérica</h4>
<ul>
<li><p>Tenemos una base de datos ligeramente editada a partir de <a href="https://reyes-housholder.weebly.com/uploads/8/1/0/9/81091026/10._prq_manuscript_feb_2019.pdf">Reyes-Housholder (2019)</a>.</p>
<ul>
<li>Incluye también un par de variables de los World Development Indicators, recopiladas por <a href="https://qog.pol.gu.se/data">Quality of Government</a>.</li>
</ul></li>
<li><p>La base de datos se encuentra en <code>datos/base_aprob_reyes-housholder.csv</code>.</p></li>
<li><p>Contiene información de la aprobación de presidentes/as en 17 países de América Latina por trimestre (2000-2014), además de variables de control.</p>
<ul>
<li>¿Cuál es la unidad de análisis de la base? ¿Cuántas observaciones tendrá, asumiendo un panel balanceado?</li>
</ul></li>
</ul>
</div>
<div id="carga-de-base-en-formato-csv" class="section level4">
<h4>Carga de base en formato csv</h4>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="manejo-02a.html#cb79-1" aria-hidden="true" tabindex="-1"></a>df_aprob <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;datos/base_aprob_reyes-housholder.csv&quot;</span>)</span></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   country = col_character(),
##   year = col_double(),
##   quarter = col_double(),
##   president = col_character(),
##   net_approval = col_double(),
##   pres_sex = col_character(),
##   pres_sex_d = col_double(),
##   exec_corr = col_double(),
##   gdp_growth = col_double(),
##   unemp = col_double(),
##   wdi_gdp = col_double(),
##   wdi_pop = col_double()
## )</code></pre>
</div>
<div id="resúmenes-simples-para-data-frames" class="section level4">
<h4>Resúmenes simples para <em>data frames</em></h4>
<p>El resumen más simple de un objeto en R suele poder obtenerse con su nombre comando. Nota cómo debajo de cada nombre, algunas variables tienen <code>&lt;dbl&gt;</code> y otras <code>&lt;chr&gt;</code>. ¿Qué significa esto?</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="manejo-02a.html#cb81-1" aria-hidden="true" tabindex="-1"></a>df_aprob</span></code></pre></div>
<pre><code>## # A tibble: 1,020 x 12
##    country    year quarter president       
##    &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;           
##  1 Argentina  2000       1 Fernando de la ~
##  2 Argentina  2000       2 Fernando de la ~
##  3 Argentina  2000       3 Fernando de la ~
##  4 Argentina  2000       4 Fernando de la ~
##  5 Argentina  2001       1 Fernando de la ~
##  6 Argentina  2001       2 Fernando de la ~
##  7 Argentina  2001       3 Fernando de la ~
##  8 Argentina  2001       4 Fernando de la ~
##  9 Argentina  2002       1 Eduardo Alberto~
## 10 Argentina  2002       2 Eduardo Alberto~
## # ... with 1,010 more rows, and 8 more
## #   variables: net_approval &lt;dbl&gt;,
## #   pres_sex &lt;chr&gt;, pres_sex_d &lt;dbl&gt;,
## #   exec_corr &lt;dbl&gt;, gdp_growth &lt;dbl&gt;,
## #   unemp &lt;dbl&gt;, wdi_gdp &lt;dbl&gt;,
## #   wdi_pop &lt;dbl&gt;</code></pre>
<p>Por cierto, podemos obtener un resumen similar clickeando nuestro objeto en el panel “Environment” (superior derecho) de RStudio. Esto es lo mismo que ocupar el comando <code>View()</code>:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="manejo-02a.html#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(df_aprob)</span></code></pre></div>
<p>Otro resumen útil es la función <code>glimpse()</code> del <code>tidyverse</code>, que nos da otra perspectiva:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="manejo-02a.html#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(df_aprob)</span></code></pre></div>
<pre><code>## Rows: 1,020
## Columns: 12
## $ country      &lt;chr&gt; &quot;Argentina&quot;, &quot;Argent~
## $ year         &lt;dbl&gt; 2000, 2000, 2000, 20~
## $ quarter      &lt;dbl&gt; 1, 2, 3, 4, 1, 2, 3,~
## $ president    &lt;chr&gt; &quot;Fernando de la Rúa&quot;~
## $ net_approval &lt;dbl&gt; 40.126, 16.390, 23.9~
## $ pres_sex     &lt;chr&gt; &quot;male&quot;, &quot;male&quot;, &quot;mal~
## $ pres_sex_d   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0,~
## $ exec_corr    &lt;dbl&gt; 14.01525, 14.01525, ~
## $ gdp_growth   &lt;dbl&gt; -0.8, -0.8, -0.8, -0~
## $ unemp        &lt;dbl&gt; 15.00, 15.00, 15.00,~
## $ wdi_gdp      &lt;dbl&gt; 552151219031, 552151~
## $ wdi_pop      &lt;dbl&gt; 37057452, 37057452, ~</code></pre>
<p>¿Qué significan las variables de esta base de datos? Completa la siguiente tabla:</p>
<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>Variable</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>country</td>
<td>País.</td>
</tr>
<tr class="even">
<td>year</td>
<td>Año.</td>
</tr>
<tr class="odd">
<td>quarter</td>
<td>Trimestre.</td>
</tr>
<tr class="even">
<td>president</td>
<td>Presidente/a.</td>
</tr>
<tr class="odd">
<td>net_approval</td>
<td>Aprobación neta del presidente/a (% aprobación - % rechazo).</td>
</tr>
<tr class="even">
<td>pres_sex</td>
<td></td>
</tr>
<tr class="odd">
<td>pres_sex_d</td>
<td></td>
</tr>
<tr class="even">
<td>exec_corr</td>
<td>Corrupción en el Ejecutivo, según V-Dem. De 0 a 100 (mayor es más corrupción).</td>
</tr>
<tr class="odd">
<td>gdp_growth</td>
<td></td>
</tr>
<tr class="even">
<td>unemp</td>
<td></td>
</tr>
<tr class="odd">
<td>wdi_gdp</td>
<td>Producto interno bruto del país, ajustado por paridad de cambio (PPP) y constante en dólares del 2011.</td>
</tr>
<tr class="even">
<td>wdi_pop</td>
<td></td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="manejo-de-datos-operaciones-básicas" class="section level2">
<h2>Manejo de datos: operaciones básicas</h2>
<p>En todas las operaciones básicas que veremos hoy el primer argumento en la función será el <em>data frame</em> a editar.</p>
<div id="seleccionar-columnas-con-select" class="section level4">
<h4>Seleccionar columnas con <code>select()</code></h4>
<p>Seleccionemos solo la columna de países:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="manejo-02a.html#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(df_aprob, country)</span></code></pre></div>
<pre><code>## # A tibble: 1,020 x 1
##    country  
##    &lt;chr&gt;    
##  1 Argentina
##  2 Argentina
##  3 Argentina
##  4 Argentina
##  5 Argentina
##  6 Argentina
##  7 Argentina
##  8 Argentina
##  9 Argentina
## 10 Argentina
## # ... with 1,010 more rows</code></pre>
<p>Recuerda que esto no creó ningún objeto nuevo, es solo un comando que estamos ejecutando en la consola. Si quisiéramos crear un objeto nuevo, tendríamos que asignarlo:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="manejo-02a.html#cb88-1" aria-hidden="true" tabindex="-1"></a>df_aprob_reducida <span class="ot">&lt;-</span> <span class="fu">select</span>(df_aprob, country)</span>
<span id="cb88-2"><a href="manejo-02a.html#cb88-2" aria-hidden="true" tabindex="-1"></a>df_aprob_reducida</span></code></pre></div>
<pre><code>## # A tibble: 1,020 x 1
##    country  
##    &lt;chr&gt;    
##  1 Argentina
##  2 Argentina
##  3 Argentina
##  4 Argentina
##  5 Argentina
##  6 Argentina
##  7 Argentina
##  8 Argentina
##  9 Argentina
## 10 Argentina
## # ... with 1,010 more rows</code></pre>
<p>Podemos seleccionar múltiples columnas a la vez, separadas por comas:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="manejo-02a.html#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(df_aprob, country, year, unemp)</span></code></pre></div>
<pre><code>## # A tibble: 1,020 x 3
##    country    year unemp
##    &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt;
##  1 Argentina  2000  15  
##  2 Argentina  2000  15  
##  3 Argentina  2000  15  
##  4 Argentina  2000  15  
##  5 Argentina  2001  18.3
##  6 Argentina  2001  18.3
##  7 Argentina  2001  18.3
##  8 Argentina  2001  18.3
##  9 Argentina  2002  17.9
## 10 Argentina  2002  17.9
## # ... with 1,010 more rows</code></pre>
<p>Supongamos que queremos las primeras cinco variables de la base de datos. Las siguientes tres formas nos permitirán obtenerlas:</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="manejo-02a.html#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(df_aprob, country, year, quarter, president, net_approval)</span></code></pre></div>
<pre><code>## # A tibble: 1,020 x 5
##    country    year quarter president       
##    &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;           
##  1 Argentina  2000       1 Fernando de la ~
##  2 Argentina  2000       2 Fernando de la ~
##  3 Argentina  2000       3 Fernando de la ~
##  4 Argentina  2000       4 Fernando de la ~
##  5 Argentina  2001       1 Fernando de la ~
##  6 Argentina  2001       2 Fernando de la ~
##  7 Argentina  2001       3 Fernando de la ~
##  8 Argentina  2001       4 Fernando de la ~
##  9 Argentina  2002       1 Eduardo Alberto~
## 10 Argentina  2002       2 Eduardo Alberto~
## # ... with 1,010 more rows, and 1 more
## #   variable: net_approval &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="manejo-02a.html#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(df_aprob, country<span class="sc">:</span>net_approval) <span class="co"># esta es la forma recomendada para la mayoría de los casos</span></span></code></pre></div>
<pre><code>## # A tibble: 1,020 x 5
##    country    year quarter president       
##    &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;           
##  1 Argentina  2000       1 Fernando de la ~
##  2 Argentina  2000       2 Fernando de la ~
##  3 Argentina  2000       3 Fernando de la ~
##  4 Argentina  2000       4 Fernando de la ~
##  5 Argentina  2001       1 Fernando de la ~
##  6 Argentina  2001       2 Fernando de la ~
##  7 Argentina  2001       3 Fernando de la ~
##  8 Argentina  2001       4 Fernando de la ~
##  9 Argentina  2002       1 Eduardo Alberto~
## 10 Argentina  2002       2 Eduardo Alberto~
## # ... with 1,010 more rows, and 1 more
## #   variable: net_approval &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="manejo-02a.html#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(df_aprob, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1,020 x 5
##    country    year quarter president       
##    &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;           
##  1 Argentina  2000       1 Fernando de la ~
##  2 Argentina  2000       2 Fernando de la ~
##  3 Argentina  2000       3 Fernando de la ~
##  4 Argentina  2000       4 Fernando de la ~
##  5 Argentina  2001       1 Fernando de la ~
##  6 Argentina  2001       2 Fernando de la ~
##  7 Argentina  2001       3 Fernando de la ~
##  8 Argentina  2001       4 Fernando de la ~
##  9 Argentina  2002       1 Eduardo Alberto~
## 10 Argentina  2002       2 Eduardo Alberto~
## # ... with 1,010 more rows, and 1 more
## #   variable: net_approval &lt;dbl&gt;</code></pre>
<p>El comando <code>select()</code> también nos sirve para reordenar las columnas. Supongamos que queremos que la variable <code>president</code> sea la primera. Podemos hacer algo como esto:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="manejo-02a.html#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(df_aprob, president, country<span class="sc">:</span>year, net_approval<span class="sc">:</span>unemp)</span></code></pre></div>
<pre><code>## # A tibble: 1,020 x 9
##    president     country  year net_approval
##    &lt;chr&gt;         &lt;chr&gt;   &lt;dbl&gt;        &lt;dbl&gt;
##  1 Fernando de ~ Argent~  2000        40.1 
##  2 Fernando de ~ Argent~  2000        16.4 
##  3 Fernando de ~ Argent~  2000        24.0 
##  4 Fernando de ~ Argent~  2000       -18.3 
##  5 Fernando de ~ Argent~  2001        -6.97
##  6 Fernando de ~ Argent~  2001       -20.1 
##  7 Fernando de ~ Argent~  2001       -19.4 
##  8 Fernando de ~ Argent~  2001       -23.2 
##  9 Eduardo Albe~ Argent~  2002        -2.01
## 10 Eduardo Albe~ Argent~  2002       -20.1 
## # ... with 1,010 more rows, and 5 more
## #   variables: pres_sex &lt;chr&gt;,
## #   pres_sex_d &lt;dbl&gt;, exec_corr &lt;dbl&gt;,
## #   gdp_growth &lt;dbl&gt;, unemp &lt;dbl&gt;</code></pre>
<p>Esta forma es un poco tediosa. Hay una función de ayuda que nos será útil en este caso, se llama <code>everything()</code></p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="manejo-02a.html#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(df_aprob, president, <span class="fu">everything</span>()) <span class="co"># selecciona &quot;president&quot; y todo lo demás</span></span></code></pre></div>
<pre><code>## # A tibble: 1,020 x 12
##    president         country   year quarter
##    &lt;chr&gt;             &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;
##  1 Fernando de la R~ Argenti~  2000       1
##  2 Fernando de la R~ Argenti~  2000       2
##  3 Fernando de la R~ Argenti~  2000       3
##  4 Fernando de la R~ Argenti~  2000       4
##  5 Fernando de la R~ Argenti~  2001       1
##  6 Fernando de la R~ Argenti~  2001       2
##  7 Fernando de la R~ Argenti~  2001       3
##  8 Fernando de la R~ Argenti~  2001       4
##  9 Eduardo Alberto ~ Argenti~  2002       1
## 10 Eduardo Alberto ~ Argenti~  2002       2
## # ... with 1,010 more rows, and 8 more
## #   variables: net_approval &lt;dbl&gt;,
## #   pres_sex &lt;chr&gt;, pres_sex_d &lt;dbl&gt;,
## #   exec_corr &lt;dbl&gt;, gdp_growth &lt;dbl&gt;,
## #   unemp &lt;dbl&gt;, wdi_gdp &lt;dbl&gt;,
## #   wdi_pop &lt;dbl&gt;</code></pre>
<p>Finalmente, también podemos excluir variables con un signo <code>-</code>:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="manejo-02a.html#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(df_aprob, <span class="sc">-</span>president)</span></code></pre></div>
<pre><code>## # A tibble: 1,020 x 11
##    country    year quarter net_approval
##    &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;        &lt;dbl&gt;
##  1 Argentina  2000       1        40.1 
##  2 Argentina  2000       2        16.4 
##  3 Argentina  2000       3        24.0 
##  4 Argentina  2000       4       -18.3 
##  5 Argentina  2001       1        -6.97
##  6 Argentina  2001       2       -20.1 
##  7 Argentina  2001       3       -19.4 
##  8 Argentina  2001       4       -23.2 
##  9 Argentina  2002       1        -2.01
## 10 Argentina  2002       2       -20.1 
## # ... with 1,010 more rows, and 7 more
## #   variables: pres_sex &lt;chr&gt;,
## #   pres_sex_d &lt;dbl&gt;, exec_corr &lt;dbl&gt;,
## #   gdp_growth &lt;dbl&gt;, unemp &lt;dbl&gt;,
## #   wdi_gdp &lt;dbl&gt;, wdi_pop &lt;dbl&gt;</code></pre>
</div>
<div id="renombrar-columnas-con-rename" class="section level4">
<h4>Renombrar columnas con <code>rename()</code></h4>
<p>Podemos cambiar el nombre de una columna con el comando <code>rename()</code>. Por ejemplo:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="manejo-02a.html#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rename</span>(df_aprob, <span class="at">trimeste =</span> quarter) <span class="co"># noten que no estoy modificando la base, solo imprimiéndola!</span></span></code></pre></div>
<pre><code>## # A tibble: 1,020 x 12
##    country   year trimeste president       
##    &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;           
##  1 Argenti~  2000        1 Fernando de la ~
##  2 Argenti~  2000        2 Fernando de la ~
##  3 Argenti~  2000        3 Fernando de la ~
##  4 Argenti~  2000        4 Fernando de la ~
##  5 Argenti~  2001        1 Fernando de la ~
##  6 Argenti~  2001        2 Fernando de la ~
##  7 Argenti~  2001        3 Fernando de la ~
##  8 Argenti~  2001        4 Fernando de la ~
##  9 Argenti~  2002        1 Eduardo Alberto~
## 10 Argenti~  2002        2 Eduardo Alberto~
## # ... with 1,010 more rows, and 8 more
## #   variables: net_approval &lt;dbl&gt;,
## #   pres_sex &lt;chr&gt;, pres_sex_d &lt;dbl&gt;,
## #   exec_corr &lt;dbl&gt;, gdp_growth &lt;dbl&gt;,
## #   unemp &lt;dbl&gt;, wdi_gdp &lt;dbl&gt;,
## #   wdi_pop &lt;dbl&gt;</code></pre>
</div>
<div id="filtrar-observaciones-con-filter" class="section level4">
<h4>Filtrar observaciones con <code>filter()</code></h4>
<p>A menudo queremos quedarnos solo con algunas observaciones de nuestra base de datos, filtrando de acuerdo a características específicas. Podemos hacer esto gracias a la función <code>filter()</code> y algo llamado “operadores lógicos”. Para comenzar, quedémonos solo con las observaciones de Chile:</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="manejo-02a.html#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df_aprob, country <span class="sc">==</span> <span class="st">&quot;Chile&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 60 x 12
##    country  year quarter president         
##    &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;             
##  1 Chile    2000       1 Eduardo Frei Ruiz~
##  2 Chile    2000       2 Ricardo Lagos Esc~
##  3 Chile    2000       3 Ricardo Lagos Esc~
##  4 Chile    2000       4 Ricardo Lagos Esc~
##  5 Chile    2001       1 Ricardo Lagos Esc~
##  6 Chile    2001       2 Ricardo Lagos Esc~
##  7 Chile    2001       3 Ricardo Lagos Esc~
##  8 Chile    2001       4 Ricardo Lagos Esc~
##  9 Chile    2002       1 Ricardo Lagos Esc~
## 10 Chile    2002       2 Ricardo Lagos Esc~
## # ... with 50 more rows, and 8 more
## #   variables: net_approval &lt;dbl&gt;,
## #   pres_sex &lt;chr&gt;, pres_sex_d &lt;dbl&gt;,
## #   exec_corr &lt;dbl&gt;, gdp_growth &lt;dbl&gt;,
## #   unemp &lt;dbl&gt;, wdi_gdp &lt;dbl&gt;,
## #   wdi_pop &lt;dbl&gt;</code></pre>
<p>Le estamos diciendo a <code>filter()</code>, por medio del segundo argumento, que solo se quede con observaciones en las que la variable country <em>es igual a </em> Chile. Este “es igual a” es un operador lógico, que se escribe como “==” en R. Aquí hay una lista de operadores lógicos comunes:</p>
<table>
<thead>
<tr class="header">
<th align="center">operador</th>
<th>descripción</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><code>==</code></td>
<td>es igual a</td>
</tr>
<tr class="even">
<td align="center"><code>!=</code></td>
<td>es distinto a</td>
</tr>
<tr class="odd">
<td align="center"><code>&gt;</code></td>
<td>es mayor a</td>
</tr>
<tr class="even">
<td align="center"><code>&lt;</code></td>
<td>es menor a</td>
</tr>
<tr class="odd">
<td align="center"><code>&gt;=</code></td>
<td>es mayor o igual a</td>
</tr>
<tr class="even">
<td align="center"><code>&lt;=</code></td>
<td>es menor o igual a</td>
</tr>
<tr class="odd">
<td align="center"><code>&amp;</code></td>
<td>intersección</td>
</tr>
<tr class="even">
<td align="center"><code>|</code></td>
<td>unión</td>
</tr>
<tr class="odd">
<td align="center"><code>%in%</code></td>
<td>está contenido en</td>
</tr>
</tbody>
</table>
<p>Por ejemplo, podemos obtener todas las observaciones (país-año-trimestre) en las que la aprobación presidencial neta es positiva:</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="manejo-02a.html#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df_aprob, net_approval <span class="sc">&gt;</span> <span class="dv">0</span>)</span></code></pre></div>
<pre><code>## # A tibble: 709 x 12
##    country    year quarter president       
##    &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;           
##  1 Argentina  2000       1 Fernando de la ~
##  2 Argentina  2000       2 Fernando de la ~
##  3 Argentina  2000       3 Fernando de la ~
##  4 Argentina  2003       2 Eduardo Alberto~
##  5 Argentina  2003       3 Néstor Carlos K~
##  6 Argentina  2003       4 Néstor Carlos K~
##  7 Argentina  2004       1 Néstor Carlos K~
##  8 Argentina  2004       2 Néstor Carlos K~
##  9 Argentina  2004       3 Néstor Carlos K~
## 10 Argentina  2004       4 Néstor Carlos K~
## # ... with 699 more rows, and 8 more
## #   variables: net_approval &lt;dbl&gt;,
## #   pres_sex &lt;chr&gt;, pres_sex_d &lt;dbl&gt;,
## #   exec_corr &lt;dbl&gt;, gdp_growth &lt;dbl&gt;,
## #   unemp &lt;dbl&gt;, wdi_gdp &lt;dbl&gt;,
## #   wdi_pop &lt;dbl&gt;</code></pre>
<p>Podemos también realizar filtros más complejos. Obtengamos solo las observaciones del Cono Sur:</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="manejo-02a.html#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df_aprob, country <span class="sc">==</span> <span class="st">&quot;Argentina&quot;</span> <span class="sc">|</span> country <span class="sc">==</span> <span class="st">&quot;Chile&quot;</span> <span class="sc">|</span> country <span class="sc">==</span> <span class="st">&quot;Uruguay&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 180 x 12
##    country    year quarter president       
##    &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;           
##  1 Argentina  2000       1 Fernando de la ~
##  2 Argentina  2000       2 Fernando de la ~
##  3 Argentina  2000       3 Fernando de la ~
##  4 Argentina  2000       4 Fernando de la ~
##  5 Argentina  2001       1 Fernando de la ~
##  6 Argentina  2001       2 Fernando de la ~
##  7 Argentina  2001       3 Fernando de la ~
##  8 Argentina  2001       4 Fernando de la ~
##  9 Argentina  2002       1 Eduardo Alberto~
## 10 Argentina  2002       2 Eduardo Alberto~
## # ... with 170 more rows, and 8 more
## #   variables: net_approval &lt;dbl&gt;,
## #   pres_sex &lt;chr&gt;, pres_sex_d &lt;dbl&gt;,
## #   exec_corr &lt;dbl&gt;, gdp_growth &lt;dbl&gt;,
## #   unemp &lt;dbl&gt;, wdi_gdp &lt;dbl&gt;,
## #   wdi_pop &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="manejo-02a.html#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df_aprob, country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Argentina&quot;</span>, <span class="st">&quot;Chile&quot;</span>, <span class="st">&quot;Uruguay&quot;</span>)) <span class="co"># lo mismo, con otro op. lógico</span></span></code></pre></div>
<pre><code>## # A tibble: 180 x 12
##    country    year quarter president       
##    &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;           
##  1 Argentina  2000       1 Fernando de la ~
##  2 Argentina  2000       2 Fernando de la ~
##  3 Argentina  2000       3 Fernando de la ~
##  4 Argentina  2000       4 Fernando de la ~
##  5 Argentina  2001       1 Fernando de la ~
##  6 Argentina  2001       2 Fernando de la ~
##  7 Argentina  2001       3 Fernando de la ~
##  8 Argentina  2001       4 Fernando de la ~
##  9 Argentina  2002       1 Eduardo Alberto~
## 10 Argentina  2002       2 Eduardo Alberto~
## # ... with 170 more rows, and 8 more
## #   variables: net_approval &lt;dbl&gt;,
## #   pres_sex &lt;chr&gt;, pres_sex_d &lt;dbl&gt;,
## #   exec_corr &lt;dbl&gt;, gdp_growth &lt;dbl&gt;,
## #   unemp &lt;dbl&gt;, wdi_gdp &lt;dbl&gt;,
## #   wdi_pop &lt;dbl&gt;</code></pre>
<p>Podemos también incluir pequeñas operaciones en nuestros filtros. Obtengamos todas las observaciones en las que la corrupción ejecutiva es mayor a la del promedio de toda la base:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="manejo-02a.html#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df_aprob, exec_corr <span class="sc">&gt;</span> <span class="fu">mean</span>(exec_corr))</span></code></pre></div>
<pre><code>## # A tibble: 456 x 12
##    country    year quarter president       
##    &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;           
##  1 Argentina  2003       1 Eduardo Alberto~
##  2 Argentina  2003       2 Eduardo Alberto~
##  3 Argentina  2003       3 Néstor Carlos K~
##  4 Argentina  2003       4 Néstor Carlos K~
##  5 Argentina  2004       1 Néstor Carlos K~
##  6 Argentina  2004       2 Néstor Carlos K~
##  7 Argentina  2004       3 Néstor Carlos K~
##  8 Argentina  2004       4 Néstor Carlos K~
##  9 Argentina  2005       1 Néstor Carlos K~
## 10 Argentina  2005       2 Néstor Carlos K~
## # ... with 446 more rows, and 8 more
## #   variables: net_approval &lt;dbl&gt;,
## #   pres_sex &lt;chr&gt;, pres_sex_d &lt;dbl&gt;,
## #   exec_corr &lt;dbl&gt;, gdp_growth &lt;dbl&gt;,
## #   unemp &lt;dbl&gt;, wdi_gdp &lt;dbl&gt;,
## #   wdi_pop &lt;dbl&gt;</code></pre>
</div>
<div id="ejercicios-c" class="section level4">
<h4>(Ejercicios C)</h4>
<p>(C1) Selecciona solo las dos columnas que registran el sexo del presidente/a en la base de datos. Recuerda que los chunks se insertan con Ctrl/Cmd + Alt + i. Tu código:</p>
<p>(C2) Filtra la base de datos para que solo tenga las observaciones del año 2000. Tu código:</p>
<p>(C3) Filtra la base de datos para que solo incluya observaciones de crisis económica: cuando el crecimiento del PIB sea negativo y/o el desempleo sea mayor al 20%. Tu código:</p>
</div>
<div id="ordenar-el-data-frame-con-arrange" class="section level4">
<h4>Ordenar el <em>data frame</em> con <code>arrange()</code></h4>
<p>Podemos cambiar el orden de las observaciones con el comando <code>arrange()</code>. Por ejemplo, ordenémoslas desde el país-año-trimestre menos corrupto al más corrupto:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="manejo-02a.html#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(df_aprob, exec_corr)</span></code></pre></div>
<pre><code>## # A tibble: 1,020 x 12
##    country  year quarter president       
##    &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;           
##  1 Uruguay  2000       1 Julio Sanguietti
##  2 Uruguay  2000       2 Jorge Battle    
##  3 Uruguay  2000       3 Jorge Battle    
##  4 Uruguay  2000       4 Jorge Battle    
##  5 Uruguay  2001       1 Jorge Battle    
##  6 Uruguay  2001       2 Jorge Battle    
##  7 Uruguay  2001       3 Jorge Battle    
##  8 Uruguay  2001       4 Jorge Battle    
##  9 Uruguay  2002       1 Jorge Battle    
## 10 Uruguay  2002       2 Jorge Battle    
## # ... with 1,010 more rows, and 8 more
## #   variables: net_approval &lt;dbl&gt;,
## #   pres_sex &lt;chr&gt;, pres_sex_d &lt;dbl&gt;,
## #   exec_corr &lt;dbl&gt;, gdp_growth &lt;dbl&gt;,
## #   unemp &lt;dbl&gt;, wdi_gdp &lt;dbl&gt;,
## #   wdi_pop &lt;dbl&gt;</code></pre>
<p>Si quisiéramos ordenarlo inversamente, tendríamos que añadir un - (signo menos) antes de la variable:</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="manejo-02a.html#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(df_aprob, <span class="sc">-</span>exec_corr)</span></code></pre></div>
<pre><code>## # A tibble: 1,020 x 12
##    country    year quarter president     
##    &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;         
##  1 Venezuela  2013       1 Hugo Chávez   
##  2 Venezuela  2013       2 Nicolás Maduro
##  3 Venezuela  2013       3 Nicolás Maduro
##  4 Venezuela  2013       4 Nicolás Maduro
##  5 Venezuela  2014       1 Nicolás Maduro
##  6 Venezuela  2014       2 Nicolás Maduro
##  7 Venezuela  2014       3 Nicolás Maduro
##  8 Venezuela  2014       4 Nicolás Maduro
##  9 Venezuela  2007       1 Hugo Chávez   
## 10 Venezuela  2007       2 Hugo Chávez   
## # ... with 1,010 more rows, and 8 more
## #   variables: net_approval &lt;dbl&gt;,
## #   pres_sex &lt;chr&gt;, pres_sex_d &lt;dbl&gt;,
## #   exec_corr &lt;dbl&gt;, gdp_growth &lt;dbl&gt;,
## #   unemp &lt;dbl&gt;, wdi_gdp &lt;dbl&gt;,
## #   wdi_pop &lt;dbl&gt;</code></pre>
<p>Atención, lo anterior solo sirve en columnas numéricas. Para ordenar una categórica inversamente, debemos usar el comando <code>desc()</code>:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="manejo-02a.html#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(df_aprob, <span class="fu">desc</span>(country))</span></code></pre></div>
<pre><code>## # A tibble: 1,020 x 12
##    country    year quarter president  
##    &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;      
##  1 Venezuela  2000       1 Hugo Chávez
##  2 Venezuela  2000       2 Hugo Chávez
##  3 Venezuela  2000       3 Hugo Chávez
##  4 Venezuela  2000       4 Hugo Chávez
##  5 Venezuela  2001       1 Hugo Chávez
##  6 Venezuela  2001       2 Hugo Chávez
##  7 Venezuela  2001       3 Hugo Chávez
##  8 Venezuela  2001       4 Hugo Chávez
##  9 Venezuela  2002       1 Hugo Chávez
## 10 Venezuela  2002       2 Hugo Chávez
## # ... with 1,010 more rows, and 8 more
## #   variables: net_approval &lt;dbl&gt;,
## #   pres_sex &lt;chr&gt;, pres_sex_d &lt;dbl&gt;,
## #   exec_corr &lt;dbl&gt;, gdp_growth &lt;dbl&gt;,
## #   unemp &lt;dbl&gt;, wdi_gdp &lt;dbl&gt;,
## #   wdi_pop &lt;dbl&gt;</code></pre>
<p>Podemos ordenar por más de una variable. Esto es, ordenar a partir de una primera variable y luego ordenar los empates a partir de otra segunda variable. Veamos el siguiente ejemplo:</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="manejo-02a.html#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(df_aprob, pres_sex, <span class="sc">-</span>net_approval)</span></code></pre></div>
<pre><code>## # A tibble: 1,020 x 12
##    country   year quarter president        
##    &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;            
##  1 Brazil    2013       1 Dilma Vana Rouss~
##  2 Brazil    2012       4 Dilma Vana Rouss~
##  3 Brazil    2012       2 Dilma Vana Rouss~
##  4 Brazil    2012       3 Dilma Vana Rouss~
##  5 Brazil    2012       1 Dilma Vana Rouss~
##  6 Brazil    2011       4 Dilma Vana Rouss~
##  7 Brazil    2011       1 Dilma Vana Rouss~
##  8 Brazil    2011       3 Dilma Vana Rouss~
##  9 Brazil    2013       2 Dilma Vana Rouss~
## 10 Argenti~  2011       4 Cristina Fernánd~
## # ... with 1,010 more rows, and 8 more
## #   variables: net_approval &lt;dbl&gt;,
## #   pres_sex &lt;chr&gt;, pres_sex_d &lt;dbl&gt;,
## #   exec_corr &lt;dbl&gt;, gdp_growth &lt;dbl&gt;,
## #   unemp &lt;dbl&gt;, wdi_gdp &lt;dbl&gt;,
## #   wdi_pop &lt;dbl&gt;</code></pre>
</div>
<div id="transformar-variables-con-mutate" class="section level4">
<h4>Transformar variables con <code>mutate()</code></h4>
<div id="transformaciones-con-una-variable" class="section level6">
<h6>Transformaciones con una variable</h6>
<p>Supongamos que queremos crear una variable con el PIB en versión logarítmica:</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="manejo-02a.html#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(df_aprob, <span class="at">wdi_gdp_log =</span> <span class="fu">log</span>(wdi_gdp))</span></code></pre></div>
<pre><code>## # A tibble: 1,020 x 13
##    country    year quarter president       
##    &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;           
##  1 Argentina  2000       1 Fernando de la ~
##  2 Argentina  2000       2 Fernando de la ~
##  3 Argentina  2000       3 Fernando de la ~
##  4 Argentina  2000       4 Fernando de la ~
##  5 Argentina  2001       1 Fernando de la ~
##  6 Argentina  2001       2 Fernando de la ~
##  7 Argentina  2001       3 Fernando de la ~
##  8 Argentina  2001       4 Fernando de la ~
##  9 Argentina  2002       1 Eduardo Alberto~
## 10 Argentina  2002       2 Eduardo Alberto~
## # ... with 1,010 more rows, and 9 more
## #   variables: net_approval &lt;dbl&gt;,
## #   pres_sex &lt;chr&gt;, pres_sex_d &lt;dbl&gt;,
## #   exec_corr &lt;dbl&gt;, gdp_growth &lt;dbl&gt;,
## #   unemp &lt;dbl&gt;, wdi_gdp &lt;dbl&gt;,
## #   wdi_pop &lt;dbl&gt;, wdi_gdp_log &lt;dbl&gt;</code></pre>
<p>Podemos realizar cualquier tipo de operación en las variables. Por ejemplo, transformemos la escala de <code>wdi_pop</code> a millones:</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="manejo-02a.html#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(df_aprob, <span class="at">wdi_pop_mill =</span> wdi_pop <span class="sc">/</span> <span class="dv">1000000</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1,020 x 13
##    country    year quarter president       
##    &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;           
##  1 Argentina  2000       1 Fernando de la ~
##  2 Argentina  2000       2 Fernando de la ~
##  3 Argentina  2000       3 Fernando de la ~
##  4 Argentina  2000       4 Fernando de la ~
##  5 Argentina  2001       1 Fernando de la ~
##  6 Argentina  2001       2 Fernando de la ~
##  7 Argentina  2001       3 Fernando de la ~
##  8 Argentina  2001       4 Fernando de la ~
##  9 Argentina  2002       1 Eduardo Alberto~
## 10 Argentina  2002       2 Eduardo Alberto~
## # ... with 1,010 more rows, and 9 more
## #   variables: net_approval &lt;dbl&gt;,
## #   pres_sex &lt;chr&gt;, pres_sex_d &lt;dbl&gt;,
## #   exec_corr &lt;dbl&gt;, gdp_growth &lt;dbl&gt;,
## #   unemp &lt;dbl&gt;, wdi_gdp &lt;dbl&gt;,
## #   wdi_pop &lt;dbl&gt;, wdi_pop_mill &lt;dbl&gt;</code></pre>
</div>
<div id="transformaciones-con-múltiples-variables" class="section level6">
<h6>Transformaciones con múltiples variables</h6>
<p>Crucialmente, podemos generar operaciones entre las variables. Por ejemplo, calculemos el GDP <em>per capita</em>:</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="manejo-02a.html#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(df_aprob, <span class="at">wdi_gdp_pc =</span> wdi_gdp <span class="sc">/</span> wdi_pop)</span></code></pre></div>
<pre><code>## # A tibble: 1,020 x 13
##    country    year quarter president       
##    &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;           
##  1 Argentina  2000       1 Fernando de la ~
##  2 Argentina  2000       2 Fernando de la ~
##  3 Argentina  2000       3 Fernando de la ~
##  4 Argentina  2000       4 Fernando de la ~
##  5 Argentina  2001       1 Fernando de la ~
##  6 Argentina  2001       2 Fernando de la ~
##  7 Argentina  2001       3 Fernando de la ~
##  8 Argentina  2001       4 Fernando de la ~
##  9 Argentina  2002       1 Eduardo Alberto~
## 10 Argentina  2002       2 Eduardo Alberto~
## # ... with 1,010 more rows, and 9 more
## #   variables: net_approval &lt;dbl&gt;,
## #   pres_sex &lt;chr&gt;, pres_sex_d &lt;dbl&gt;,
## #   exec_corr &lt;dbl&gt;, gdp_growth &lt;dbl&gt;,
## #   unemp &lt;dbl&gt;, wdi_gdp &lt;dbl&gt;,
## #   wdi_pop &lt;dbl&gt;, wdi_gdp_pc &lt;dbl&gt;</code></pre>
</div>
<div id="varias-transformaciones-a-la-vez" class="section level6">
<h6>Varias transformaciones a la vez:</h6>
<p>Algo como lo siguiente funcionará:</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="manejo-02a.html#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(df_aprob, </span>
<span id="cb130-2"><a href="manejo-02a.html#cb130-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">wdi_pop_mill =</span> wdi_pop <span class="sc">/</span> <span class="dv">1000000</span>,</span>
<span id="cb130-3"><a href="manejo-02a.html#cb130-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">wdi_gdp_pc   =</span> wdi_gdp <span class="sc">/</span> wdi_pop)</span></code></pre></div>
<pre><code>## # A tibble: 1,020 x 14
##    country    year quarter president       
##    &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;           
##  1 Argentina  2000       1 Fernando de la ~
##  2 Argentina  2000       2 Fernando de la ~
##  3 Argentina  2000       3 Fernando de la ~
##  4 Argentina  2000       4 Fernando de la ~
##  5 Argentina  2001       1 Fernando de la ~
##  6 Argentina  2001       2 Fernando de la ~
##  7 Argentina  2001       3 Fernando de la ~
##  8 Argentina  2001       4 Fernando de la ~
##  9 Argentina  2002       1 Eduardo Alberto~
## 10 Argentina  2002       2 Eduardo Alberto~
## # ... with 1,010 more rows, and 10 more
## #   variables: net_approval &lt;dbl&gt;,
## #   pres_sex &lt;chr&gt;, pres_sex_d &lt;dbl&gt;,
## #   exec_corr &lt;dbl&gt;, gdp_growth &lt;dbl&gt;,
## #   unemp &lt;dbl&gt;, wdi_gdp &lt;dbl&gt;,
## #   wdi_pop &lt;dbl&gt;, wdi_pop_mill &lt;dbl&gt;,
## #   wdi_gdp_pc &lt;dbl&gt;</code></pre>
</div>
</div>
<div id="ejercicio-d-1" class="section level4">
<h4>(Ejercicio D)</h4>
<p>Crea un nuevo <em>data frame</em>, que esté ordenado desde el país-año-trimeste con menor aprobación presidencial al con mayor aprobación presidencial (recuerda <em>crear</em> el nuevo objeto y ponerle un buen nombre!). Tu código:</p>
<p>En tu nuevo objeto, obtén solo con las observaciones que tengan presidentas. Tu código:</p>
<p>Crea una nueva variable, que registre el desempleo como proporción en vez de porcentaje. Tu código:</p>
</div>
</div>
<div id="agregarcolapsar-con-summarize-hacer-operaciones-por-grupos-con-group_by" class="section level2">
<h2>Agregar/colapsar con <code>summarize()</code> / hacer operaciones por grupos con <code>group_by()</code></h2>
<p>Podemos hacer resúmenes para la base de datos con <code>summarize</code>:</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="manejo-02a.html#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarize</span>(df_aprob, <span class="at">prom_desemp =</span> <span class="fu">mean</span>(unemp))</span></code></pre></div>
<pre><code>## # A tibble: 1 x 1
##   prom_desemp
##         &lt;dbl&gt;
## 1        7.04</code></pre>
<p>Como antes, podemos hacer varios a la vez:</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="manejo-02a.html#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarize</span>(df_aprob, </span>
<span id="cb134-2"><a href="manejo-02a.html#cb134-2" aria-hidden="true" tabindex="-1"></a>          <span class="at">prom_desemp   =</span> <span class="fu">mean</span>(unemp),</span>
<span id="cb134-3"><a href="manejo-02a.html#cb134-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">prom_crec     =</span> <span class="fu">mean</span>(gdp_growth),</span>
<span id="cb134-4"><a href="manejo-02a.html#cb134-4" aria-hidden="true" tabindex="-1"></a>          <span class="at">prom_aprob    =</span> <span class="fu">mean</span>(net_approval))</span></code></pre></div>
<pre><code>## # A tibble: 1 x 3
##   prom_desemp prom_crec prom_aprob
##         &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;
## 1        7.04      3.77       15.3</code></pre>
<div id="resúmenes-agrupados" class="section level4">
<h4>Resúmenes agrupados</h4>
<p>Lo realmente interesante es hacer resúmenes por grupos. Primero debemos tener una versión “agrupada” de la base de datos. Esta es igual que nuestra base original, pero R sabe que las siguientes operaciones que realicemos en ella deberán ser agrupadas (veamos la ligera diferencia cuando hacemos un resumen con <code>glimpse()</code>)</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="manejo-02a.html#cb136-1" aria-hidden="true" tabindex="-1"></a>df_aprob_por_pais <span class="ot">&lt;-</span> <span class="fu">group_by</span>(df_aprob, country)</span>
<span id="cb136-2"><a href="manejo-02a.html#cb136-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(df_aprob_por_pais)</span></code></pre></div>
<pre><code>## Rows: 1,020
## Columns: 12
## Groups: country [17]
## $ country      &lt;chr&gt; &quot;Argentina&quot;, &quot;Argent~
## $ year         &lt;dbl&gt; 2000, 2000, 2000, 20~
## $ quarter      &lt;dbl&gt; 1, 2, 3, 4, 1, 2, 3,~
## $ president    &lt;chr&gt; &quot;Fernando de la Rúa&quot;~
## $ net_approval &lt;dbl&gt; 40.126, 16.390, 23.9~
## $ pres_sex     &lt;chr&gt; &quot;male&quot;, &quot;male&quot;, &quot;mal~
## $ pres_sex_d   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0,~
## $ exec_corr    &lt;dbl&gt; 14.01525, 14.01525, ~
## $ gdp_growth   &lt;dbl&gt; -0.8, -0.8, -0.8, -0~
## $ unemp        &lt;dbl&gt; 15.00, 15.00, 15.00,~
## $ wdi_gdp      &lt;dbl&gt; 552151219031, 552151~
## $ wdi_pop      &lt;dbl&gt; 37057452, 37057452, ~</code></pre>
<p>Hagamos una operación de resumen en esta nueva base:</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="manejo-02a.html#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarize</span>(df_aprob_por_pais, </span>
<span id="cb138-2"><a href="manejo-02a.html#cb138-2" aria-hidden="true" tabindex="-1"></a>          <span class="at">prom_desemp   =</span> <span class="fu">mean</span>(unemp),</span>
<span id="cb138-3"><a href="manejo-02a.html#cb138-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">prom_crec     =</span> <span class="fu">mean</span>(gdp_growth),</span>
<span id="cb138-4"><a href="manejo-02a.html#cb138-4" aria-hidden="true" tabindex="-1"></a>          <span class="at">prom_aprob    =</span> <span class="fu">mean</span>(net_approval))</span></code></pre></div>
<pre><code>## # A tibble: 17 x 4
##    country prom_desemp prom_crec prom_aprob
##    &lt;chr&gt;         &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;
##  1 Argent~       11.0       2.72      16.7 
##  2 Bolivia        3.70      4.24      11.3 
##  3 Brazil         8.35      3.4       34.2 
##  4 Chile          8.18      4.33       5.71
##  5 Colomb~       12.5       4.35      27.1 
##  6 Costa ~        6.73      4.15      14.5 
##  7 Ecuador        6.76      4.31      37.1 
##  8 El Sal~        5.75      1.87      39.1 
##  9 Guatem~        2.80      3.47       5.44
## 10 Hondur~        4.22      4.08      12.7 
## 11 Mexico         3.99      2.10      28.9 
## 12 Nicara~        6.78      3.73      16.2 
## 13 Panama         8.45      6.31      14.2 
## 14 Paragu~        5.69      3.66      10.9 
## 15 Peru           4.32      5.30     -26.2 
## 16 Uruguay       10.3       3.08      26.9 
## 17 Venezu~       10.3       3.04     -14.8</code></pre>
</div>
</div>
<div id="hacer-cadenas-de-operaciones-con-las-pipes" class="section level2">
<h2>Hacer cadenas de operaciones con las pipes (<code>%&gt;%</code>)</h2>
<p>La mayor parte del tiempo queremos hacer <strong>más de una operación</strong> en una base de datos. Por ejemplo, podríamos querer (1) crear una nueva variable con PIB per capita, y luego (2) filtrar las observaciones con valores iguales o mayores a la media de PIB per capita en toda la base:</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="manejo-02a.html#cb140-1" aria-hidden="true" tabindex="-1"></a>df_aprob_con_pib_pc <span class="ot">&lt;-</span> <span class="fu">mutate</span>(df_aprob, <span class="at">pib_pc =</span> wdi_gdp <span class="sc">/</span> wdi_pop)</span>
<span id="cb140-2"><a href="manejo-02a.html#cb140-2" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df_aprob_con_pib_pc, pib_pc <span class="sc">&gt;</span> <span class="fu">mean</span>(pib_pc))</span></code></pre></div>
<pre><code>## # A tibble: 492 x 13
##    country    year quarter president       
##    &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;           
##  1 Argentina  2000       1 Fernando de la ~
##  2 Argentina  2000       2 Fernando de la ~
##  3 Argentina  2000       3 Fernando de la ~
##  4 Argentina  2000       4 Fernando de la ~
##  5 Argentina  2001       1 Fernando de la ~
##  6 Argentina  2001       2 Fernando de la ~
##  7 Argentina  2001       3 Fernando de la ~
##  8 Argentina  2001       4 Fernando de la ~
##  9 Argentina  2002       1 Eduardo Alberto~
## 10 Argentina  2002       2 Eduardo Alberto~
## # ... with 482 more rows, and 9 more
## #   variables: net_approval &lt;dbl&gt;,
## #   pres_sex &lt;chr&gt;, pres_sex_d &lt;dbl&gt;,
## #   exec_corr &lt;dbl&gt;, gdp_growth &lt;dbl&gt;,
## #   unemp &lt;dbl&gt;, wdi_gdp &lt;dbl&gt;,
## #   wdi_pop &lt;dbl&gt;, pib_pc &lt;dbl&gt;</code></pre>
<p>Esta misma cadena de operaciones se puede escribir de la siguiente forma:</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="manejo-02a.html#cb142-1" aria-hidden="true" tabindex="-1"></a>df_aprob <span class="sc">%&gt;%</span> </span>
<span id="cb142-2"><a href="manejo-02a.html#cb142-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pib_pc =</span> wdi_gdp <span class="sc">/</span> wdi_pop) <span class="sc">%&gt;%</span> </span>
<span id="cb142-3"><a href="manejo-02a.html#cb142-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(pib_pc <span class="sc">&gt;</span> <span class="fu">mean</span>(pib_pc))</span></code></pre></div>
<pre><code>## # A tibble: 492 x 13
##    country    year quarter president       
##    &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;           
##  1 Argentina  2000       1 Fernando de la ~
##  2 Argentina  2000       2 Fernando de la ~
##  3 Argentina  2000       3 Fernando de la ~
##  4 Argentina  2000       4 Fernando de la ~
##  5 Argentina  2001       1 Fernando de la ~
##  6 Argentina  2001       2 Fernando de la ~
##  7 Argentina  2001       3 Fernando de la ~
##  8 Argentina  2001       4 Fernando de la ~
##  9 Argentina  2002       1 Eduardo Alberto~
## 10 Argentina  2002       2 Eduardo Alberto~
## # ... with 482 more rows, and 9 more
## #   variables: net_approval &lt;dbl&gt;,
## #   pres_sex &lt;chr&gt;, pres_sex_d &lt;dbl&gt;,
## #   exec_corr &lt;dbl&gt;, gdp_growth &lt;dbl&gt;,
## #   unemp &lt;dbl&gt;, wdi_gdp &lt;dbl&gt;,
## #   wdi_pop &lt;dbl&gt;, pib_pc &lt;dbl&gt;</code></pre>
<p>¡Este código es sorprendemente legible! Las pipes (<code>%&gt;%</code>) se leen como “luego” (o “pero luego”) y se insertan con Ctrl/Cmd + Shift + M en RStudio. Pueden ver todos los atajos de teclado en Help &gt; Keyboard Shortcuts Help.</p>
<p>Uno de los usos más comunes de las pipes es el combo <code>group_by()</code> + <code>summarize()</code>. Repitamos nuestras operaciones de antes para hacer un resumen agrupado:</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="manejo-02a.html#cb144-1" aria-hidden="true" tabindex="-1"></a>df_aprob <span class="sc">%&gt;%</span> </span>
<span id="cb144-2"><a href="manejo-02a.html#cb144-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country) <span class="sc">%&gt;%</span> </span>
<span id="cb144-3"><a href="manejo-02a.html#cb144-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">prom_desemp   =</span> <span class="fu">mean</span>(unemp),</span>
<span id="cb144-4"><a href="manejo-02a.html#cb144-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">prom_crec     =</span> <span class="fu">mean</span>(gdp_growth),</span>
<span id="cb144-5"><a href="manejo-02a.html#cb144-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">prom_aprob    =</span> <span class="fu">mean</span>(net_approval))</span></code></pre></div>
<pre><code>## # A tibble: 17 x 4
##    country prom_desemp prom_crec prom_aprob
##    &lt;chr&gt;         &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;
##  1 Argent~       11.0       2.72      16.7 
##  2 Bolivia        3.70      4.24      11.3 
##  3 Brazil         8.35      3.4       34.2 
##  4 Chile          8.18      4.33       5.71
##  5 Colomb~       12.5       4.35      27.1 
##  6 Costa ~        6.73      4.15      14.5 
##  7 Ecuador        6.76      4.31      37.1 
##  8 El Sal~        5.75      1.87      39.1 
##  9 Guatem~        2.80      3.47       5.44
## 10 Hondur~        4.22      4.08      12.7 
## 11 Mexico         3.99      2.10      28.9 
## 12 Nicara~        6.78      3.73      16.2 
## 13 Panama         8.45      6.31      14.2 
## 14 Paragu~        5.69      3.66      10.9 
## 15 Peru           4.32      5.30     -26.2 
## 16 Uruguay       10.3       3.08      26.9 
## 17 Venezu~       10.3       3.04     -14.8</code></pre>
<div id="ejercicios-e-g" class="section level4">
<h4>(Ejercicios E-G)</h4>
<p>E. Calcula, ayudándote de las pipes, la mediana por país de corrupción ejecutiva y PIB. Recuerda que puedes insertar chunks con Ctrl/Cmd + Alt + i y pipes con Ctrl/Cmd + Shift + M. Tu código:</p>
<p>F. De nuevo usando pipes, ordena los países en la base desde el que tuvo el mayor PIB per cápita promedio en el período 2010-2014 hasta el que tuvo el menor. Tu código:</p>
<p>G. ¿Qué país-año-trimestre, entre los gobernados por mujeres, tuvo la corrupción ejecutiva más alta? ¿Y la aprobación neta más alta?</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="rbasico.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="manejo-02b.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "serif",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
},
"search": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>

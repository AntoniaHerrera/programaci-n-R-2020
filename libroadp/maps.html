<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 16 Mapas y datos espaciales | AnalizaR Datos Políticos</title>
  <meta name="description" content="Capítulo 16 Mapas y datos espaciales | AnalizaR Datos Políticos" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 16 Mapas y datos espaciales | AnalizaR Datos Políticos" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 16 Mapas y datos espaciales | AnalizaR Datos Políticos" />
  
  
  

<meta name="author" content="Francisco Urdinez y Andrés Cruz Labrín (Editores)" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="prev" href="indexes.html"/>
<link rel="next" href="respuestas-ejercicios.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script>
% https://stackoverflow.com/a/4425214/8242291
var links = document.links;

for (var i = 0, linksLength = links.length; i < linksLength; i++) {

    if (links[i].hostname != window.location.hostname) {
        links[i].target = '_blank';
    }

}
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #2a211c;
    color: #bdae9d;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #bdae9d;  padding-left: 4px; }
div.sourceCode
  { color: #bdae9d; background-color: #2a211c; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ffff00; } /* Alert */
code span.an { color: #0066ff; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #44aa43; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #43a8ed; font-weight: bold; } /* ControlFlow */
code span.ch { color: #049b0a; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #0066ff; font-weight: bold; font-style: italic; } /* Comment */
code span.do { color: #0066ff; font-style: italic; } /* Documentation */
code span.dt { text-decoration: underline; } /* DataType */
code span.dv { color: #44aa43; } /* DecVal */
code span.er { color: #ffff00; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #44aa43; } /* Float */
code span.fu { color: #ff9358; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #0066ff; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #43a8ed; font-weight: bold; } /* Keyword */
code span.op { } /* Operator */
code span.pp { font-weight: bold; } /* Preprocessor */
code span.sc { color: #049b0a; } /* SpecialChar */
code span.ss { color: #049b0a; } /* SpecialString */
code span.st { color: #049b0a; } /* String */
code span.va { } /* Variable */
code span.vs { color: #049b0a; } /* VerbatimString */
code span.wa { color: #ffff00; font-weight: bold; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><b><a href="./index.html"><img style="float: left; margin-right: 5px;" src="favicon.ico"></img>AnalizaR datos políticos</a></b></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introducción</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#inicio"><i class="fa fa-check"></i>Inicio</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#cómo-contribuir"><i class="fa fa-check"></i>¿Cómo contribuir?</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#sobre-los-autores-y-autoras"><i class="fa fa-check"></i>Sobre los autores y autoras</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#prefacio"><i class="fa fa-check"></i>Prefacio</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#agradecimientos"><i class="fa fa-check"></i>Agradecimientos</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#qué-esperar-del-libro"><i class="fa fa-check"></i>Qué esperar del libro</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#estructura-del-libro"><i class="fa fa-check"></i>Estructura del libro</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#cómo-utilizar-el-libro-en-un-curso-de-métodos"><i class="fa fa-check"></i>¿Cómo utilizar el libro en un curso de métodos?</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#primera-opción-curso-semestral-de-análisis-de-datos-políticos"><i class="fa fa-check"></i>Primera opción: Curso semestral de análisis de datos políticos</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#segunda-opción-curso-semestral-de-introducción-a-métodos-cuantitativos"><i class="fa fa-check"></i>Segunda opción: Curso semestral de introducción a métodos cuantitativos</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#prerrequisitos"><i class="fa fa-check"></i>Prerrequisitos</a></li>
</ul></li>
<li class="part"><span><b>I Introducción a R</b></span></li>
<li class="chapter" data-level="1" data-path="basic-r.html"><a href="basic-r.html"><i class="fa fa-check"></i><b>1</b> R Básico</a>
<ul>
<li class="chapter" data-level="1.1" data-path="basic-r.html"><a href="basic-r.html#instalación"><i class="fa fa-check"></i><b>1.1</b> Instalación</a>
<ul>
<li class="chapter" data-level="" data-path="basic-r.html"><a href="basic-r.html#r"><i class="fa fa-check"></i>R</a></li>
<li class="chapter" data-level="" data-path="basic-r.html"><a href="basic-r.html#rstudio"><i class="fa fa-check"></i>RStudio</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="basic-r.html"><a href="basic-r.html#consola"><i class="fa fa-check"></i><b>1.2</b> Consola</a></li>
<li class="chapter" data-level="1.3" data-path="basic-r.html"><a href="basic-r.html#script"><i class="fa fa-check"></i><b>1.3</b> Script</a></li>
<li class="chapter" data-level="1.4" data-path="basic-r.html"><a href="basic-r.html#objetos-y-funciones"><i class="fa fa-check"></i><b>1.4</b> Objetos (y funciones)</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="basic-r.html"><a href="basic-r.html#vectores"><i class="fa fa-check"></i><b>1.4.1</b> Vectores</a></li>
<li class="chapter" data-level="1.4.2" data-path="basic-r.html"><a href="basic-r.html#basic-r-functions"><i class="fa fa-check"></i><b>1.4.2</b> Functions</a></li>
<li class="chapter" data-level="1.4.3" data-path="basic-r.html"><a href="basic-r.html#archivos-gráficos-paquetes-ayuda"><i class="fa fa-check"></i><b>1.4.3</b> Archivos / gráficos / paquetes / ayuda</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>2</b> Manejo de datos</a>
<ul>
<li class="chapter" data-level="" data-path="data.html"><a href="data.html#los-paquetes-que-necesitas-instalar"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="2.1" data-path="data.html"><a href="data.html#introducción-al-manejo-de-datos"><i class="fa fa-check"></i><b>2.1</b> Introducción al manejo de datos</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="data.html"><a href="data.html#nuestra-base-de-datos"><i class="fa fa-check"></i><b>2.1.1</b> Nuestra base de datos</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data.html"><a href="data.html#describiendo-una-base-de-datos"><i class="fa fa-check"></i><b>2.2</b> Describiendo una base de datos</a></li>
<li class="chapter" data-level="2.3" data-path="data.html"><a href="data.html#operaciones-básicas"><i class="fa fa-check"></i><b>2.3</b> Operaciones básicas</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="data.html"><a href="data.html#seleccionar-columnas"><i class="fa fa-check"></i><b>2.3.1</b> Seleccionar columnas</a></li>
<li class="chapter" data-level="2.3.2" data-path="data.html"><a href="data.html#renombra-las-columnas"><i class="fa fa-check"></i><b>2.3.2</b> Renombra las columnas</a></li>
<li class="chapter" data-level="2.3.3" data-path="data.html"><a href="data.html#filtrar-las-observaciones"><i class="fa fa-check"></i><b>2.3.3</b> Filtrar las observaciones</a></li>
<li class="chapter" data-level="2.3.4" data-path="data.html"><a href="data.html#cambiar-el-orden-de-una-base-de-datos"><i class="fa fa-check"></i><b>2.3.4</b> Cambiar el orden de una base de datos</a></li>
<li class="chapter" data-level="2.3.5" data-path="data.html"><a href="data.html#transformar-y-crear-variables"><i class="fa fa-check"></i><b>2.3.5</b> Transformar y crear variables</a></li>
<li class="chapter" data-level="2.3.6" data-path="data.html"><a href="data.html#resúmenes"><i class="fa fa-check"></i><b>2.3.6</b> Resúmenes</a></li>
<li class="chapter" data-level="2.3.7" data-path="data.html"><a href="data.html#resúmenes-por-grupo"><i class="fa fa-check"></i><b>2.3.7</b> Resúmenes por grupo</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="data.html"><a href="data.html#comandos-en-cadena"><i class="fa fa-check"></i><b>2.4</b> Comandos en cadena</a></li>
<li class="chapter" data-level="2.5" data-path="data.html"><a href="data.html#data-recodificar"><i class="fa fa-check"></i><b>2.5</b> Recodificar valores</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="data.html"><a href="data.html#data-pivot"><i class="fa fa-check"></i><b>2.5.1</b> Pivoteo de datos</a></li>
<li class="chapter" data-level="2.5.2" data-path="data.html"><a href="data.html#bases-de-datos-anchas-con-más-de-una-variable-de-interés"><i class="fa fa-check"></i><b>2.5.2</b> Bases de datos anchas con más de una variable de interés</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="dataviz.html"><a href="dataviz.html"><i class="fa fa-check"></i><b>3</b> Visualización de datos</a>
<ul>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#lecturas-sugeridas"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#los-paquetes-que-necesitas-instalar-1"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="3.1" data-path="dataviz.html"><a href="dataviz.html#por-qué-visualizar-mis-datos"><i class="fa fa-check"></i><b>3.1</b> ¿Por qué visualizar mis datos?</a></li>
<li class="chapter" data-level="3.2" data-path="dataviz.html"><a href="dataviz.html#primeros-pasos"><i class="fa fa-check"></i><b>3.2</b> Primeros pasos</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="dataviz.html"><a href="dataviz.html#las-capas-del-universo-ggplotiano"><i class="fa fa-check"></i><b>3.2.1</b> Las capas del “universo ggplotiano”</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="dataviz.html"><a href="dataviz.html#ejemplo-aplicado-elecciones-locales-y-visualización-de-datos"><i class="fa fa-check"></i><b>3.3</b> Ejemplo aplicado: Elecciones locales y visualización de datos</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="dataviz.html"><a href="dataviz.html#gráfico-de-barras"><i class="fa fa-check"></i><b>3.3.1</b> Gráfico de barras</a></li>
<li class="chapter" data-level="3.3.2" data-path="dataviz.html"><a href="dataviz.html#gráfico-de-líneas"><i class="fa fa-check"></i><b>3.3.2</b> Gráfico de líneas</a></li>
<li class="chapter" data-level="3.3.3" data-path="dataviz.html"><a href="dataviz.html#gráfico-de-caja"><i class="fa fa-check"></i><b>3.3.3</b> Gráfico de caja</a></li>
<li class="chapter" data-level="3.3.4" data-path="dataviz.html"><a href="dataviz.html#histograma"><i class="fa fa-check"></i><b>3.3.4</b> Histograma</a></li>
<li class="chapter" data-level="3.3.5" data-path="dataviz.html"><a href="dataviz.html#relación-entre-las-variables"><i class="fa fa-check"></i><b>3.3.5</b> Relación entre las variables</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="dataviz.html"><a href="dataviz.html#para-continuar-aprendiendo"><i class="fa fa-check"></i><b>3.4</b> Para continuar aprendiendo</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="load.html"><a href="load.html"><i class="fa fa-check"></i><b>4</b> Carga de bases</a>
<ul>
<li class="chapter" data-level="" data-path="load.html"><a href="load.html#los-paquetes-que-necesitas-instalar-2"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="4.1" data-path="load.html"><a href="load.html#load-intro"><i class="fa fa-check"></i><b>4.1</b> Introducción</a></li>
<li class="chapter" data-level="4.2" data-path="load.html"><a href="load.html#carga-formatos"><i class="fa fa-check"></i><b>4.2</b> Diferentes formatos de bases de datos</a></li>
<li class="chapter" data-level="4.3" data-path="load.html"><a href="load.html#los-archivos-separados-por-delimitadores-.csv-y-.tsv"><i class="fa fa-check"></i><b>4.3</b> Los archivos separados por delimitadores (.csv y .tsv)</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="load.html"><a href="load.html#r-básico-utils"><i class="fa fa-check"></i><b>4.3.1</b> R básico: <code>utils</code></a></li>
<li class="chapter" data-level="4.3.2" data-path="load.html"><a href="load.html#load-r"><i class="fa fa-check"></i><b>4.3.2</b> Archivos creados con R (.Rdata y .rds)</a></li>
<li class="chapter" data-level="4.3.3" data-path="load.html"><a href="load.html#load-labels"><i class="fa fa-check"></i><b>4.3.3</b> Bases de datos con etiquetas (de Stata or SPSS)</a></li>
<li class="chapter" data-level="4.3.4" data-path="load.html"><a href="load.html#load-excel"><i class="fa fa-check"></i><b>4.3.4</b> Archivos de Excel</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="load.html"><a href="load.html#load-large"><i class="fa fa-check"></i><b>4.4</b> Grandes bases de datos tabulares</a></li>
</ul></li>
<li class="part"><span><b>II Modelos</b></span></li>
<li class="chapter" data-level="5" data-path="linear.html"><a href="linear.html"><i class="fa fa-check"></i><b>5</b> Modelos lineales</a>
<ul>
<li class="chapter" data-level="" data-path="linear.html"><a href="linear.html#lecturas-sugeridas-1"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="linear.html"><a href="linear.html#los-paquetes-que-necesitas-instalar-3"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="" data-path="linear.html"><a href="linear.html#introducción-1"><i class="fa fa-check"></i>Introducción</a></li>
<li class="chapter" data-level="5.1" data-path="linear.html"><a href="linear.html#mínimos-cuadrados-ordinarios-en-r"><i class="fa fa-check"></i><b>5.1</b> Mínimos cuadrados ordinarios en R</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="linear.html"><a href="linear.html#cómo-obtener-estadísticas-descriptivas"><i class="fa fa-check"></i><b>5.1.1</b> Cómo obtener estadísticas descriptivas</a></li>
<li class="chapter" data-level="5.1.2" data-path="linear.html"><a href="linear.html#estadísticas-descriptivas-y-distribución-de-las-variables-en-el-modelo"><i class="fa fa-check"></i><b>5.1.2</b> Estadísticas descriptivas y distribución de las variables en el modelo</a></li>
<li class="chapter" data-level="5.1.3" data-path="linear.html"><a href="linear.html#matriz-de-correlación-de-variables-independientes"><i class="fa fa-check"></i><b>5.1.3</b> Matriz de correlación de variables independientes</a></li>
<li class="chapter" data-level="5.1.4" data-path="linear.html"><a href="linear.html#distribución-de-las-variables-de-interés"><i class="fa fa-check"></i><b>5.1.4</b> Distribución de las variables de interés</a></li>
<li class="chapter" data-level="5.1.5" data-path="linear.html"><a href="linear.html#relación-entre-la-variable-dependiente-e-independiente"><i class="fa fa-check"></i><b>5.1.5</b> Relación entre la variable dependiente e independiente</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="linear.html"><a href="linear.html#modelo-bivariado-regresión-lineal-simple"><i class="fa fa-check"></i><b>5.2</b> Modelo bivariado: regresión lineal simple</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="linear.html"><a href="linear.html#la-función-lm"><i class="fa fa-check"></i><b>5.2.1</b> La función <code>lm</code></a></li>
<li class="chapter" data-level="5.2.2" data-path="linear.html"><a href="linear.html#representación-gráfica"><i class="fa fa-check"></i><b>5.2.2</b> Representación gráfica</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="linear.html"><a href="linear.html#modelo-multivariado-regresión-múltiple"><i class="fa fa-check"></i><b>5.3</b> Modelo multivariado: regresión múltiple</a></li>
<li class="chapter" data-level="5.4" data-path="linear.html"><a href="linear.html#ajuste-del-modelo"><i class="fa fa-check"></i><b>5.4</b> Ajuste del modelo</a></li>
<li class="chapter" data-level="5.5" data-path="linear.html"><a href="linear.html#inferencia-en-los-modelos-lineales-múltiples"><i class="fa fa-check"></i><b>5.5</b> Inferencia en los modelos lineales múltiples</a></li>
<li class="chapter" data-level="5.6" data-path="linear.html"><a href="linear.html#testeando-los-supuestos-de-mco"><i class="fa fa-check"></i><b>5.6</b> Testeando los supuestos de MCO</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="case-sel.html"><a href="case-sel.html"><i class="fa fa-check"></i><b>6</b> Selección de casos basada en regresiones</a>
<ul>
<li class="chapter" data-level="" data-path="case-sel.html"><a href="case-sel.html#lecturas-sugeridas-2"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="case-sel.html"><a href="case-sel.html#los-paquetes-que-necesitas-instalar-4"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="6.1" data-path="case-sel.html"><a href="case-sel.html#selección-de-estudios-de-casos"><i class="fa fa-check"></i><b>6.1</b> Selección de estudios de casos</a></li>
<li class="chapter" data-level="6.2" data-path="case-sel.html"><a href="case-sel.html#qué-estudio-de-caso-debería-seleccionar-para-la-investigación-cualitativa"><i class="fa fa-check"></i><b>6.2</b> ¿Qué estudio de caso debería seleccionar para la investigación cualitativa?</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="case-sel.html"><a href="case-sel.html#casos-típicos"><i class="fa fa-check"></i><b>6.2.1</b> Casos típicos</a></li>
<li class="chapter" data-level="6.2.2" data-path="case-sel.html"><a href="case-sel.html#los-valores-atípicos"><i class="fa fa-check"></i><b>6.2.2</b> Los valores atípicos</a></li>
<li class="chapter" data-level="6.2.3" data-path="case-sel.html"><a href="case-sel.html#casos-influyentes"><i class="fa fa-check"></i><b>6.2.3</b> Casos influyentes</a></li>
<li class="chapter" data-level="6.2.4" data-path="case-sel.html"><a href="case-sel.html#casos-extremos"><i class="fa fa-check"></i><b>6.2.4</b> Casos extremos</a></li>
<li class="chapter" data-level="6.2.5" data-path="case-sel.html"><a href="case-sel.html#casos-más-similares"><i class="fa fa-check"></i><b>6.2.5</b> Casos más similares</a></li>
<li class="chapter" data-level="6.2.6" data-path="case-sel.html"><a href="case-sel.html#casos-mas-diferentes"><i class="fa fa-check"></i><b>6.2.6</b> Casos mas diferentes</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="case-sel.html"><a href="case-sel.html#la-importancia-de-la-combinación-de-métodos"><i class="fa fa-check"></i><b>6.3</b> La importancia de la combinación de métodos</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="panel.html"><a href="panel.html"><i class="fa fa-check"></i><b>7</b> Modelos de panel</a>
<ul>
<li class="chapter" data-level="" data-path="panel.html"><a href="panel.html#lecturas-sugeridas-3"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="panel.html"><a href="panel.html#los-paquetes-que-necesitas-instalar-5"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="7.1" data-path="panel.html"><a href="panel.html#introducción-2"><i class="fa fa-check"></i><b>7.1</b> Introducción</a></li>
<li class="chapter" data-level="7.2" data-path="panel.html"><a href="panel.html#describiendo-la-base-de-datos-en-panel"><i class="fa fa-check"></i><b>7.2</b> Describiendo la base de datos en panel</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="panel.html"><a href="panel.html#opción-a.-gráfico-de-líneas"><i class="fa fa-check"></i><b>7.2.1</b> Opción A. Gráfico de líneas</a></li>
<li class="chapter" data-level="7.2.2" data-path="panel.html"><a href="panel.html#option-b.-gráfico-de-cajas"><i class="fa fa-check"></i><b>7.2.2</b> Option B. Gráfico de cajas</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="panel.html"><a href="panel.html#modelización-de-la-variación-a-nivel-de-grupo"><i class="fa fa-check"></i><b>7.3</b> Modelización de la variación a nivel de grupo</a></li>
<li class="chapter" data-level="7.4" data-path="panel.html"><a href="panel.html#efectos-fijos-vs.-efectos-aleatorios"><i class="fa fa-check"></i><b>7.4</b> Efectos fijos vs. efectos aleatorios</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="panel.html"><a href="panel.html#test-de-hausman"><i class="fa fa-check"></i><b>7.4.1</b> Test de Hausman</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="panel.html"><a href="panel.html#testeando-raíces-unitarias"><i class="fa fa-check"></i><b>7.5</b> Testeando raíces unitarias</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="panel.html"><a href="panel.html#creación-de-variables-rezagadas-lags-y-variables-prospectivas-leads"><i class="fa fa-check"></i><b>7.5.1</b> Creación de variables rezagadas (<em>lags</em>) y variables prospectivas (<em>leads</em>)</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="panel.html"><a href="panel.html#errores-estándar-robustos-corregidos-para-panel"><i class="fa fa-check"></i><b>7.6</b> Errores estándar robustos corregidos para panel</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="panel.html"><a href="panel.html#errores-estándar-robustos-1"><i class="fa fa-check"></i><b>7.6.1</b> Errores estándar robustos</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="logit.html"><a href="logit.html"><i class="fa fa-check"></i><b>8</b> Modelos logísticos</a>
<ul>
<li class="chapter" data-level="" data-path="logit.html"><a href="logit.html#lecturas-sugeridas-4"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="logit.html"><a href="logit.html#los-paquetes-que-necesitas-instalar-6"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="8.1" data-path="logit.html"><a href="logit.html#introducción-3"><i class="fa fa-check"></i><b>8.1</b> Introducción</a></li>
<li class="chapter" data-level="8.2" data-path="logit.html"><a href="logit.html#uso-de-los-modelos-logísticos"><i class="fa fa-check"></i><b>8.2</b> Uso de los modelos logísticos</a></li>
<li class="chapter" data-level="8.3" data-path="logit.html"><a href="logit.html#cómo-se-estiman-las-probabilidades"><i class="fa fa-check"></i><b>8.3</b> ¿Cómo se estiman las probabilidades?</a></li>
<li class="chapter" data-level="8.4" data-path="logit.html"><a href="logit.html#estimación-de-los-modelos"><i class="fa fa-check"></i><b>8.4</b> Estimación de los modelos</a></li>
<li class="chapter" data-level="8.5" data-path="logit.html"><a href="logit.html#creando-tablas"><i class="fa fa-check"></i><b>8.5</b> Creando tablas</a></li>
<li class="chapter" data-level="8.6" data-path="logit.html"><a href="logit.html#representación-visual-de-los-resultados"><i class="fa fa-check"></i><b>8.6</b> Representación visual de los resultados</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="logit.html"><a href="logit.html#visualización-de-las-interacciones-entre-las-variables"><i class="fa fa-check"></i><b>8.6.1</b> Visualización de las interacciones entre las variables</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="logit.html"><a href="logit.html#medidas-para-evaluar-el-ajuste-de-los-modelos"><i class="fa fa-check"></i><b>8.7</b> Medidas para evaluar el ajuste de los modelos</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="surv.html"><a href="surv.html"><i class="fa fa-check"></i><b>9</b> Modelos de supervivencia</a>
<ul>
<li class="chapter" data-level="" data-path="surv.html"><a href="surv.html#lecturas-sugeridas-5"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="surv.html"><a href="surv.html#los-paquetes-que-necesitas-instalar-7"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="9.1" data-path="surv.html"><a href="surv.html#introducción-4"><i class="fa fa-check"></i><b>9.1</b> Introducción</a></li>
<li class="chapter" data-level="9.2" data-path="surv.html"><a href="surv.html#cómo-interpretamos-las-tasas-de-riesgo"><i class="fa fa-check"></i><b>9.2</b> ¿Cómo interpretamos las tasas de riesgo?</a></li>
<li class="chapter" data-level="9.3" data-path="surv.html"><a href="surv.html#el-modelo-cox-de-riesgos-proporcionales"><i class="fa fa-check"></i><b>9.3</b> El modelo Cox de riesgos proporcionales</a></li>
<li class="chapter" data-level="9.4" data-path="surv.html"><a href="surv.html#estimación-de-los-modelos-de-cox-en-r"><i class="fa fa-check"></i><b>9.4</b> Estimación de los modelos de Cox en R</a></li>
<li class="chapter" data-level="9.5" data-path="surv.html"><a href="surv.html#modelos-de-supervivencia-e-interpretación-sus-coeficientes-como-hazard-ratios."><i class="fa fa-check"></i><b>9.5</b> Modelos de supervivencia e interpretación sus coeficientes como Hazard Ratios.</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="causal-inf.html"><a href="causal-inf.html"><i class="fa fa-check"></i><b>10</b> Inferencia causal</a>
<ul>
<li class="chapter" data-level="" data-path="causal-inf.html"><a href="causal-inf.html#lecturas-sugeridas-6"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="causal-inf.html"><a href="causal-inf.html#los-paquetes-que-necesitas-instalar-8"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="10.1" data-path="causal-inf.html"><a href="causal-inf.html#introducción-5"><i class="fa fa-check"></i><b>10.1</b> Introducción</a></li>
<li class="chapter" data-level="10.2" data-path="causal-inf.html"><a href="causal-inf.html#causalidad-y-gráficos-causales"><i class="fa fa-check"></i><b>10.2</b> Causalidad y gráficos causales</a></li>
<li class="chapter" data-level="10.3" data-path="causal-inf.html"><a href="causal-inf.html#midiendo-efectos-causales"><i class="fa fa-check"></i><b>10.3</b> Midiendo efectos causales</a></li>
<li class="chapter" data-level="10.4" data-path="causal-inf.html"><a href="causal-inf.html#dags-y-asociaciones-estadísticas"><i class="fa fa-check"></i><b>10.4</b> DAGs y asociaciones estadísticas</a></li>
<li class="chapter" data-level="10.5" data-path="causal-inf.html"><a href="causal-inf.html#puertas-traseras-y-cálculos-hacer"><i class="fa fa-check"></i><b>10.5</b> Puertas traseras y cálculos “<em>hacer</em>”</a></li>
<li class="chapter" data-level="10.6" data-path="causal-inf.html"><a href="causal-inf.html#dibujar-y-analizar-dags"><i class="fa fa-check"></i><b>10.6</b> Dibujar y analizar DAGs</a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="causal-inf.html"><a href="causal-inf.html#dibujar-un-dag-con-dagitty"><i class="fa fa-check"></i><b>10.6.1</b> Dibujar un DAG con DAGitty</a></li>
<li class="chapter" data-level="10.6.2" data-path="causal-inf.html"><a href="causal-inf.html#encontrar-sets-de-ajuste-con-dagitty"><i class="fa fa-check"></i><b>10.6.2</b> Encontrar sets de ajuste con DAGitty</a></li>
<li class="chapter" data-level="10.6.3" data-path="causal-inf.html"><a href="causal-inf.html#diseñar-dags-en-r"><i class="fa fa-check"></i><b>10.6.3</b> Diseñar DAGs en R</a></li>
<li class="chapter" data-level="10.6.4" data-path="causal-inf.html"><a href="causal-inf.html#encontrar-caminos-y-sets-de-ajustes-con-r"><i class="fa fa-check"></i><b>10.6.4</b> Encontrar caminos y sets de ajustes con R</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="causal-inf.html"><a href="causal-inf.html#haciendo-ajustes-causales"><i class="fa fa-check"></i><b>10.7</b> Haciendo ajustes causales</a>
<ul>
<li class="chapter" data-level="10.7.1" data-path="causal-inf.html"><a href="causal-inf.html#datos-de-redes-para-mosquitos"><i class="fa fa-check"></i><b>10.7.1</b> Datos de redes para mosquitos</a></li>
<li class="chapter" data-level="10.7.2" data-path="causal-inf.html"><a href="causal-inf.html#verificar-las-independencias-condicionales"><i class="fa fa-check"></i><b>10.7.2</b> Verificar las independencias condicionales</a></li>
<li class="chapter" data-level="10.7.3" data-path="causal-inf.html"><a href="causal-inf.html#encuentra-el-set-de-ajuste"><i class="fa fa-check"></i><b>10.7.3</b> Encuentra el set de ajuste</a></li>
<li class="chapter" data-level="10.7.4" data-path="causal-inf.html"><a href="causal-inf.html#estimación-ingenua-no-ajustada"><i class="fa fa-check"></i><b>10.7.4</b> Estimación ingenua no ajustada</a></li>
<li class="chapter" data-level="10.7.5" data-path="causal-inf.html"><a href="causal-inf.html#regresiones"><i class="fa fa-check"></i><b>10.7.5</b> Regresiones</a></li>
<li class="chapter" data-level="10.7.6" data-path="causal-inf.html"><a href="causal-inf.html#matching"><i class="fa fa-check"></i><b>10.7.6</b> Matching</a></li>
<li class="chapter" data-level="10.7.7" data-path="causal-inf.html"><a href="causal-inf.html#ponderación-de-probabilidad-inversa"><i class="fa fa-check"></i><b>10.7.7</b> Ponderación de probabilidad inversa</a></li>
<li class="chapter" data-level="10.7.8" data-path="causal-inf.html"><a href="causal-inf.html#comparando-todos-los-métodos"><i class="fa fa-check"></i><b>10.7.8</b> Comparando todos los métodos</a></li>
</ul></li>
<li class="chapter" data-level="10.8" data-path="causal-inf.html"><a href="causal-inf.html#consejos-finales"><i class="fa fa-check"></i><b>10.8</b> Consejos finales</a></li>
</ul></li>
<li class="part"><span><b>III Aplicaciones</b></span></li>
<li class="chapter" data-level="11" data-path="adv-data.html"><a href="adv-data.html"><i class="fa fa-check"></i><b>11</b> Manejo avanzado de datos políticos</a>
<ul>
<li class="chapter" data-level="" data-path="adv-data.html"><a href="adv-data.html#lecturas-sugeridas-7"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="adv-data.html"><a href="adv-data.html#los-paquetes-que-necesitas-instalar-9"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="11.1" data-path="adv-data.html"><a href="adv-data.html#introducción-6"><i class="fa fa-check"></i><b>11.1</b> Introducción</a></li>
<li class="chapter" data-level="11.2" data-path="adv-data.html"><a href="adv-data.html#uniendo-bases-de-datos"><i class="fa fa-check"></i><b>11.2</b> Uniendo bases de datos</a></li>
<li class="chapter" data-level="11.3" data-path="adv-data.html"><a href="adv-data.html#estandarizando-los-códigos-de-país"><i class="fa fa-check"></i><b>11.3</b> Estandarizando los códigos de país</a></li>
<li class="chapter" data-level="11.4" data-path="adv-data.html"><a href="adv-data.html#la-unión-borrosa-o-inexacta-de-los-datos"><i class="fa fa-check"></i><b>11.4</b> La unión borrosa o inexacta de los datos</a></li>
<li class="chapter" data-level="11.5" data-path="adv-data.html"><a href="adv-data.html#gestión-de-valores-perdidos"><i class="fa fa-check"></i><b>11.5</b> Gestión de valores perdidos</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="adv-data.html"><a href="adv-data.html#tipos-de-valores-perdidos"><i class="fa fa-check"></i><b>11.5.1</b> Tipos de valores perdidos</a></li>
<li class="chapter" data-level="11.5.2" data-path="adv-data.html"><a href="adv-data.html#descripción-de-los-valores-que-faltan-en-la-base-de-datos"><i class="fa fa-check"></i><b>11.5.2</b> Descripción de los valores que faltan en la base de datos</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="adv-data.html"><a href="adv-data.html#imputación-de-valores-perdidos"><i class="fa fa-check"></i><b>11.6</b> Imputación de valores perdidos</a>
<ul>
<li class="chapter" data-level="11.6.1" data-path="adv-data.html"><a href="adv-data.html#regresiones-luego-de-imputar-datos"><i class="fa fa-check"></i><b>11.6.1</b> Regresiones luego de imputar datos</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="web-mining.html"><a href="web-mining.html"><i class="fa fa-check"></i><b>12</b> Minería de datos web</a>
<ul>
<li class="chapter" data-level="" data-path="web-mining.html"><a href="web-mining.html#lecturas-sugeridas-8"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="web-mining.html"><a href="web-mining.html#los-paquetes-que-necesitas-instalar-10"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="12.1" data-path="web-mining.html"><a href="web-mining.html#introducción-7"><i class="fa fa-check"></i><b>12.1</b> Introducción</a></li>
<li class="chapter" data-level="12.2" data-path="web-mining.html"><a href="web-mining.html#formas-de-hacer-web-scraping"><i class="fa fa-check"></i><b>12.2</b> Formas de hacer web scraping</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="web-mining.html"><a href="web-mining.html#estándar-de-exclusión-de-robot"><i class="fa fa-check"></i><b>12.2.1</b> Estándar de exclusión de robot</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="web-mining.html"><a href="web-mining.html#web-scraping-en-r"><i class="fa fa-check"></i><b>12.3</b> Web scraping en R</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="web-mining.html"><a href="web-mining.html#ejemplo-aplicado-los-comunicados-de-prensa-de-la-organización-de-estados-americanos-oea"><i class="fa fa-check"></i><b>12.3.1</b> Ejemplo aplicado: los comunicados de prensa de la Organización de Estados Americanos (OEA)</a></li>
<li class="chapter" data-level="12.3.2" data-path="web-mining.html"><a href="web-mining.html#caraga-el-html-para-trabajar-con-r"><i class="fa fa-check"></i><b>12.3.2</b> Caraga el html para trabajar con R</a></li>
<li class="chapter" data-level="12.3.3" data-path="web-mining.html"><a href="web-mining.html#extraer-la-información-con-html_nodes-html_text"><i class="fa fa-check"></i><b>12.3.3</b> Extraer la información con <code>html_nodes()</code> + <code>html_text()</code></a></li>
<li class="chapter" data-level="12.3.4" data-path="web-mining.html"><a href="web-mining.html#iteraciones"><i class="fa fa-check"></i><b>12.3.4</b> Iteraciones</a></li>
<li class="chapter" data-level="12.3.5" data-path="web-mining.html"><a href="web-mining.html#funciones-personalizadas-recetas"><i class="fa fa-check"></i><b>12.3.5</b> Funciones personalizadas (recetas)</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="web-mining.html"><a href="web-mining.html#usando-apis-y-extrayendo-datos-de-twitter"><i class="fa fa-check"></i><b>12.4</b> Usando APIs y extrayendo datos de Twitter</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="web-mining.html"><a href="web-mining.html#algunos-antecedentes-en-apis"><i class="fa fa-check"></i><b>12.4.1</b> Algunos antecedentes en APIs</a></li>
<li class="chapter" data-level="12.4.2" data-path="web-mining.html"><a href="web-mining.html#extraer-los-datos"><i class="fa fa-check"></i><b>12.4.2</b> Extraer los datos</a></li>
<li class="chapter" data-level="12.4.3" data-path="web-mining.html"><a href="web-mining.html#buscar-una-palabra-clave"><i class="fa fa-check"></i><b>12.4.3</b> Buscar una palabra clave</a></li>
<li class="chapter" data-level="12.4.4" data-path="web-mining.html"><a href="web-mining.html#buscar-una-frase"><i class="fa fa-check"></i><b>12.4.4</b> Buscar una frase</a></li>
<li class="chapter" data-level="12.4.5" data-path="web-mining.html"><a href="web-mining.html#descargando-características-relacionadas-con-los-usuarios-de-twitter"><i class="fa fa-check"></i><b>12.4.5</b> Descargando características relacionadas con los usuarios de Twitter</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="qta.html"><a href="qta.html"><i class="fa fa-check"></i><b>13</b> Análisis cuantitativo de textos políticos</a>
<ul>
<li class="chapter" data-level="" data-path="qta.html"><a href="qta.html#lecturas-recomendadas"><i class="fa fa-check"></i>Lecturas recomendadas</a></li>
<li class="chapter" data-level="" data-path="qta.html"><a href="qta.html#paquetes-que-necesitas-instalar"><i class="fa fa-check"></i>Paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="13.1" data-path="qta.html"><a href="qta.html#sqta1"><i class="fa fa-check"></i><b>13.1</b> Análisis de hashtags políticos</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="qta.html"><a href="qta.html#exploración-de-datos-de-twitter"><i class="fa fa-check"></i><b>13.1.1</b> Exploración de datos de Twitter</a></li>
<li class="chapter" data-level="13.1.2" data-path="qta.html"><a href="qta.html#diagnóstico-visual"><i class="fa fa-check"></i><b>13.1.2</b> Diagnóstico visual</a></li>
<li class="chapter" data-level="13.1.3" data-path="qta.html"><a href="qta.html#hashtags-más-utilizados"><i class="fa fa-check"></i><b>13.1.3</b> Hashtags más utilizados</a></li>
<li class="chapter" data-level="13.1.4" data-path="qta.html"><a href="qta.html#wordclouds-nubes-de-palabras"><i class="fa fa-check"></i><b>13.1.4</b> Wordclouds (Nubes de palabras)</a></li>
<li class="chapter" data-level="13.1.5" data-path="qta.html"><a href="qta.html#nubes-de-palabras-por-grupos"><i class="fa fa-check"></i><b>13.1.5</b> Nubes de palabras por grupos</a></li>
<li class="chapter" data-level="13.1.6" data-path="qta.html"><a href="qta.html#gráficos-de-barras"><i class="fa fa-check"></i><b>13.1.6</b> Gráficos de barras</a></li>
<li class="chapter" data-level="13.1.7" data-path="qta.html"><a href="qta.html#variación-temporal-en-el-uso-de-hashtags"><i class="fa fa-check"></i><b>13.1.7</b> Variación temporal en el uso de hashtags</a></li>
<li class="chapter" data-level="13.1.8" data-path="qta.html"><a href="qta.html#para-resumir"><i class="fa fa-check"></i><b>13.1.8</b> Para resumir</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="qta.html"><a href="qta.html#wordfish"><i class="fa fa-check"></i><b>13.2</b> Wordfish</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="qta.html"><a href="qta.html#inspección-y-limpieza-de-datos"><i class="fa fa-check"></i><b>13.2.1</b> Inspección y limpieza de datos</a></li>
<li class="chapter" data-level="13.2.2" data-path="qta.html"><a href="qta.html#pre-procesamiento"><i class="fa fa-check"></i><b>13.2.2</b> Pre-procesamiento</a></li>
<li class="chapter" data-level="13.2.3" data-path="qta.html"><a href="qta.html#sqta2"><i class="fa fa-check"></i><b>13.2.3</b> Wordfish</a></li>
<li class="chapter" data-level="13.2.4" data-path="qta.html"><a href="qta.html#qué-aprendimos-de-wordfish"><i class="fa fa-check"></i><b>13.2.4</b> ¿Qué aprendimos de Wordfish?</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="qta.html"><a href="qta.html#sqta3"><i class="fa fa-check"></i><b>13.3</b> Structural Topic Modeling (STM)</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="qta.html"><a href="qta.html#pre-procesamiento-1"><i class="fa fa-check"></i><b>13.3.1</b> Pre-procesamiento</a></li>
<li class="chapter" data-level="13.3.2" data-path="qta.html"><a href="qta.html#diagnósticos"><i class="fa fa-check"></i><b>13.3.2</b> Diagnósticos</a></li>
<li class="chapter" data-level="13.3.3" data-path="qta.html"><a href="qta.html#análisis"><i class="fa fa-check"></i><b>13.3.3</b> Análisis</a></li>
<li class="chapter" data-level="13.3.4" data-path="qta.html"><a href="qta.html#observaciones-finales"><i class="fa fa-check"></i><b>13.3.4</b> Observaciones finales</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="networks.html"><a href="networks.html"><i class="fa fa-check"></i><b>14</b> Análisis de redes</a>
<ul>
<li class="chapter" data-level="" data-path="networks.html"><a href="networks.html#lecturas-sugeridas-9"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="networks.html"><a href="networks.html#los-paquetes-que-necesitas-instalar-11"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="14.1" data-path="networks.html"><a href="networks.html#introducción-8"><i class="fa fa-check"></i><b>14.1</b> Introducción</a></li>
<li class="chapter" data-level="14.2" data-path="networks.html"><a href="networks.html#conceptos-básicos-en-una-red"><i class="fa fa-check"></i><b>14.2</b> Conceptos básicos en una red</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="networks.html"><a href="networks.html#nodos-y-enlaces"><i class="fa fa-check"></i><b>14.2.1</b> Nodos y enlaces</a></li>
<li class="chapter" data-level="14.2.2" data-path="networks.html"><a href="networks.html#matriz-de-adyacencia"><i class="fa fa-check"></i><b>14.2.2</b> Matriz de adyacencia</a></li>
<li class="chapter" data-level="14.2.3" data-path="networks.html"><a href="networks.html#pesos-y-direcciones"><i class="fa fa-check"></i><b>14.2.3</b> Pesos y direcciones</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="networks.html"><a href="networks.html#bases-de-datos-de-la-red"><i class="fa fa-check"></i><b>14.3</b> Bases de datos de la red</a></li>
<li class="chapter" data-level="14.4" data-path="networks.html"><a href="networks.html#presentación-gráfica-de-una-red"><i class="fa fa-check"></i><b>14.4</b> Presentación gráfica de una red</a></li>
<li class="chapter" data-level="14.5" data-path="networks.html"><a href="networks.html#medidas-de-centralidad"><i class="fa fa-check"></i><b>14.5</b> Medidas de centralidad</a>
<ul>
<li class="chapter" data-level="14.5.1" data-path="networks.html"><a href="networks.html#grado"><i class="fa fa-check"></i><b>14.5.1</b> Grado</a></li>
<li class="chapter" data-level="14.5.2" data-path="networks.html"><a href="networks.html#centralidad-del-eigenvector"><i class="fa fa-check"></i><b>14.5.2</b> Centralidad del eigenvector</a></li>
<li class="chapter" data-level="14.5.3" data-path="networks.html"><a href="networks.html#centralidad-de-intermediación-betweenness"><i class="fa fa-check"></i><b>14.5.3</b> Centralidad de intermediación (<em>betweenness</em>)</a></li>
<li class="chapter" data-level="14.5.4" data-path="networks.html"><a href="networks.html#cercanía"><i class="fa fa-check"></i><b>14.5.4</b> Cercanía</a></li>
</ul></li>
<li class="chapter" data-level="14.6" data-path="networks.html"><a href="networks.html#aplicación-en-r"><i class="fa fa-check"></i><b>14.6</b> Aplicación en R</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="indexes.html"><a href="indexes.html"><i class="fa fa-check"></i><b>15</b> Análisis de componentes principales</a>
<ul>
<li class="chapter" data-level="" data-path="indexes.html"><a href="indexes.html#lecturas-sugeridas-10"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="indexes.html"><a href="indexes.html#los-paquetes-que-necesitas-instalar-12"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="15.1" data-path="indexes.html"><a href="indexes.html#introducción-9"><i class="fa fa-check"></i><b>15.1</b> Introducción</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="indexes.html"><a href="indexes.html#conceptos-medidas-y-validez"><i class="fa fa-check"></i><b>15.1.1</b> Conceptos, medidas y validez</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="indexes.html"><a href="indexes.html#cómo-funciona-el-análisis-de-componentes-principales"><i class="fa fa-check"></i><b>15.2</b> Cómo funciona el Análisis de Componentes Principales</a></li>
<li class="chapter" data-level="15.3" data-path="indexes.html"><a href="indexes.html#nociones-básicas-en-r"><i class="fa fa-check"></i><b>15.3</b> Nociones básicas en R</a></li>
<li class="chapter" data-level="15.4" data-path="indexes.html"><a href="indexes.html#dimensionalidad-del-concepto"><i class="fa fa-check"></i><b>15.4</b> Dimensionalidad del concepto</a></li>
<li class="chapter" data-level="15.5" data-path="indexes.html"><a href="indexes.html#variación-del-concepto"><i class="fa fa-check"></i><b>15.5</b> Variación del concepto</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="maps.html"><a href="maps.html"><i class="fa fa-check"></i><b>16</b> Mapas y datos espaciales</a>
<ul>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#lecturas-sugeridas-11"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#los-paquetes-que-necesitas-instalar-13"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="16.1" data-path="maps.html"><a href="maps.html#introducción-10"><i class="fa fa-check"></i><b>16.1</b> Introducción</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="maps.html"><a href="maps.html#datos-espaciales-qué-son"><i class="fa fa-check"></i><b>16.1.1</b> Datos espaciales: ¿qué son?</a></li>
<li class="chapter" data-level="16.1.2" data-path="maps.html"><a href="maps.html#estructura-de-datos-espaciales"><i class="fa fa-check"></i><b>16.1.2</b> Estructura de datos espaciales</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="maps.html"><a href="maps.html#datos-espaciales-en-r"><i class="fa fa-check"></i><b>16.2</b> Datos espaciales en R</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="maps.html"><a href="maps.html#características-simples-en-r"><i class="fa fa-check"></i><b>16.2.1</b> Características simples en R</a></li>
<li class="chapter" data-level="16.2.2" data-path="maps.html"><a href="maps.html#estructura"><i class="fa fa-check"></i><b>16.2.2</b> Estructura</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="maps.html"><a href="maps.html#gestión-de-datos-espaciales"><i class="fa fa-check"></i><b>16.3</b> Gestión de Datos Espaciales</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="maps.html"><a href="maps.html#modificaciones"><i class="fa fa-check"></i><b>16.3.1</b> Modificaciones</a></li>
<li class="chapter" data-level="16.3.2" data-path="maps.html"><a href="maps.html#añade-datos-de-otras-bases-de-datos-con-left_join"><i class="fa fa-check"></i><b>16.3.2</b> Añade datos de otras bases de datos con <code>left_join()</code></a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="maps.html"><a href="maps.html#mapeo"><i class="fa fa-check"></i><b>16.4</b> Mapeo</a>
<ul>
<li class="chapter" data-level="16.4.1" data-path="maps.html"><a href="maps.html#generando-centroides"><i class="fa fa-check"></i><b>16.4.1</b> Generando centroides</a></li>
<li class="chapter" data-level="16.4.2" data-path="maps.html"><a href="maps.html#mapeando-variables"><i class="fa fa-check"></i><b>16.4.2</b> Mapeando variables</a></li>
<li class="chapter" data-level="16.4.3" data-path="maps.html"><a href="maps.html#mapeando-puntos"><i class="fa fa-check"></i><b>16.4.3</b> Mapeando puntos</a></li>
</ul></li>
<li class="chapter" data-level="16.5" data-path="maps.html"><a href="maps.html#inferencia-a-partir-de-datos-espaciales"><i class="fa fa-check"></i><b>16.5</b> Inferencia a partir de datos espaciales</a>
<ul>
<li class="chapter" data-level="16.5.1" data-path="maps.html"><a href="maps.html#indicador-local-de-asociación-espacial-lisa-por-sus-siglas-en-inglés"><i class="fa fa-check"></i><b>16.5.1</b> Indicador local de asociación espacial (LISA, por sus siglas en inglés)</a></li>
<li class="chapter" data-level="16.5.2" data-path="maps.html"><a href="maps.html#matriz-de-pesos-espaciales"><i class="fa fa-check"></i><b>16.5.2</b> Matriz de pesos espaciales</a></li>
<li class="chapter" data-level="16.5.3" data-path="maps.html"><a href="maps.html#i-de-moran"><i class="fa fa-check"></i><b>16.5.3</b> I de Moran</a></li>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#comentarios-finales-referencias-para-un-mejor-análisis-de-datos-espaciales"><i class="fa fa-check"></i>Comentarios finales: Referencias para un mejor análisis de datos espaciales</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Respuestas ejercicios</b></span></li>
<li class="chapter" data-level="" data-path="respuestas-ejercicios.html"><a href="respuestas-ejercicios.html"><i class="fa fa-check"></i>Respuestas ejercicios</a></li>
<li class="part"><span><b>V Referencias</b></span></li>
<li class="chapter" data-level="17" data-path="referencias.html"><a href="referencias.html"><i class="fa fa-check"></i><b>17</b> Referencias</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">AnalizaR Datos Políticos</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="maps" class="section level1" number="16">
<h1><span class="header-section-number">Capítulo 16</span> Mapas y datos espaciales</h1>
<p>Andrea Escobar<a href="#fn62" class="footnote-ref" id="fnref62"><sup>62</sup></a> y Gabriel Ortiz<a href="#fn63" class="footnote-ref" id="fnref63"><sup>63</sup></a></p>
<div id="lecturas-sugeridas-11" class="section level3 unnumbered">
<h3>Lecturas sugeridas</h3>
<ul>
<li><p>Brunsdon, C. and Comber, L. (2015). <em>An Introduction to R for Spatial Analysis and Mapping.</em> SAGE, Thousand Oaks, CA.</p></li>
<li><p>Lansley, G. and Cheshire, J. (2016). <em>An Introduction to Spatial Data Analysis and Visualisation in R.</em> Consumer Data Research Centre.</p></li>
<li><p>Lovelace, R., Nowosad, J., and Münchow, J. (2019). <em>Geocomputation with R.</em> CRC Press, Boca Raton, FL.</p></li>
<li><p>Pebesma, E. (2018). Simple Features for R: Standardized Support for Spatial Vector Data. <em>The R Journal,</em> 10(1):439–446.</p></li>
</ul>
</div>
<div id="los-paquetes-que-necesitas-instalar-13" class="section level3 unnumbered">
<h3>Los paquetes que necesitas instalar</h3>
<ul>
<li><code>tidyverse</code> <span class="citation">(<a href="referencias.html#ref-R-tidyverse" role="doc-biblioref">Wickham 2019b</a>)</span>, <code>paqueteadp</code> <span class="citation">(<a href="referencias.html#ref-R-paqueteadp" role="doc-biblioref">Urdinez and Cruz 2020</a>)</span>, <code>sf</code> <span class="citation">(<a href="referencias.html#ref-R-sf" role="doc-biblioref">Pebesma 2020</a>)</span>, <code>ggrepel</code> <span class="citation">(<a href="referencias.html#ref-R-ggrepel" role="doc-biblioref">Slowikowski 2020</a>)</span>, <code>gridExtra</code> <span class="citation">(<a href="referencias.html#ref-R-gridExtra" role="doc-biblioref">Auguie 2017</a>)</span>, <code>rnaturalearthhires</code> <span class="citation">(<a href="referencias.html#ref-R-rnaturalearthhires" role="doc-biblioref">South 2020</a>)</span>, <code>spdep</code> <span class="citation">(<a href="referencias.html#ref-R-spdep" role="doc-biblioref">R. Bivand 2019</a>)</span>.</li>
</ul>
</div>
<div id="introducción-10" class="section level2" number="16.1">
<h2><span class="header-section-number">16.1</span> Introducción</h2>
<p>En este capítulo, aprenderemos a trabajar con datos espaciales usando R y <code>tidyverse</code>. Nos centraremos en la riqueza que tienen los datos espaciales, tanto como herramienta para el análisis de datos exploratorios sobre diversos fenómenos, como para visualizar y comunicar nuestros hallazgos de una forma atractiva y efectiva. Como tal, este capítulo tiene los siguientes objetivos:</p>
<ol style="list-style-type: lower-alpha">
<li><p>Describir el formato de los datos espaciales.</p></li>
<li><p>Explicar por qué estos datos son interesantes para ser utilizados en el análisis de las ciencias políticas.</p></li>
<li><p>Su manejo y manipulación en R, centrándose en su visualización mediante la creación de mapas estáticos y dinámicos con <code>ggplot2</code>.</p></li>
<li><p>No entraremos en la elaboración de modelos estadísticos inferenciales a partir de datos espaciales (Modelos con lag espacial), ni tampoco en la generación de datos geográficos, ya que trabajaremos sobre conjuntos de datos geográficos ya creados.</p></li>
</ol>
<p>El conjunto de datos que utilizaremos en este capítulo será un shapefile (formato que explicaremos más adelante) de los estados de Brasil, obtenido del <a href="https://geo.nyu.edu/catalog/stanford-ys298mq8577"><em>Spatial Data Repository of New York University</em></a>, que se fusionará con los datos de <span class="citation"><a href="referencias.html#ref-freireEvaluatingEffectHomicide2018" role="doc-biblioref">Freire</a> (<a href="referencias.html#ref-freireEvaluatingEffectHomicide2018" role="doc-biblioref">2018</a>)</span>.</p>
<p>Por un lado, el depósito de datos espaciales de la Universidad de Nueva York proporciona muchos datos espaciales de diferentes países, así como de divisiones supranacionales y subnacionales. En este caso, utilizaremos una base de datos de las fronteras estatales de Brasil en el año 1991, proporcionadas por el <em>Instituto Brasileño de Geografía y Estadística</em>. Por otro lado, el trabajo de Freire (2018) explica la causa de la disminución de la tasa de homicidios en el estado de Sao Paulo como resultado de la implementación de políticas estatales para la reducción del crimen. Este trabajo es útil ya que recoge datos a nivel estatal de diferentes indicadores socioeconómicos como el PIB, el Índice de Gini, el promedio de años de escolaridad, entre otros, en un período de veinte años (1990-2010). Estos datos se unirán a nuestro <em>shapefile</em> para trazar estas variables en mapas.</p>
<p>También presentamos una serie de ejercicios que te ayudarán a ganar experiencia utilizando un <em>shapefile</em> de América del Sur fusionado con datos del PIB per cápita y la calidad de la democracia electoral de cada país tomados de la base de datos de V-Dem.</p>
<div id="datos-espaciales-qué-son" class="section level3" number="16.1.1">
<h3><span class="header-section-number">16.1.1</span> Datos espaciales: ¿qué son?</h3>
<p>Los datos espaciales, o más bien los datos <em>geoespaciales</em>, se refieren a los datos obtenidos de lugares geográficos, es decir, de zonas de la superficie de la Tierra. El uso de este tipo de datos reconoce “la importancia de conceptos espaciales como distancia, ubicación, proximidad, vecindad y región en la sociedad humana,” permitiéndonos enfrentar los fenómenos desde una perspectiva multivariante y multidimensional, proporcionándonos información adicional para nuestras observaciones <span class="citation">(<a href="referencias.html#ref-csiss" role="doc-biblioref">CSISS 2004</a>)</span>.</p>
<p>En ciencia política, la perspectiva espacial para el análisis de datos ha avanzado gracias a trabajos como el de Gary King <span class="citation">(<a href="referencias.html#ref-kingSolutionEcologicalInference1997" role="doc-biblioref">1997</a>)</span> sobre cómo hacer inferencias ecológicas, y el de Gimpel y Schuknecht <span class="citation">(<a href="referencias.html#ref-gimpelPoliticalParticipationAccessibility2003" role="doc-biblioref">2003</a>)</span> sobre la accesibilidad a los lugares de votación. Este tipo de datos permite responder a preguntas como la influencia de la proximidad de los países vecinos en la difusión de ciertas políticas, pero también resulta ser una herramienta clave en la exploración de datos para observar la existencia de patrones territoriales en otros estudios.</p>
<p>En los últimos años, los datos espaciales se han difundido ampliamente, sobre todo gracias a las iniciativas de los gobiernos que proporcionan datos para diversos procesos sociales y económicos del país. Las nuevas plataformas de acceso abierto, como Google Maps o <a href="https://www.openstreetmap.org/">Open Street Map</a>, y las redes sociales como Twitter y Facebook también contribuyeron al interés por los datos espaciales. Mientras tanto, para los investigadores y estudiantes, las bases datos como la ya mencionada del Depósito de Datos Espaciales de la Universidad de Nueva York proporcionan archivos <em>shapefile</em> de fácil acceso y manipulación para generar visualizaciones y unir datos georreferenciados de otras bases de datos.</p>
</div>
<div id="estructura-de-datos-espaciales" class="section level3" number="16.1.2">
<h3><span class="header-section-number">16.1.2</span> Estructura de datos espaciales</h3>
<p>Los archivos que contienen datos espaciales se conocen comúnmente como <em>shapefiles</em>, que generalmente se colocan en una carpeta que contiene al menos tres archivos con las extensiones .shp, .dbf y .shx.</p>
<div class="figure" style="text-align: center"><span id="fig:shp-windows"></span>
<img src="00-images/maps/shp_folder_windows.png" alt="Ejemplo de una carpeta que contiene un shapefile en Windows. Ten en cuenta que el archivo .shp contiene la gran mayoría de la información.  Además, esta carpeta contiene un archivo .prj adicional" width="236" />
<p class="caption">
Figura 16.1: Ejemplo de una carpeta que contiene un shapefile en Windows. Ten en cuenta que el archivo .shp contiene la gran mayoría de la información. Además, esta carpeta contiene un archivo .prj adicional
</p>
</div>
<!-- ```{r shp-mac, echo=F, out.width="60%", fig.cap=" Ejemplo de una carpeta que contiene un shapefile en macOS "} -->
<!-- knitr::include_graphics("00-images/maps/shp_folder_mac.png") -->
<!-- ``` -->
<p>En R, los shapefiles se suelen representar mediante vectores, que consisten en la descripción de la geometría o forma (<em>shape</em>) de los objetos. Generalmente contienen variables adicionales, llamadas atributos, sobre los mismos datos. Usando como ejemplo los datos que serán analizados a lo largo de este capítulo, nuestra base de datos describe las fronteras de los estados de Brasil (geometría), y también contiene información de la tasa de homicidios más otros datos socioeconómicos (atributos). Los datos espaciales son diversos en sus características y generalmente se dividen en tipos de vectores que en cada caso consisten en un conjunto de pares de coordenadas (x,y):</p>
<ul>
<li><p>Puntos: Una sola ubicación descrita por un punto como la dirección de una casa geocodificada.</p></li>
<li><p>Líneas: Un segmento compuesto por una serie de puntos conectados entre sí que no forman un objeto cerrado.</p></li>
<li><p>Polígonos: Una superficie plana compuesta por una serie de líneas conectadas entre sí que forman un objeto cerrado.</p></li>
<li><p>Multi-polígonos: Multi-superficies compuestas de polígonos que no necesariamente se intersectan.</p></li>
</ul>
<div class="figure" style="text-align: center"><span id="fig:figure-forms"></span>
<img src="00-images/maps/figure_forms.png" alt="Tipos de formas en los datos espaciales. (1) Punto, (2) Línea, (3) Polígono" width="60%" />
<p class="caption">
Figura 16.2: Tipos de formas en los datos espaciales. (1) Punto, (2) Línea, (3) Polígono
</p>
</div>
<blockquote>
<p><strong>Tip.</strong> Como hemos dicho, el <a href="https://geo.nyu.edu/">Repositorio de Datos Espaciales de la Universidad de Nueva York</a> puede ser una buena alternativa si quieres empezar a trabajar con datos espaciales de tu país, estado o municipio. Puede buscar fácilmente archivos de forma entrando en la página web del Repositorio y seleccionando “Polígono” en la categoría “Tipo de datos.” Después de eso, tienes que introducir el nombre del área de interés en el buscador, seleccionar un resultado y presionar “Descargar Shapefile” en la esquina superior derecha de la página. Otra ventaja de estos datos es que los archivos suelen ser livianos, pero de suficiente calidad, lo que resulta conveniente en el caso de los equipos con limitaciones para procesar archivos de datos de gran tamaño.</p>
</blockquote>
</div>
</div>
<div id="datos-espaciales-en-r" class="section level2" number="16.2">
<h2><span class="header-section-number">16.2</span> Datos espaciales en R</h2>
<p>En los últimos años, R ha mejorado considerablemente sus herramientas para manipular y analizar datos geográficos de manera que sean compatibles con la sintaxis y las funcionalidades de otros paquetes del programa. En el pasado, estas tareas eran demasiado desafiantes. En este capítulo, nos centraremos en el paquete <code>sf</code>, que fue creado en 2016 sobre las funcionalidades base de tres paquetes anteriores: <code>sp</code>, <code>rgeo</code> y <code>rgdal</code>, y que implementa el modelo estándar de código abierto <em>características simples</em><a href="#fn64" class="footnote-ref" id="fnref64"><sup>64</sup></a>. <code>sf</code> permite la representación de objetos del mundo real en el ordenador, que poseen atributos tanto espaciales como no espaciales, basados en la geometría 2D con interpolación lineal entre vértices <span class="citation">(<a href="referencias.html#ref-pebesmaSimpleFeaturesStandardized2018" role="doc-biblioref">Pebesma 2018</a>)</span>.</p>
<div id="características-simples-en-r" class="section level3" number="16.2.1">
<h3><span class="header-section-number">16.2.1</span> Características simples en R</h3>
<p>La principal ventaja que proporciona el paquete <code>sf</code> es que nos permite trabajar con datos espaciales dentro del <code>tidyverse</code>, es decir, podemos manejar los datos espaciales como si fueran cualquier otro tipo de base de datos. Podemos hacerlo mediante funciones de R contenidas en el metapaquete <code>tidyverse</code>, como <code>ggplot2</code> y <code>dplyr</code>, en línea con lo que hemos aprendido a lo largo del libro^[Algunas opciones alternativas para construir mapas en R son los paquetes <code>tmap</code> y <code>cartogram</code>, que se explican en profundidad en el Capítulo 8 de “Geocomputación con R” de<a href="#fn65" class="footnote-ref" id="fnref65"><sup>65</sup></a>.</p>
<p>Es importante tener la última versión de <code>tidyverse</code> para ejecutar las utilidades de <code>ggplot2</code> que se usarán en este capítulo. Puedes actualizarlo a la última versión con el comando <code>install.packages("tidyverse")</code>:</p>
<div class="sourceCode" id="cb558"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb558-1"><a href="maps.html#cb558-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<p>Ahora tenemos que instalar el paquete <code>sf</code>. Para que esto funcione en Mac y Linux necesitas las últimas versiones de FDAL, GEOS, Proj.4 y UNDUNITS ya instaladas<a href="#fn66" class="footnote-ref" id="fnref66"><sup>66</sup></a>. Una vez hecho esto podemos instalar el paquete <code>sf</code>:</p>
<div class="sourceCode" id="cb559"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb559-1"><a href="maps.html#cb559-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;robinlovelace/geocompr&quot;</span>)</span>
<span id="cb559-2"><a href="maps.html#cb559-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>)</span>
<span id="cb559-3"><a href="maps.html#cb559-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span></code></pre></div>
</div>
<div id="estructura" class="section level3" number="16.2.2">
<h3><span class="header-section-number">16.2.2</span> Estructura</h3>
<p>Para ver la estructura de los objetos de tipo <code>sf</code> cargamos nuestra base de datos en el formato shapefile, usando la función <code>read_sf()</code> (nota que estamos cargando el archivo <code>shp_brasil.shp</code> contenido en la carpeta <code>shp_brasil</code>):</p>
<div class="sourceCode" id="cb560"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb560-1"><a href="maps.html#cb560-1" aria-hidden="true" tabindex="-1"></a>shp_brasil <span class="ot">&lt;-</span>  <span class="fu">read_sf</span>(<span class="st">&quot;datos_espaciales/shp_brasil.shp&quot;</span>)</span></code></pre></div>
<p>En la siguiente imagen, detallamos las partes de nuestro shapefile con sus nombres:</p>
<div class="figure" style="text-align: center"><span id="fig:sf-structure"></span>
<img src="00-images/maps/structure_image.png" alt=" Estructura de un objeto sf" width="95%" />
<p class="caption">
Figura 16.3:  Estructura de un objeto sf
</p>
</div>
<p>Como se puede observar en la figura anterior, las características simples se guardan por <code>sf</code> en un formato data.frame y con un formato adicional de clase <code>sf</code>. Entonces, como se ha dicho antes, podemos dirigir este conjunto de datos como cualquier otro dentro del <code>tidyverse</code>, usando sus funciones, pipas (pipes o %&gt;%), etc. Aquí, cada fila consiste en una simple característica, y cada columna consiste en un atributo. La diferencia con una base de datos normal es que aquí encontramos una nueva columna de geometrías de rasgos simples (<em>single-featured geometry column</em> - <code>sfc</code>), lo que resulta en un marco de datos con una columna extra para información espacial.</p>
<p>Podemos verificar esto comprobando el tipo de archivo que hemos cargado con la función <code>class()</code>. Observe que <code>shp.brasil</code> es, al mismo tiempo, un archivo de tipo <code>sf</code> y un <code>data.frame</code>:</p>
<div class="sourceCode" id="cb561"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb561-1"><a href="maps.html#cb561-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(shp_brasil)</span>
<span id="cb561-2"><a href="maps.html#cb561-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;sf&quot;         &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</span></span></code></pre></div>
<p>Ahora, si exploramos nuestros datos con mayor detalle encontraremos que este estándar puede ser implementado en diferentes tipos de geometría en nuestra base de datos:</p>
<ul>
<li>Un vector numérico para un solo punto (POINT)</li>
<li>Una matriz numérica (cada fila es un punto) para una serie de puntos (MULTIPOINT o LINE)</li>
<li>Una lista de matrices para un grupo de conjuntos de puntos (MULTILINESTRING, POLYGON)</li>
<li>Una lista de matrices (MULTIPOLYGON) que se convierte en la más utilizada cuando los datos geográficos se representan como forma y ubicación de los países u otras unidades administrativas de éstos.</li>
<li>Una lista de cualquiera de los elementos anteriormente mencionados (GEOMETRYCOLLECTION)</li>
</ul>
<p>Usando la función <code>st_geometry()</code> podemos ver la geometría incluida en nuestro shapefile:</p>
<div class="sourceCode" id="cb562"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb562-1"><a href="maps.html#cb562-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_geometry</span>(shp_brasil)</span>
<span id="cb562-2"><a href="maps.html#cb562-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Geometry set for 28 features </span></span>
<span id="cb562-3"><a href="maps.html#cb562-3" aria-hidden="true" tabindex="-1"></a><span class="do">## geometry type:  MULTIPOLYGON</span></span>
<span id="cb562-4"><a href="maps.html#cb562-4" aria-hidden="true" tabindex="-1"></a><span class="do">## dimension:      XY</span></span>
<span id="cb562-5"><a href="maps.html#cb562-5" aria-hidden="true" tabindex="-1"></a><span class="do">## bbox:           xmin: -2200000 ymin: -3700000 xmax: 2400000 ymax: 590000</span></span>
<span id="cb562-6"><a href="maps.html#cb562-6" aria-hidden="true" tabindex="-1"></a><span class="do">## projected CRS:  Polyconic</span></span>
<span id="cb562-7"><a href="maps.html#cb562-7" aria-hidden="true" tabindex="-1"></a><span class="do">## First 5 geometries:</span></span></code></pre></div>
<p>Una vez cargado nuestro shapefile, podemos empezar a generar mapas. Ten en cuenta que la forma de hacerlo se basa en <code>ggplot2</code>; sólo tenemos que seleccionar nuestra base de datos y añadir el geom <code>geom_sf()</code><a href="#fn67" class="footnote-ref" id="fnref67"><sup>67</sup></a>.</p>
<div class="sourceCode" id="cb563"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb563-1"><a href="maps.html#cb563-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> shp_brasil) <span class="sc">+</span></span>
<span id="cb563-2"><a href="maps.html#cb563-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>()</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-9"></span>
<img src="16-maps_es_files/figure-html/unnamed-chunk-9-1.png" alt=" Mapa de los estados de Brasil" width="672" />
<p class="caption">
Figura 3.8:  Mapa de los estados de Brasil
</p>
</div>
<blockquote>
<p><strong>Ejercicio 16A.</strong>
1. Descarga el shapefile de Sudamérica de <a href="https://www.arcgis.com/home/item.html?id=d3d2bae5413845b193d038e4912d3da9">ArcGIS</a> y cárgalo en R usando <code>read_sf()</code>. Selecciona sólo las variables “CNTRY_NAME,” “ISO_3DIGIT” y “geometry.”
2. Filtra la base de datos por la variable ‘CNTRY_NAME’ para eliminar las observaciones de “South Georgia &amp; the South Sandwich Is.” y “Falkland Is.”
3. Trazar el shapefile usando <code>ggplot()</code> y <code>geom_sf()</code>.</p>
</blockquote>
</div>
</div>
<div id="gestión-de-datos-espaciales" class="section level2" number="16.3">
<h2><span class="header-section-number">16.3</span> Gestión de Datos Espaciales</h2>
<p>Ya aprendimos a cargar archivos de forma con <code>read_sf()</code>. Ahora que hemos cargado el archivo, procederemos a aprender qué tipo de modificaciones podemos hacer para generar nuevos datos a partir de la información que ya tenemos. También mostraremos cómo unir datos de otras bases de datos a nuestro shapefile.</p>
<div id="modificaciones" class="section level3" number="16.3.1">
<h3><span class="header-section-number">16.3.1</span> Modificaciones</h3>
<p>Hay dos maneras de hacer modificaciones en nuestra base de datos georeferenciada. La primera consiste en aplicar las técnicas que ya hemos aprendido usando el <code>tidyverse</code>, mientras que la segunda consiste en usar las funciones incorporadas en el paquete <code>sf</code>. En este paquete, todas las funciones empiezan con <code>st_</code>, para que puedan ser fácilmente comprendidas en la herramienta de <em>completado</em> de RStudio. Estas funciones se utilizan principalmente para transformar y realizar operaciones geográficas. En estas secciones combinaremos ambas técnicas para generar nuevas variables y datos asociados a nuestra base de datos.</p>
<div id="filtrar-y-seleccionar-por-unidades-geográficas" class="section level4" number="16.3.1.1">
<h4><span class="header-section-number">16.3.1.1</span> Filtrar y seleccionar por unidades geográficas</h4>
<p>Una de las primeras funciones que podemos utilizar las funciones de <code>dplyr</code> para seleccionar datos dentro de nuestra base. Así, por ejemplo, podemos ocupar <code>filter()</code> para seleccionar ciertos estados de Brasil, como por ejemplo el estado de São Paulo:</p>
<div class="sourceCode" id="cb564"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb564-1"><a href="maps.html#cb564-1" aria-hidden="true" tabindex="-1"></a>shp_brasil <span class="sc">%&gt;%</span></span>
<span id="cb564-2"><a href="maps.html#cb564-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(estado <span class="sc">==</span> <span class="st">&quot;São Paulo&quot;</span>)</span>
<span id="cb564-3"><a href="maps.html#cb564-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Simple feature collection with 1 feature and 1 field</span></span>
<span id="cb564-4"><a href="maps.html#cb564-4" aria-hidden="true" tabindex="-1"></a><span class="do">## geometry type:  MULTIPOLYGON</span></span>
<span id="cb564-5"><a href="maps.html#cb564-5" aria-hidden="true" tabindex="-1"></a><span class="do">## dimension:      XY</span></span>
<span id="cb564-6"><a href="maps.html#cb564-6" aria-hidden="true" tabindex="-1"></a><span class="do">## bbox:           xmin: 92000 ymin: -2800000 xmax: 1e+06 ymax: -2200000</span></span>
<span id="cb564-7"><a href="maps.html#cb564-7" aria-hidden="true" tabindex="-1"></a><span class="do">## projected CRS:  Polyconic</span></span>
<span id="cb564-8"><a href="maps.html#cb564-8" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 1 x 2</span></span>
<span id="cb564-9"><a href="maps.html#cb564-9" aria-hidden="true" tabindex="-1"></a><span class="do">##   estado                                                         geometry</span></span>
<span id="cb564-10"><a href="maps.html#cb564-10" aria-hidden="true" tabindex="-1"></a><span class="do">## * &lt;chr&gt;                                                &lt;MULTIPOLYGON [m]&gt;</span></span>
<span id="cb564-11"><a href="maps.html#cb564-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 São Paulo (((719692 -2716734, 719500 -2717678, 719210 -2716889, 719362~</span></span></code></pre></div>
<p>Un desafío común que a menudo enfrentamos cuando trabajamos con shapefiles de países enteros es la existencia de regiones o zonas insulares que forman parte del territorio administrativo pero que están aisladas geográficamente, por ejemplo, la Isla de Pascua en Chile o las Islas Galápagos en Ecuador. Por diversas razones, el acceso a los datos de esas regiones es limitado y a menudo se dejan fuera del análisis. Por lo tanto, estamos interesados en sacar estas regiones de nuestro shapefile. En Brasil, el Distrito Estatal de Fernando de Noronha, un archipiélago de 21 islas situado en el Océano Atlántico es uno de este tipo de casos (es posible identificarlo como un pequeño punto en la parte superior derecha del mapa anterior). Podemos eliminar fácilmente este tipo de datos de nuestro shapefile, de nuevo, con la función <code>filter()</code>.</p>
<div class="sourceCode" id="cb565"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb565-1"><a href="maps.html#cb565-1" aria-hidden="true" tabindex="-1"></a>shp_brasil <span class="ot">&lt;-</span> shp_brasil <span class="sc">%&gt;%</span></span>
<span id="cb565-2"><a href="maps.html#cb565-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(estado <span class="sc">!=</span> <span class="st">&quot;State District of Fernando de Noronha (PE)&quot;</span>)</span></code></pre></div>
<p>Esto se reflejará en los siguientes mapas:</p>
<div class="sourceCode" id="cb566"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb566-1"><a href="maps.html#cb566-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> shp_brasil) <span class="sc">+</span></span>
<span id="cb566-2"><a href="maps.html#cb566-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>()</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-12"></span>
<img src="16-maps_es_files/figure-html/unnamed-chunk-12-1.png" alt=" Mapa de los estados brasileños excepto el Distrito Estatal de Fernando de Noronha" width="672" />
<p class="caption">
Figura 3.11:  Mapa de los estados brasileños excepto el Distrito Estatal de Fernando de Noronha
</p>
</div>
</div>
<div id="generar-nuevas-unidades-con-st_union" class="section level4" number="16.3.1.2">
<h4><span class="header-section-number">16.3.1.2</span> Generar nuevas unidades con <code>st_union()</code></h4>
<p>Otra opción interesante es generar nuevas variables que agrupen múltiples unidades geográficas. Al hacer esto, estaremos generando efectivamente nuevas unidades geográficas más allá de la información inicial contenida en nuestro shapefile. Por ejemplo, en 1969 el <em>Instituto Brasileño de Geografía y Estadística</em> dividió el país en 5 regiones que agrupan los 27 estados del país. Dado que se trata de una división con fines académicos, y no reconocida en términos político-administrativos, no es posible encontrar archivos de tipo shapefile que muestren estas regiones. Sin embargo, usando <code>mutate()</code> y <code>case_when()</code>, podemos generar fácilmente esta categoría nosotros mismos:</p>
<div class="sourceCode" id="cb567"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb567-1"><a href="maps.html#cb567-1" aria-hidden="true" tabindex="-1"></a>shp_brasil <span class="ot">&lt;-</span> shp_brasil <span class="sc">%&gt;%</span></span>
<span id="cb567-2"><a href="maps.html#cb567-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">region =</span> <span class="fu">case_when</span>(</span>
<span id="cb567-3"><a href="maps.html#cb567-3" aria-hidden="true" tabindex="-1"></a>    estado <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Goiás&quot;</span>, <span class="st">&quot;Mato Grosso&quot;</span>, <span class="st">&quot;Mato Grosso do Sul&quot;</span>,</span>
<span id="cb567-4"><a href="maps.html#cb567-4" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;Distrito Federal&quot;</span>) <span class="sc">~</span> <span class="st">&quot;Centro-Oeste&quot;</span>,</span>
<span id="cb567-5"><a href="maps.html#cb567-5" aria-hidden="true" tabindex="-1"></a>    estado <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Acre&quot;</span>, <span class="st">&quot;Amapá&quot;</span>, <span class="st">&quot;Amazonas&quot;</span>, <span class="st">&quot;Pará&quot;</span>, <span class="st">&quot;Rondônia&quot;</span>, <span class="st">&quot;Roraima&quot;</span>,</span>
<span id="cb567-6"><a href="maps.html#cb567-6" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;Tocantins&quot;</span>) <span class="sc">~</span> <span class="st">&quot;Norte&quot;</span>,</span>
<span id="cb567-7"><a href="maps.html#cb567-7" aria-hidden="true" tabindex="-1"></a>    estado <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Alagoas&quot;</span>, <span class="st">&quot;Bahia&quot;</span>, <span class="st">&quot;Ceará&quot;</span>, <span class="st">&quot;Maranhão&quot;</span>, <span class="st">&quot;Paraíba&quot;</span>,</span>
<span id="cb567-8"><a href="maps.html#cb567-8" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;Pernambuco&quot;</span>, <span class="st">&quot;Piauí&quot;</span>, <span class="st">&quot;Rio Grande do Norte&quot;</span>,</span>
<span id="cb567-9"><a href="maps.html#cb567-9" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;Sergipe&quot;</span>) <span class="sc">~</span> <span class="st">&quot;Noroeste&quot;</span>,</span>
<span id="cb567-10"><a href="maps.html#cb567-10" aria-hidden="true" tabindex="-1"></a>    estado <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Espírito Santo&quot;</span>, <span class="st">&quot;Minas Gerais&quot;</span>, <span class="st">&quot;Rio de Janeiro&quot;</span>,</span>
<span id="cb567-11"><a href="maps.html#cb567-11" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;São Paulo&quot;</span>) <span class="sc">~</span> <span class="st">&quot;Sudeste&quot;</span>,</span>
<span id="cb567-12"><a href="maps.html#cb567-12" aria-hidden="true" tabindex="-1"></a>    estado <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Paraná&quot;</span>, <span class="st">&quot;Rio Grande do Sul&quot;</span>,</span>
<span id="cb567-13"><a href="maps.html#cb567-13" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;Santa Catarina&quot;</span>) <span class="sc">~</span> <span class="st">&quot;Sur&quot;</span>)</span>
<span id="cb567-14"><a href="maps.html#cb567-14" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Una vez generada, podemos incorporar esta variable a nuestro mapa:</p>
<div class="sourceCode" id="cb568"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb568-1"><a href="maps.html#cb568-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> shp_brasil)<span class="sc">+</span></span>
<span id="cb568-2"><a href="maps.html#cb568-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> region))<span class="sc">+</span></span>
<span id="cb568-3"><a href="maps.html#cb568-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&quot;Región&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-14"></span>
<img src="16-maps_es_files/figure-html/unnamed-chunk-14-1.png" alt=" Mapa de los estados brasileños agrupados por región" width="768" />
<p class="caption">
Figura 3.13:  Mapa de los estados brasileños agrupados por región
</p>
</div>
<p>Mejor aún, podemos usar esta categoría para generar nueva geometría con <code>group_by()</code>, <code>summarize()</code> y <code>st_union()</code>:</p>
<div class="sourceCode" id="cb569"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb569-1"><a href="maps.html#cb569-1" aria-hidden="true" tabindex="-1"></a>shp_brasil_regions <span class="ot">&lt;-</span>  shp_brasil <span class="sc">%&gt;%</span></span>
<span id="cb569-2"><a href="maps.html#cb569-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(region) <span class="sc">%&gt;%</span></span>
<span id="cb569-3"><a href="maps.html#cb569-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">geometry =</span> <span class="fu">st_union</span>(geometry)) <span class="sc">%&gt;%</span></span>
<span id="cb569-4"><a href="maps.html#cb569-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code></pre></div>
<p>Podemos graficar este resultado con <code>ggplot()</code>:</p>
<div class="sourceCode" id="cb570"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb570-1"><a href="maps.html#cb570-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(shp_brasil_regions) <span class="sc">+</span></span>
<span id="cb570-2"><a href="maps.html#cb570-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> region))<span class="sc">+</span></span>
<span id="cb570-3"><a href="maps.html#cb570-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&quot;Región&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-16"></span>
<img src="16-maps_es_files/figure-html/unnamed-chunk-16-1.png" alt=" Mapa de las regiones del Brasil" width="768" />
<p class="caption">
Figura 3.15:  Mapa de las regiones del Brasil
</p>
</div>
<p>Observa que esto no genera objetos completamente “planos,” es decir, todavía podemos observar algunas líneas dentro de ellos, probablemente porque los polígonos de nuestro shapefile no se superponen perfectamente. Esta es una dificultad común cuando se realizan este tipo de operaciones, e incluso puede ocurrir cuando se trabaja con shapefiles sofisticados. A pesar de las dificultades, estas operaciones son beneficiosas cuando, por ejemplo, se elaboran distritos electorales compuestos por varias provincias o municipios.</p>
</div>
<div id="crear-nuevos-shapefiles-con-st_write" class="section level4" number="16.3.1.3">
<h4><span class="header-section-number">16.3.1.3</span> Crear nuevos shapefiles con <code>st_write()</code></h4>
<p>Podemos guardar este nuevo shapefile con las funciones <code>st_write()</code>, en las que sólo tenemos que seleccionar el objeto que queremos guardar y la ruta donde queremos que se guarde. En este caso, guardaremos el archivo <code>shp_brasil_regions.shp</code> en una carpeta con el mismo nombre. Esto generará automáticamente no sólo el .shp, sino también todos los demás archivos que constituyen el shapefile:</p>
<div class="sourceCode" id="cb571"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb571-1"><a href="maps.html#cb571-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="st">&quot;shp_brasil_regions/&quot;</span>)</span>
<span id="cb571-2"><a href="maps.html#cb571-2" aria-hidden="true" tabindex="-1"></a><span class="fu">st_write</span>(shp_brasil_regions, <span class="st">&quot;shp_brasil_regions/shp_brasil_regions.shp&quot;</span>)</span></code></pre></div>
<blockquote>
<p>Advertencia: El comando <code>st_write()</code> no puede sobreescribir los archivos existentes y al intentarlo se informará automáticamente de un error. Si quieres modificar un shapefile ya generado, tienes que borrarlo manualmente de su carpeta antes de generar los nuevos archivos.</p>
</blockquote>
</div>
</div>
<div id="añade-datos-de-otras-bases-de-datos-con-left_join" class="section level3" number="16.3.2">
<h3><span class="header-section-number">16.3.2</span> Añade datos de otras bases de datos con <code>left_join()</code></h3>
<p>En primer lugar, aprenderemos a añadir datos de otras bases de datos a nuestro shapefile, ya que normalmente querremos conocer los <em>atributos</em> de nuestras ubicaciones geográficas para generar un análisis de inferencia exploratorio o estadístico. Para ejemplificarlo, cargaremos la base de datos de Freire (previamente eliminamos algunos datos para simplificar las base de datos):</p>
<div class="sourceCode" id="cb572"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb572-1"><a href="maps.html#cb572-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(paqueteadp)</span>
<span id="cb572-2"><a href="maps.html#cb572-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;estados_brasil&quot;</span>)</span></code></pre></div>
<p>Nota que nuestra base de datos contiene la variable <code>estado</code>. Esta misma variable se encuentra en nuestro shapefile:</p>
<div class="sourceCode" id="cb573"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb573-1"><a href="maps.html#cb573-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(estados_brasil<span class="sc">$</span>estado)</span>
<span id="cb573-2"><a href="maps.html#cb573-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;Acre&quot; &quot;Acre&quot; &quot;Acre&quot; &quot;Acre&quot; &quot;Acre&quot; &quot;Acre&quot;</span></span>
<span id="cb573-3"><a href="maps.html#cb573-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(shp_brasil<span class="sc">$</span>estado)</span>
<span id="cb573-4"><a href="maps.html#cb573-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;Rondônia&quot; &quot;Acre&quot;     &quot;Amazonas&quot; &quot;Roraima&quot;  &quot;Pará&quot;     &quot;Amapá&quot;</span></span></code></pre></div>
<p>Nos hemos asegurado previamente de que las observaciones estén codificadas de la misma manera tanto en la base de datos como en el shapefile.<a href="#fn68" class="footnote-ref" id="fnref68"><sup>68</sup></a> Haciendo esto, podemos unir ambas bases de datos con el comando <code>left_join()</code>:</p>
<div class="sourceCode" id="cb574"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb574-1"><a href="maps.html#cb574-1" aria-hidden="true" tabindex="-1"></a>shp_brasil_data <span class="ot">&lt;-</span> shp_brasil <span class="sc">%&gt;%</span></span>
<span id="cb574-2"><a href="maps.html#cb574-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(estados_brasil)</span></code></pre></div>
<p>Usando <code>head()</code> podemos ver el resultado de esta operación:</p>
<div class="sourceCode" id="cb575"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb575-1"><a href="maps.html#cb575-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(shp_brasil_data)</span>
<span id="cb575-2"><a href="maps.html#cb575-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Simple feature collection with 6 features and 7 fields</span></span>
<span id="cb575-3"><a href="maps.html#cb575-3" aria-hidden="true" tabindex="-1"></a><span class="do">## geometry type:  MULTIPOLYGON</span></span>
<span id="cb575-4"><a href="maps.html#cb575-4" aria-hidden="true" tabindex="-1"></a><span class="do">## dimension:      XY</span></span>
<span id="cb575-5"><a href="maps.html#cb575-5" aria-hidden="true" tabindex="-1"></a><span class="do">## bbox:           xmin: -1400000 ymin: -1500000 xmax: -630000 ymax: -890000</span></span>
<span id="cb575-6"><a href="maps.html#cb575-6" aria-hidden="true" tabindex="-1"></a><span class="do">## projected CRS:  Polyconic</span></span>
<span id="cb575-7"><a href="maps.html#cb575-7" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 6 x 8</span></span>
<span id="cb575-8"><a href="maps.html#cb575-8" aria-hidden="true" tabindex="-1"></a><span class="do">##   estado                  geometry region estado_cod  anio</span></span>
<span id="cb575-9"><a href="maps.html#cb575-9" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;chr&gt;         &lt;MULTIPOLYGON [m]&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb575-10"><a href="maps.html#cb575-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 Rondô~ (((-977421 -892385, -975~ Norte          11  1990</span></span>
<span id="cb575-11"><a href="maps.html#cb575-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 Rondô~ (((-977421 -892385, -975~ Norte          11  1991</span></span>
<span id="cb575-12"><a href="maps.html#cb575-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 Rondô~ (((-977421 -892385, -975~ Norte          11  1992</span></span>
<span id="cb575-13"><a href="maps.html#cb575-13" aria-hidden="true" tabindex="-1"></a><span class="do">## # ... with 3 more rows, and 3 more variables</span></span></code></pre></div>
<p>Una vez que la información de Freire se incorpore a nuestro shapefile, estos datos serán útiles cuando empecemos a mapear las variables.</p>
<blockquote>
<p><strong>Ejercicio 16B.</strong>
1. Selecciona los países del Cono Sur (Chile, Argentina y Uruguay) y grafícalos.
2. Genera un nuevo shapefile con las subregiones de América del Sur. Sugerimos lo siguiente:
+ Mar Caribe, correspondiente a Colombia, Venezuela, Surinam, Guayana y Guayana Francesa.
+ Región Andina, correspondiente a Bolivia, Ecuador, Perú y Colombia.
+ Región Oriental, correspondiente a Brasil y a Paraguay.
+ Cono Sur, correspondiente a Chile, Argentina y Uruguay.
3. Descarga la base de datos ampliada (‘Country-Year: V-Dem Full+Others’) de <a href="https://www.v-dem.net/en/data/archive/previous-data/data-version-9/">V-Dem</a> y selecciona sólo las siguientes variables: ‘country_name,’ ‘country_text_id,’ ‘year,’ ‘v2x_polyarchy,’’ e_migdppc’. Fíltralas para considerar sólo el período entre 1996 y 2016 (los últimos 20 años, para los que hay datos disponibles para todas las variables).
4. Usando <code>left_join()</code>, añade el shapefile original a la base de datos cargada del ejercicio anterior. Consejo: utiliza los argumentos <code>by.x="ISO_3DIGIT"</code> y <code>by.y="country_text_id"")</code>. Revisa la base de datos. Notarás que falta un país. ¿Cuál es?</p>
</blockquote>
</div>
</div>
<div id="mapeo" class="section level2" number="16.4">
<h2><span class="header-section-number">16.4</span> Mapeo</h2>
<p>Los mapas han sido históricamente la principal técnica para almacenar y comunicar datos espaciales, y los objetos y sus atributos pueden ser fácilmente moldeados de manera que el ojo humano pueda reconocer rápidamente patrones y anomalías en un mapa bien diseñado. <a href="http://www.spatialanalysisonline.com/HTML/index.html">(ver Spatial Analysis Online)</a>. En esta sección, aprenderás a hacer diferentes tipos de mapas (tanto estáticos como animados) a partir de datos geográficos y sus atributos, utilizando el formato <code>ggplot2</code> como base.</p>
<div id="generando-centroides" class="section level3" number="16.4.1">
<h3><span class="header-section-number">16.4.1</span> Generando centroides</h3>
<p>La primera opción es generar nuevas variables asociadas a nuestras unidades usando el comando <code>mutate</code>. Una acción común es generar lo que se llama “centroides,” es decir, puntos situados en el centro de nuestras unidades. Para generar los centroides, necesitamos crear las siguientes variables asociadas a nuestros geoms: <code>centroid</code>, <code>coords</code>, <code>coords_x</code> y <code>coords_y</code>. Podemos hacer esto con los comandos <code>map()</code> y <code>map_dbl()</code>, del paquete <code>purr</code>, y los comandos <code>st_centroid()</code> y <code>st_coordinates()</code>, del paquete <code>sf</code>.</p>
<div class="sourceCode" id="cb576"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb576-1"><a href="maps.html#cb576-1" aria-hidden="true" tabindex="-1"></a>shp_brasil <span class="ot">&lt;-</span> shp_brasil <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">centroid =</span> <span class="fu">map</span>(geometry, st_centroid), </span>
<span id="cb576-2"><a href="maps.html#cb576-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">coords =</span> <span class="fu">map</span>(centroid, st_coordinates), <span class="at">coords_x =</span> <span class="fu">map_dbl</span>(coords, <span class="dv">1</span>), </span>
<span id="cb576-3"><a href="maps.html#cb576-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">coords_y =</span> <span class="fu">map_dbl</span>(coords, <span class="dv">2</span>))</span>
<span id="cb576-4"><a href="maps.html#cb576-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb576-5"><a href="maps.html#cb576-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(shp_brasil)</span>
<span id="cb576-6"><a href="maps.html#cb576-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Simple feature collection with 6 features and 6 fields</span></span>
<span id="cb576-7"><a href="maps.html#cb576-7" aria-hidden="true" tabindex="-1"></a><span class="do">## geometry type:  MULTIPOLYGON</span></span>
<span id="cb576-8"><a href="maps.html#cb576-8" aria-hidden="true" tabindex="-1"></a><span class="do">## dimension:      XY</span></span>
<span id="cb576-9"><a href="maps.html#cb576-9" aria-hidden="true" tabindex="-1"></a><span class="do">## bbox:           xmin: -2200000 ymin: -1500000 xmax: 880000 ymax: 590000</span></span>
<span id="cb576-10"><a href="maps.html#cb576-10" aria-hidden="true" tabindex="-1"></a><span class="do">## projected CRS:  Polyconic</span></span>
<span id="cb576-11"><a href="maps.html#cb576-11" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 6 x 7</span></span>
<span id="cb576-12"><a href="maps.html#cb576-12" aria-hidden="true" tabindex="-1"></a><span class="do">##   estado                  geometry region centroid coords coords_x</span></span>
<span id="cb576-13"><a href="maps.html#cb576-13" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;chr&gt;         &lt;MULTIPOLYGON [m]&gt; &lt;chr&gt;  &lt;list&gt;   &lt;list&gt;    &lt;dbl&gt;</span></span>
<span id="cb576-14"><a href="maps.html#cb576-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 Rondô~ (((-977421 -892385, -975~ Norte  &lt;XY [2]&gt; &lt;dbl[~  -9.68e5</span></span>
<span id="cb576-15"><a href="maps.html#cb576-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 Acre   (((-2179954 -836549, -20~ Norte  &lt;XY [2]&gt; &lt;dbl[~  -1.81e6</span></span>
<span id="cb576-16"><a href="maps.html#cb576-16" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 Amazo~ (((-1482456 230568, -147~ Norte  &lt;XY [2]&gt; &lt;dbl[~  -1.19e6</span></span>
<span id="cb576-17"><a href="maps.html#cb576-17" aria-hidden="true" tabindex="-1"></a><span class="do">## # ... with 3 more rows, and 1 more variable</span></span></code></pre></div>
<p>Una vez generadas, podemos graficar estas variables con <code>ggplot()</code> y el paquete <code>ggrepel</code> para generar el texto:</p>
<div class="sourceCode" id="cb577"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb577-1"><a href="maps.html#cb577-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggrepel)</span></code></pre></div>
<div class="sourceCode" id="cb578"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb578-1"><a href="maps.html#cb578-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> shp_brasil) <span class="sc">+</span></span>
<span id="cb578-2"><a href="maps.html#cb578-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>()<span class="sc">+</span></span>
<span id="cb578-3"><a href="maps.html#cb578-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_repel</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(coords_x, coords_y, <span class="at">label =</span> estado), </span>
<span id="cb578-4"><a href="maps.html#cb578-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">size =</span> <span class="dv">4</span>, <span class="at">min.segment.length =</span> <span class="dv">0</span>)<span class="sc">+</span></span>
<span id="cb578-5"><a href="maps.html#cb578-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-24"></span>
<img src="16-maps_es_files/figure-html/unnamed-chunk-24-1.png" alt="Mapa de Brasil con los nombres de sus estados" width="816" />
<p class="caption">
Figura 3.22: Mapa de Brasil con los nombres de sus estados
</p>
</div>
</div>
<div id="mapeando-variables" class="section level3" number="16.4.2">
<h3><span class="header-section-number">16.4.2</span> Mapeando variables</h3>
<p>Podemos generar visualizaciones más complejas de elementos que ya hemos visto en secciones anteriores. Por ejemplo, podemos mapear una variable continua de acuerdo a un color, usando el mapeo estético <code>fill =</code> de <code>ggplot2</code>:</p>
<div class="sourceCode" id="cb579"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb579-1"><a href="maps.html#cb579-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> shp_brasil_data) <span class="sc">+</span></span>
<span id="cb579-2"><a href="maps.html#cb579-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> gini)) <span class="sc">+</span></span>
<span id="cb579-3"><a href="maps.html#cb579-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&quot;Índice Gini&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-25"></span>
<img src="16-maps_es_files/figure-html/unnamed-chunk-25-1.png" alt="Mapa de Brasil sin coordenadas y líneas cartesianas" width="672" />
<p class="caption">
Figura 3.23: Mapa de Brasil sin coordenadas y líneas cartesianas
</p>
</div>
</div>
<div id="mapeando-puntos" class="section level3" number="16.4.3">
<h3><span class="header-section-number">16.4.3</span> Mapeando puntos</h3>
<p>Si, aparte de los polígonos, tenemos datos que denotan las ubicaciones de los eventos que han ocurrido dentro del espacio que cubre todo nuestro shapefile, también es posible graficar toda esa información en un grupo. En este caso, aprenderemos dos maneras de realizar esta tarea; una usando <code>geom_sf</code>, y la otra, usando un geom que ya hemos visto anteriormente en el libro: <code>geom_point()</code>.</p>
<p>Para este ejemplo, utilizaremos un ejemplo adaptado de <span class="citation"><a href="referencias.html#ref-freireDeathsDisappearancesPinochet2019" role="doc-biblioref">Freire et al.</a> (<a href="referencias.html#ref-freireDeathsDisappearancesPinochet2019" role="doc-biblioref">2019</a>)</span> que corresponde a un estudio que georeferencia las víctimas mortales del periodo dictatorial de Augusto Pinochet entre 1973 y 1990. Este paquete, bajo el nombre de <code>pinochet</code>, está subido al depósito de CRAN. Para empezar, instalemos este paquete junto con el paquete <code>rnaturalearthhires</code>, que nos proporciona la forma de todos los países del mundo desde la página web de <a href="http://www.naturalearthdata.com/">Natural Earth Data’s</a>:</p>
<div class="sourceCode" id="cb580"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb580-1"><a href="maps.html#cb580-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;pinochet&quot;</span>)</span>
<span id="cb580-2"><a href="maps.html#cb580-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;rnaturalearthhires&quot;</span>,</span>
<span id="cb580-3"><a href="maps.html#cb580-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">repos=</span><span class="st">&quot;http://packages.ropensci.org&quot;</span>, <span class="at">type =</span> <span class="st">&quot;source&quot;</span>)</span></code></pre></div>
<blockquote>
<p>Tip: El paquete <code>rnaturalearthhires</code> puede ser de gran utilidad si se posee una base de datos con variables que puedan ser comparadas entre países, usando las técnicas que ya se han aprendido.</p>
</blockquote>
<p>A continuación, filtraremos la base de datos para seleccionar Chile y sus países vecinos:</p>
<div class="sourceCode" id="cb581"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb581-1"><a href="maps.html#cb581-1" aria-hidden="true" tabindex="-1"></a>chile <span class="ot">&lt;-</span> rnaturalearthhires<span class="sc">::</span>countries10 <span class="sc">%&gt;%</span></span>
<span id="cb581-2"><a href="maps.html#cb581-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_as_sf</span>() <span class="sc">%&gt;%</span></span>
<span id="cb581-3"><a href="maps.html#cb581-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(SOVEREIGNT <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Chile&quot;</span>, <span class="st">&quot;Argentina&quot;</span>, <span class="st">&quot;Peru&quot;</span>, <span class="st">&quot;Bolivia&quot;</span>))</span></code></pre></div>
<p>A continuación, cargamos la base de datos <code>pinochet</code> y seleccionamos las variables que se utilizarán, que corresponden al tipo de lugar donde la víctima fue atacada, así como la latitud y la longitud del lugar. También contiene una descripción de los lugares, que se utilizará más adelante en un ejercicio.</p>
<div class="sourceCode" id="cb582"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb582-1"><a href="maps.html#cb582-1" aria-hidden="true" tabindex="-1"></a>pinochet <span class="ot">&lt;-</span> pinochet<span class="sc">::</span>pinochet <span class="sc">%&gt;%</span></span>
<span id="cb582-2"><a href="maps.html#cb582-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(last_name, first_name, place_1, longitude_1, latitude_1, </span>
<span id="cb582-3"><a href="maps.html#cb582-3" aria-hidden="true" tabindex="-1"></a>         location_1)</span>
<span id="cb582-4"><a href="maps.html#cb582-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb582-5"><a href="maps.html#cb582-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(pinochet)</span>
<span id="cb582-6"><a href="maps.html#cb582-6" aria-hidden="true" tabindex="-1"></a><span class="do">##         last_name         first_name   place_1 longitude_1 latitude_1</span></span>
<span id="cb582-7"><a href="maps.html#cb582-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 Corredera Reyes Mercedes del Pilar In Public         -71        -34</span></span>
<span id="cb582-8"><a href="maps.html#cb582-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 2   Torres Torres   Benito Heriberto      Home         -71        -33</span></span>
<span id="cb582-9"><a href="maps.html#cb582-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 3    Lira Morales        Juan Manuel In Public         -71        -33</span></span>
<span id="cb582-10"><a href="maps.html#cb582-10" aria-hidden="true" tabindex="-1"></a><span class="do">##            location_1</span></span>
<span id="cb582-11"><a href="maps.html#cb582-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 1  Calle Gran Avenida</span></span>
<span id="cb582-12"><a href="maps.html#cb582-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 2            Santiago</span></span>
<span id="cb582-13"><a href="maps.html#cb582-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 La Legua shantytown</span></span>
<span id="cb582-14"><a href="maps.html#cb582-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  [ reached &#39;max&#39; / getOption(&quot;max.print&quot;) -- omitted 3 rows ]</span></span></code></pre></div>
<p>Luego, usamos la función <code>st_as_sf()</code> para transformar las variables de longitud y latitud en geometrías del tipo <code>sf</code>. El argumento crs representa el tipo de Sistema de Referencia de Coordenadas (CRS, por sus siglas en inglés) según su código llamado EPSG. En este caso, utilizaremos el código “4326,” que corresponde al estándar WGS84, el más común. Por otro lado, usamos el comando <code>remove = F</code> para que la función no elimine las variables originales de latitud y longitud de la base de datos, de tal forma que se pueda usar para generar puntos con <code>geom_points</code>. También eliminaremos previamente los valores <code>NA</code>.</p>
<blockquote>
<p>Tip: Cuando repliques este ejercicio, ten en cuenta que en el argumento <code>coords</code> siempre tienes que poner primero la longitud y la latitud. De lo contrario, tus variables pueden quedar con sus coordenadas invertidas.</p>
</blockquote>
<div class="sourceCode" id="cb583"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb583-1"><a href="maps.html#cb583-1" aria-hidden="true" tabindex="-1"></a>pinochet_sf <span class="ot">&lt;-</span> pinochet <span class="sc">%&gt;%</span></span>
<span id="cb583-2"><a href="maps.html#cb583-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(place_1 <span class="sc">!=</span> <span class="st">&quot;NA&quot;</span> <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(longitude_1) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(latitude_1)) <span class="sc">%&gt;%</span></span>
<span id="cb583-3"><a href="maps.html#cb583-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_as_sf</span>(<span class="at">coords =</span> <span class="fu">c</span>(<span class="st">&quot;longitude_1&quot;</span>, <span class="st">&quot;latitude_1&quot;</span>), <span class="at">crs =</span> <span class="dv">4326</span>, <span class="at">remove =</span> F)</span>
<span id="cb583-4"><a href="maps.html#cb583-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb583-5"><a href="maps.html#cb583-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(pinochet_sf)</span>
<span id="cb583-6"><a href="maps.html#cb583-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Simple feature collection with 6 features and 6 fields</span></span>
<span id="cb583-7"><a href="maps.html#cb583-7" aria-hidden="true" tabindex="-1"></a><span class="do">## geometry type:  POINT</span></span>
<span id="cb583-8"><a href="maps.html#cb583-8" aria-hidden="true" tabindex="-1"></a><span class="do">## dimension:      XY</span></span>
<span id="cb583-9"><a href="maps.html#cb583-9" aria-hidden="true" tabindex="-1"></a><span class="do">## bbox:           xmin: -71 ymin: -34 xmax: -71 ymax: -33</span></span>
<span id="cb583-10"><a href="maps.html#cb583-10" aria-hidden="true" tabindex="-1"></a><span class="do">## geographic CRS: WGS 84</span></span>
<span id="cb583-11"><a href="maps.html#cb583-11" aria-hidden="true" tabindex="-1"></a><span class="do">##         last_name         first_name   place_1 longitude_1 latitude_1</span></span>
<span id="cb583-12"><a href="maps.html#cb583-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 Corredera Reyes Mercedes del Pilar In Public         -71        -34</span></span>
<span id="cb583-13"><a href="maps.html#cb583-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 2   Torres Torres   Benito Heriberto      Home         -71        -33</span></span>
<span id="cb583-14"><a href="maps.html#cb583-14" aria-hidden="true" tabindex="-1"></a><span class="do">##           location_1        geometry</span></span>
<span id="cb583-15"><a href="maps.html#cb583-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 Calle Gran Avenida POINT (-71 -34)</span></span>
<span id="cb583-16"><a href="maps.html#cb583-16" aria-hidden="true" tabindex="-1"></a><span class="do">## 2           Santiago POINT (-71 -33)</span></span>
<span id="cb583-17"><a href="maps.html#cb583-17" aria-hidden="true" tabindex="-1"></a><span class="do">##  [ reached &#39;max&#39; / getOption(&quot;max.print&quot;) -- omitted 4 rows ]</span></span>
<span id="cb583-18"><a href="maps.html#cb583-18" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(pinochet_sf)</span>
<span id="cb583-19"><a href="maps.html#cb583-19" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;sf&quot;         &quot;data.frame&quot;</span></span></code></pre></div>
<p>Observa que con esta acción hemos transformado la base de datos en un shapefile.
A continuación, generamos el mapa con <code>geom_sf</code>, usándolo en dos instancias: primero, para mapear los polígonos de los países, y segundo, para graficar los puntos espaciales. Usamos el atributo <code>size</code> para el tamaño del punto. Considera que usamos el argumento <code>coords_sf</code> para delimitar el área que se mostrará en el mapa. Haciendo esto, también podemos identificar las víctimas atacadas fuera del territorio nacional de Chile, sin perder el foco en este país.</p>
<div class="sourceCode" id="cb584"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb584-1"><a href="maps.html#cb584-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb584-2"><a href="maps.html#cb584-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> chile) <span class="sc">+</span></span>
<span id="cb584-3"><a href="maps.html#cb584-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> pinochet_sf, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb584-4"><a href="maps.html#cb584-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">75.6</span>, <span class="sc">-</span><span class="dv">67</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">55</span>, <span class="sc">-</span><span class="dv">19</span>)) <span class="sc">+</span></span>
<span id="cb584-5"><a href="maps.html#cb584-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">76</span>, <span class="sc">-</span><span class="dv">67</span>)) <span class="co"># también limpiar la escala x</span></span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-30"></span>
<img src="16-maps_es_files/figure-html/unnamed-chunk-30-1.png" alt=" Mapa de la ubicación de las víctimas de la dictadura de Pinochet en Chile y sus países vecinos" width="672" angle=90 />
<p class="caption">
Figura 3.27:  Mapa de la ubicación de las víctimas de la dictadura de Pinochet en Chile y sus países vecinos
</p>
</div>
<p>Podemos obtener un resultado similar con <code>geom_point()</code>. En este caso, añadimos el argumento <code>color =</code> para mostrar el tipo de lugar donde la víctima fue atacada.</p>
<div class="sourceCode" id="cb585"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb585-1"><a href="maps.html#cb585-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb585-2"><a href="maps.html#cb585-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> chile) <span class="sc">+</span></span>
<span id="cb585-3"><a href="maps.html#cb585-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data    =</span> pinochet_sf, </span>
<span id="cb585-4"><a href="maps.html#cb585-4" aria-hidden="true" tabindex="-1"></a>          <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">color =</span> place_1), </span>
<span id="cb585-5"><a href="maps.html#cb585-5" aria-hidden="true" tabindex="-1"></a>          <span class="at">size    =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb585-6"><a href="maps.html#cb585-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">75.6</span>, <span class="sc">-</span><span class="dv">67</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">55</span>, <span class="sc">-</span><span class="dv">19</span>)) <span class="sc">+</span></span>
<span id="cb585-7"><a href="maps.html#cb585-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">76</span>, <span class="sc">-</span><span class="dv">67</span>)) <span class="sc">+</span></span>
<span id="cb585-8"><a href="maps.html#cb585-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">color =</span> <span class="st">&quot;&quot;</span>) <span class="co"># también limpiar la escala x</span></span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-32"></span>
<img src="16-maps_es_files/figure-html/unnamed-chunk-32-1.png" alt=" Mapa de la ubicación de las víctimas de la dictadura de Pinochet en Chile y sus países vecinos, codificado por color según el tipo de lugar" width="672" angle=90 />
<p class="caption">
Figura 3.28:  Mapa de la ubicación de las víctimas de la dictadura de Pinochet en Chile y sus países vecinos, codificado por color según el tipo de lugar
</p>
</div>
<blockquote>
<p><strong>Ejercicio 16C.</strong></p>
<ol style="list-style-type: decimal">
<li>Generar centroides para los países (Tip: usar <code>CNTRY_NAME</code>).</li>
<li>Generar un mapa usando el argumento <code>fill</code> de <code>ggplot()</code> para usar un color diferente para cada país.</li>
<li>Grafique un mapa combinando los atributos de los dos ejercicios anteriores.</li>
<li>Crear un mapa con el PIB per cápita (<code>e_migdppc</code>) de cada país en el año 2016. ¿Cuáles son los países que no tienen datos para el 2016?</li>
<li>Crear una tabla con el valor de Democracia (<code>v2x_polyarchy</code>) de cada país en los años 2013, 2014, 2015 y 2016.</li>
</ol>
</blockquote>
</div>
</div>
<div id="inferencia-a-partir-de-datos-espaciales" class="section level2" number="16.5">
<h2><span class="header-section-number">16.5</span> Inferencia a partir de datos espaciales</h2>
<p>Más allá del análisis exploratorio y descriptivo que se puede hacer con los datos espaciales, éstos son también de gran utilidad para hacer inferencias sobre la relación de varios fenómenos. La inferencia basada en los datos espaciales parte del reconocimiento de que las observaciones espaciales no pueden asumirse como mutuamente independientes, ya que las observaciones que están cerca unas de otras tienden a ser similares. Por lo tanto, debemos prestar mucha atención a las diferentes pautas de asociación que existen en los fenómenos que estamos estudiando.</p>
<p>Estas pautas espaciales (<em>autocorrelación espacial</em>), miden la influencia de la distancia sobre una determinada variable, y pueden utilizarse como información relevante de los tipos de influencia que aún no se han observado o considerado <span class="citation">(<a href="referencias.html#ref-bivandAppliedSpatialData2013" role="doc-biblioref">R. S. Bivand, Pebesma, and Gómez-Rubio 2013, 11</a>)</span>.</p>
<div id="indicador-local-de-asociación-espacial-lisa-por-sus-siglas-en-inglés" class="section level3" number="16.5.1">
<h3><span class="header-section-number">16.5.1</span> Indicador local de asociación espacial (LISA, por sus siglas en inglés)</h3>
<p>En esta sección encontrarás los mecanismos básicos para entrar en la correlación espacial, basados en el Indicador Local de Asociación Espacial (LISA), introducido por Luc Anselin <span class="citation">(<a href="referencias.html#ref-anselinLocalIndicatorsSpatial1995" role="doc-biblioref">1995</a>)</span>. Éstos permiten indicar la similitud (correlación) existente entre observaciones cercanas entre sí, es decir, si están agrupadas en cluster espacialmente. Para ello, Anselin indica que:</p>
<ul>
<li>El LISA para cada observación da un indicador del grado de agrupación espacial significativa de valores similares alrededor de esa observación.</li>
<li>La suma de los LISA de las observaciones es proporcional a un indicador de correlación espacial global.</li>
</ul>
<p>Mediante la prueba de la significancia estadística de estos indicadores podemos identificar los lugares en los que hay un grado significativo de clusterización <span class="citation">(<a href="referencias.html#ref-brunsdonIntroductionSpatialAnalysis2015" role="doc-biblioref">Brunsdon and Comber 2015, 249</a>)</span>. Se dice que las variables tienen una correlación espacial positiva cuando los valores similares tienden a estar más cerca unos de otros que los valores diferentes <span class="citation">(<a href="referencias.html#ref-lansleyIntroductionSpatialData2016" role="doc-biblioref">Lansley and Cheshire 2016, 77</a>)</span></p>
</div>
<div id="matriz-de-pesos-espaciales" class="section level3" number="16.5.2">
<h3><span class="header-section-number">16.5.2</span> Matriz de pesos espaciales</h3>
<p>El primer paso para hacer este tipo de análisis es determinar el conjunto de vecindarios para cada observación, es decir, identificar los polígonos que comparten fronteras entre ellos. Luego, necesitamos asignar un peso para cada relación de vecindad, lo que permite definir la fuerza de esta relación basada en la proximidad. En las matrices de pesos, los vecinos se definen de forma binaria [0,1] en cada fila, indicando si existe o no una relación.</p>
<p>Para hacer este tipo de análisis, primero tenemos que cargar el paquete <code>spdep</code>, y guardar las coordenadas de las unidades en nuestro mapa:</p>
<div class="sourceCode" id="cb586"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb586-1"><a href="maps.html#cb586-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(spdep)</span></code></pre></div>
<div class="sourceCode" id="cb587"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb587-1"><a href="maps.html#cb587-1" aria-hidden="true" tabindex="-1"></a>coords <span class="ot">&lt;-</span> <span class="fu">coordinates</span>(<span class="fu">as</span>((shp_brasil), <span class="st">&#39;Spatial&#39;</span>))</span></code></pre></div>
<p>En esta sección, también trabajaremos con el shapefile al que hemos añadido datos de la base de datos de Freire <span class="citation">(<a href="referencias.html#ref-freireEvaluatingEffectHomicide2018" role="doc-biblioref">2018</a>)</span>, <code>shp_brasil_data</code>, pero sólo utilizaremos los datos del último año disponible, 2009:</p>
<div class="sourceCode" id="cb588"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb588-1"><a href="maps.html#cb588-1" aria-hidden="true" tabindex="-1"></a>shp_brasil_data <span class="ot">&lt;-</span> shp_brasil_data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(anio <span class="sc">==</span> <span class="dv">2009</span>)</span></code></pre></div>
<p>Hay tres criterios diferentes para calcular los barrios:</p>
<div id="el-criterio-rook-de-la-torre" class="section level4" number="16.5.2.1">
<h4><span class="header-section-number">16.5.2.1</span> El criterio Rook (de la torre)</h4>
<p>El criterio Rook considera como vecinos a cualquier par de células que compartan un borde. Piensa en una torre en un tablero de ajedrez.</p>
<div class="figure" style="text-align: center"><span id="fig:rook"></span>
<img src="00-images/maps/rook.png" alt=" El criterio Rook de vecindad " width="60%" />
<p class="caption">
Figura 16.4:  El criterio Rook de vecindad
</p>
</div>
<p>Para generar este criterio, usamos la función <code>poly2nb()</code> del paquete <code>spdep</code>. Tenemos que asegurarnos de que el argumento <code>queen =</code> está configurado como <code>F</code>.</p>
<div class="sourceCode" id="cb589"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb589-1"><a href="maps.html#cb589-1" aria-hidden="true" tabindex="-1"></a>rook_brasil <span class="ot">&lt;-</span> <span class="fu">poly2nb</span>(<span class="fu">as</span>(shp_brasil_data, <span class="st">&#39;Spatial&#39;</span>), <span class="at">queen =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>Podemos graficar esto sobre nuestro mapa con <code>ggplot()</code>. Primero, necesitamos pasar nuestras coordenadas a un marco de datos con esta función de <a href="https://mbjoseph.github.io/2015/06/15/nb_ggmap.html">Maxwell B. Joseph</a>.</p>
<div class="sourceCode" id="cb590"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb590-1"><a href="maps.html#cb590-1" aria-hidden="true" tabindex="-1"></a>nb_to_df <span class="ot">&lt;-</span> <span class="cf">function</span>(nb, coords){</span>
<span id="cb590-2"><a href="maps.html#cb590-2" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> coords[, <span class="dv">1</span>]</span>
<span id="cb590-3"><a href="maps.html#cb590-3" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> coords[, <span class="dv">2</span>]</span>
<span id="cb590-4"><a href="maps.html#cb590-4" aria-hidden="true" tabindex="-1"></a>  n <span class="ot">&lt;-</span> <span class="fu">length</span>(nb)</span>
<span id="cb590-5"><a href="maps.html#cb590-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb590-6"><a href="maps.html#cb590-6" aria-hidden="true" tabindex="-1"></a>  cardnb <span class="ot">&lt;-</span> <span class="fu">card</span>(nb)</span>
<span id="cb590-7"><a href="maps.html#cb590-7" aria-hidden="true" tabindex="-1"></a>  i <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span>n, cardnb)</span>
<span id="cb590-8"><a href="maps.html#cb590-8" aria-hidden="true" tabindex="-1"></a>  j <span class="ot">&lt;-</span> <span class="fu">unlist</span>(nb)</span>
<span id="cb590-9"><a href="maps.html#cb590-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">data.frame</span>(<span class="at">x =</span> x[i], <span class="at">xend =</span> x[j],</span>
<span id="cb590-10"><a href="maps.html#cb590-10" aria-hidden="true" tabindex="-1"></a>                    <span class="at">y =</span> y[i], <span class="at">yend =</span> y[j]))</span>
<span id="cb590-11"><a href="maps.html#cb590-11" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Generamos el dataframe:</p>
<div class="sourceCode" id="cb591"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb591-1"><a href="maps.html#cb591-1" aria-hidden="true" tabindex="-1"></a>rook_brasil_df <span class="ot">&lt;-</span> <span class="fu">nb_to_df</span>(rook_brasil, coords)</span></code></pre></div>
<p>Ahora, podemos generar el gráfico con <code>geom_point()</code> y <code>geom_segment()</code>:</p>
<div class="sourceCode" id="cb592"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb592-1"><a href="maps.html#cb592-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(shp_brasil_data) <span class="sc">+</span></span>
<span id="cb592-2"><a href="maps.html#cb592-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>()<span class="sc">+</span></span>
<span id="cb592-3"><a href="maps.html#cb592-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> rook_brasil_df,</span>
<span id="cb592-4"><a href="maps.html#cb592-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y))<span class="sc">+</span></span>
<span id="cb592-5"><a href="maps.html#cb592-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">data =</span> rook_brasil_df,</span>
<span id="cb592-6"><a href="maps.html#cb592-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">xend =</span> xend, <span class="at">y =</span> y, <span class="at">yend =</span> yend))<span class="sc">+</span></span>
<span id="cb592-7"><a href="maps.html#cb592-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>,<span class="at">y =</span> <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-39"></span>
<img src="16-maps_es_files/figure-html/unnamed-chunk-39-1.png" alt=" El criterio Rook de vecindad en Brasil" width="672" />
<p class="caption">
Figura 5.13:  El criterio Rook de vecindad en Brasil
</p>
</div>
</div>
<div id="criterio-queen-de-la-reina" class="section level4" number="16.5.2.2">
<h4><span class="header-section-number">16.5.2.2</span> Criterio Queen (de la Reina)</h4>
<p>El criterio de la reina considera como vecinos a cualquier par de celdas que compartan un borde o un vértice.</p>
<div class="figure" style="text-align: center"><span id="fig:queen"></span>
<img src="00-images/maps/queen.png" alt=" El criterio Queen de vecindad " width="60%" />
<p class="caption">
Figura 16.5:  El criterio Queen de vecindad
</p>
</div>
<p>Para generar este criterio, también usamos la función <code>poly2nb()</code>, y después el dataframe:</p>
<div class="sourceCode" id="cb593"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb593-1"><a href="maps.html#cb593-1" aria-hidden="true" tabindex="-1"></a>queen_brasil <span class="ot">&lt;-</span> <span class="fu">poly2nb</span>(<span class="fu">as</span>(shp_brasil_data, <span class="st">&#39;Spatial&#39;</span>), <span class="at">queen =</span> T)</span>
<span id="cb593-2"><a href="maps.html#cb593-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb593-3"><a href="maps.html#cb593-3" aria-hidden="true" tabindex="-1"></a>queen_brasil_df <span class="ot">&lt;-</span> <span class="fu">nb_to_df</span>(queen_brasil, coords)</span></code></pre></div>
<p>Ahora podemos generar el gráfico, lo cual hacemos directamente sobre nuestro mapa de Brasil:</p>
<div class="sourceCode" id="cb594"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb594-1"><a href="maps.html#cb594-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(shp_brasil_data) <span class="sc">+</span></span>
<span id="cb594-2"><a href="maps.html#cb594-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>()<span class="sc">+</span></span>
<span id="cb594-3"><a href="maps.html#cb594-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> queen_brasil_df,</span>
<span id="cb594-4"><a href="maps.html#cb594-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y))<span class="sc">+</span></span>
<span id="cb594-5"><a href="maps.html#cb594-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">data =</span> queen_brasil_df,</span>
<span id="cb594-6"><a href="maps.html#cb594-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">xend =</span> xend, <span class="at">y =</span> y, <span class="at">yend =</span> yend))<span class="sc">+</span></span>
<span id="cb594-7"><a href="maps.html#cb594-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-41"></span>
<img src="16-maps_es_files/figure-html/unnamed-chunk-41-1.png" alt=" El criterio Rook de vecindad en Brasil" width="672" />
<p class="caption">
Figura 16.6:  El criterio Rook de vecindad en Brasil
</p>
</div>
</div>
<div id="criterio-k-cercanos-k-nearest" class="section level4" number="16.5.2.3">
<h4><span class="header-section-number">16.5.2.3</span> Criterio k-cercanos (<em>K-nearest</em>)</h4>
<p>En el criterio K-más cercano se generan barrios basados en la distancia entre vecinos, donde ‘k’ se refiere al número de vecinos de un lugar en particular, calculado como la distancia entre los puntos centrales de los polígonos. Se suele aplicar cuando las áreas tienen diferentes tamaños, de modo que cada ubicación contiene el mismo número de vecinos, independientemente del tamaño de las áreas vecinas (Fuente: <a href="https://geodacenter.github.io/glossary.html" class="uri">https://geodacenter.github.io/glossary.html</a>).</p>
<p>En este caso, usaremos los seis vecinos más cercanos. Podemos hacerlo con el comando <code>knn2nb</code>. También generamos inmediatamente el dataframe:</p>
<div class="sourceCode" id="cb595"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb595-1"><a href="maps.html#cb595-1" aria-hidden="true" tabindex="-1"></a>kn_brasil <span class="ot">&lt;-</span> <span class="fu">knn2nb</span>(<span class="fu">knearneigh</span>(coords, <span class="at">k =</span> <span class="dv">6</span>))</span>
<span id="cb595-2"><a href="maps.html#cb595-2" aria-hidden="true" tabindex="-1"></a>kn_brasil_df <span class="ot">&lt;-</span> <span class="fu">nb_to_df</span>(kn_brasil,coords)</span></code></pre></div>
<p>Entonces, genera el mapa con <code>ggplot()</code>:</p>
<div class="sourceCode" id="cb596"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb596-1"><a href="maps.html#cb596-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(shp_brasil_data) <span class="sc">+</span></span>
<span id="cb596-2"><a href="maps.html#cb596-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>()<span class="sc">+</span></span>
<span id="cb596-3"><a href="maps.html#cb596-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> kn_brasil_df, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y))<span class="sc">+</span></span>
<span id="cb596-4"><a href="maps.html#cb596-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">data =</span> kn_brasil_df,</span>
<span id="cb596-5"><a href="maps.html#cb596-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">xend =</span> xend, <span class="at">y =</span> y, <span class="at">yend =</span> yend))<span class="sc">+</span></span>
<span id="cb596-6"><a href="maps.html#cb596-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-43"></span>
<img src="16-maps_es_files/figure-html/unnamed-chunk-43-1.png" alt=" Mapa de los vecinos, criterio de cercanía" width="672" />
<p class="caption">
Figura 16.7:  Mapa de los vecinos, criterio de cercanía
</p>
</div>
<p>Obsérvese que, mientras que Rook y Queen generan, para nuestro caso, resultados similares en términos de vecindad en nuestro mapa, el modelo de k-cercanos añade muchas más relaciones.</p>
</div>
</div>
<div id="i-de-moran" class="section level3" number="16.5.3">
<h3><span class="header-section-number">16.5.3</span> I de Moran</h3>
<p>La I de Moran es la estadística más utilizada para identificar la correlación espacial:</p>
<p><span class="math display">\[ I = \frac{n}{\sum_{i=1}^{n}(yi - \bar{y})^2} \frac{\sum_{i=1}^{n}\sum_{j=1}^{n}wij(yi - \bar{y})(yj - \bar{y})}{\sum_{i=1}^{n}\sum_{j=1}^{n}wij}\]</span></p>
<p>Esta fórmula, aunque parece compleja, no es más que una versión ampliada de la fórmula para calcular el coeficiente de correlación, a la que se añade una matriz de peso espacial<a href="#fn69" class="footnote-ref" id="fnref69"><sup>69</sup></a>. A través de ella, podemos probar y visualizar la presencia de la autocorrelación espacial.
Primero, haremos una prueba global que crea una única medida de correlación espacial. Este test de Moran crea una correlación entre -1 y 1, en la que:</p>
<ul>
<li><p>1 determina una perfecta correlación espacial positiva (indica que nuestros datos están agrupados en clusters).</p></li>
<li><p>0 significa que nuestros datos están distribuidos aleatoriamente.</p></li>
<li><p>-1 representa una correlación espacial negativa (valores disímiles que están cerca unos de otros).</p></li>
</ul>
<div class="figure" style="text-align: center"><span id="fig:sp-autocorrelation"></span>
<img src="00-images/maps/sp_autocorrelation.png" alt=" Ilustración de la autocorrelación espacial" width="80%" />
<p class="caption">
Figura 16.8:  Ilustración de la autocorrelación espacial
</p>
</div>
<p>Utilizando una simulación de Monte Carlo, en la que los valores se asignan aleatoriamente a los polígonos para calcular el I de Moran, la simulación se repite muchas veces para establecer una distribución de los valores esperados. Después de esto, el valor del I de Moran observado se compara con la distribución simulada para ver cuán probable es que los valores observados puedan considerarse aleatorios, lo que permite determinar si existe una autocorrelación espacial significativa (RSpatial).</p>
<p>Para ejecutar el test del I de Moran utilizamos el comando <code>moran.test</code>. La variable para la que diagnosticaremos la correlación espacial es el índice de Gini, y utilizaremos un criterio Queen. Antes, necesitamos generar un objeto tipo <code>listw</code> (matriz de peso), basado en el criterio Queen.</p>
<div class="sourceCode" id="cb597"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb597-1"><a href="maps.html#cb597-1" aria-hidden="true" tabindex="-1"></a>queen_brasil_lw <span class="ot">&lt;-</span> <span class="fu">nb2listw</span>(queen_brasil)</span></code></pre></div>
<p>Con este objeto podemos ejecutar el test I de Moran, donde seleccionamos la matriz de peso que acabamos de crear:</p>
<div class="sourceCode" id="cb598"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb598-1"><a href="maps.html#cb598-1" aria-hidden="true" tabindex="-1"></a><span class="fu">moran.test</span>(shp_brasil_data<span class="sc">$</span>gini, <span class="at">listw =</span> queen_brasil_lw)</span>
<span id="cb598-2"><a href="maps.html#cb598-2" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb598-3"><a href="maps.html#cb598-3" aria-hidden="true" tabindex="-1"></a><span class="do">##  Moran I test under randomisation</span></span>
<span id="cb598-4"><a href="maps.html#cb598-4" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb598-5"><a href="maps.html#cb598-5" aria-hidden="true" tabindex="-1"></a><span class="do">## data:  shp_brasil_data$gini  </span></span>
<span id="cb598-6"><a href="maps.html#cb598-6" aria-hidden="true" tabindex="-1"></a><span class="do">## weights: queen_brasil_lw    </span></span>
<span id="cb598-7"><a href="maps.html#cb598-7" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb598-8"><a href="maps.html#cb598-8" aria-hidden="true" tabindex="-1"></a><span class="do">## Moran I statistic standard deviate = 2, p-value = 0.01</span></span>
<span id="cb598-9"><a href="maps.html#cb598-9" aria-hidden="true" tabindex="-1"></a><span class="do">## alternative hypothesis: greater</span></span>
<span id="cb598-10"><a href="maps.html#cb598-10" aria-hidden="true" tabindex="-1"></a><span class="do">## sample estimates:</span></span>
<span id="cb598-11"><a href="maps.html#cb598-11" aria-hidden="true" tabindex="-1"></a><span class="do">## Moran I statistic       Expectation          Variance </span></span>
<span id="cb598-12"><a href="maps.html#cb598-12" aria-hidden="true" tabindex="-1"></a><span class="do">##             0.284            -0.038             0.020</span></span></code></pre></div>
<p>El resultado del test I de Moran muestra que hay una ligera relación de correlación positiva, frente a la expectativa de una ligera relación negativa. Sin embargo, el test resulta no ser estadísticamente significativo, ya que tiene un valor p inferior a un umbral de significativo de 0,05. Por lo tanto, podemos indicar que la tasa de homicidios no presenta altos grados de autocorrelación espacial al analizar estos datos a nivel estatal en Brasil. Lo más probable es que muestre una correlación espacial si utilizamos una unidad de análisis más pequeña (microrregiones dentro de los estados, por ejemplo).</p>
<p>También creamos un gráfico de dispersión para visualizar el signo y la fuerza de la correlación espacial. Para generar un gráfico de dispersión utilizamos el comando <code>moran.plot()</code>:</p>
<div class="sourceCode" id="cb599"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb599-1"><a href="maps.html#cb599-1" aria-hidden="true" tabindex="-1"></a><span class="fu">moran.plot</span>(shp_brasil_data<span class="sc">$</span>ratio_homicidios, <span class="at">listw =</span> queen_brasil_lw,</span>
<span id="cb599-2"><a href="maps.html#cb599-2" aria-hidden="true" tabindex="-1"></a>           <span class="at">xlab =</span> <span class="st">&quot;Tasa de homicidios&quot;</span>, </span>
<span id="cb599-3"><a href="maps.html#cb599-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">ylab =</span> <span class="st">&quot;Tasa de homicidios (con corr. espacial)&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-46"></span>
<img src="16-maps_es_files/figure-html/unnamed-chunk-46-1.png" alt=" Correlación espacial del índice de Gini en Brasil a nivel estatal " width="672" />
<p class="caption">
Figura 16.9:  Correlación espacial del índice de Gini en Brasil a nivel estatal
</p>
</div>
<p>En este mapa, la línea sólida del gráfico indica el valor del I de Moran, es decir, la medida global de autocorrelación espacial en nuestros datos. Como vimos en la prueba anterior, es ligeramente positivo. El eje horizontal del gráfico muestra los datos de la tasa de homicidios a nivel estatal en Brasil, y el eje vertical muestra los mismos datos, pero con retraso espacial. Los cuatro cuadrantes del gráfico describen el valor de la observación en relación con sus vecinos: alto-alto, bajo-bajo (autocorrelación espacial positiva), bajo-alto o alto-bajo (autocorrelación espacial negativa), y el gráfico también señala los valores considerados atípicos en esta relación, como el Distrito Federal o Acre.<a href="#fn70" class="footnote-ref" id="fnref70"><sup>70</sup></a></p>
<p>Si bien el test I de Moran nos permite identificar la existencia de clusters a nivel global, no permite identificar si existen clusters locales significativos en la variable que estamos analizando <span class="citation">(<a href="referencias.html#ref-lansleyIntroductionSpatialData2016" role="doc-biblioref">Lansley and Cheshire 2016, 78</a>)</span>. Por eso queremos hacer un test I de Moran a nivel local, donde se calculan los indicadores locales de asociación espacial para cada unidad de nuestros datos, y se prueba la relación para probar su significancia estadística. Esto nos da datos sobre el patrón geográfico de la relación de los datos espaciales, y si hay desviaciones locales de los patrones globales de autocorrelación espacial.</p>
<p>Después de crear un nuevo <code>listw</code> de objeto de vecinos, este tipo con el argumento <code>style = "B"</code> para indicar una clasificación binaria, utilizamos <code>localmoran()</code> para ejecutar el test I de Moran. Añadimos sus resultados (estimación y valor p) a nuestro objeto <code>sf</code> existente con el conocido <code>mutate()</code>:</p>
<div class="sourceCode" id="cb600"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb600-1"><a href="maps.html#cb600-1" aria-hidden="true" tabindex="-1"></a>queen_brasil_b_lw <span class="ot">&lt;-</span> <span class="fu">nb2listw</span>(queen_brasil, <span class="at">style =</span> <span class="st">&quot;B&quot;</span>)</span>
<span id="cb600-2"><a href="maps.html#cb600-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb600-3"><a href="maps.html#cb600-3" aria-hidden="true" tabindex="-1"></a>shp_brasil_data <span class="ot">&lt;-</span> shp_brasil_data <span class="sc">%&gt;%</span> </span>
<span id="cb600-4"><a href="maps.html#cb600-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">lmoran =</span> <span class="fu">localmoran</span>(<span class="at">x =</span> gini, <span class="at">listw =</span> queen_brasil_b_lw)[, <span class="dv">1</span>],</span>
<span id="cb600-5"><a href="maps.html#cb600-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">lmoran_pval =</span> <span class="fu">localmoran</span>(<span class="at">x =</span> gini, <span class="at">listw =</span> queen_brasil_b_lw)[, <span class="dv">5</span>]</span>
<span id="cb600-6"><a href="maps.html#cb600-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p>A continuación, mapeamos los resultados con <code>ggplot2</code>:</p>
<div class="sourceCode" id="cb601"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb601-1"><a href="maps.html#cb601-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(shp_brasil_data) <span class="sc">+</span></span>
<span id="cb601-2"><a href="maps.html#cb601-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> lmoran))<span class="sc">+</span></span>
<span id="cb601-3"><a href="maps.html#cb601-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&quot; Estadística local de Moran&quot;</span>) <span class="sc">+</span></span>
<span id="cb601-4"><a href="maps.html#cb601-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>()</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-48"></span>
<img src="16-maps_es_files/figure-html/unnamed-chunk-48-1.png" alt=" El test de Moran a nivel local para diferentes valores de Gini" width="672" />
<p class="caption">
Figura 11.6:  El test de Moran a nivel local para diferentes valores de Gini
</p>
</div>
<p>Este mapa nos permite observar la variación de la autocorrelación en todo el espacio, pero no permite identificar si los patrones de autocorrelación son cúmulos con valores altos o bajos. Esto permitiría analizar el tipo de autocorrelación espacial que existe y su significado. Para ello necesitamos crear un mapa de clusters LISA, el cual creará una etiqueta basada en los tipos de relación que comparte con sus vecinos (alto-alto, bajo-alto, insignificante, etc.) en concordancia con los valores de la variable que estamos analizando (Gini).</p>
<p>Para ello, necesitamos hacer una serie de transformaciones que detallamos a continuación:</p>
<div class="sourceCode" id="cb602"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb602-1"><a href="maps.html#cb602-1" aria-hidden="true" tabindex="-1"></a>shp_brasil_data <span class="ot">&lt;-</span> shp_brasil_data <span class="sc">%&gt;%</span> </span>
<span id="cb602-2"><a href="maps.html#cb602-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb602-3"><a href="maps.html#cb602-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Estandarizar el Gini y el Moran local a sus valores medios:</span></span>
<span id="cb602-4"><a href="maps.html#cb602-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">st_gini =</span> gini <span class="sc">-</span> <span class="fu">mean</span>(gini),</span>
<span id="cb602-5"><a href="maps.html#cb602-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">st_lmoran =</span> lmoran <span class="sc">-</span> <span class="fu">mean</span>(lmoran),</span>
<span id="cb602-6"><a href="maps.html#cb602-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Crear la nueva variable categórica:</span></span>
<span id="cb602-7"><a href="maps.html#cb602-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">cuadrante =</span> <span class="fu">case_when</span>(</span>
<span id="cb602-8"><a href="maps.html#cb602-8" aria-hidden="true" tabindex="-1"></a>      lmoran_pval <span class="sc">&gt;</span> <span class="fl">0.05</span> <span class="sc">~</span> <span class="st">&quot;Insignificante&quot;</span>,</span>
<span id="cb602-9"><a href="maps.html#cb602-9" aria-hidden="true" tabindex="-1"></a>      st_gini <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> st_lmoran <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;Alto-Alto&quot;</span>,</span>
<span id="cb602-10"><a href="maps.html#cb602-10" aria-hidden="true" tabindex="-1"></a>      st_gini <span class="sc">&lt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> st_lmoran <span class="sc">&lt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;Bajo-Bajo&quot;</span>,</span>
<span id="cb602-11"><a href="maps.html#cb602-11" aria-hidden="true" tabindex="-1"></a>      st_gini <span class="sc">&lt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> st_lmoran <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;Bajo-Alto&quot;</span>,</span>
<span id="cb602-12"><a href="maps.html#cb602-12" aria-hidden="true" tabindex="-1"></a>      st_gini <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> st_lmoran <span class="sc">&lt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;Alto-Bajo&quot;</span></span>
<span id="cb602-13"><a href="maps.html#cb602-13" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb602-14"><a href="maps.html#cb602-14" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p>Ahora podemos generar el gráfico con <code>ggplot()</code>. Nota que usamos <code>scale_fill_manual()</code> para cambiar los colores para que reflejen la intensidad de la autocorrelación:</p>
<div class="sourceCode" id="cb603"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb603-1"><a href="maps.html#cb603-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(shp_brasil_data, <span class="fu">aes</span>(<span class="at">fill =</span> cuadrante)) <span class="sc">+</span></span>
<span id="cb603-2"><a href="maps.html#cb603-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>()<span class="sc">+</span></span>
<span id="cb603-3"><a href="maps.html#cb603-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&quot;Cuadrante&quot;</span>)<span class="sc">+</span></span>
<span id="cb603-4"><a href="maps.html#cb603-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;lightblue&quot;</span>, <span class="st">&quot;white&quot;</span>))</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-50"></span>
<img src="16-maps_es_files/figure-html/unnamed-chunk-50-1.png" alt=" Patrones geográficos de agrupación para diferentes valores de Gini" width="672" />
<p class="caption">
Figura 16.10:  Patrones geográficos de agrupación para diferentes valores de Gini
</p>
</div>
<p>Este mapa nos proporciona mayor información sobre los patrones geográficos de autocorrelación espacial. Este mapa nos muestra la existencia de clusters; por lo tanto, muestra regiones agrupadas en lugar de ubicaciones individuales. Es importante señalar que estos mapas no son significativos, pero nos permiten encontrar ubicaciones o relaciones que pueden ser interesantes para un análisis más profundo.</p>
<p>En este caso, podemos interpretar que en la mayor parte de Brasil no existe una correlación espacial para los valores de Gini a nivel estatal, es decir, su valor no está influenciado por la proximidad de otros valores similares. Sin embargo, en algunos estados situados en el noreste de Brasil, podemos observar la existencia de un cluster donde se concentran altos valores de Gini, que tienen vecinos que también tienen altos valores en la misma variable (<em>puntos calientes</em>). Esto indica que estas regiones contribuyen significativamente a una autocorrelación espacial positiva global. Por otro lado, en los estados que están coloreados en azul claro encontramos clusters que concentran valores bajos de Gini donde sus vecinos tienen valores altos de las mismas variables y, por lo tanto, contribuyen significativamente a una autocorrelación espacial global negativa (ya que esto ocurre cuando los valores disímiles están próximos entre sí).</p>
<blockquote>
<p><strong>Ejercicio 16D.</strong></p>
<ol style="list-style-type: decimal">
<li><p>Genera y objeta con las coordenadas del shapefile usando la función <code>coordinates()</code>.</p></li>
<li><p>Filtra la base de datos para usar sólo los datos del 2018.</p></li>
<li><p>Genera una matriz de peso siguiendo el criterio Queen usando <code>poly2nb</code>. Genera el marco de datos usando <code>nb_to_df()</code> y grafícalo usando <code>geom_point()</code> y <code>geom_segment()</code>.</p></li>
<li><p>Realiza el test I de Moran con el comando <code>moran.test()</code> usando la base de datos y la variable de Democracia Electoral. Grafícalo usando <code>moran.plot()</code>.</p></li>
<li><p>Realiza el test I de Moran local con el comando <code>localmoran</code> (usa los parámetros del ejercicio anterior), átalo al conjunto de datos con <code>cbind()</code> y grafica el resultado con <code>ggplot()</code>.</p></li>
</ol>
</blockquote>
</div>
<div id="comentarios-finales-referencias-para-un-mejor-análisis-de-datos-espaciales" class="section level3 unnumbered">
<h3>Comentarios finales: Referencias para un mejor análisis de datos espaciales</h3>
<p>Como dijimos al principio, el objetivo de este capítulo era hacer una introducción al análisis de datos espaciales en R, centrándose en la creación de mapas como un valioso instrumento para el análisis descriptivo de los datos políticos. Sin embargo, el análisis de los datos espaciales no comienza ni termina con lo que se explicó en este capítulo. Si estás interesado en aprender más sobre ciertos temas como el aprendizaje estadístico y el modelado de bases de datos geográficos, la interacción con otros softwares de análisis de datos geográficos como QGIS, y la aplicación de éstos en áreas como el transporte o la ecología, le recomendamos que eches un vistazo a Geocomputación en R <span class="citation">(<a href="referencias.html#ref-lovelaceGeocomputation2019" role="doc-biblioref">Lovelace, Nowosad, and Münchow 2019</a>)</span>, un libro donde encontrarás una guía de introducción a estos temas. También te recomendamos <a href="http://jkunst.com/highcharter/index.html">mirar en</a> el envoltorio de R <code>highcharter</code> para la librería de JavaScript <em>Highcharts</em> si quieres encontrar nuevas formas de visualizar los datos espaciales y crear mapas más complejos.</p>

</div>
</div>
</div>



<div class="footnotes">
<hr />
<ol start="62">
<li id="fn62"><p>E-mail: abescobar@uc.cl<a href="maps.html#fnref62" class="footnote-back">↩︎</a></p></li>
<li id="fn63"><p>E-mail: goortiz@uc.cl<a href="maps.html#fnref63" class="footnote-back">↩︎</a></p></li>
<li id="fn64"><p>Las características simples se refieren a un estándar de formato (ISO 19125-1:2004) que describe cómo los objetos del mundo real pueden ser representados en las computadoras. Ver r-spatial.github.io/sf/articles/sf1.html.<a href="maps.html#fnref64" class="footnote-back">↩︎</a></p></li>
<li id="fn65"><p><span class="citation"><a href="referencias.html#ref-lovelaceGeocomputation2019" role="doc-biblioref">Lovelace, Nowosad, and Münchow</a> (<a href="referencias.html#ref-lovelaceGeocomputation2019" role="doc-biblioref">2019</a>)</span><a href="maps.html#fnref65" class="footnote-back">↩︎</a></p></li>
<li id="fn66"><p>Para más información, consulta <a href="https://github.com/r-spatial/sf#installling" class="uri">https://github.com/r-spatial/sf#installling</a><a href="maps.html#fnref66" class="footnote-back">↩︎</a></p></li>
<li id="fn67"><p>Puede que veas las coordenadas en los ejes. Esto puede ser útil para análisis exploratorio de datos, pero deberías eliminarlos si quieres compartir tu mapa, lo que se puede realizar añadiendo <code>... + theme_void()</code><a href="maps.html#fnref67" class="footnote-back">↩︎</a></p></li>
<li id="fn68"><p>Si en tu trabajo encuentras que esto no es así, deberás usar la herramienta de unión fuzzy que mostramos en el capítulo de manejo avanzado de datos.<a href="maps.html#fnref68" class="footnote-back">↩︎</a></p></li>
<li id="fn69"><p> <a href="http://rspatial.org/analysis/rst/3-spauto.html">REspatial</a><a href="maps.html#fnref69" class="footnote-back">↩︎</a></p></li>
<li id="fn70"><p>Fuente: <a href="https://geodacenter.github.io/glossary.html" class="uri">https://geodacenter.github.io/glossary.html</a><a href="maps.html#fnref70" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="indexes.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="respuestas-ejercicios.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "night",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/arcruz0/libroadp/edit/master/16-maps_es.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>

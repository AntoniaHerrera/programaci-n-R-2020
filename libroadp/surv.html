<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 9 Modelos de supervivencia | AnalizaR Datos Políticos (v1.0)</title>
  <meta name="description" content="Capítulo 9 Modelos de supervivencia | AnalizaR Datos Políticos (v1.0)" />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 9 Modelos de supervivencia | AnalizaR Datos Políticos (v1.0)" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 9 Modelos de supervivencia | AnalizaR Datos Políticos (v1.0)" />
  
  
  

<meta name="author" content="Francisco Urdinez y Andrés Cruz Labrín (editores)" />


<meta name="date" content="2020-08-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="prev" href="logit.html"/>
<link rel="next" href="causal-inf.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<script>
% https://stackoverflow.com/a/4425214/8242291
var links = document.links;

for (var i = 0, linksLength = links.length; i < linksLength; i++) {

    if (links[i].hostname != window.location.hostname) {
        links[i].target = '_blank';
    }

}
</script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #2a211c;
    color: #bdae9d;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #bdae9d;  padding-left: 4px; }
div.sourceCode
  { color: #bdae9d; background-color: #2a211c; }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ffff00; } /* Alert */
code span.an { color: #0066ff; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #44aa43; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #43a8ed; font-weight: bold; } /* ControlFlow */
code span.ch { color: #049b0a; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #0066ff; font-weight: bold; font-style: italic; } /* Comment */
code span.do { color: #0066ff; font-style: italic; } /* Documentation */
code span.dt { text-decoration: underline; } /* DataType */
code span.dv { color: #44aa43; } /* DecVal */
code span.er { color: #ffff00; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #44aa43; } /* Float */
code span.fu { color: #ff9358; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #0066ff; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #43a8ed; font-weight: bold; } /* Keyword */
code span.op { } /* Operator */
code span.pp { font-weight: bold; } /* Preprocessor */
code span.sc { color: #049b0a; } /* SpecialChar */
code span.ss { color: #049b0a; } /* SpecialString */
code span.st { color: #049b0a; } /* String */
code span.va { } /* Variable */
code span.vs { color: #049b0a; } /* VerbatimString */
code span.wa { color: #ffff00; font-weight: bold; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><b><a href="./index.html"><img style="float: left; margin-right: 5px;" src="favicon.ico"></img>AnalizaR datos políticos</a></b></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introducción</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#inicio"><i class="fa fa-check"></i>Inicio</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#cómo-contribuir"><i class="fa fa-check"></i>¿Cómo contribuir?</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#sobre-los-autores-y-autoras"><i class="fa fa-check"></i>Sobre los autores y autoras</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#prefacio"><i class="fa fa-check"></i>Prefacio</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#agradecimientos"><i class="fa fa-check"></i>Agradecimientos</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#qué-esperar-del-libro"><i class="fa fa-check"></i>Qué esperar del libro</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#estructura-del-libro"><i class="fa fa-check"></i>Estructura del libro</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#cómo-utilizar-el-libro-en-un-curso-de-métodos"><i class="fa fa-check"></i>¿Cómo utilizar el libro en un curso de métodos?</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#primera-opción-curso-semestral-de-análisis-de-datos-políticos"><i class="fa fa-check"></i>Primera opción: Curso semestral de análisis de datos políticos</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#segunda-opción-curso-semestral-de-introducción-a-métodos-cuantitativos"><i class="fa fa-check"></i>Segunda opción: Curso semestral de introducción a métodos cuantitativos</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#prerrequisitos"><i class="fa fa-check"></i>Prerrequisitos</a></li>
</ul></li>
<li class="part"><span><b>I Introducción a R</b></span></li>
<li class="chapter" data-level="1" data-path="basic-r.html"><a href="basic-r.html"><i class="fa fa-check"></i><b>1</b> R Básico</a><ul>
<li class="chapter" data-level="1.1" data-path="basic-r.html"><a href="basic-r.html#instalación"><i class="fa fa-check"></i><b>1.1</b> Instalación</a><ul>
<li class="chapter" data-level="" data-path="basic-r.html"><a href="basic-r.html#r"><i class="fa fa-check"></i>R</a></li>
<li class="chapter" data-level="" data-path="basic-r.html"><a href="basic-r.html#rstudio"><i class="fa fa-check"></i>RStudio</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="basic-r.html"><a href="basic-r.html#consola"><i class="fa fa-check"></i><b>1.2</b> Consola</a></li>
<li class="chapter" data-level="1.3" data-path="basic-r.html"><a href="basic-r.html#script"><i class="fa fa-check"></i><b>1.3</b> Script</a></li>
<li class="chapter" data-level="1.4" data-path="basic-r.html"><a href="basic-r.html#objetos-y-funciones"><i class="fa fa-check"></i><b>1.4</b> Objetos (y funciones)</a><ul>
<li class="chapter" data-level="1.4.1" data-path="basic-r.html"><a href="basic-r.html#vectores"><i class="fa fa-check"></i><b>1.4.1</b> Vectores</a></li>
<li class="chapter" data-level="1.4.2" data-path="basic-r.html"><a href="basic-r.html#basic-r-functions"><i class="fa fa-check"></i><b>1.4.2</b> Functions</a></li>
<li class="chapter" data-level="1.4.3" data-path="basic-r.html"><a href="basic-r.html#archivos-gráficos-paquetes-ayuda"><i class="fa fa-check"></i><b>1.4.3</b> Archivos / gráficos / paquetes / ayuda</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>2</b> Manejo de datos</a><ul>
<li class="chapter" data-level="" data-path="data.html"><a href="data.html#los-paquetes-que-necesitas-instalar"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="2.1" data-path="data.html"><a href="data.html#introducción-al-manejo-de-datos"><i class="fa fa-check"></i><b>2.1</b> Introducción al manejo de datos</a><ul>
<li class="chapter" data-level="2.1.1" data-path="data.html"><a href="data.html#nuestra-base-de-datos"><i class="fa fa-check"></i><b>2.1.1</b> Nuestra base de datos</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data.html"><a href="data.html#describiendo-una-base-de-datos"><i class="fa fa-check"></i><b>2.2</b> Describiendo una base de datos</a></li>
<li class="chapter" data-level="2.3" data-path="data.html"><a href="data.html#operaciones-básicas"><i class="fa fa-check"></i><b>2.3</b> Operaciones básicas</a><ul>
<li class="chapter" data-level="2.3.1" data-path="data.html"><a href="data.html#seleccionar-columnas"><i class="fa fa-check"></i><b>2.3.1</b> Seleccionar columnas</a></li>
<li class="chapter" data-level="2.3.2" data-path="data.html"><a href="data.html#renombra-las-columnas"><i class="fa fa-check"></i><b>2.3.2</b> Renombra las columnas</a></li>
<li class="chapter" data-level="2.3.3" data-path="data.html"><a href="data.html#filtrar-las-observaciones"><i class="fa fa-check"></i><b>2.3.3</b> Filtrar las observaciones</a></li>
<li class="chapter" data-level="2.3.4" data-path="data.html"><a href="data.html#cambiar-el-orden-de-una-base-de-datos"><i class="fa fa-check"></i><b>2.3.4</b> Cambiar el orden de una base de datos</a></li>
<li class="chapter" data-level="2.3.5" data-path="data.html"><a href="data.html#transformar-y-crear-variables"><i class="fa fa-check"></i><b>2.3.5</b> Transformar y crear variables</a></li>
<li class="chapter" data-level="2.3.6" data-path="data.html"><a href="data.html#resúmenes"><i class="fa fa-check"></i><b>2.3.6</b> Resúmenes</a></li>
<li class="chapter" data-level="2.3.7" data-path="data.html"><a href="data.html#resúmenes-por-grupo"><i class="fa fa-check"></i><b>2.3.7</b> Resúmenes por grupo</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="data.html"><a href="data.html#comandos-en-cadena"><i class="fa fa-check"></i><b>2.4</b> Comandos en cadena</a></li>
<li class="chapter" data-level="2.5" data-path="data.html"><a href="data.html#data-recodificar"><i class="fa fa-check"></i><b>2.5</b> Recodificar valores</a><ul>
<li class="chapter" data-level="2.5.1" data-path="data.html"><a href="data.html#pivoteo-de-datos-data-pivot"><i class="fa fa-check"></i><b>2.5.1</b> Pivoteo de datos {data-pivot}</a></li>
<li class="chapter" data-level="2.5.2" data-path="data.html"><a href="data.html#bases-de-datos-anchas-con-más-de-una-variable-de-interés"><i class="fa fa-check"></i><b>2.5.2</b> Bases de datos anchas con más de una variable de interés</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="dataviz.html"><a href="dataviz.html"><i class="fa fa-check"></i><b>3</b> Visualización de datos</a><ul>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#lecturas-sugeridas"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#los-paquetes-que-necesitas-instalar-1"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="3.1" data-path="dataviz.html"><a href="dataviz.html#por-qué-visualizar-mis-datos"><i class="fa fa-check"></i><b>3.1</b> ¿Por qué visualizar mis datos?</a></li>
<li class="chapter" data-level="3.2" data-path="dataviz.html"><a href="dataviz.html#primeros-pasos"><i class="fa fa-check"></i><b>3.2</b> Primeros pasos</a><ul>
<li class="chapter" data-level="3.2.1" data-path="dataviz.html"><a href="dataviz.html#las-capas-del-universo-ggplotiano"><i class="fa fa-check"></i><b>3.2.1</b> Las capas del “universo ggplotiano”</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="dataviz.html"><a href="dataviz.html#ejemplo-aplicado-elecciones-locales-y-visualización-de-datos"><i class="fa fa-check"></i><b>3.3</b> Ejemplo aplicado: Elecciones locales y visualización de datos</a><ul>
<li class="chapter" data-level="3.3.1" data-path="dataviz.html"><a href="dataviz.html#gráfico-de-barras"><i class="fa fa-check"></i><b>3.3.1</b> Gráfico de barras</a></li>
<li class="chapter" data-level="3.3.2" data-path="dataviz.html"><a href="dataviz.html#gráfico-de-caja"><i class="fa fa-check"></i><b>3.3.2</b> Gráfico de caja</a></li>
<li class="chapter" data-level="3.3.3" data-path="dataviz.html"><a href="dataviz.html#histograma"><i class="fa fa-check"></i><b>3.3.3</b> Histograma</a></li>
<li class="chapter" data-level="3.3.4" data-path="dataviz.html"><a href="dataviz.html#relación-entre-las-variables"><i class="fa fa-check"></i><b>3.3.4</b> Relación entre las variables</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="dataviz.html"><a href="dataviz.html#para-continuar-aprendiendo"><i class="fa fa-check"></i><b>3.4</b> Para continuar aprendiendo</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="load.html"><a href="load.html"><i class="fa fa-check"></i><b>4</b> Carga de datos</a><ul>
<li class="chapter" data-level="" data-path="load.html"><a href="load.html#los-paquetes-que-necesitas-instalar-2"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="4.1" data-path="load.html"><a href="load.html#load-intro"><i class="fa fa-check"></i><b>4.1</b> Introducción</a></li>
<li class="chapter" data-level="4.2" data-path="load.html"><a href="load.html#carga-formatos"><i class="fa fa-check"></i><b>4.2</b> Diferentes formatos de bases de datos</a></li>
<li class="chapter" data-level="4.3" data-path="load.html"><a href="load.html#los-archivos-separados-por-delimitadores-.csv-y-.tsv"><i class="fa fa-check"></i><b>4.3</b> Los archivos separados por delimitadores (.csv y .tsv)</a><ul>
<li class="chapter" data-level="4.3.1" data-path="load.html"><a href="load.html#r-básico-utils"><i class="fa fa-check"></i><b>4.3.1</b> R básico: <code>utils</code></a></li>
<li class="chapter" data-level="4.3.2" data-path="load.html"><a href="load.html#load-r"><i class="fa fa-check"></i><b>4.3.2</b> Archivos creados con R (.Rdata y .rds)</a></li>
<li class="chapter" data-level="4.3.3" data-path="load.html"><a href="load.html#load-labels"><i class="fa fa-check"></i><b>4.3.3</b> Bases de datos con etiquetas (de Stata or SPSS)</a></li>
<li class="chapter" data-level="4.3.4" data-path="load.html"><a href="load.html#load-excel"><i class="fa fa-check"></i><b>4.3.4</b> Archivos de Excel</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="load.html"><a href="load.html#load-large"><i class="fa fa-check"></i><b>4.4</b> Grandes bases de datos tabulares</a></li>
</ul></li>
<li class="part"><span><b>II Modelos</b></span></li>
<li class="chapter" data-level="5" data-path="linear.html"><a href="linear.html"><i class="fa fa-check"></i><b>5</b> Modelos lineales</a><ul>
<li class="chapter" data-level="" data-path="linear.html"><a href="linear.html#lecturas-sugeridas-1"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="linear.html"><a href="linear.html#los-paquetes-que-necesitas-instalar-3"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="" data-path="linear.html"><a href="linear.html#introducción-1"><i class="fa fa-check"></i>Introducción</a></li>
<li class="chapter" data-level="5.1" data-path="linear.html"><a href="linear.html#mínimos-cuadrados-ordinarios-en-r"><i class="fa fa-check"></i><b>5.1</b> Mínimos cuadrados ordinarios en R</a><ul>
<li class="chapter" data-level="5.1.1" data-path="linear.html"><a href="linear.html#cómo-obtener-estadísticas-descriptivas"><i class="fa fa-check"></i><b>5.1.1</b> Cómo obtener estadísticas descriptivas</a></li>
<li class="chapter" data-level="5.1.2" data-path="linear.html"><a href="linear.html#estadísticas-descriptivas-y-distribución-de-las-variables-en-el-modelo"><i class="fa fa-check"></i><b>5.1.2</b> Estadísticas descriptivas y distribución de las variables en el modelo</a></li>
<li class="chapter" data-level="5.1.3" data-path="linear.html"><a href="linear.html#matriz-de-correlación-de-variables-independientes"><i class="fa fa-check"></i><b>5.1.3</b> Matriz de correlación de variables independientes</a></li>
<li class="chapter" data-level="5.1.4" data-path="linear.html"><a href="linear.html#distribución-de-las-variables-de-interés"><i class="fa fa-check"></i><b>5.1.4</b> Distribución de las variables de interés</a></li>
<li class="chapter" data-level="5.1.5" data-path="linear.html"><a href="linear.html#relación-entre-la-variable-dependiente-e-independiente"><i class="fa fa-check"></i><b>5.1.5</b> Relación entre la variable dependiente e independiente</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="linear.html"><a href="linear.html#modelo-bivariado-regresión-lineal-simple"><i class="fa fa-check"></i><b>5.2</b> Modelo bivariado: regresión lineal simple</a><ul>
<li class="chapter" data-level="5.2.1" data-path="linear.html"><a href="linear.html#la-función-lm"><i class="fa fa-check"></i><b>5.2.1</b> La función <code>lm</code></a></li>
<li class="chapter" data-level="5.2.2" data-path="linear.html"><a href="linear.html#representación-gráfica"><i class="fa fa-check"></i><b>5.2.2</b> Representación gráfica</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="linear.html"><a href="linear.html#modelo-multivariado-regresión-múltiple"><i class="fa fa-check"></i><b>5.3</b> Modelo multivariado: regresión múltiple</a></li>
<li class="chapter" data-level="5.4" data-path="linear.html"><a href="linear.html#ajuste-del-modelo"><i class="fa fa-check"></i><b>5.4</b> Ajuste del modelo</a></li>
<li class="chapter" data-level="5.5" data-path="linear.html"><a href="linear.html#inferencia-en-los-modelos-lineales-múltiples"><i class="fa fa-check"></i><b>5.5</b> Inferencia en los modelos lineales múltiples</a></li>
<li class="chapter" data-level="5.6" data-path="linear.html"><a href="linear.html#testeando-los-supuestos-de-mco"><i class="fa fa-check"></i><b>5.6</b> Testeando los supuestos de MCO</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="case-sel.html"><a href="case-sel.html"><i class="fa fa-check"></i><b>6</b> Selección de casos basada en regresiones</a><ul>
<li class="chapter" data-level="" data-path="case-sel.html"><a href="case-sel.html#lecturas-sugeridas-2"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="case-sel.html"><a href="case-sel.html#los-paquetes-que-necesitas-instalar-4"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="6.1" data-path="case-sel.html"><a href="case-sel.html#selección-de-estudios-de-casos"><i class="fa fa-check"></i><b>6.1</b> Selección de estudios de casos</a></li>
<li class="chapter" data-level="6.2" data-path="case-sel.html"><a href="case-sel.html#qué-estudio-de-caso-debería-seleccionar-para-la-investigación-cualitativa"><i class="fa fa-check"></i><b>6.2</b> ¿Qué estudio de caso debería seleccionar para la investigación cualitativa?</a><ul>
<li class="chapter" data-level="6.2.1" data-path="case-sel.html"><a href="case-sel.html#casos-típicos"><i class="fa fa-check"></i><b>6.2.1</b> Casos típicos</a></li>
<li class="chapter" data-level="6.2.2" data-path="case-sel.html"><a href="case-sel.html#los-valores-atípicos"><i class="fa fa-check"></i><b>6.2.2</b> Los valores atípicos</a></li>
<li class="chapter" data-level="6.2.3" data-path="case-sel.html"><a href="case-sel.html#casos-influyentes"><i class="fa fa-check"></i><b>6.2.3</b> Casos influyentes</a></li>
<li class="chapter" data-level="6.2.4" data-path="case-sel.html"><a href="case-sel.html#casos-extremos"><i class="fa fa-check"></i><b>6.2.4</b> Casos extremos</a></li>
<li class="chapter" data-level="6.2.5" data-path="case-sel.html"><a href="case-sel.html#casos-más-similares"><i class="fa fa-check"></i><b>6.2.5</b> Casos más similares</a></li>
<li class="chapter" data-level="6.2.6" data-path="case-sel.html"><a href="case-sel.html#casos-mas-diferentes"><i class="fa fa-check"></i><b>6.2.6</b> Casos mas diferentes</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="case-sel.html"><a href="case-sel.html#la-importancia-de-la-combinación-de-métodos"><i class="fa fa-check"></i><b>6.3</b> La importancia de la combinación de métodos</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="panel.html"><a href="panel.html"><i class="fa fa-check"></i><b>7</b> Datos de panel</a><ul>
<li class="chapter" data-level="" data-path="panel.html"><a href="panel.html#lecturas-sugeridas-3"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="panel.html"><a href="panel.html#los-paquetes-que-necesitas-instalar-5"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="7.1" data-path="panel.html"><a href="panel.html#introducción-2"><i class="fa fa-check"></i><b>7.1</b> Introducción</a></li>
<li class="chapter" data-level="7.2" data-path="panel.html"><a href="panel.html#describiendo-la-base-de-datos-en-panel"><i class="fa fa-check"></i><b>7.2</b> Describiendo la base de datos en panel</a><ul>
<li class="chapter" data-level="7.2.1" data-path="panel.html"><a href="panel.html#opción-a.-gráfico-de-líneas"><i class="fa fa-check"></i><b>7.2.1</b> Opción A. Gráfico de líneas</a></li>
<li class="chapter" data-level="7.2.2" data-path="panel.html"><a href="panel.html#option-b.-gráfico-de-cajas"><i class="fa fa-check"></i><b>7.2.2</b> Option B. Gráfico de cajas</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="panel.html"><a href="panel.html#modelización-de-la-variación-a-nivel-de-grupo"><i class="fa fa-check"></i><b>7.3</b> Modelización de la variación a nivel de grupo</a></li>
<li class="chapter" data-level="7.4" data-path="panel.html"><a href="panel.html#efectos-fijos-vs.-efectos-aleatorios"><i class="fa fa-check"></i><b>7.4</b> Efectos fijos vs. efectos aleatorios</a><ul>
<li class="chapter" data-level="7.4.1" data-path="panel.html"><a href="panel.html#test-de-hausman"><i class="fa fa-check"></i><b>7.4.1</b> Test de Hausman</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="panel.html"><a href="panel.html#testeando-raíces-unitarias"><i class="fa fa-check"></i><b>7.5</b> Testeando raíces unitarias</a><ul>
<li class="chapter" data-level="7.5.1" data-path="panel.html"><a href="panel.html#creación-de-variables-rezagadas-lags-y-variables-prospectivas-leads"><i class="fa fa-check"></i><b>7.5.1</b> Creación de variables rezagadas (<em>lags</em>) y variables prospectivas (<em>leads</em>)</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="panel.html"><a href="panel.html#errores-estándar-robustos-corregidos-para-panel"><i class="fa fa-check"></i><b>7.6</b> Errores estándar robustos corregidos para panel</a><ul>
<li class="chapter" data-level="7.6.1" data-path="panel.html"><a href="panel.html#errores-estándar-robustos-1"><i class="fa fa-check"></i><b>7.6.1</b> Errores estándar robustos</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="logit.html"><a href="logit.html"><i class="fa fa-check"></i><b>8</b> Modelos logísticos</a><ul>
<li class="chapter" data-level="" data-path="logit.html"><a href="logit.html#lecturas-sugeridas-4"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="logit.html"><a href="logit.html#los-paquetes-que-necesitas-instalar-6"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="8.1" data-path="logit.html"><a href="logit.html#introducción-3"><i class="fa fa-check"></i><b>8.1</b> Introducción</a></li>
<li class="chapter" data-level="8.2" data-path="logit.html"><a href="logit.html#uso-de-los-modelos-logísticos"><i class="fa fa-check"></i><b>8.2</b> Uso de los modelos logísticos</a></li>
<li class="chapter" data-level="8.3" data-path="logit.html"><a href="logit.html#cómo-se-estiman-las-probabilidades"><i class="fa fa-check"></i><b>8.3</b> ¿Cómo se estiman las probabilidades?</a></li>
<li class="chapter" data-level="8.4" data-path="logit.html"><a href="logit.html#estimación-de-los-modelos"><i class="fa fa-check"></i><b>8.4</b> Estimación de los modelos</a></li>
<li class="chapter" data-level="8.5" data-path="logit.html"><a href="logit.html#creando-tablas"><i class="fa fa-check"></i><b>8.5</b> Creando tablas</a></li>
<li class="chapter" data-level="8.6" data-path="logit.html"><a href="logit.html#representación-visual-de-los-resultados"><i class="fa fa-check"></i><b>8.6</b> Representación visual de los resultados</a><ul>
<li class="chapter" data-level="8.6.1" data-path="logit.html"><a href="logit.html#visualización-de-las-interacciones-entre-las-variables"><i class="fa fa-check"></i><b>8.6.1</b> Visualización de las interacciones entre las variables</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="logit.html"><a href="logit.html#medidas-para-evaluar-el-ajuste-de-los-modelos"><i class="fa fa-check"></i><b>8.7</b> Medidas para evaluar el ajuste de los modelos</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="surv.html"><a href="surv.html"><i class="fa fa-check"></i><b>9</b> Modelos de supervivencia</a><ul>
<li class="chapter" data-level="" data-path="surv.html"><a href="surv.html#lecturas-sugeridas-5"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="surv.html"><a href="surv.html#los-paquetes-que-necesitas-instalar-7"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="9.1" data-path="surv.html"><a href="surv.html#introducción-4"><i class="fa fa-check"></i><b>9.1</b> Introducción</a></li>
<li class="chapter" data-level="9.2" data-path="surv.html"><a href="surv.html#cómo-interpretamos-las-tasas-de-riesgo"><i class="fa fa-check"></i><b>9.2</b> ¿Cómo interpretamos las tasas de riesgo?</a></li>
<li class="chapter" data-level="9.3" data-path="surv.html"><a href="surv.html#el-modelo-cox-de-riesgos-proporcionales"><i class="fa fa-check"></i><b>9.3</b> El modelo Cox de riesgos proporcionales</a></li>
<li class="chapter" data-level="9.4" data-path="surv.html"><a href="surv.html#estimación-de-los-modelos-de-cox-en-r"><i class="fa fa-check"></i><b>9.4</b> Estimación de los modelos de Cox en R</a></li>
<li class="chapter" data-level="9.5" data-path="surv.html"><a href="surv.html#modelos-de-supervivencia-e-interpretación-sus-coeficientes-como-hazard-ratios."><i class="fa fa-check"></i><b>9.5</b> Modelos de supervivencia e interpretación sus coeficientes como Hazard Ratios.</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="causal-inf.html"><a href="causal-inf.html"><i class="fa fa-check"></i><b>10</b> Inferencia causal</a><ul>
<li class="chapter" data-level="" data-path="causal-inf.html"><a href="causal-inf.html#lecturas-sugeridas-6"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="causal-inf.html"><a href="causal-inf.html#los-paquetes-que-necesitas-instalar-8"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="10.1" data-path="causal-inf.html"><a href="causal-inf.html#introducción-5"><i class="fa fa-check"></i><b>10.1</b> Introducción</a></li>
<li class="chapter" data-level="10.2" data-path="causal-inf.html"><a href="causal-inf.html#causalidad-y-gráficos-causales"><i class="fa fa-check"></i><b>10.2</b> Causalidad y gráficos causales</a></li>
<li class="chapter" data-level="10.3" data-path="causal-inf.html"><a href="causal-inf.html#midiendo-efectos-causales"><i class="fa fa-check"></i><b>10.3</b> Midiendo efectos causales</a></li>
<li class="chapter" data-level="10.4" data-path="causal-inf.html"><a href="causal-inf.html#dags-y-asociaciones-estadísticas"><i class="fa fa-check"></i><b>10.4</b> DAGs y asociaciones estadísticas</a></li>
<li class="chapter" data-level="10.5" data-path="causal-inf.html"><a href="causal-inf.html#puertas-traseras-y-cálculos-hacer"><i class="fa fa-check"></i><b>10.5</b> Puertas traseras y cálculos “<em>hacer</em>”</a></li>
<li class="chapter" data-level="10.6" data-path="causal-inf.html"><a href="causal-inf.html#dibujar-y-analizar-dags"><i class="fa fa-check"></i><b>10.6</b> Dibujar y analizar DAGs</a><ul>
<li class="chapter" data-level="10.6.1" data-path="causal-inf.html"><a href="causal-inf.html#dibujar-un-dag-con-dagitty"><i class="fa fa-check"></i><b>10.6.1</b> Dibujar un DAG con DAGitty</a></li>
<li class="chapter" data-level="10.6.2" data-path="causal-inf.html"><a href="causal-inf.html#encontrar-sets-de-ajuste-con-dagitty"><i class="fa fa-check"></i><b>10.6.2</b> Encontrar sets de ajuste con DAGitty</a></li>
<li class="chapter" data-level="10.6.3" data-path="causal-inf.html"><a href="causal-inf.html#diseñar-dags-en-r"><i class="fa fa-check"></i><b>10.6.3</b> Diseñar DAGs en R</a></li>
<li class="chapter" data-level="10.6.4" data-path="causal-inf.html"><a href="causal-inf.html#encontrar-caminos-y-sets-de-ajustes-con-r"><i class="fa fa-check"></i><b>10.6.4</b> Encontrar caminos y sets de ajustes con R</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="causal-inf.html"><a href="causal-inf.html#haciendo-ajustes-causales"><i class="fa fa-check"></i><b>10.7</b> Haciendo ajustes causales</a><ul>
<li class="chapter" data-level="10.7.1" data-path="causal-inf.html"><a href="causal-inf.html#datos-de-redes-para-mosquitos"><i class="fa fa-check"></i><b>10.7.1</b> Datos de redes para mosquitos</a></li>
<li class="chapter" data-level="10.7.2" data-path="causal-inf.html"><a href="causal-inf.html#verificar-las-independencias-condicionales"><i class="fa fa-check"></i><b>10.7.2</b> Verificar las independencias condicionales</a></li>
<li class="chapter" data-level="10.7.3" data-path="causal-inf.html"><a href="causal-inf.html#encuentra-el-set-de-ajuste"><i class="fa fa-check"></i><b>10.7.3</b> Encuentra el set de ajuste</a></li>
<li class="chapter" data-level="10.7.4" data-path="causal-inf.html"><a href="causal-inf.html#estimación-ingenua-no-ajustada"><i class="fa fa-check"></i><b>10.7.4</b> Estimación ingenua no ajustada</a></li>
<li class="chapter" data-level="10.7.5" data-path="causal-inf.html"><a href="causal-inf.html#regresiones"><i class="fa fa-check"></i><b>10.7.5</b> Regresiones</a></li>
<li class="chapter" data-level="10.7.6" data-path="causal-inf.html"><a href="causal-inf.html#matching"><i class="fa fa-check"></i><b>10.7.6</b> Matching</a></li>
<li class="chapter" data-level="10.7.7" data-path="causal-inf.html"><a href="causal-inf.html#ponderación-de-probabilidad-inversa"><i class="fa fa-check"></i><b>10.7.7</b> Ponderación de probabilidad inversa</a></li>
<li class="chapter" data-level="10.7.8" data-path="causal-inf.html"><a href="causal-inf.html#comparando-todos-los-métodos"><i class="fa fa-check"></i><b>10.7.8</b> Comparando todos los métodos</a></li>
</ul></li>
<li class="chapter" data-level="10.8" data-path="causal-inf.html"><a href="causal-inf.html#cconsejos-finales"><i class="fa fa-check"></i><b>10.8</b> CConsejos finales</a></li>
</ul></li>
<li class="part"><span><b>III Aplicaciones</b></span></li>
<li class="chapter" data-level="11" data-path="adv-data.html"><a href="adv-data.html"><i class="fa fa-check"></i><b>11</b> Manejo avanzado de datos políticos</a><ul>
<li class="chapter" data-level="" data-path="adv-data.html"><a href="adv-data.html#lecturas-sugeridas-7"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="adv-data.html"><a href="adv-data.html#los-paquetes-que-necesitas-instalar-9"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="11.1" data-path="adv-data.html"><a href="adv-data.html#introducción-6"><i class="fa fa-check"></i><b>11.1</b> Introducción</a></li>
<li class="chapter" data-level="11.2" data-path="adv-data.html"><a href="adv-data.html#uniendo-bases-de-datos"><i class="fa fa-check"></i><b>11.2</b> Uniendo bases de datos</a></li>
<li class="chapter" data-level="11.3" data-path="adv-data.html"><a href="adv-data.html#estandarizando-los-códigos-de-país"><i class="fa fa-check"></i><b>11.3</b> Estandarizando los códigos de país</a></li>
<li class="chapter" data-level="11.4" data-path="adv-data.html"><a href="adv-data.html#la-unión-borrosa-o-inexacta-de-los-datos"><i class="fa fa-check"></i><b>11.4</b> La unión borrosa o inexacta de los datos</a></li>
<li class="chapter" data-level="11.5" data-path="adv-data.html"><a href="adv-data.html#gestión-de-valores-perdidos"><i class="fa fa-check"></i><b>11.5</b> Gestión de valores perdidos</a><ul>
<li class="chapter" data-level="11.5.1" data-path="adv-data.html"><a href="adv-data.html#tipos-de-valores-perdidos"><i class="fa fa-check"></i><b>11.5.1</b> Tipos de valores perdidos</a></li>
<li class="chapter" data-level="11.5.2" data-path="adv-data.html"><a href="adv-data.html#descripción-de-los-valores-que-faltan-en-la-base-de-datos"><i class="fa fa-check"></i><b>11.5.2</b> Descripción de los valores que faltan en la base de datos</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="adv-data.html"><a href="adv-data.html#imputación-de-valores-perdidos"><i class="fa fa-check"></i><b>11.6</b> Imputación de valores perdidos</a><ul>
<li class="chapter" data-level="11.6.1" data-path="adv-data.html"><a href="adv-data.html#regresiones-luego-de-imputar-datos"><i class="fa fa-check"></i><b>11.6.1</b> Regresiones luego de imputar datos</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="web-mining.html"><a href="web-mining.html"><i class="fa fa-check"></i><b>12</b> Web Scraping</a><ul>
<li class="chapter" data-level="" data-path="web-mining.html"><a href="web-mining.html#lecturas-sugeridas-8"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="web-mining.html"><a href="web-mining.html#los-paquetes-que-necesitas-instalar-10"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="12.1" data-path="web-mining.html"><a href="web-mining.html#introducción-7"><i class="fa fa-check"></i><b>12.1</b> Introducción</a></li>
<li class="chapter" data-level="12.2" data-path="web-mining.html"><a href="web-mining.html#formas-de-hacer-web-scraping"><i class="fa fa-check"></i><b>12.2</b> Formas de hacer web scraping</a><ul>
<li class="chapter" data-level="12.2.1" data-path="web-mining.html"><a href="web-mining.html#estándar-de-exclusión-de-robot"><i class="fa fa-check"></i><b>12.2.1</b> Estándar de exclusión de robot</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="web-mining.html"><a href="web-mining.html#web-scraping-en-r"><i class="fa fa-check"></i><b>12.3</b> Web scraping en R</a><ul>
<li class="chapter" data-level="12.3.1" data-path="web-mining.html"><a href="web-mining.html#ejemplo-aplicado-los-comunicados-de-prensa-de-la-organización-de-estados-americanos-oea"><i class="fa fa-check"></i><b>12.3.1</b> Ejemplo aplicado: los comunicados de prensa de la Organización de Estados Americanos (OEA)</a></li>
<li class="chapter" data-level="12.3.2" data-path="web-mining.html"><a href="web-mining.html#caraga-el-html-para-trabajar-con-r"><i class="fa fa-check"></i><b>12.3.2</b> Caraga el html para trabajar con R</a></li>
<li class="chapter" data-level="12.3.3" data-path="web-mining.html"><a href="web-mining.html#extraer-la-información-con-html_nodes-html_text"><i class="fa fa-check"></i><b>12.3.3</b> Extraer la información con <code>html_nodes()</code> + <code>html_text()</code></a></li>
<li class="chapter" data-level="12.3.4" data-path="web-mining.html"><a href="web-mining.html#iteraciones"><i class="fa fa-check"></i><b>12.3.4</b> Iteraciones</a></li>
<li class="chapter" data-level="12.3.5" data-path="web-mining.html"><a href="web-mining.html#funciones-personalizadas-recetas"><i class="fa fa-check"></i><b>12.3.5</b> Funciones personalizadas (recetas)</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="web-mining.html"><a href="web-mining.html#usando-apis-y-extrayendo-datos-de-twitter"><i class="fa fa-check"></i><b>12.4</b> Usando APIs y extrayendo datos de Twitter</a><ul>
<li class="chapter" data-level="12.4.1" data-path="web-mining.html"><a href="web-mining.html#buscar-una-palabra-clave"><i class="fa fa-check"></i><b>12.4.1</b> Buscar una palabra clave</a></li>
<li class="chapter" data-level="12.4.2" data-path="web-mining.html"><a href="web-mining.html#buscar-una-frase"><i class="fa fa-check"></i><b>12.4.2</b> Buscar una frase</a></li>
<li class="chapter" data-level="12.4.3" data-path="web-mining.html"><a href="web-mining.html#descargando-características-relacionadas-con-los-usuarios-de-twitter"><i class="fa fa-check"></i><b>12.4.3</b> Descargando características relacionadas con los usuarios de Twitter</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="qta.html"><a href="qta.html"><i class="fa fa-check"></i><b>13</b> Análisis cuantitativo de textos políticos</a><ul>
<li class="chapter" data-level="" data-path="qta.html"><a href="qta.html#lecturas-recomendadas"><i class="fa fa-check"></i>Lecturas recomendadas</a></li>
<li class="chapter" data-level="" data-path="qta.html"><a href="qta.html#paquetes-que-necesitas-instalar"><i class="fa fa-check"></i>Paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="13.1" data-path="qta.html"><a href="qta.html#sqta1"><i class="fa fa-check"></i><b>13.1</b> Análisis de hashtags políticos</a><ul>
<li class="chapter" data-level="13.1.1" data-path="qta.html"><a href="qta.html#exploración-de-datos-de-twitter"><i class="fa fa-check"></i><b>13.1.1</b> Exploración de datos de Twitter</a></li>
<li class="chapter" data-level="13.1.2" data-path="qta.html"><a href="qta.html#diagnóstico-visual"><i class="fa fa-check"></i><b>13.1.2</b> Diagnóstico visual</a></li>
<li class="chapter" data-level="13.1.3" data-path="qta.html"><a href="qta.html#hashtags-más-utilizados"><i class="fa fa-check"></i><b>13.1.3</b> Hashtags más utilizados</a></li>
<li class="chapter" data-level="13.1.4" data-path="qta.html"><a href="qta.html#wordclouds-nubes-de-palabras"><i class="fa fa-check"></i><b>13.1.4</b> Wordclouds (Nubes de palabras)</a></li>
<li class="chapter" data-level="13.1.5" data-path="qta.html"><a href="qta.html#nubes-de-palabras-por-grupos"><i class="fa fa-check"></i><b>13.1.5</b> Nubes de palabras por grupos</a></li>
<li class="chapter" data-level="13.1.6" data-path="qta.html"><a href="qta.html#gráficos-de-barras"><i class="fa fa-check"></i><b>13.1.6</b> Gráficos de barras</a></li>
<li class="chapter" data-level="13.1.7" data-path="qta.html"><a href="qta.html#variación-temporal-en-el-uso-de-hashtags"><i class="fa fa-check"></i><b>13.1.7</b> Variación temporal en el uso de hashtags</a></li>
<li class="chapter" data-level="13.1.8" data-path="qta.html"><a href="qta.html#para-resumir"><i class="fa fa-check"></i><b>13.1.8</b> Para resumir</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="qta.html"><a href="qta.html#wordfish"><i class="fa fa-check"></i><b>13.2</b> Wordfish</a><ul>
<li class="chapter" data-level="13.2.1" data-path="qta.html"><a href="qta.html#inspección-y-limpieza-de-datos"><i class="fa fa-check"></i><b>13.2.1</b> Inspección y limpieza de datos</a></li>
<li class="chapter" data-level="13.2.2" data-path="qta.html"><a href="qta.html#pre-procesamiento"><i class="fa fa-check"></i><b>13.2.2</b> Pre-procesamiento</a></li>
<li class="chapter" data-level="13.2.3" data-path="qta.html"><a href="qta.html#sqta2"><i class="fa fa-check"></i><b>13.2.3</b> Wordfish</a></li>
<li class="chapter" data-level="13.2.4" data-path="qta.html"><a href="qta.html#qué-aprendimos-de-wordfish"><i class="fa fa-check"></i><b>13.2.4</b> ¿Qué aprendimos de Wordfish?</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="qta.html"><a href="qta.html#sqta3"><i class="fa fa-check"></i><b>13.3</b> Structural Topic Modeling (STM)</a><ul>
<li class="chapter" data-level="13.3.1" data-path="qta.html"><a href="qta.html#pre-procesamiento-1"><i class="fa fa-check"></i><b>13.3.1</b> Pre-procesamiento</a></li>
<li class="chapter" data-level="13.3.2" data-path="qta.html"><a href="qta.html#diagnósticos"><i class="fa fa-check"></i><b>13.3.2</b> Diagnósticos</a></li>
<li class="chapter" data-level="13.3.3" data-path="qta.html"><a href="qta.html#análisis"><i class="fa fa-check"></i><b>13.3.3</b> Análisis</a></li>
<li class="chapter" data-level="13.3.4" data-path="qta.html"><a href="qta.html#observaciones-finales"><i class="fa fa-check"></i><b>13.3.4</b> Observaciones finales</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="networks.html"><a href="networks.html"><i class="fa fa-check"></i><b>14</b> Análisis de redes</a><ul>
<li class="chapter" data-level="" data-path="networks.html"><a href="networks.html#lecturas-sugeridas-9"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="networks.html"><a href="networks.html#los-paquetes-que-necesitas-instalar-11"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="14.1" data-path="networks.html"><a href="networks.html#introducción-8"><i class="fa fa-check"></i><b>14.1</b> Introducción</a></li>
<li class="chapter" data-level="14.2" data-path="networks.html"><a href="networks.html#conceptos-básicos-en-una-red"><i class="fa fa-check"></i><b>14.2</b> Conceptos básicos en una red</a><ul>
<li class="chapter" data-level="14.2.1" data-path="networks.html"><a href="networks.html#nodos-y-enlaces"><i class="fa fa-check"></i><b>14.2.1</b> Nodos y enlaces</a></li>
<li class="chapter" data-level="14.2.2" data-path="networks.html"><a href="networks.html#matriz-de-adyacencia"><i class="fa fa-check"></i><b>14.2.2</b> Matriz de adyacencia</a></li>
<li class="chapter" data-level="14.2.3" data-path="networks.html"><a href="networks.html#pesos-y-direcciones"><i class="fa fa-check"></i><b>14.2.3</b> Pesos y direcciones</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="networks.html"><a href="networks.html#bases-de-datos-de-la-red"><i class="fa fa-check"></i><b>14.3</b> Bases de datos de la red</a></li>
<li class="chapter" data-level="14.4" data-path="networks.html"><a href="networks.html#presentación-gráfica-de-una-red"><i class="fa fa-check"></i><b>14.4</b> Presentación gráfica de una red</a></li>
<li class="chapter" data-level="14.5" data-path="networks.html"><a href="networks.html#medidas-de-centralidad"><i class="fa fa-check"></i><b>14.5</b> Medidas de centralidad</a><ul>
<li class="chapter" data-level="14.5.1" data-path="networks.html"><a href="networks.html#grado"><i class="fa fa-check"></i><b>14.5.1</b> Grado</a></li>
<li class="chapter" data-level="14.5.2" data-path="networks.html"><a href="networks.html#centralidad-del-eigenvector"><i class="fa fa-check"></i><b>14.5.2</b> Centralidad del eigenvector</a></li>
<li class="chapter" data-level="14.5.3" data-path="networks.html"><a href="networks.html#centralidad-de-intermediación-betweenness"><i class="fa fa-check"></i><b>14.5.3</b> Centralidad de intermediación (<em>betweenness</em>)</a></li>
<li class="chapter" data-level="14.5.4" data-path="networks.html"><a href="networks.html#cercanía"><i class="fa fa-check"></i><b>14.5.4</b> Cercanía</a></li>
</ul></li>
<li class="chapter" data-level="14.6" data-path="networks.html"><a href="networks.html#aplicación-en-r"><i class="fa fa-check"></i><b>14.6</b> Aplicación en R</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="indexes.html"><a href="indexes.html"><i class="fa fa-check"></i><b>15</b> Análisis de componentes principales</a><ul>
<li class="chapter" data-level="" data-path="indexes.html"><a href="indexes.html#lecturas-sugeridas-10"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="indexes.html"><a href="indexes.html#los-paquetes-que-necesitas-instalar-12"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="15.1" data-path="indexes.html"><a href="indexes.html#introducción-9"><i class="fa fa-check"></i><b>15.1</b> Introducción</a><ul>
<li class="chapter" data-level="15.1.1" data-path="indexes.html"><a href="indexes.html#conceptos-medidas-y-validez"><i class="fa fa-check"></i><b>15.1.1</b> Conceptos, medidas y validez</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="indexes.html"><a href="indexes.html#cómo-funciona-el-análisis-de-componentes-principales"><i class="fa fa-check"></i><b>15.2</b> Cómo funciona el Análisis de Componentes Principales</a></li>
<li class="chapter" data-level="15.3" data-path="indexes.html"><a href="indexes.html#nociones-básicas-en-r"><i class="fa fa-check"></i><b>15.3</b> Nociones básicas en R</a></li>
<li class="chapter" data-level="15.4" data-path="indexes.html"><a href="indexes.html#dimensionalidad-del-concepto"><i class="fa fa-check"></i><b>15.4</b> Dimensionalidad del concepto</a></li>
<li class="chapter" data-level="15.5" data-path="indexes.html"><a href="indexes.html#variación-del-concepto"><i class="fa fa-check"></i><b>15.5</b> Variación del concepto</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="maps.html"><a href="maps.html"><i class="fa fa-check"></i><b>16</b> Mapas y datos espaciales</a><ul>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#lecturas-sugeridas-11"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#los-paquetes-que-necesitas-instalar-13"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="16.1" data-path="maps.html"><a href="maps.html#introducción-10"><i class="fa fa-check"></i><b>16.1</b> Introducción</a><ul>
<li class="chapter" data-level="16.1.1" data-path="maps.html"><a href="maps.html#datos-espaciales-qué-son"><i class="fa fa-check"></i><b>16.1.1</b> Datos espaciales: ¿qué son?</a></li>
<li class="chapter" data-level="16.1.2" data-path="maps.html"><a href="maps.html#estructura-de-datos-espaciales"><i class="fa fa-check"></i><b>16.1.2</b> Estructura de datos espaciales</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="maps.html"><a href="maps.html#datos-espaciales-en-r"><i class="fa fa-check"></i><b>16.2</b> Datos espaciales en R</a><ul>
<li class="chapter" data-level="16.2.1" data-path="maps.html"><a href="maps.html#características-simples-en-r"><i class="fa fa-check"></i><b>16.2.1</b> Características simples en R</a></li>
<li class="chapter" data-level="16.2.2" data-path="maps.html"><a href="maps.html#estructura"><i class="fa fa-check"></i><b>16.2.2</b> Estructura</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="maps.html"><a href="maps.html#gestión-de-datos-espaciales"><i class="fa fa-check"></i><b>16.3</b> Gestión de Datos Espaciales</a><ul>
<li class="chapter" data-level="16.3.1" data-path="maps.html"><a href="maps.html#modificaciones"><i class="fa fa-check"></i><b>16.3.1</b> Modificaciones</a></li>
<li class="chapter" data-level="16.3.2" data-path="maps.html"><a href="maps.html#añade-datos-de-otras-bases-de-datos-con-left_join"><i class="fa fa-check"></i><b>16.3.2</b> Añade datos de otras bases de datos con <code>left_join()</code></a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="maps.html"><a href="maps.html#mapeo"><i class="fa fa-check"></i><b>16.4</b> Mapeo</a><ul>
<li class="chapter" data-level="16.4.1" data-path="maps.html"><a href="maps.html#generando-centroides"><i class="fa fa-check"></i><b>16.4.1</b> Generando centroides</a></li>
<li class="chapter" data-level="16.4.2" data-path="maps.html"><a href="maps.html#mapeando-variables"><i class="fa fa-check"></i><b>16.4.2</b> Mapeando variables</a></li>
<li class="chapter" data-level="16.4.3" data-path="maps.html"><a href="maps.html#mapeando-puntos"><i class="fa fa-check"></i><b>16.4.3</b> Mapeando puntos</a></li>
</ul></li>
<li class="chapter" data-level="16.5" data-path="maps.html"><a href="maps.html#inferencia-a-partir-de-datos-espaciales"><i class="fa fa-check"></i><b>16.5</b> Inferencia a partir de datos espaciales</a><ul>
<li class="chapter" data-level="16.5.1" data-path="maps.html"><a href="maps.html#indicador-local-de-asociación-espacial-lisa-por-sus-siglas-en-inglés"><i class="fa fa-check"></i><b>16.5.1</b> Indicador local de asociación espacial (LISA, por sus siglas en inglés)</a></li>
<li class="chapter" data-level="16.5.2" data-path="maps.html"><a href="maps.html#matriz-de-pesos-espaciales"><i class="fa fa-check"></i><b>16.5.2</b> Matriz de pesos espaciales</a></li>
<li class="chapter" data-level="16.5.3" data-path="maps.html"><a href="maps.html#i-de-moran"><i class="fa fa-check"></i><b>16.5.3</b> I de Moran</a></li>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#comentarios-finales-referencias-para-un-mejor-análisis-de-datos-espaciales"><i class="fa fa-check"></i>Comentarios finales: Referencias para un mejor análisis de datos espaciales</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Referencias</b></span></li>
<li class="chapter" data-level="17" data-path="referencias.html"><a href="referencias.html"><i class="fa fa-check"></i><b>17</b> Referencias</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">AnalizaR Datos Políticos (v1.0)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="surv" class="section level1">
<h1><span class="header-section-number">Capítulo 9</span> Modelos de supervivencia</h1>
<p>Francisco Urdinez<a href="#fn42" class="footnote-ref" id="fnref42"><sup>42</sup></a></p>
<div id="lecturas-sugeridas-5" class="section level3 unnumbered">
<h3>Lecturas sugeridas</h3>
<ul>
<li><p>Allison, P. D. (2014). <em>Event history and survival analysis</em> (2nd ed.). Thousand Oaks: SAGE.</p></li>
<li><p>Box-Steffensmeier, J. M. &amp; Jones, B. S. (2004). <em>Event history modeling: A guide for social scientists</em>. Cambridge: Cambridge University Press.</p></li>
<li><p>Broström, G. (2018). <em>Event history analysis with R</em>. Boca Raton: CRC Press.</p></li>
<li><p>Golub, J. (2008). Discrete Choice Methods. In J. M. Box-Steffensmeier, H. E. Brady, &amp; D. Collier (Eds.), <em>The Oxford Handbook of Political Methodology</em> (pp. 530–546). Oxford: Oxford University Press.</p></li>
</ul>
</div>
<div id="los-paquetes-que-necesitas-instalar-7" class="section level3 unnumbered">
<h3>Los paquetes que necesitas instalar</h3>
<ul>
<li><code>tidyverse</code> <span class="citation">(Wickham <a href="referencias.html#ref-R-tidyverse" role="doc-biblioref">2019</a><a href="referencias.html#ref-R-tidyverse" role="doc-biblioref">b</a>)</span>, <code>paqueteadp</code> <span class="citation">(Urdinez and Cruz <a href="referencias.html#ref-R-paqueteadp" role="doc-biblioref">2020</a>)</span>, <code>skimr</code> <span class="citation">(Waring et al. <a href="referencias.html#ref-R-skimr" role="doc-biblioref">2020</a>)</span>, <code>countrycode</code> <span class="citation">(Arel-Bundock <a href="referencias.html#ref-R-countrycode" role="doc-biblioref">2020</a>)</span>, <code>ggalt</code> <span class="citation">(Rudis, Bolker, and Schulz <a href="referencias.html#ref-R-ggalt" role="doc-biblioref">2017</a>)</span>, <code>survival</code> <span class="citation">(Therneau <a href="referencias.html#ref-R-survival" role="doc-biblioref">2020</a>)</span>, <code>survminer</code> <span class="citation">(Kassambara, Kosinski, and Biecek <a href="referencias.html#ref-R-survminer" role="doc-biblioref">2020</a>)</span>, <code>texreg</code> <span class="citation">(Leifeld <a href="referencias.html#ref-R-texreg" role="doc-biblioref">2020</a>)</span>.</li>
</ul>
</div>
<div id="introducción-4" class="section level2">
<h2><span class="header-section-number">9.1</span> Introducción</h2>
<p>Hay una serie de cuestiones recurrentes en relación con el análisis de datos políticos que aún no hemos abordado. En muchas ocasiones estamos interesados en saber por qué ciertos eventos duran lo que duran, o por qué tardan más que otros en ocurrir. ¿Por qué la paz es tan duradera en ciertos países, mientras que otros están en guerra constante? ¿Cuál era la posibilidad de que se produjeran disturbios sociales en Venezuela en 2018? ¿Por qué algunos legisladores permanecen en el cargo durante muchos períodos consecutivos, mientras que otros ni siquiera son reelegidos una vez? ¿Cuánto tiempo tarda un sindicato en hacer huelga durante una crisis económica?
Todas estas preguntas son sobre la duración de un evento. El momento de ocurrencia de un evento es parte de la respuesta que buscamos, necesitamos de un modelo que nos permita llegar a esta respuesta. <span class="citation">(<a href="referencias.html#ref-box-steffensmeierEventHistoryModeling2004" role="doc-biblioref">2004</a>)</span>, una de las principales referencias en Ciencia Política de este método, se refiere a ellos como “modelos de eventos históricos” aunque buena parte de la literatura los llama modelos de supervivencia o modelos de duración. Si bien en la Ciencia Política no son modelos tan utilizados como uno creería (en el fondo, casi todas las preguntas que nos hacemos pueden ser reformuladas en una pregunta sobre la duración del evento), las ciencias médicas han explorado estos métodos en profundidad, y muchas las referencias que uno encuentra en <code>R</code> sobre paquetes accesorios a estos modelos son de departamentos bioestadísticos y médicos. De allí que “modelos de supervivencia” sea el nombre más frecuentemente utilizado para estos modelos, ya que en medicina comenzó a utilizárselos para modelar qué variables afectaban la sobrevida de sus pacientes enfermos.</p>
<p>Podemos tener dos tipos de bases de datos para estos problemas. Por un lado, podemos tener una base en formato de panel en el que para un momento dado nuestra variable dependiente codifica si el evento ha ocurrido (<code>=1</code>) o no (<code>=0</code>). Así, por ejemplo, podemos tener una muestra de veinte países para cincuenta años (1965-2015) en los que nuestra variable de interés es si el país ha implementado una reforma constitucional. La variable independiente asumirá el valor 1 para el año <a href="https://es.wikipedia.org/wiki/Reforma_constitucional_argentina_de_1994">1994 en Argentina</a>, pero será 0 para el resto de los años en este país. Por otro lado, podemos tener una base de datos transversal en la que cada observación aparece codificada apenas una vez. En este caso necesitamos, además de la variable que nos dirá si en el periodo de interés el evento ocurrió o no para cada observación (por ejemplo, Argentina debería ser codificada como “1”), una variable extra que codifique el tiempo de “supervivencia” de cada observación, es decir, cuánto tiempo pasó hasta que finalmente el evento sucedió. Para el caso de Argentina, esta variable codificará 29 (años), que es lo que demoró en implementarse una reforma constitucional desde 1965. La elección del año de partida, como podrá sospechar, es decisión del investigador, pero tiene un efecto enorme sobre nuestros resultados. Además, muchas veces la fecha de inicio acaba determinada por la disponibilidad de datos y se alejan del ideal que quisiéramos modelar.</p>
<p>Supongamos que nos hacemos la pregunta que se hizo David Altman <span class="citation">(<a href="referencias.html#ref-altmanCitizenshipContemporaryDirect2019" role="doc-biblioref">2019</a>)</span> “¿Por qué algunos países demoran menos que otros en implementar instancias de democracia directa?”. Para ello tenemos una base de datos en formato de panel que parte del año 1900 y que llega a 2016 para 202 países (algunas observaciones, como la Unión Soviética se transforman en otras observaciones a partir de un determinado año en que dejan de existir). Al observar sus datos uno nota algo que probablemente también te suceda en tu base de datos. Para el año 2016 apenas un pequeño porcentaje de países había implementado este tipo de mecanismos (27% para ser más precisos) pero la base está censurada ya que a partir de ese año no sabemos que ha ocurrido con los países que aún no habían implementado mecanismos de democracia directa. No todas las observaciones han “muerto” aún, ¿cómo saber cuándo lo harán? Ésta es una pregunta válida, que podremos responder con este tipo de modelos, ya que podemos calcular el tiempo que demorará cada uno de los países censurados en nuestra muestra (con la información que le damos al modelo, que siempre es incompleta).</p>
<p>En nuestra base de datos tendremos, al menos, cuatro tipos de observaciones (ver figura <a href="surv.html#fig:surv-ex-obs">9.1</a>): (a) aquellas que, para el momento en que tenemos datos ya estaban en la muestra, aunque no siempre sabremos hace cuanto que “existen”. Son, en la figura, las observaciones B y C. En la base de datos de Altman, por ejemplo, México ya existía como entidad política en 1900, cuando su base de datos parte (sabemos que la Primera República Federal existió como entidad política desde octubre de 1824, por lo que México sería codificado como existente a partir de esa fecha). También sabemos que en 2012, por primera vez, México implementó una iniciativa de democracia directa, lo que define como positiva la ocurrencia del evento que nos interesa medir. Así, México sería como la observación B de la figura; (b) Algunas observaciones estarán desde el comienzo de la muestra, y existirán hasta el último momento sin haber registrado el evento de interés. Tal es el caso, de la observación C en la figura. En la muestra de Altman un ejemplo sería Argentina, que desde 1900 está registrado en la base (ya había “nacido”), y hasta el último año de la muestra no había registrado instancias de democracia directa (no “murió”), lo que la transforma en una observación censurada.</p>
<p>Por razones prácticas, no cambia saber qué ocurrió a partir del año en que nuestra base termina. Por ejemplo, en la figura, nuestra base cubre hast <span class="math inline">\(t_7\)</span>, y sabemos que en <span class="math inline">\(t_8\)</span> la observación C aún no había muerto, y la observación D lo había hecho en <span class="math inline">\(t_8\)</span>. En nuestra base, C y D serán ambas observaciones censuradas en <span class="math inline">\(t_7\)</span>; (c) Algunas observaciones pueden entrar “tarde” en la muestra, como es el caso de las observaciones A y D. Por ejemplo, Eslovenia entra a la muestra de Altman en 1991, que es cuando se independiza de Yugoslavia y “nace” como país; (d) Algunas observaciones, independientemente de cuando entren a la muestra, “moriran” durante el periodo analizado. Por ejemplo, A y B mueren dentro del periodo que hemos medido entrte <span class="math inline">\(t_1\)</span> y <span class="math inline">\(t_7\)</span>. Ya para la observación D, no registramos su muerte. Hay un caso no considerado en el ejemplo, de observaciones que nacen y mueren sucesivamente a lo largo del periodo de estudio. Para ellas, deberemos decidir si las tratamos como observaciones independientes, o si modelamos la posibilidad de morir más de una vez. Si es así, la probabilidad de morir por segunda vez deberá estar condicionada por la probabilidad de haber muerto (y cuando!) por primera vez. Este es un tipo de caso algo más complejo que no cubriremos en este capítulo.</p>
<div class="figure" style="text-align: center"><span id="fig:surv-ex-obs"></span>
<img src="00-images/surv/ex_obs.png" alt=" Ejemplo de observaciones presentes en una base de datos de supervivencia " width="70%" />
<p class="caption">
Figura 9.1:  Ejemplo de observaciones presentes en una base de datos de supervivencia
</p>
</div>
</div>
<div id="cómo-interpretamos-las-tasas-de-riesgo" class="section level2">
<h2><span class="header-section-number">9.2</span> ¿Cómo interpretamos las tasas de riesgo?</h2>
<p>Los modelos de supervivencia se interpretan a partir de la probabilidad de que en un momento dado el evento de interés ocurra siendo que no ha ocurrido aún. Esta probabilidad recibe el nombre de tasa de riesgo o <em>Hazard rate</em>. Partimos sabiendo que tenemos una variable, que llamaremos <span class="math inline">\(T\)</span>, y que representa un valor aleatorio positivo y que tiene una distribución de probabilidades (correspondiente a la probabilidad del evento ocurrir en cada uno de los momentos posibles) que llamaremos <span class="math inline">\(f(t)\)</span>. Esta probabilidad se puede expresar de manera acumulada, como una densidad acumulada <span class="math inline">\(F(t)\)</span>. Como se expresa en la siguiente formula, <span class="math inline">\(F(t)\)</span> viene dada por la probabilidad de que el tiempo de supervivencia <span class="math inline">\(T\)</span> sea menor o igual a un tiempo específico <span class="math inline">\(t\)</span> :</p>
<p><span class="math display">\[F(t)=\int\limits_0^t f(u)d(u)=Pr(T)\leq t)\]</span></p>
<p>La función de supervivencia <span class="math inline">\(\hat S(t)\)</span>, que es un concepto clave en estos modelos, está relacionado con <span class="math inline">\(F(t)\)</span>, ya que</p>
<p><span class="math display">\[\hat S(t)= 1-F(t)=Pr(T\geq t)\]</span></p>
<p>En otras palabras, la función de supervivencia es la probabilidad inversa de <span class="math inline">\(F(t)\)</span>, pues dice respecto a la probabilidad de que el tiempo de supervivencia <span class="math inline">\(T\)</span> sea mayor o igual un tiempo <span class="math inline">\(t\)</span> de interés. Para el ejemplo concreto de Altman, uno podría preguntarse cuál es la probabilidad de que un país no implemente un mecanismo de democracia directa (lo que sería equivalente a “sobrevivir” a dicha implementación) siendo que ya ha sobrevivido a los mismos por 30 años. A medida que más y más países en la muestra van implementando iniciativas de democracia directa, la probabilidad de supervivencia va disminuyendo.</p>
<p>Los coeficientes de los modelos de supervivencia se suelen interpretar como una tasa de riesgo, que es el cociente de la probabilidad de que el evento suceda, y su función de supervivencia</p>
<p><span class="math display">\[h(t)=\frac{f(t)}{S(t)}\]</span></p>
<p>Así, la tasa de riesgo indica la tasa a la que las observaciones “mueren” en nuestra muestra en el momento <span class="math inline">\(t\)</span>, considerando que la observación ha sobrevivido hasta el momento <span class="math inline">\(t\)</span>. Veremos más adelante cómo en el ejemplo de Altman podemos interpretar los coeficientes de nuestras regresiones como tasas de riesgo. En definitiva, la tasa de riesgo <span class="math inline">\(h(t)\)</span> es el riesgo de que el evento ocurra en un intervalo de tiempo determinado, que viene dado por</p>
<p><span class="math display">\[f(t)=\lim_{\bigtriangleup x \to 0} \frac {P(t+\bigtriangleup t &gt; T \geq t)}{\bigtriangleup t}\]</span></p>
</div>
<div id="el-modelo-cox-de-riesgos-proporcionales" class="section level2">
<h2><span class="header-section-number">9.3</span> El modelo Cox de riesgos proporcionales</h2>
<p>Hay dos tipos de modelos de supervivencia, los llamados modelos paramétricos y los llamados semi-parametricos. Los primeros son aquellos que hacen supuestos sobre las características de la población a la que la muestra pertenece. En este caso, los supuestos son sobre el riesgo de base o “baseline hazard”, es decir, sobre el riesgo de que el evento ocurra cuando todas nuestras variables independientes sean iguales a cero. El tipo de modelo de supervivencia más común para esta categoría es el modelo de Weibull. Por otro lado, los modelos semi-parametricos no hacen ningún tipo de supuestos sobre la función de base, ya que ésta es estimada a partir de los datos. El ejemplo más famoso de esta especificación es la del modelo de Cox.</p>
<p>El <em>Oxford Handbook</em> sobre metodología política dedica un <a href="https://www.oxfordhandbooks.com/view/10.1093/oxfordhb/9780199286546.001.0001/oxfordhb-9780199286546-e-23">capítulo entero</a> a discutir modelos de supervivencia, y en él se toma una posición fuerte en favor de los modelos semi-parametricos. Aquí seguiremos dicha recomendación ya que las ventajas son varias. Por un lado, como no se hacen presupustos sobre la función del riesgo de base, su estimación es mucho más precisa. En una estimación paramétrica, elegir un “baseline hazard” equivocado siginificará que todo nuestro trabajo analítico estará sesgado. La decisión de la forma que adopta la curva de base en un modelo de Weibull debería estar orientado por razones teóricas de cuál es el efecto de nuestra variable independiente sobre la probabilidad de supervivencia de la observación (ver figura <a href="surv.html#fig:surv-hazards">9.2</a>). Sin embargo, no siempre nuestra teoría define tales presupuestos. Elegir una especificación por Cox nos ahorra tomar una decisión tan costosa.</p>
<div class="figure" style="text-align: center"><span id="fig:surv-hazards"></span>
<img src="00-images/surv/hazards.png" alt=" Los diferentes peligros de la línea de base en el modelo de Weibull " width="80%" />
<p class="caption">
Figura 9.2:  Los diferentes peligros de la línea de base en el modelo de Weibull
</p>
</div>
<p>Una segunda ventaja de los modelos semi-parametricos sobre los paramétricos tiene que ver con el presupuesto de riesgos proporcionales. Ambos, modelos paramétricos y semi-parametricos, asumen que los riesgos entre dos individuos cualquiera de la muestra se mantienen constantes a lo largo de todo su periodo de supervivencia. Es decir, se asume que la curva de riesgo de cada individuo sigue la misma curva en el tiempo. Este es un presupuesto fuerte para trabajos en ciencia política, ya que las observaciones cambian en el tiempo y se diferencian unas de otras. Piénsense en el trabajo de Altman, por ejemplo. Uno puede teorizar que la probabilidad de una iniciativa de democracia directa en un determinado año en un determinado país estará afectada por el nivel de solidez de las instituciones democráticas, que podemos medir con algún tipo de variable estándar como los 21 puntos de <a href="https://www.systemicpeace.org/polity/polity4.htm">Polity IV</a> o la más reciente medición de <a href="https://www.v-dem.net">V-Dem</a>. Podemos, entonces, teorizar que a mayor solidez institucional mayor probabilidad de implementar mecanismos de democracia directa.</p>
<p>Sin embargo, los valores de estas variables no solo difieren ente países, sino que a lo largo del tiempo estas variables cambian mucho para un mismo país. Piénsese en Colombia, por ejemplo, en que la variable de V-Dem “vdem” sufrió avances y retrocesos entre 1900 y 2016 (ver figura 3). Cada vez que el valor de esta variable cambia, necesariamente cambia la tasa de riesgo de democracia directa para Colombia, rompiendo el presupuesto de proporcionalidad de los riesgos.</p>
<div class="figure" style="text-align: center"><span id="fig:polyarch"></span>
<img src="00-images/surv/polyarch.png" alt=" Valores de poliarquía según V-Dem " width="80%" />
<p class="caption">
Figura 9.3:  Valores de poliarquía según V-Dem
</p>
</div>
<p>La ventaja del modelo de Cox sobre sus contrapartes paramétricas es que existen tests para saber si alguna variable de nuestro modelo rompe el presupuesto de proporcionalidad de los riesgos, y de esa forma podremos corregirlo generando interacciones entre estas variables y variables temporales. De esta forma, permitimos que en nuestro modelo haya dos tipos de coeficientes: coeficientes constantes en el tiempo, y coeficientes cambiantes en el tiempo. Por ejemplo, podemos imaginar que, ante un aumento brusco en la calidad de las instituciones democráticas de un país, la tasa de riesgo de implementar democracia directa se dispare y que dicho efecto de desvanezca en el lapso de cuatro o cinco años. Cuando definas tu modelo, es importante que reflexiones sobre qué variables puede asumirse que permanezcan constantes en los riesgos y cuáles no.</p>
<p>La recomendación dada por el <em>Oxford Handbook</em> para una buena implementación de modelos de supervivencia es la siguiente: (a) Primero, dada las ventajas de los modelos semi-paramétricos sobre los paramétricos, se recomienda el uso de Cox por sobre Weibull u otro modelo paramétrico. (b) Una vez que hemos definido nuestra variable dependiente (el evento), el tiempo de “nacimiento” y de “muerte” de cada observación, podemos especificar nuestro modelo. (c) Los coeficientes deben ser interpretados en tasas de riesgo (hazard rates), lo que exige exponenciar los coeficientes brutos que obtenemos en R. (d) Una vez que tenemos el modelo que creemos correcto, en función de nuestras intuiciones teóricas, es necesario testear que ninguno de los coeficientes viole el presupuesto de proporcionalidad de los riesgos. Para ello ejecutamos un test de Grambsch y Therneau, o mediante el análisis de los residuos de Schoenfeld. (e) Una vez identificados los coeficientes problemáticos, permitimos que estos interactúen con el logaritmo natural de la variable que mide la duración del evento. De esta forma, permitimos que haya coeficientes cuyo efecto se desvanece o se potencia con el tiempo. Una vez corregidos los coeficientes problemáticos, podemos si, proceder a interpretar nuestro modelo y la función de supervivencia del modelo.</p>
</div>
<div id="estimación-de-los-modelos-de-cox-en-r" class="section level2">
<h2><span class="header-section-number">9.4</span> Estimación de los modelos de Cox en R</h2>
<p>Volvamos, entonces, a la pregunta que se hizo David Altman en el capítulo 3 de [Citizenship and Contemporary Direct Democracy <span class="citation">(<a href="referencias.html#ref-altmanCitizenshipContemporaryDirect2019" role="doc-biblioref">2019</a>)</span>, “Catching on: waves of adoption of citizen-initiated mechanisms of direct democracy since World War I”. La pregunta aquí es: ¿Por qué algunos países demoran menos que otros en implementar instancias de democracia directa? Comencemos por cargar el <code>tidyverse</code> y nuestra base (esta última, desde nuestro paquete <code>paqueteadp</code>):</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="surv.html#cb294-1"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb294-2"><a href="surv.html#cb294-2"></a><span class="kw">library</span>(survival)</span></code></pre></div>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="surv.html#cb295-1"></a><span class="kw">library</span>(paqueteadp)</span>
<span id="cb295-2"><a href="surv.html#cb295-2"></a><span class="kw">data</span>(<span class="st">&quot;democracia_directa&quot;</span>)</span></code></pre></div>
<p>Ahora la base se ha cargado en nuestra sesión de R:</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="surv.html#cb296-1"></a><span class="kw">ls</span>()</span>
<span id="cb296-2"><a href="surv.html#cb296-2"></a><span class="co">## [1] &quot;democracia_directa&quot;</span></span></code></pre></div>
<p>Las variables que tenemos en la base son las siguientes:</p>
<ul>
<li>Variable dependiente, que registra la ocurrencia del evento, que en este caso es la adopción de un mecanismo de democracia directa - <code>dem_directa</code></li>
<li>Año - <code>anio</code><br />
</li>
<li>Nombre del país - <code>pais_nombre</code></li>
<li>El país sufre un proceso de rápida democratización - <code>dem_rapida_positiva</code></li>
<li>El país sufre un proceso rápido de deterioro de la democracia - <code>dem_rapida_negativa</code></li>
<li>Memoria de instancias previas de democracia directa - <code>memoria</code></li>
<li>Score de democracia del país - <code>vdem</code></li>
<li>Efecto de la difusion de capacidades - <code>difusion_cap</code></li>
<li>Efecto de la difusión de ocurrencias - <code>difusion_ocurr</code></li>
<li>Logaritmo natural de la población total del país - <code>log_poblacion</code></li>
<li>Dummy para ex colonias británicas - <code>colonia_gb</code></li>
<li>Dummy para ex miembros de la URSS - <code>colonia_urss</code></li>
</ul>
<p>A lo largo del ejemplo usaremos los paquetes <code>skimr</code>, <code>countrycode</code>, <code>survival</code>, <code>rms</code>, <code>survminer</code>, <code>ggalt</code>, <code>tidyverse</code>y <code>texreg</code>, pero los iremos cargando uno a uno para que veas para que sirven.
Si utilizamos <code>skim</code>, como ya hicimos en otros capítulos, podemos ver que es una base en formato de panel balanceado. Es decir, tenemos una variable “país” (<code>pais_nombre</code>), que se repite a lo largo de una variable “año” (<code>anio</code>).</p>
<div class="figure" style="text-align: center"><span id="fig:skim-surv"></span>
<img src="00-images/surv/skim_surv.png" alt="Skim de nuestra base de datos" width="100%" />
<p class="caption">
Figura 9.4: Skim de nuestra base de datos
</p>
</div>
<p>Los países "“entran” a la base cuando comienzan a existir como países independientes. Veamos el caso de Albania, por ejemplo, que nace como país en 1912 luego de las <a href="https://es.wikipedia.org/wiki/Guerras_de_los_Balcanes">Guerras los Balcanes</a>:</p>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="surv.html#cb297-1"></a>democracia_directa <span class="op">%&gt;%</span></span>
<span id="cb297-2"><a href="surv.html#cb297-2"></a><span class="st">  </span><span class="kw">filter</span>(pais_nombre <span class="op">==</span><span class="st"> &quot;Albania&quot;</span>)</span>
<span id="cb297-3"><a href="surv.html#cb297-3"></a><span class="co">## # A tibble: 105 x 23</span></span>
<span id="cb297-4"><a href="surv.html#cb297-4"></a><span class="co">##   pais_nombre  anio dem_directa dem_rapida_posi… dem_rapida_nega… memoria</span></span>
<span id="cb297-5"><a href="surv.html#cb297-5"></a><span class="co">##   &lt;chr&gt;       &lt;dbl&gt;       &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;   &lt;dbl&gt;</span></span>
<span id="cb297-6"><a href="surv.html#cb297-6"></a><span class="co">## 1 Albania      1912           0                0                0       0</span></span>
<span id="cb297-7"><a href="surv.html#cb297-7"></a><span class="co">## 2 Albania      1913           0                0                0       0</span></span>
<span id="cb297-8"><a href="surv.html#cb297-8"></a><span class="co">## 3 Albania      1914           0                0                0       0</span></span>
<span id="cb297-9"><a href="surv.html#cb297-9"></a><span class="co">## # … with 102 more rows, and 17 more variables</span></span></code></pre></div>
<p>For the correct functioning of the models in R, countries should exit the analysis (and the dataset!) when they “die”. In this case, death occurs when countries adopt mechanisms of direct democracy. Albania, following the example, should stop existing in 1998, and do not last until 2016 as it does in the dataset. Thus, we need to create a second version of our dataset where this has already been corrected:</p>
<blockquote>
<p>Note: If your dataset is in this format since the beginning, you can skip this step.</p>
</blockquote>
<p>Para que los modelos funcionen correctamente en <code>R</code>, los países deberían salir del análisis (¡y de la base!) cuando “mueren”. En este caso la muerte se da cuando los países adoptan mecanismos de democracia directa. Albania, siguiendo el ejemplo, debería dejar de existir en 1998, y no perdurar en la base hasta 2016 como sucede ahora. Entonces crearemos una segunda versión de nuestra base de datos donde esto ya ha sido corregido:</p>
<div class="figure" style="text-align: center"><span id="fig:surv-ex-data"></span>
<img src="00-images/surv/ex_data.png" alt="Cómo debe verse tu base de datos" width="70%" />
<p class="caption">
Figura 9.5: Cómo debe verse tu base de datos
</p>
</div>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="surv.html#cb298-1"></a>democracia_directa_b &lt;-<span class="st"> </span>democracia_directa <span class="op">%&gt;%</span></span>
<span id="cb298-2"><a href="surv.html#cb298-2"></a><span class="st">  </span><span class="kw">group_by</span>(pais_nombre) <span class="op">%&gt;%</span></span>
<span id="cb298-3"><a href="surv.html#cb298-3"></a><span class="st">  </span><span class="co"># pedimos que la suma acumulada del dummy es como máximo 1</span></span>
<span id="cb298-4"><a href="surv.html#cb298-4"></a><span class="st">  </span><span class="kw">filter</span>(<span class="kw">cumsum</span>(dem_directa) <span class="op">&lt;=</span><span class="st"> </span><span class="dv">1</span>) <span class="op">%&gt;%</span></span>
<span id="cb298-5"><a href="surv.html#cb298-5"></a><span class="st">  </span><span class="kw">ungroup</span>()</span></code></pre></div>
<p>Lo que estamos haciendo es filtrar los datos para que cuando ocurra eñ evento de interés (en este caso es la variable <code>dem_directa</code>) lo que viene después en el tiempo es reemplazado por NAs. Si comparamos el caso de Albania para la base original y para la base actual veremos la diferencia. En la primera base de datos tenemos observaciones para 1999 y 2000, después de que ocurriera el evento. En la segunda base, Albania “muere” en 1998 y allí se cortan los datos para el país:</p>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="surv.html#cb299-1"></a>democracia_directa <span class="op">%&gt;%</span></span>
<span id="cb299-2"><a href="surv.html#cb299-2"></a><span class="st">  </span><span class="kw">filter</span>(pais_nombre <span class="op">==</span><span class="st"> &quot;Albania&quot;</span> <span class="op">&amp;</span><span class="st"> </span>dem_directa <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)</span>
<span id="cb299-3"><a href="surv.html#cb299-3"></a><span class="co">## # A tibble: 19 x 23</span></span>
<span id="cb299-4"><a href="surv.html#cb299-4"></a><span class="co">##   pais_nombre  anio dem_directa dem_rapida_posi… dem_rapida_nega… memoria</span></span>
<span id="cb299-5"><a href="surv.html#cb299-5"></a><span class="co">##   &lt;chr&gt;       &lt;dbl&gt;       &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;   &lt;dbl&gt;</span></span>
<span id="cb299-6"><a href="surv.html#cb299-6"></a><span class="co">## 1 Albania      1998           1                0                0       1</span></span>
<span id="cb299-7"><a href="surv.html#cb299-7"></a><span class="co">## 2 Albania      1999           1                0                0       1</span></span>
<span id="cb299-8"><a href="surv.html#cb299-8"></a><span class="co">## 3 Albania      2000           1                0                0       1</span></span>
<span id="cb299-9"><a href="surv.html#cb299-9"></a><span class="co">## # … with 16 more rows, and 17 more variables</span></span>
<span id="cb299-10"><a href="surv.html#cb299-10"></a></span>
<span id="cb299-11"><a href="surv.html#cb299-11"></a>democracia_directa_b <span class="op">%&gt;%</span></span>
<span id="cb299-12"><a href="surv.html#cb299-12"></a><span class="st">  </span><span class="kw">filter</span>(pais_nombre <span class="op">==</span><span class="st"> &quot;Albania&quot;</span> <span class="op">&amp;</span><span class="st"> </span>dem_directa <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)</span>
<span id="cb299-13"><a href="surv.html#cb299-13"></a><span class="co">## # A tibble: 1 x 23</span></span>
<span id="cb299-14"><a href="surv.html#cb299-14"></a><span class="co">##   pais_nombre  anio dem_directa dem_rapida_posi… dem_rapida_nega… memoria</span></span>
<span id="cb299-15"><a href="surv.html#cb299-15"></a><span class="co">##   &lt;chr&gt;       &lt;dbl&gt;       &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;   &lt;dbl&gt;</span></span>
<span id="cb299-16"><a href="surv.html#cb299-16"></a><span class="co">## 1 Albania      1998           1                0                0       1</span></span>
<span id="cb299-17"><a href="surv.html#cb299-17"></a><span class="co">## # … with 17 more variables</span></span></code></pre></div>
<p>En resumen, ahora tenemos un panel desbalanceado, en el que los países entran a la base cuando comienzan a existir como tales y salen, o bien cuando adoptan mecanismos de democracia directa, o bien cuando la base termina en su extensión temporal (en 2016). De esta forma nuestra base se acerca mucho a la figura <a href="surv.html#fig:surv-ex-obs">9.1</a> con la que ejemplificamos los distintos tipos de observaciones.</p>
<blockquote>
<p><strong>Ejercicio 9A.</strong> Tómese un minuto para hacer un ejercicio antes de continuar. En el capítulo anterior utilizamos la base de datos <em>Democracies and Dictatorships in Latin America: Emergence, Survival, and Fall</em> <span class="citation">(Mainwaring and Pérez-Liñán <a href="referencias.html#ref-mainwaringDemocraciesDictatorshipsLatin2013" role="doc-biblioref">2013</a>)</span>. Utiliza la base de datos para ver si está lista para ser usada con modelos de supervivencia o si necesitas transformarla.</p>
</blockquote>
<p>Qué tal si probamos hacer algo similar a la figura 1 pero con los datos de David Altman? Este tipo de figuras se llaman gráficos de Gantt, y pueden recrearse con <code>ggplot2</code> aunque es justo decir que hay que seguir unos cuantos pasos, y puede ser algo difícil. Ojalá que con este ejemplo puedas recrearlo con tus propios datos porque una figura así es de mucha utilidad para el lector.</p>
<p>Primero debemos crear una base de datos que, para cada país, registre el año de entrada y el año de salida. También nos interesa por qué sale el país: ¿adopta democracia directa o la base termina? Vamos a crear un subonjunto que llamaremos <code>gantt_plot_df</code> donde nos quedamos solamente con tres variables de la base, que son el nombre del país <code>pais_nombre</code>, el año <code>anio</code>, y la variable dependiente <code>dem_directa</code>. También quitaremos de la base aquellas observaciones que para el primer año de la base ya han “muerto”. Por ejemplo, Suiza había implementado mecanismos de democracia directa mucho antes que 1900, así que desde el primer año de la base hasta el último la variable dependiente será “1”:</p>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="surv.html#cb300-1"></a>gantt_chart_df &lt;-<span class="st"> </span>democracia_directa_b <span class="op">%&gt;%</span></span>
<span id="cb300-2"><a href="surv.html#cb300-2"></a><span class="st">  </span><span class="co"># las variables que nos interesan</span></span>
<span id="cb300-3"><a href="surv.html#cb300-3"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(pais_nombre, anio, dem_directa) <span class="op">%&gt;%</span></span>
<span id="cb300-4"><a href="surv.html#cb300-4"></a><span class="st">  </span><span class="kw">group_by</span>(pais_nombre) <span class="op">%&gt;%</span></span>
<span id="cb300-5"><a href="surv.html#cb300-5"></a><span class="st">  </span><span class="kw">filter</span>(anio <span class="op">==</span><span class="st"> </span><span class="kw">min</span>(anio) <span class="op">|</span><span class="st"> </span>anio <span class="op">==</span><span class="st"> </span><span class="kw">max</span>(anio)) <span class="op">%&gt;%</span></span>
<span id="cb300-6"><a href="surv.html#cb300-6"></a><span class="st">  </span><span class="co"># necesitamos eliminar las observaciones para los países que &quot;nacen&quot; con </span></span>
<span id="cb300-7"><a href="surv.html#cb300-7"></a><span class="st">  </span><span class="co">#democracia directa ya implementada:</span></span>
<span id="cb300-8"><a href="surv.html#cb300-8"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span>(anio <span class="op">==</span><span class="st"> </span><span class="kw">min</span>(anio) <span class="op">&amp;</span><span class="st"> </span>dem_directa <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)) <span class="op">%&gt;%</span></span>
<span id="cb300-9"><a href="surv.html#cb300-9"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">anio_enters =</span> <span class="kw">min</span>(anio),</span>
<span id="cb300-10"><a href="surv.html#cb300-10"></a>            <span class="dt">anio_exits  =</span> <span class="kw">max</span>(anio),</span>
<span id="cb300-11"><a href="surv.html#cb300-11"></a>            <span class="dt">exits_bc_dd =</span> <span class="kw">max</span>(dem_directa)) <span class="op">%&gt;%</span></span>
<span id="cb300-12"><a href="surv.html#cb300-12"></a><span class="st">  </span><span class="kw">ungroup</span>()</span>
<span id="cb300-13"><a href="surv.html#cb300-13"></a>gantt_chart_df</span>
<span id="cb300-14"><a href="surv.html#cb300-14"></a><span class="co">## # A tibble: 193 x 4</span></span>
<span id="cb300-15"><a href="surv.html#cb300-15"></a><span class="co">##   pais_nombre anio_enters anio_exits exits_bc_dd</span></span>
<span id="cb300-16"><a href="surv.html#cb300-16"></a><span class="co">##   &lt;chr&gt;             &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt;</span></span>
<span id="cb300-17"><a href="surv.html#cb300-17"></a><span class="co">## 1 Afganistán         1919       2016           0</span></span>
<span id="cb300-18"><a href="surv.html#cb300-18"></a><span class="co">## 2 Albania            1912       1998           1</span></span>
<span id="cb300-19"><a href="surv.html#cb300-19"></a><span class="co">## 3 Andorra            1900       2016           0</span></span>
<span id="cb300-20"><a href="surv.html#cb300-20"></a><span class="co">## # … with 190 more rows</span></span></code></pre></div>
<p>Los países que salen debido a la democracia directa (“mueren”) son:</p>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="surv.html#cb301-1"></a>gantt_chart_df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(exits_bc_dd <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)</span>
<span id="cb301-2"><a href="surv.html#cb301-2"></a><span class="co">## # A tibble: 48 x 4</span></span>
<span id="cb301-3"><a href="surv.html#cb301-3"></a><span class="co">##   pais_nombre anio_enters anio_exits exits_bc_dd</span></span>
<span id="cb301-4"><a href="surv.html#cb301-4"></a><span class="co">##   &lt;chr&gt;             &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt;</span></span>
<span id="cb301-5"><a href="surv.html#cb301-5"></a><span class="co">## 1 Albania            1912       1998           1</span></span>
<span id="cb301-6"><a href="surv.html#cb301-6"></a><span class="co">## 2 Belarús            1991       1995           1</span></span>
<span id="cb301-7"><a href="surv.html#cb301-7"></a><span class="co">## 3 Belice             1981       2008           1</span></span>
<span id="cb301-8"><a href="surv.html#cb301-8"></a><span class="co">## # … with 45 more rows</span></span></code></pre></div>
<p>Podemos identificar en una nueva variable la región geopolítica de cada país, gracias a la función <code>countrycode::countrycode()</code> (Esto lo explicamos en detalle en el Capítulo <a href="adv-data.html#adv-data">11</a>). Este paquete es de gran utilidad para quienes hacen política comparada o relaciones internacionales porque facilita mucho darle códigos a los países. Lo que nos permite el paquete es asignar a cada país su región de pertenencia de manera casi automática:</p>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="surv.html#cb302-1"></a><span class="kw">library</span>(countrycode)</span>
<span id="cb302-2"><a href="surv.html#cb302-2"></a></span>
<span id="cb302-3"><a href="surv.html#cb302-3"></a>gantt_chart_df_region &lt;-<span class="st"> </span>gantt_chart_df <span class="op">%&gt;%</span></span>
<span id="cb302-4"><a href="surv.html#cb302-4"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">region =</span> <span class="kw">countrycode</span>(pais_nombre,</span>
<span id="cb302-5"><a href="surv.html#cb302-5"></a>                              <span class="dt">origin =</span> <span class="st">&quot;country.name&quot;</span>, <span class="dt">dest =</span> <span class="st">&quot;region&quot;</span>))</span>
<span id="cb302-6"><a href="surv.html#cb302-6"></a><span class="co">## Warning in countrycode(pais_nombre, origin = &quot;country.name&quot;, dest = &quot;region&quot;): Some values were not matched unambiguously: Afganistán, Arabia Saudita, Argelia, Azerbaiyán, Bahrein, Belarús, Bélgica, Belice, Bhután, Brasil, Camboya, Camerún, Canadá, Chipre, Comoras, Corea del Norte, Corea del Sur, Costa de Marfil, Croacia, Dinamarca, Egipto, Emiratos Árabes Unidos, Eslovaquia, España, Estados Unidos, Etiopía, Filipinas, Francia, Gabón, Gran Bretaña, Granada, Grecia, Haití, Hungría, Irán, Irlanda, Islandia, Islas Salomón, Italia, Japón, Kazajstán, Kirguistán, Letonia, Líbano, Libia, Lituania, Lituania 2, Malasia, Maldivas, Malí, Marruecos, Mauricio, México, Mónaco, Noruega, Nueva Zelandia, Omán, Países Bajos, Pakistán, Panamá, Papua Nueva Guinea, Perú, Polonia, República Centroafricana, República Checa, República Dominicana, Rusia, San Vicente y las Granadinas, Santa Lucía, Singapur, Siria, Suazilandia, Sudáfrica, Sudán, Sudán del Sur, Suecia, Tailandia, Taiwán, Tayikistán, Timor Oriental, Túnez, Turquía, Ucrania</span></span>
<span id="cb302-7"><a href="surv.html#cb302-7"></a><span class="co">## Warning in countrycode(pais_nombre, origin = &quot;country.name&quot;, dest = &quot;region&quot;): Some strings were matched more than once, and therefore set to &lt;NA&gt; in the result: Papua Nueva Guinea,Sub-Saharan Africa,East Asia &amp; Pacific</span></span>
<span id="cb302-8"><a href="surv.html#cb302-8"></a></span>
<span id="cb302-9"><a href="surv.html#cb302-9"></a>gantt_chart_df_region</span>
<span id="cb302-10"><a href="surv.html#cb302-10"></a><span class="co">## # A tibble: 193 x 5</span></span>
<span id="cb302-11"><a href="surv.html#cb302-11"></a><span class="co">##   pais_nombre anio_enters anio_exits exits_bc_dd region               </span></span>
<span id="cb302-12"><a href="surv.html#cb302-12"></a><span class="co">##   &lt;chr&gt;             &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;                </span></span>
<span id="cb302-13"><a href="surv.html#cb302-13"></a><span class="co">## 1 Afganistán         1919       2016           0 &lt;NA&gt;                 </span></span>
<span id="cb302-14"><a href="surv.html#cb302-14"></a><span class="co">## 2 Albania            1912       1998           1 Europe &amp; Central Asia</span></span>
<span id="cb302-15"><a href="surv.html#cb302-15"></a><span class="co">## 3 Andorra            1900       2016           0 Europe &amp; Central Asia</span></span>
<span id="cb302-16"><a href="surv.html#cb302-16"></a><span class="co">## # … with 190 more rows</span></span></code></pre></div>
<p>Como dice el warning, algunos países no fueron encontrados. Estos son los países que <code>countrycode</code> no pudo encontrar, seguramente porque los países están escritos de otra manera:</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="surv.html#cb303-1"></a>gantt_chart_df_region <span class="op">%&gt;%</span></span>
<span id="cb303-2"><a href="surv.html#cb303-2"></a><span class="st">  </span><span class="kw">filter</span>(<span class="kw">is.na</span>(region))</span>
<span id="cb303-3"><a href="surv.html#cb303-3"></a><span class="co">## # A tibble: 83 x 5</span></span>
<span id="cb303-4"><a href="surv.html#cb303-4"></a><span class="co">##   pais_nombre    anio_enters anio_exits exits_bc_dd region</span></span>
<span id="cb303-5"><a href="surv.html#cb303-5"></a><span class="co">##   &lt;chr&gt;                &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt; </span></span>
<span id="cb303-6"><a href="surv.html#cb303-6"></a><span class="co">## 1 Afganistán            1919       2016           0 &lt;NA&gt;  </span></span>
<span id="cb303-7"><a href="surv.html#cb303-7"></a><span class="co">## 2 Arabia Saudita        1946       2016           0 &lt;NA&gt;  </span></span>
<span id="cb303-8"><a href="surv.html#cb303-8"></a><span class="co">## 3 Argelia               1962       2016           0 &lt;NA&gt;  </span></span>
<span id="cb303-9"><a href="surv.html#cb303-9"></a><span class="co">## # … with 80 more rows</span></span></code></pre></div>
<p>Podemos corregir esto a mano ex-post o correr <code>countrycode::countrycode()</code> de nuevo, pero con el argumento <code>custom_match</code>:</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="surv.html#cb304-1"></a>gantt_chart_df_region &lt;-<span class="st"> </span>gantt_chart_df <span class="op">%&gt;%</span></span>
<span id="cb304-2"><a href="surv.html#cb304-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">region =</span> <span class="kw">countrycode</span>(</span>
<span id="cb304-3"><a href="surv.html#cb304-3"></a>    pais_nombre,</span>
<span id="cb304-4"><a href="surv.html#cb304-4"></a>    <span class="dt">origin       =</span> <span class="st">&quot;country.name&quot;</span>,</span>
<span id="cb304-5"><a href="surv.html#cb304-5"></a>    <span class="dt">dest         =</span> <span class="st">&quot;region&quot;</span>,</span>
<span id="cb304-6"><a href="surv.html#cb304-6"></a>    <span class="dt">custom_match =</span> <span class="kw">c</span>(<span class="st">&quot;Korea, North&quot;</span> =<span class="st"> &quot;Eastern Asia&quot;</span>,</span>
<span id="cb304-7"><a href="surv.html#cb304-7"></a>                     <span class="st">&quot;Kosovo&quot;</span> =<span class="st"> &quot;Eastern Europe&quot;</span>,</span>
<span id="cb304-8"><a href="surv.html#cb304-8"></a>                     <span class="st">&quot;South Yemen&quot;</span> =<span class="st"> &quot;Western Asia&quot;</span>,</span>
<span id="cb304-9"><a href="surv.html#cb304-9"></a>                     <span class="st">&quot;Vietnam, Democratic Republic of&quot;</span> =<span class="st"> &quot;South-Eastern</span></span>
<span id="cb304-10"><a href="surv.html#cb304-10"></a><span class="st">                     Asia&quot;</span>,</span>
<span id="cb304-11"><a href="surv.html#cb304-11"></a>                     <span class="st">&quot;Vietnam, Republic of&quot;</span> =<span class="st"> &quot;South-Eastern Asia&quot;</span>)))</span>
<span id="cb304-12"><a href="surv.html#cb304-12"></a><span class="co">## Warning in countrycode(pais_nombre, origin = &quot;country.name&quot;, dest = &quot;region&quot;, : Some values were not matched unambiguously: Afganistán, Arabia Saudita, Argelia, Azerbaiyán, Bahrein, Belarús, Bélgica, Belice, Bhután, Brasil, Camboya, Camerún, Canadá, Chipre, Comoras, Corea del Norte, Corea del Sur, Costa de Marfil, Croacia, Dinamarca, Egipto, Emiratos Árabes Unidos, Eslovaquia, España, Estados Unidos, Etiopía, Filipinas, Francia, Gabón, Gran Bretaña, Granada, Grecia, Haití, Hungría, Irán, Irlanda, Islandia, Islas Salomón, Italia, Japón, Kazajstán, Kirguistán, Letonia, Líbano, Libia, Lituania, Lituania 2, Malasia, Maldivas, Malí, Marruecos, Mauricio, México, Mónaco, Noruega, Nueva Zelandia, Omán, Países Bajos, Pakistán, Panamá, Papua Nueva Guinea, Perú, Polonia, República Centroafricana, República Checa, República Dominicana, Rusia, San Vicente y las Granadinas, Santa Lucía, Singapur, Siria, Suazilandia, Sudáfrica, Sudán, Sudán del Sur, Suecia, Tailandia, Taiwán, Tayikistán, Timor Oriental, Túnez, Turquía, Ucrania</span></span>
<span id="cb304-13"><a href="surv.html#cb304-13"></a><span class="co">## Warning in countrycode(pais_nombre, origin = &quot;country.name&quot;, dest = &quot;region&quot;, : Some strings were matched more than once, and therefore set to &lt;NA&gt; in the result: Papua Nueva Guinea,Sub-Saharan Africa,East Asia &amp; Pacific</span></span>
<span id="cb304-14"><a href="surv.html#cb304-14"></a></span>
<span id="cb304-15"><a href="surv.html#cb304-15"></a>gantt_chart_df_region</span>
<span id="cb304-16"><a href="surv.html#cb304-16"></a><span class="co">## # A tibble: 193 x 5</span></span>
<span id="cb304-17"><a href="surv.html#cb304-17"></a><span class="co">##   pais_nombre anio_enters anio_exits exits_bc_dd region               </span></span>
<span id="cb304-18"><a href="surv.html#cb304-18"></a><span class="co">##   &lt;chr&gt;             &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;                </span></span>
<span id="cb304-19"><a href="surv.html#cb304-19"></a><span class="co">## 1 Afganistán         1919       2016           0 &lt;NA&gt;                 </span></span>
<span id="cb304-20"><a href="surv.html#cb304-20"></a><span class="co">## 2 Albania            1912       1998           1 Europe &amp; Central Asia</span></span>
<span id="cb304-21"><a href="surv.html#cb304-21"></a><span class="co">## 3 Andorra            1900       2016           0 Europe &amp; Central Asia</span></span>
<span id="cb304-22"><a href="surv.html#cb304-22"></a><span class="co">## # … with 190 more rows</span></span></code></pre></div>
<p>Ahora no tenemos NA! Hemos logrado asignar una región a cada país de la muestra.</p>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="surv.html#cb305-1"></a>gantt_chart_df_region <span class="op">%&gt;%</span></span>
<span id="cb305-2"><a href="surv.html#cb305-2"></a><span class="st">  </span><span class="kw">filter</span>(<span class="kw">is.na</span>(region))</span>
<span id="cb305-3"><a href="surv.html#cb305-3"></a><span class="co">## # A tibble: 83 x 5</span></span>
<span id="cb305-4"><a href="surv.html#cb305-4"></a><span class="co">##   pais_nombre    anio_enters anio_exits exits_bc_dd region</span></span>
<span id="cb305-5"><a href="surv.html#cb305-5"></a><span class="co">##   &lt;chr&gt;                &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt; </span></span>
<span id="cb305-6"><a href="surv.html#cb305-6"></a><span class="co">## 1 Afganistán            1919       2016           0 &lt;NA&gt;  </span></span>
<span id="cb305-7"><a href="surv.html#cb305-7"></a><span class="co">## 2 Arabia Saudita        1946       2016           0 &lt;NA&gt;  </span></span>
<span id="cb305-8"><a href="surv.html#cb305-8"></a><span class="co">## 3 Argelia               1962       2016           0 &lt;NA&gt;  </span></span>
<span id="cb305-9"><a href="surv.html#cb305-9"></a><span class="co">## # … with 80 more rows</span></span></code></pre></div>
<p>Con nuestra base ya armada, podemos hacer el plot con facilidad, gracias a <code>ggalt::geom_dumbbell()</code>:</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="surv.html#cb306-1"></a><span class="kw">library</span>(ggalt)</span>
<span id="cb306-2"><a href="surv.html#cb306-2"></a>gantt_chart &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data    =</span> gantt_chart_df_region,</span>
<span id="cb306-3"><a href="surv.html#cb306-3"></a>                     <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x     =</span> anio_enters,</span>
<span id="cb306-4"><a href="surv.html#cb306-4"></a>                                   <span class="dt">xend  =</span> anio_exits,</span>
<span id="cb306-5"><a href="surv.html#cb306-5"></a>                                   <span class="dt">y     =</span> <span class="kw">fct_rev</span>(pais_nombre),</span>
<span id="cb306-6"><a href="surv.html#cb306-6"></a>                                   <span class="dt">color =</span> <span class="kw">factor</span>(exits_bc_dd))) <span class="op">+</span></span>
<span id="cb306-7"><a href="surv.html#cb306-7"></a><span class="st">  </span><span class="kw">geom_dumbbell</span>(<span class="dt">size_x =</span> <span class="dv">2</span>, <span class="dt">size_xend =</span> <span class="dv">2</span>)</span>
<span id="cb306-8"><a href="surv.html#cb306-8"></a></span>
<span id="cb306-9"><a href="surv.html#cb306-9"></a>gantt_chart</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-13"></span>
<img src="09-surv_es_files/figure-html/unnamed-chunk-13-1.png" alt=" Gráfico de Gantt para todas las observaciones, versión simple " width="70%" />
<p class="caption">
Figura 3.12:  Gráfico de Gantt para todas las observaciones, versión simple
</p>
</div>
<p>En el eje vertical tenemos los países ordenados alfabéticamente, y en el eje x hay dos variables que informan al gráfico, por un lado, el comienzo de la línea (<code>anio_enters</code>) y por otro su fin (<code>anio_exits</code>). Además, hay una tercera variable informativa que es el color de la línea, que denota si el país implementó o no una instancia de democracia directa (<code>exits_bc_dd</code>). Los países en azul son los que implementaron dicha instanca entre 1900 y 2016.</p>
<p>Si bien la figura es de una enorme utilidad visual, hay que reconocer que son demasiados países para incluirla en el cuerpo de un artículo. Un enfoque posible es concentrarnos en ciertas regiones. Recordarás la función <code>filter</code> del Capítulo <a href="data.html#data">2</a>. Filtremos Sudamérica, por ejemplo:</p>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="surv.html#cb307-1"></a>gantt_chart_sa &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data    =</span> gantt_chart_df_region <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb307-2"><a href="surv.html#cb307-2"></a><span class="st">                          </span><span class="kw">filter</span>(region <span class="op">==</span><span class="st"> &quot;Latin America &amp; Caribbean&quot;</span>),</span>
<span id="cb307-3"><a href="surv.html#cb307-3"></a>                     <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x     =</span> anio_enters,</span>
<span id="cb307-4"><a href="surv.html#cb307-4"></a>                                   <span class="dt">xend  =</span> anio_exits,</span>
<span id="cb307-5"><a href="surv.html#cb307-5"></a>                                   <span class="dt">y     =</span> <span class="kw">fct_rev</span>(pais_nombre),</span>
<span id="cb307-6"><a href="surv.html#cb307-6"></a>                                   <span class="dt">color =</span> <span class="kw">fct_recode</span>(<span class="kw">factor</span>(exits_bc_dd)))) <span class="op">+</span></span>
<span id="cb307-7"><a href="surv.html#cb307-7"></a><span class="st">  </span><span class="kw">geom_dumbbell</span>(<span class="dt">size_x =</span> <span class="dv">2</span>, <span class="dt">size_xend =</span> <span class="dv">2</span>)</span>
<span id="cb307-8"><a href="surv.html#cb307-8"></a></span>
<span id="cb307-9"><a href="surv.html#cb307-9"></a>gantt_chart_sa</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-14"></span>
<img src="09-surv_es_files/figure-html/unnamed-chunk-14-1.png" alt=" Gráfico de Gantt para Latinoamérica, versión simple" width="70%" />
<p class="caption">
Figura 3.13:  Gráfico de Gantt para Latinoamérica, versión simple
</p>
</div>
<p>Podemos agregarle los años como texto para mejorar aún más la lectura de la figura:</p>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="surv.html#cb308-1"></a>gantt_chart_sa &lt;-<span class="st"> </span>gantt_chart_sa <span class="op">+</span></span>
<span id="cb308-2"><a href="surv.html#cb308-2"></a><span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label =</span> anio_enters), <span class="dt">vjust =</span> <span class="fl">-0.4</span>) <span class="op">+</span></span>
<span id="cb308-3"><a href="surv.html#cb308-3"></a><span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">x =</span> anio_exits, <span class="dt">label =</span> anio_exits), <span class="dt">vjust =</span> <span class="fl">-0.4</span>)</span>
<span id="cb308-4"><a href="surv.html#cb308-4"></a></span>
<span id="cb308-5"><a href="surv.html#cb308-5"></a>gantt_chart_sa</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-15"></span>
<img src="09-surv_es_files/figure-html/unnamed-chunk-15-1.png" alt=" Gráfico de Gantt para Latinoamérica con los años de inicio y fin " width="70%" />
<p class="caption">
Figura 3.14:  Gráfico de Gantt para Latinoamérica con los años de inicio y fin
</p>
</div>
<p>Finalmente, algunos retoques estéticos, con todo lo que hemos aprendido en el Capítulo <a href="dataviz.html#dataviz">3</a>:</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="surv.html#cb309-1"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb309-2"><a href="surv.html#cb309-2"></a>gantt_chart_sa &lt;-<span class="st"> </span>gantt_chart_sa <span class="op">+</span></span>
<span id="cb309-3"><a href="surv.html#cb309-3"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;año&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb309-4"><a href="surv.html#cb309-4"></a>       <span class="dt">title =</span> <span class="st">&quot; Años de entrada y salida, América del Sur &quot;</span>,</span>
<span id="cb309-5"><a href="surv.html#cb309-5"></a>       <span class="dt">color =</span> <span class="st">&quot;¿Adoptan instancias de democracia directa?&quot;</span>) <span class="op">+</span></span>
<span id="cb309-6"><a href="surv.html#cb309-6"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_blank</span>())</span>
<span id="cb309-7"><a href="surv.html#cb309-7"></a></span>
<span id="cb309-8"><a href="surv.html#cb309-8"></a>gantt_chart_sa</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-16"></span>
<img src="09-surv_es_files/figure-html/unnamed-chunk-16-1.png" alt=" Versión pulida del gráfico de Gantt para Latinoamérica" width="70%" />
<p class="caption">
Figura 3.15:  Versión pulida del gráfico de Gantt para Latinoamérica
</p>
</div>
<blockquote>
<p><strong>Ejercicio 9B.</strong> Usando la base de datos de Mainwaring &amp; Pérez-Liñán (2013) grafica un diagrama de Gantt como el anterior, mostrando las rupturas democráticas en México.</p>
</blockquote>
<p>Además de gráficos de Gantt, es muy común que quien trabaja con modelos de supervivencia muestre gráficos con las curvas de supervivencia comparando dos grupos de interés. Por ejemplo, David Altman se pregunta si hubo una diferencia en el siglo XX entre países que se democratizaron rápidamente y aquellos que demoraron décadas en hacerlo respecto a la rapidez con que implementaron mecanismos de democracia directa. Este tipo de figuras no tiene valor inferencial, pero si gran valor descriptivo. Tenemos que estimar una curva de supervivencia no paramétrica, usando el método de Kaplan-Meier.</p>
<p>A partir de este punto debemos hacer una modificación más a nuestra base. Seguramente tu también debas hacerlo con tus propios datos, así que presta atención. Los modelos de supervivencia no trabajan con datos de panel tradicionales, como el de nuestra base. Tenemos que convertirlos a “tiempo en riesgo”. ¿Qué quiere decir esto? Quiere decir que necesitamos dos variables nuevas, una que nos diga el tiempo que la observación lleva en riesgo de morir al inicio de cada t <code>risk_time_at_start</code>y otra variable que haga lo mismo al final de cada t <code>risk_time_at_end</code>. Estas dos variables serán utilizadas a partir de ahora en los scripts del análisis de supervivencia:</p>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="surv.html#cb310-1"></a>democracia_directa_c &lt;-<span class="st"> </span>democracia_directa_b <span class="op">%&gt;%</span></span>
<span id="cb310-2"><a href="surv.html#cb310-2"></a><span class="st">  </span><span class="kw">group_by</span>(pais_nombre) <span class="op">%&gt;%</span></span>
<span id="cb310-3"><a href="surv.html#cb310-3"></a><span class="st">  </span><span class="co"># eliminaremos el primer año para cada país;</span></span>
<span id="cb310-4"><a href="surv.html#cb310-4"></a><span class="st">  </span><span class="co"># ya que  por lógica no corre riesgo de morir ese primer año</span></span>
<span id="cb310-5"><a href="surv.html#cb310-5"></a><span class="st">  </span><span class="kw">filter</span>(anio <span class="op">!=</span><span class="st"> </span><span class="kw">min</span>(anio)) <span class="op">%&gt;%</span></span>
<span id="cb310-6"><a href="surv.html#cb310-6"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">risk_time_at_end   =</span> <span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="kw">n</span>()),</span>
<span id="cb310-7"><a href="surv.html#cb310-7"></a>         <span class="dt">risk_time_at_start =</span> <span class="kw">c</span>(<span class="dv">0</span><span class="op">:</span>(<span class="kw">n</span>() <span class="op">-</span><span class="st"> </span><span class="dv">1</span>))) <span class="op">%&gt;%</span></span>
<span id="cb310-8"><a href="surv.html#cb310-8"></a><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span></span>
<span id="cb310-9"><a href="surv.html#cb310-9"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(pais_nombre, anio, risk_time_at_start, risk_time_at_end, </span>
<span id="cb310-10"><a href="surv.html#cb310-10"></a>                <span class="kw">everything</span>())</span></code></pre></div>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="surv.html#cb311-1"></a>democracia_directa_c</span>
<span id="cb311-2"><a href="surv.html#cb311-2"></a><span class="co">## # A tibble: 11,995 x 25</span></span>
<span id="cb311-3"><a href="surv.html#cb311-3"></a><span class="co">##   pais_nombre  anio risk_time_at_st… risk_time_at_end dem_directa</span></span>
<span id="cb311-4"><a href="surv.html#cb311-4"></a><span class="co">##   &lt;chr&gt;       &lt;dbl&gt;            &lt;int&gt;            &lt;int&gt;       &lt;dbl&gt;</span></span>
<span id="cb311-5"><a href="surv.html#cb311-5"></a><span class="co">## 1 Afganistán   1920                0                1           0</span></span>
<span id="cb311-6"><a href="surv.html#cb311-6"></a><span class="co">## 2 Afganistán   1921                1                2           0</span></span>
<span id="cb311-7"><a href="surv.html#cb311-7"></a><span class="co">## 3 Afganistán   1922                2                3           0</span></span>
<span id="cb311-8"><a href="surv.html#cb311-8"></a><span class="co">## # … with 11,992 more rows, and 20 more variables</span></span></code></pre></div>
<p>Tracemos la curva de supervivencia no paramétrica, usando el método de Kaplan-Meier:</p>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="surv.html#cb312-1"></a>km &lt;-<span class="st"> </span><span class="kw">survfit</span>(<span class="kw">Surv</span>(<span class="dt">time =</span> risk_time_at_start, <span class="dt">time2 =</span> risk_time_at_end,</span>
<span id="cb312-2"><a href="surv.html#cb312-2"></a>                   <span class="dt">event =</span> dem_directa) <span class="op">~</span><span class="st"> </span>dem_rapida_positiva,</span>
<span id="cb312-3"><a href="surv.html#cb312-3"></a>              <span class="dt">type      =</span> <span class="st">&quot;kaplan-meier&quot;</span>,</span>
<span id="cb312-4"><a href="surv.html#cb312-4"></a>              <span class="dt">conf.type =</span> <span class="st">&quot;log&quot;</span>,</span>
<span id="cb312-5"><a href="surv.html#cb312-5"></a>              <span class="dt">data      =</span> democracia_directa_c)</span></code></pre></div>
<p>Ahora podemos armar nuestro plot con <code>survminer::ggsurvplot()</code></p>
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb313-1"><a href="surv.html#cb313-1"></a><span class="kw">library</span>(survminer)</span>
<span id="cb313-2"><a href="surv.html#cb313-2"></a><span class="kw">ggsurvplot</span>(km, <span class="dt">conf.int =</span> T, </span>
<span id="cb313-3"><a href="surv.html#cb313-3"></a>           <span class="dt">risk.table=</span>T,</span>
<span id="cb313-4"><a href="surv.html#cb313-4"></a>           <span class="dt">legend.title =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb313-5"><a href="surv.html#cb313-5"></a>           <span class="dt">break.x.by =</span> <span class="dv">20</span>,</span>
<span id="cb313-6"><a href="surv.html#cb313-6"></a>           <span class="dt">legend.labs =</span> <span class="kw">c</span>(<span class="st">&quot;Democratización rápida = 0&quot;</span>,</span>
<span id="cb313-7"><a href="surv.html#cb313-7"></a>                           <span class="st">&quot; Democratización rápida = 1&quot;</span>),</span>
<span id="cb313-8"><a href="surv.html#cb313-8"></a>           <span class="dt">data =</span> democracia_directa_c) <span class="op">+</span></span>
<span id="cb313-9"><a href="surv.html#cb313-9"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title    =</span> <span class="st">&quot; Estimaciones de supervivencia de Kaplan-Meier &quot;</span>)</span>
<span id="cb313-10"><a href="surv.html#cb313-10"></a><span class="co">## Warning: Vectorized input to `element_text()` is not officially supported.</span></span>
<span id="cb313-11"><a href="surv.html#cb313-11"></a><span class="co">## Results may be unexpected or may change in future versions of ggplot2.</span></span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:kaplan"></span>
<img src="09-surv_es_files/figure-html/kaplan-1.png" alt="Kaplan-Meier Curve" width="1056" />
<p class="caption">
Figura 9.6: Kaplan-Meier Curve
</p>
</div>
<p>Altman tiene la hipótesis de que países que sufrieron “shocks” democratizadores fueron mucho más rápidos en implementar mecanismos directos. La figura confirma su intuición, pues vemos que la probabilidad de supervivencia de un país (léase como la probabilidad de que persista sin implementar mecanismos de democracia directa) se reduce a la mitad en los primeros cuatro años que siguen al shock democratizador. Por el contrario, países que se democratizan de a poco, no sufren este efecto.</p>
<blockquote>
<p><strong>Ejercicio 9C.</strong> Utilizando los mismos datos del ejercicio anterior: ¿Cómo se compara la curva de Kaplan-Meier entre los países que recibieron un alto apoyo político de los Estados Unidos y los que recibieron un bajo apoyo político? Para ello, utilice la variable <code>us_t</code>, que es un índice de 0 a 1, donde 1 denota un apoyo constante de los Estados Unidos en un país, y 0 denota que no se ofreció ningún apoyo de los Estados Unidos. Para comparar los dos grupos de la curva de Kaplan-Meier, cree un <em>dummy</em> que asuma 1 si el apoyo es mayor que un 0.75 y 0 en caso contrario.</p>
</blockquote>
</div>
<div id="modelos-de-supervivencia-e-interpretación-sus-coeficientes-como-hazard-ratios." class="section level2">
<h2><span class="header-section-number">9.5</span> Modelos de supervivencia e interpretación sus coeficientes como Hazard Ratios.</h2>
<p>Vamos a usar la base de Altman para estimar algunos modelos y correr los tests de Grambsch y Therneau para testear que ninguno de los coeficientes viole el presupuesto de proporcionalidad de los riesgos. No estamos replicando los modelos de su capítulo porque son algo más complejos (incluyen varias interacciones), simplemente usamos su base como referencia.</p>
<blockquote>
<p>Nota: Aquí vale la pena hacer una aclaración respecto a replicabilidad: Si el autor utiliza Stata (por ejemplo con el comando <code>stcox</code>) van a haber algunas diferencias menores en los resultados obtenidos utilizando R.</p>
</blockquote>
<p>Primer modelo</p>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="surv.html#cb314-1"></a>cox_m1 &lt;-<span class="st"> </span><span class="kw">coxph</span>(<span class="kw">Surv</span>(risk_time_at_start, risk_time_at_end, dem_directa) <span class="op">~</span></span>
<span id="cb314-2"><a href="surv.html#cb314-2"></a><span class="st">                  </span>dem_rapida_positiva <span class="op">+</span><span class="st"> </span>dem_rapida_negativa <span class="op">+</span><span class="st"> </span>memoria <span class="op">+</span><span class="st"> </span>vdem,</span>
<span id="cb314-3"><a href="surv.html#cb314-3"></a>                <span class="dt">data   =</span> democracia_directa_c, </span>
<span id="cb314-4"><a href="surv.html#cb314-4"></a>                <span class="dt">method =</span><span class="st">&quot;breslow&quot;</span>)</span></code></pre></div>
<p>Si lo desea, puede elegir expresar su modelo como una figura. Dado que estimaremos cinco modelos, usaremos una tabla en su lugar, pero es bueno para usted conocer <code>ggforest</code></p>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="surv.html#cb315-1"></a><span class="kw">ggforest</span>(cox_m1)</span>
<span id="cb315-2"><a href="surv.html#cb315-2"></a><span class="co">## Warning in .get_data(model, data = data): The `data` argument is not</span></span>
<span id="cb315-3"><a href="surv.html#cb315-3"></a><span class="co">## provided. Data will be extracted from model fit.</span></span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:ggforest"></span>
<img src="09-surv_es_files/figure-html/ggforest-1.png" alt=" Representación gráfica de las tasas de riesgo del Modelo 1" width="768" />
<p class="caption">
Figura 9.7:  Representación gráfica de las tasas de riesgo del Modelo 1
</p>
</div>
<p>Usando la función <code>cox.zph</code> hacemos el test de riesgo proporcional:</p>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="surv.html#cb316-1"></a>test_cox_m1 &lt;-<span class="st"> </span><span class="kw">cox.zph</span>(cox_m1)</span></code></pre></div>
<p>Miremos el valor global del test. Su p-valor es superior al punto de corte de <code>0.05</code>.</p>
<p>Si lo desea, puede elegir graficar los resultados del test usando <code>ggcoxzph</code>. No lo haremos en los siguientes modelos, pero estas figuras pueden ir perfectamente a un apéndice en tu artículo.</p>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="surv.html#cb317-1"></a><span class="kw">ggcoxzph</span>(test_cox_m1)</span></code></pre></div>
<p><img src="09-surv_es_files/figure-html/unnamed-chunk-21-1.png" width="960" style="display: block; margin: auto;" /></p>
<p>Estimemos un segundo modelo:</p>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="surv.html#cb318-1"></a>cox_m2 &lt;-<span class="st"> </span><span class="kw">coxph</span>(<span class="kw">Surv</span>(risk_time_at_start, risk_time_at_end, dem_directa) <span class="op">~</span></span>
<span id="cb318-2"><a href="surv.html#cb318-2"></a><span class="st">                  </span>dem_rapida_positiva <span class="op">+</span><span class="st"> </span>dem_rapida_negativa <span class="op">+</span><span class="st"> </span>memoria <span class="op">+</span><span class="st"> </span>vdem <span class="op">+</span></span>
<span id="cb318-3"><a href="surv.html#cb318-3"></a><span class="st">                  </span>difusion_cap,</span>
<span id="cb318-4"><a href="surv.html#cb318-4"></a>                <span class="dt">data   =</span> democracia_directa_c,</span>
<span id="cb318-5"><a href="surv.html#cb318-5"></a>                <span class="dt">method =</span><span class="st">&quot;breslow&quot;</span>)</span></code></pre></div>
<p>Y su test de riesgo proporcional:</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="surv.html#cb319-1"></a><span class="kw">cox.zph</span>(cox_m2)</span>
<span id="cb319-2"><a href="surv.html#cb319-2"></a><span class="co">##                      chisq df      p</span></span>
<span id="cb319-3"><a href="surv.html#cb319-3"></a><span class="co">## dem_rapida_positiva  1.693  1 0.1932</span></span>
<span id="cb319-4"><a href="surv.html#cb319-4"></a><span class="co">## dem_rapida_negativa  0.718  1 0.3968</span></span>
<span id="cb319-5"><a href="surv.html#cb319-5"></a><span class="co">## memoria              1.623  1 0.2026</span></span>
<span id="cb319-6"><a href="surv.html#cb319-6"></a><span class="co">## vdem                 6.594  1 0.0102</span></span>
<span id="cb319-7"><a href="surv.html#cb319-7"></a><span class="co">## difusion_cap         8.135  1 0.0043</span></span>
<span id="cb319-8"><a href="surv.html#cb319-8"></a><span class="co">## GLOBAL              14.825  5 0.0111</span></span></code></pre></div>
<p>En este caso, el test global es apenas superior al p de corte de <code>0.05</code>, aún no se viola el supuesto de proporcionalidad. Sin embargo, hay una variable significativa en su Chi cuadrado:<code>difusion_cap</code>, con un p de <code>0.02</code>.</p>
<p>Ahora, un tercer modelo:</p>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb320-1"><a href="surv.html#cb320-1"></a>cox_m3 &lt;-<span class="st"> </span><span class="kw">coxph</span>(<span class="kw">Surv</span>(risk_time_at_start, risk_time_at_end, dem_directa) <span class="op">~</span></span>
<span id="cb320-2"><a href="surv.html#cb320-2"></a><span class="st">                  </span>dem_rapida_positiva <span class="op">+</span><span class="st"> </span>dem_rapida_negativa <span class="op">+</span><span class="st"> </span>memoria <span class="op">+</span><span class="st"> </span>vdem <span class="op">+</span></span>
<span id="cb320-3"><a href="surv.html#cb320-3"></a><span class="st">                  </span>difusion_cap <span class="op">+</span><span class="st"> </span>difusion_ocurr,</span>
<span id="cb320-4"><a href="surv.html#cb320-4"></a>                <span class="dt">data   =</span> democracia_directa_c,</span>
<span id="cb320-5"><a href="surv.html#cb320-5"></a>                <span class="dt">method =</span><span class="st">&quot;breslow&quot;</span>)</span></code></pre></div>
<p>Y su test de riesgo proporcional:</p>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="surv.html#cb321-1"></a><span class="kw">cox.zph</span>(cox_m3)</span>
<span id="cb321-2"><a href="surv.html#cb321-2"></a><span class="co">##                      chisq df     p</span></span>
<span id="cb321-3"><a href="surv.html#cb321-3"></a><span class="co">## dem_rapida_positiva  2.092  1 0.148</span></span>
<span id="cb321-4"><a href="surv.html#cb321-4"></a><span class="co">## dem_rapida_negativa  0.473  1 0.491</span></span>
<span id="cb321-5"><a href="surv.html#cb321-5"></a><span class="co">## memoria              1.697  1 0.193</span></span>
<span id="cb321-6"><a href="surv.html#cb321-6"></a><span class="co">## vdem                 4.515  1 0.034</span></span>
<span id="cb321-7"><a href="surv.html#cb321-7"></a><span class="co">## difusion_cap         4.264  1 0.039</span></span>
<span id="cb321-8"><a href="surv.html#cb321-8"></a><span class="co">## difusion_ocurr       2.089  1 0.148</span></span>
<span id="cb321-9"><a href="surv.html#cb321-9"></a><span class="co">##  [ reached getOption(&quot;max.print&quot;) -- omitted 1 row ]</span></span></code></pre></div>
<p>Aquí, el test revela un escenario similar al del primer modelo, es decir, sin problemas.</p>
<p>El cuarto modelo:</p>
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="surv.html#cb322-1"></a>cox_m4 &lt;-<span class="st"> </span><span class="kw">coxph</span>(<span class="kw">Surv</span>(risk_time_at_start, risk_time_at_end, dem_directa) <span class="op">~</span></span>
<span id="cb322-2"><a href="surv.html#cb322-2"></a><span class="st">                  </span>dem_rapida_positiva <span class="op">+</span><span class="st"> </span>dem_rapida_negativa <span class="op">+</span><span class="st"> </span>memoria <span class="op">+</span><span class="st"> </span>vdem <span class="op">+</span></span>
<span id="cb322-3"><a href="surv.html#cb322-3"></a><span class="st">                  </span>difusion_cap <span class="op">+</span><span class="st"> </span>difusion_ocurr <span class="op">+</span><span class="st"> </span>log_poblacion,</span>
<span id="cb322-4"><a href="surv.html#cb322-4"></a>                <span class="dt">data   =</span> democracia_directa_c,</span>
<span id="cb322-5"><a href="surv.html#cb322-5"></a>                <span class="dt">method =</span> <span class="st">&quot;breslow&quot;</span>)</span></code></pre></div>
<p>Y su test de riesgo proporcional:</p>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="surv.html#cb323-1"></a><span class="kw">cox.zph</span>(cox_m4)</span>
<span id="cb323-2"><a href="surv.html#cb323-2"></a><span class="co">##                      chisq df     p</span></span>
<span id="cb323-3"><a href="surv.html#cb323-3"></a><span class="co">## dem_rapida_positiva  2.084  1 0.149</span></span>
<span id="cb323-4"><a href="surv.html#cb323-4"></a><span class="co">## dem_rapida_negativa  0.445  1 0.505</span></span>
<span id="cb323-5"><a href="surv.html#cb323-5"></a><span class="co">## memoria              1.677  1 0.195</span></span>
<span id="cb323-6"><a href="surv.html#cb323-6"></a><span class="co">## vdem                 4.533  1 0.033</span></span>
<span id="cb323-7"><a href="surv.html#cb323-7"></a><span class="co">## difusion_cap         4.224  1 0.040</span></span>
<span id="cb323-8"><a href="surv.html#cb323-8"></a><span class="co">## difusion_ocurr       2.059  1 0.151</span></span>
<span id="cb323-9"><a href="surv.html#cb323-9"></a><span class="co">##  [ reached getOption(&quot;max.print&quot;) -- omitted 2 rows ]</span></span></code></pre></div>
<p>Note como el p-valor global está muy cerca del punto de corte pero aún se mantiene sobre <code>0.05</code>. Las variables <code>vdem</code> y <code>log_poblacion</code> están violando el presupuesto de proporcionalidad de los riesgos, pues sus p-valores son menores a <code>0.05</code>.</p>
<p>El quinto modelo:</p>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="surv.html#cb324-1"></a>cox_m5 &lt;-<span class="st"> </span><span class="kw">coxph</span>(<span class="kw">Surv</span>(risk_time_at_start, risk_time_at_end, dem_directa) <span class="op">~</span></span>
<span id="cb324-2"><a href="surv.html#cb324-2"></a><span class="st">                  </span>dem_rapida_positiva <span class="op">+</span><span class="st"> </span>dem_rapida_negativa <span class="op">+</span><span class="st"> </span>memoria <span class="op">+</span><span class="st"> </span>vdem <span class="op">+</span></span>
<span id="cb324-3"><a href="surv.html#cb324-3"></a><span class="st">                  </span>difusion_cap <span class="op">+</span><span class="st"> </span>difusion_ocurr <span class="op">+</span><span class="st"> </span>log_poblacion <span class="op">+</span><span class="st"> </span>colonia_gb,</span>
<span id="cb324-4"><a href="surv.html#cb324-4"></a>                <span class="dt">data   =</span> democracia_directa_c,</span>
<span id="cb324-5"><a href="surv.html#cb324-5"></a>                <span class="dt">method =</span><span class="st">&quot;breslow&quot;</span>)</span></code></pre></div>
<p>Su test de riesgo proporcional:</p>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="surv.html#cb325-1"></a><span class="kw">cox.zph</span>(cox_m5)</span>
<span id="cb325-2"><a href="surv.html#cb325-2"></a><span class="co">##                      chisq df     p</span></span>
<span id="cb325-3"><a href="surv.html#cb325-3"></a><span class="co">## dem_rapida_positiva  1.883  1 0.170</span></span>
<span id="cb325-4"><a href="surv.html#cb325-4"></a><span class="co">## dem_rapida_negativa  0.380  1 0.538</span></span>
<span id="cb325-5"><a href="surv.html#cb325-5"></a><span class="co">## memoria              1.274  1 0.259</span></span>
<span id="cb325-6"><a href="surv.html#cb325-6"></a><span class="co">## vdem                 4.640  1 0.031</span></span>
<span id="cb325-7"><a href="surv.html#cb325-7"></a><span class="co">## difusion_cap         3.960  1 0.047</span></span>
<span id="cb325-8"><a href="surv.html#cb325-8"></a><span class="co">## difusion_ocurr       1.798  1 0.180</span></span>
<span id="cb325-9"><a href="surv.html#cb325-9"></a><span class="co">##  [ reached getOption(&quot;max.print&quot;) -- omitted 3 rows ]</span></span></code></pre></div>
<p>El quinto modelo presenta el mismo escenario que el cuarto modelo. Tenemos dos variables violando el presupuesto de proporcionalidad. El test global tiene un p-valor de <code>0.16</code> por lo que no deberíamos preocuparnos por resolver la violación. Sin embargo, caso que en tu trabajo tengas un p-valor global menor a <code>0.05</code> te mostramos como abordar el problema tal como recomienda el texto del <em>Oxford Handbook</em> sobre el que basamos la discusión teórica al inicio del capítulo. Una forma de resolverlo es interactuando las variables problemáticas con el logaritmo natural de la variable temporal que creamos anteriormente.</p>
<p>Si el p-valor del test global fuese menor a <code>0.05</code>, el quinto modelo corregido se vería así:</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="surv.html#cb326-1"></a>cox_m5_int &lt;-<span class="st"> </span><span class="kw">coxph</span>(<span class="kw">Surv</span>(risk_time_at_start, risk_time_at_end, dem_directa) <span class="op">~</span></span>
<span id="cb326-2"><a href="surv.html#cb326-2"></a><span class="st">                      </span>dem_rapida_positiva <span class="op">+</span><span class="st"> </span>dem_rapida_negativa <span class="op">+</span><span class="st"> </span>memoria <span class="op">+</span><span class="st"> </span>vdem <span class="op">+</span></span>
<span id="cb326-3"><a href="surv.html#cb326-3"></a><span class="st">                      </span>difusion_cap <span class="op">+</span><span class="st"> </span>difusion_ocurr <span class="op">+</span><span class="st"> </span>log_poblacion <span class="op">+</span><span class="st"> </span></span>
<span id="cb326-4"><a href="surv.html#cb326-4"></a><span class="st">                      </span>colonia_gb <span class="op">+</span><span class="st"> </span>vdem<span class="op">:</span><span class="kw">log</span>(risk_time_at_end) <span class="op">+</span></span>
<span id="cb326-5"><a href="surv.html#cb326-5"></a><span class="st">                      </span>log_poblacion<span class="op">:</span><span class="kw">log</span>(risk_time_at_end),</span>
<span id="cb326-6"><a href="surv.html#cb326-6"></a>                    <span class="dt">data   =</span> democracia_directa_c,</span>
<span id="cb326-7"><a href="surv.html#cb326-7"></a>                    <span class="dt">method =</span> <span class="st">&quot;breslow&quot;</span>)</span></code></pre></div>
<p>Verás que el test ya no muestra problemas con la proporcionalidad de los riesgos.</p>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="surv.html#cb327-1"></a><span class="kw">cox.zph</span>(cox_m5_int)</span>
<span id="cb327-2"><a href="surv.html#cb327-2"></a><span class="co">##                                        chisq df     p</span></span>
<span id="cb327-3"><a href="surv.html#cb327-3"></a><span class="co">## dem_rapida_positiva                 1.13e+00  1 0.287</span></span>
<span id="cb327-4"><a href="surv.html#cb327-4"></a><span class="co">## dem_rapida_negativa                 3.37e-01  1 0.562</span></span>
<span id="cb327-5"><a href="surv.html#cb327-5"></a><span class="co">## memoria                             5.39e-01  1 0.463</span></span>
<span id="cb327-6"><a href="surv.html#cb327-6"></a><span class="co">## vdem                                5.88e-05  1 0.994</span></span>
<span id="cb327-7"><a href="surv.html#cb327-7"></a><span class="co">## difusion_cap                        4.16e+00  1 0.041</span></span>
<span id="cb327-8"><a href="surv.html#cb327-8"></a><span class="co">## difusion_ocurr                      1.15e+00  1 0.284</span></span>
<span id="cb327-9"><a href="surv.html#cb327-9"></a><span class="co">##  [ reached getOption(&quot;max.print&quot;) -- omitted 5 rows ]</span></span></code></pre></div>
<p>Veamos todos los modelos juntos con <code>texreg</code>:</p>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="surv.html#cb328-1"></a><span class="kw">library</span>(texreg)</span></code></pre></div>
<p>Para obtener <em>hazard ratios</em> en <code>R</code> necesitamos exponenciar los coeficientes y luego calcular los errores estándar y valores-p a partir de una transformación de la matriz varianza-covarianza del modelo. En el Capítulo <a href="logit.html#logit">8</a> vimos cómo hacer esto para modelos logísticos cuando queremos <em>odds ratios</em> (utilizando las opciones <code>override.coef</code>, <code>override.se</code> y <code>override.pvalues</code> de <code>texreg</code>). Para los modelos de supervivencia este paso es idéntico. La única diferencia para nuestro caso actual es la siguiente: ahora tenemos varios modelos para los que queremos <em>hazard ratios</em>, por lo que utilizaremos la función de iteración <code>map()</code> para que las transformaciones de coeficientes, errores estándar y valores-p se apliquen en cada modelo:</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="surv.html#cb329-1"></a>list_models &lt;-<span class="st"> </span><span class="kw">list</span>(cox_m1, cox_m2, cox_m3, cox_m4, cox_m5, cox_m5_int)</span>
<span id="cb329-2"><a href="surv.html#cb329-2"></a></span>
<span id="cb329-3"><a href="surv.html#cb329-3"></a><span class="kw">screenreg</span>(<span class="dt">l =</span> list_models,</span>
<span id="cb329-4"><a href="surv.html#cb329-4"></a>          <span class="dt">custom.model.names =</span> <span class="kw">c</span>(<span class="st">&quot;Modelo 1&quot;</span>, <span class="st">&quot;Modelo 2&quot;</span>, <span class="st">&quot;Modelo 3&quot;</span>, </span>
<span id="cb329-5"><a href="surv.html#cb329-5"></a>                                 <span class="st">&quot;Modelo 4&quot;</span>, <span class="st">&quot;Modelo 5&quot;</span>, <span class="st">&quot;Modelo 5b&quot;</span>),</span>
<span id="cb329-6"><a href="surv.html#cb329-6"></a>          <span class="dt">override.coef    =</span> <span class="kw">map</span>(list_models, <span class="op">~</span><span class="st"> </span><span class="kw">exp</span>(<span class="kw">coef</span>(.x))),</span>
<span id="cb329-7"><a href="surv.html#cb329-7"></a>          <span class="dt">override.se      =</span> <span class="kw">map</span>(list_models, <span class="op">~</span><span class="st"> </span><span class="kw">odds_se</span>(.x)),</span>
<span id="cb329-8"><a href="surv.html#cb329-8"></a>          <span class="dt">override.pvalues =</span> <span class="kw">map</span>(list_models, <span class="op">~</span><span class="st"> </span><span class="kw">odds_pvalues</span>(.x))</span>
<span id="cb329-9"><a href="surv.html#cb329-9"></a>)</span>
<span id="cb329-10"><a href="surv.html#cb329-10"></a><span class="co">## </span></span>
<span id="cb329-11"><a href="surv.html#cb329-11"></a><span class="co">## =====================================================================================================================</span></span>
<span id="cb329-12"><a href="surv.html#cb329-12"></a><span class="co">##                                      Modelo 1     Modelo 2      Modelo 3     Modelo 4      Modelo 5      Modelo 5b   </span></span>
<span id="cb329-13"><a href="surv.html#cb329-13"></a><span class="co">## ---------------------------------------------------------------------------------------------------------------------</span></span>
<span id="cb329-14"><a href="surv.html#cb329-14"></a><span class="co">## dem_rapida_positiva                      5.48 *       5.43 *        6.14 *       6.07 *        5.48 *        3.93 *  </span></span>
<span id="cb329-15"><a href="surv.html#cb329-15"></a><span class="co">##                                         (2.28)       (2.27)        (2.60)       (2.59)        (2.36)        (1.81)   </span></span>
<span id="cb329-16"><a href="surv.html#cb329-16"></a><span class="co">## dem_rapida_negativa                      2.26         2.37          2.35         2.36          2.22          2.30    </span></span>
<span id="cb329-17"><a href="surv.html#cb329-17"></a><span class="co">##                                         (1.69)       (1.78)        (1.77)       (1.78)        (1.67)        (1.74)   </span></span>
<span id="cb329-18"><a href="surv.html#cb329-18"></a><span class="co">## memoria                                  5.79 **      5.35 **       5.55 **      5.51 **       5.04 **       5.17 ** </span></span>
<span id="cb329-19"><a href="surv.html#cb329-19"></a><span class="co">##                                         (2.07)       (1.92)        (2.00)       (1.99)        (1.84)        (1.90)   </span></span>
<span id="cb329-20"><a href="surv.html#cb329-20"></a><span class="co">## vdem                                     4.03         3.07          3.81         3.91          5.20        379.22    </span></span>
<span id="cb329-21"><a href="surv.html#cb329-21"></a><span class="co">##                                         (2.45)       (1.93)        (2.41)       (2.60)        (3.59)      (636.11)   </span></span>
<span id="cb329-22"><a href="surv.html#cb329-22"></a><span class="co">## difusion_cap                                          1.60 ***      2.95 **      2.94 **       2.77 **       2.70 ** </span></span>
<span id="cb329-23"><a href="surv.html#cb329-23"></a><span class="co">##                                                      (0.34)        (0.93)       (0.93)        (0.88)        (0.88)   </span></span>
<span id="cb329-24"><a href="surv.html#cb329-24"></a><span class="co">## difusion_ocurr                                                      0.03         0.03          0.02          0.04    </span></span>
<span id="cb329-25"><a href="surv.html#cb329-25"></a><span class="co">##                                                                    (0.05)       (0.06)        (0.04)        (0.08)   </span></span>
<span id="cb329-26"><a href="surv.html#cb329-26"></a><span class="co">## log_poblacion                                                                    1.01 ***      1.01 ***      1.57 ***</span></span>
<span id="cb329-27"><a href="surv.html#cb329-27"></a><span class="co">##                                                                                 (0.09)        (0.10)        (0.37)   </span></span>
<span id="cb329-28"><a href="surv.html#cb329-28"></a><span class="co">## colonia_gb                                                                                     0.45 *        0.49 *  </span></span>
<span id="cb329-29"><a href="surv.html#cb329-29"></a><span class="co">##                                                                                               (0.21)        (0.24)   </span></span>
<span id="cb329-30"><a href="surv.html#cb329-30"></a><span class="co">## vdem:log(risk_time_at_end)                                                                                   0.26 *  </span></span>
<span id="cb329-31"><a href="surv.html#cb329-31"></a><span class="co">##                                                                                                             (0.12)   </span></span>
<span id="cb329-32"><a href="surv.html#cb329-32"></a><span class="co">## log_poblacion:log(risk_time_at_end)                                                                          0.88 ***</span></span>
<span id="cb329-33"><a href="surv.html#cb329-33"></a><span class="co">##                                                                                                             (0.06)   </span></span>
<span id="cb329-34"><a href="surv.html#cb329-34"></a><span class="co">## ---------------------------------------------------------------------------------------------------------------------</span></span>
<span id="cb329-35"><a href="surv.html#cb329-35"></a><span class="co">## AIC                                    377.71       374.17        370.81       372.70        371.44        365.19    </span></span>
<span id="cb329-36"><a href="surv.html#cb329-36"></a><span class="co">## R^2                                      0.00         0.00          0.01         0.01          0.01          0.01    </span></span>
<span id="cb329-37"><a href="surv.html#cb329-37"></a><span class="co">## Max. R^2                                 0.04         0.04          0.04         0.04          0.04          0.04    </span></span>
<span id="cb329-38"><a href="surv.html#cb329-38"></a><span class="co">## Num. events                             47           47            47           47            47            47       </span></span>
<span id="cb329-39"><a href="surv.html#cb329-39"></a><span class="co">## Num. obs.                            11441        11269         11260        11229         11229         11229       </span></span>
<span id="cb329-40"><a href="surv.html#cb329-40"></a><span class="co">## Missings                               554          726           735          766           766           766       </span></span>
<span id="cb329-41"><a href="surv.html#cb329-41"></a><span class="co">## PH test                                  0.05         0.01          0.05         0.01          0.03          0.19    </span></span>
<span id="cb329-42"><a href="surv.html#cb329-42"></a><span class="co">## =====================================================================================================================</span></span>
<span id="cb329-43"><a href="surv.html#cb329-43"></a><span class="co">## *** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</span></span></code></pre></div>
<p>Agreguemos nombres a las variables para que esté lista para ser exportada:</p>
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb330-1"><a href="surv.html#cb330-1"></a><span class="kw">screenreg</span>(<span class="dt">l =</span> list_models,</span>
<span id="cb330-2"><a href="surv.html#cb330-2"></a>          <span class="dt">custom.model.names =</span> <span class="kw">c</span>(<span class="st">&quot;Modelo 1&quot;</span>, <span class="st">&quot;Modelo 2&quot;</span>, <span class="st">&quot;Modelo 3&quot;</span>, </span>
<span id="cb330-3"><a href="surv.html#cb330-3"></a>                                 <span class="st">&quot;Modelo 4&quot;</span>, <span class="st">&quot;Modelo 5&quot;</span>, <span class="st">&quot;Modelo 5b&quot;</span>),</span>
<span id="cb330-4"><a href="surv.html#cb330-4"></a>          <span class="dt">custom.coef.names =</span> <span class="kw">c</span>(<span class="st">&quot;Democratización Rápida&quot;</span>, <span class="st">&quot;Rápido Retroceso Democrático&quot;</span>, <span class="st">&quot;Memoria&quot;</span>, <span class="st">&quot;Democracia&quot;</span>, <span class="st">&quot;Difusión de Capacidades&quot;</span>, <span class="st">&quot;Difusión de Ocurrencias&quot;</span>, <span class="st">&quot;Población(ln)&quot;</span>, <span class="st">&quot;Fue Colonia Británica&quot;</span>, <span class="st">&quot;Democracia x tiempo en riesgo(ln)&quot;</span>, <span class="st">&quot;Población(ln) x tiempo en riesgo(ln)&quot;</span>),</span>
<span id="cb330-5"><a href="surv.html#cb330-5"></a>          <span class="dt">override.coef    =</span> <span class="kw">map</span>(list_models, <span class="op">~</span><span class="st"> </span><span class="kw">exp</span>(<span class="kw">coef</span>(.x))),</span>
<span id="cb330-6"><a href="surv.html#cb330-6"></a>          <span class="dt">override.se      =</span> <span class="kw">map</span>(list_models, <span class="op">~</span><span class="st"> </span><span class="kw">odds_se</span>(.x)),</span>
<span id="cb330-7"><a href="surv.html#cb330-7"></a>          <span class="dt">override.pvalues =</span> <span class="kw">map</span>(list_models, <span class="op">~</span><span class="st"> </span><span class="kw">odds_pvalues</span>(.x))</span>
<span id="cb330-8"><a href="surv.html#cb330-8"></a>)</span>
<span id="cb330-9"><a href="surv.html#cb330-9"></a><span class="co">## </span></span>
<span id="cb330-10"><a href="surv.html#cb330-10"></a><span class="co">## ======================================================================================================================</span></span>
<span id="cb330-11"><a href="surv.html#cb330-11"></a><span class="co">##                                       Modelo 1     Modelo 2      Modelo 3     Modelo 4      Modelo 5      Modelo 5b   </span></span>
<span id="cb330-12"><a href="surv.html#cb330-12"></a><span class="co">## ----------------------------------------------------------------------------------------------------------------------</span></span>
<span id="cb330-13"><a href="surv.html#cb330-13"></a><span class="co">## Democratización Rápida                    5.48 *       5.43 *        6.14 *       6.07 *        5.48 *        3.93 *  </span></span>
<span id="cb330-14"><a href="surv.html#cb330-14"></a><span class="co">##                                          (2.28)       (2.27)        (2.60)       (2.59)        (2.36)        (1.81)   </span></span>
<span id="cb330-15"><a href="surv.html#cb330-15"></a><span class="co">## Rápido Retroceso Democrático              2.26         2.37          2.35         2.36          2.22          2.30    </span></span>
<span id="cb330-16"><a href="surv.html#cb330-16"></a><span class="co">##                                          (1.69)       (1.78)        (1.77)       (1.78)        (1.67)        (1.74)   </span></span>
<span id="cb330-17"><a href="surv.html#cb330-17"></a><span class="co">## Memoria                                   5.79 **      5.35 **       5.55 **      5.51 **       5.04 **       5.17 ** </span></span>
<span id="cb330-18"><a href="surv.html#cb330-18"></a><span class="co">##                                          (2.07)       (1.92)        (2.00)       (1.99)        (1.84)        (1.90)   </span></span>
<span id="cb330-19"><a href="surv.html#cb330-19"></a><span class="co">## Democracia                                4.03         3.07          3.81         3.91          5.20        379.22    </span></span>
<span id="cb330-20"><a href="surv.html#cb330-20"></a><span class="co">##                                          (2.45)       (1.93)        (2.41)       (2.60)        (3.59)      (636.11)   </span></span>
<span id="cb330-21"><a href="surv.html#cb330-21"></a><span class="co">## Difusión de Capacidades                                1.60 ***      2.95 **      2.94 **       2.77 **       2.70 ** </span></span>
<span id="cb330-22"><a href="surv.html#cb330-22"></a><span class="co">##                                                       (0.34)        (0.93)       (0.93)        (0.88)        (0.88)   </span></span>
<span id="cb330-23"><a href="surv.html#cb330-23"></a><span class="co">## Difusión de Ocurrencias                                              0.03         0.03          0.02          0.04    </span></span>
<span id="cb330-24"><a href="surv.html#cb330-24"></a><span class="co">##                                                                     (0.05)       (0.06)        (0.04)        (0.08)   </span></span>
<span id="cb330-25"><a href="surv.html#cb330-25"></a><span class="co">## Población(ln)                                                                     1.01 ***      1.01 ***      1.57 ***</span></span>
<span id="cb330-26"><a href="surv.html#cb330-26"></a><span class="co">##                                                                                  (0.09)        (0.10)        (0.37)   </span></span>
<span id="cb330-27"><a href="surv.html#cb330-27"></a><span class="co">## Fue Colonia Británica                                                                           0.45 *        0.49 *  </span></span>
<span id="cb330-28"><a href="surv.html#cb330-28"></a><span class="co">##                                                                                                (0.21)        (0.24)   </span></span>
<span id="cb330-29"><a href="surv.html#cb330-29"></a><span class="co">## Democracia x tiempo en riesgo(ln)                                                                             0.26 *  </span></span>
<span id="cb330-30"><a href="surv.html#cb330-30"></a><span class="co">##                                                                                                              (0.12)   </span></span>
<span id="cb330-31"><a href="surv.html#cb330-31"></a><span class="co">## Población(ln) x tiempo en riesgo(ln)                                                                          0.88 ***</span></span>
<span id="cb330-32"><a href="surv.html#cb330-32"></a><span class="co">##                                                                                                              (0.06)   </span></span>
<span id="cb330-33"><a href="surv.html#cb330-33"></a><span class="co">## ----------------------------------------------------------------------------------------------------------------------</span></span>
<span id="cb330-34"><a href="surv.html#cb330-34"></a><span class="co">## AIC                                     377.71       374.17        370.81       372.70        371.44        365.19    </span></span>
<span id="cb330-35"><a href="surv.html#cb330-35"></a><span class="co">## R^2                                       0.00         0.00          0.01         0.01          0.01          0.01    </span></span>
<span id="cb330-36"><a href="surv.html#cb330-36"></a><span class="co">## Max. R^2                                  0.04         0.04          0.04         0.04          0.04          0.04    </span></span>
<span id="cb330-37"><a href="surv.html#cb330-37"></a><span class="co">## Num. events                              47           47            47           47            47            47       </span></span>
<span id="cb330-38"><a href="surv.html#cb330-38"></a><span class="co">## Num. obs.                             11441        11269         11260        11229         11229         11229       </span></span>
<span id="cb330-39"><a href="surv.html#cb330-39"></a><span class="co">## Missings                                554          726           735          766           766           766       </span></span>
<span id="cb330-40"><a href="surv.html#cb330-40"></a><span class="co">## PH test                                   0.05         0.01          0.05         0.01          0.03          0.19    </span></span>
<span id="cb330-41"><a href="surv.html#cb330-41"></a><span class="co">## ======================================================================================================================</span></span>
<span id="cb330-42"><a href="surv.html#cb330-42"></a><span class="co">## *** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</span></span></code></pre></div>
<p>Si bien no estamos replicando la especificación de Altman, a simple vista nuestros resultados confirmarían la hipótesis de que países que sufrieron “shocks” democratizadores fueron mucho más rápidos en implementar mecanismos directos de democracia. Hemos terminado el ejercicio, ahora te invitamos a que hagas la lista de ejercicios antes de pasar al próximo capítulo.</p>
<blockquote>
<p><strong>Ejercicio 9D.</strong>
- Utilizando <code>survminer</code>grafique una curva de Kaplan-Meier para la variable <code>colonia_gb</code>.</p>
<ul>
<li><p>La variable <code>colonia_urss</code>indica aquellos países que fueron parte de la Unión Soviética. Grafique una curva de Kaplan-Meier para la variable. Incorpore esta variable a un sexto modelo, haga su test de Grambsch y Therneau y rehaga la tabla de los modelos con <code>texreg</code></p></li>
<li><p>¿Tenés tu propia base de datos de supervivencia? Sería genial que repitieras todo el ejercicio usando tus datos y compartas dudas en nuestro GitHub. Si no tienes base, usa la de Mainwaring y Pérez-Liñán (2013) para intentar identificar la variable que más aumenta los riesgos de quiebre democrático en América Latina.</p></li>
</ul>
</blockquote>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="42">
<li id="fn42"><p>E-mail: furdinez@uc.cl<a href="surv.html#fnref42" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="logit.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="causal-inf.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "night",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/arcruz0/libroadp/edit/master/09-surv_es.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>

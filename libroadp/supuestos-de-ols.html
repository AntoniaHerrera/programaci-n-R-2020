<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>AnalizaR datos políticos</title>
  <meta name="description" content="Proyecto de libro">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="AnalizaR datos políticos" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Proyecto de libro" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="AnalizaR datos políticos" />
  
  <meta name="twitter:description" content="Proyecto de libro" />
  

<meta name="author" content="Francisco Urdinez y Andrés Cruz Labrín (editores)">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
<link rel="prev" href="modelo-multivariado-regresion-multiple.html">
<link rel="next" href="seleccion-de-casos.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><b><a href="./index.html">analizaR datos políticos</a></b></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Tabla de contenidos</a></li>
<li class="chapter" data-level="1" data-path="prefacio.html"><a href="prefacio.html"><i class="fa fa-check"></i><b>1</b> Prefacio</a><ul>
<li class="chapter" data-level="1.1" data-path="prefacio.html"><a href="prefacio.html#agradecimientos"><i class="fa fa-check"></i><b>1.1</b> Agradecimientos</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduccion.html"><a href="introduccion.html"><i class="fa fa-check"></i><b>2</b> Introducción</a><ul>
<li class="chapter" data-level="2.1" data-path="introduccion.html"><a href="introduccion.html#organizacion-del-libro"><i class="fa fa-check"></i><b>2.1</b> Organización del libro</a></li>
<li class="chapter" data-level="2.2" data-path="introduccion.html"><a href="introduccion.html#prerrequisitos"><i class="fa fa-check"></i><b>2.2</b> Prerrequisitos</a></li>
</ul></li>
<li class="part"><span><b>I Introducción a R</b></span></li>
<li class="chapter" data-level="3" data-path="rbas.html"><a href="rbas.html"><i class="fa fa-check"></i><b>3</b> R básico</a><ul>
<li class="chapter" data-level="3.1" data-path="rbas.html"><a href="rbas.html#instalacion"><i class="fa fa-check"></i><b>3.1</b> Instalación</a><ul>
<li class="chapter" data-level="3.1.1" data-path="rbas.html"><a href="rbas.html#r"><i class="fa fa-check"></i><b>3.1.1</b> R</a></li>
<li class="chapter" data-level="3.1.2" data-path="rbas.html"><a href="rbas.html#rstudio"><i class="fa fa-check"></i><b>3.1.2</b> RStudio</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="rbas.html"><a href="rbas.html#partes-de-rstudio"><i class="fa fa-check"></i><b>3.2</b> Partes de RStudio</a><ul>
<li class="chapter" data-level="3.2.1" data-path="rbas.html"><a href="rbas.html#consola"><i class="fa fa-check"></i><b>3.2.1</b> Consola</a></li>
<li class="chapter" data-level="3.2.2" data-path="rbas.html"><a href="rbas.html#script"><i class="fa fa-check"></i><b>3.2.2</b> Script</a></li>
<li class="chapter" data-level="3.2.3" data-path="rbas.html"><a href="rbas.html#objetos"><i class="fa fa-check"></i><b>3.2.3</b> Objetos</a></li>
<li class="chapter" data-level="3.2.4" data-path="rbas.html"><a href="rbas.html#archivos-graficos-paquetes-ayuda"><i class="fa fa-check"></i><b>3.2.4</b> Archivos / gráficos / paquetes / ayuda</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="rbas.html"><a href="rbas.html#ejercicios"><i class="fa fa-check"></i><b>3.3</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="manejo-de-datos.html"><a href="manejo-de-datos.html"><i class="fa fa-check"></i><b>4</b> Manejo de datos</a><ul>
<li class="chapter" data-level="4.1" data-path="manejo-de-datos.html"><a href="manejo-de-datos.html#nuestra-base-de-datos"><i class="fa fa-check"></i><b>4.1</b> Nuestra base de datos</a></li>
<li class="chapter" data-level="4.2" data-path="manejo-de-datos.html"><a href="manejo-de-datos.html#describir-la-base"><i class="fa fa-check"></i><b>4.2</b> Describir la base</a></li>
<li class="chapter" data-level="4.3" data-path="manejo-de-datos.html"><a href="manejo-de-datos.html#ordenar-la-base-con-arrange"><i class="fa fa-check"></i><b>4.3</b> Ordenar la base con <code>arrange()</code></a></li>
<li class="chapter" data-level="4.4" data-path="manejo-de-datos.html"><a href="manejo-de-datos.html#seleccionar-columnas-de-la-base-con-select"><i class="fa fa-check"></i><b>4.4</b> Seleccionar columnas de la base con <code>select()</code></a></li>
<li class="chapter" data-level="4.5" data-path="manejo-de-datos.html"><a href="manejo-de-datos.html#renombrar-columnas-de-la-base-con-rename"><i class="fa fa-check"></i><b>4.5</b> Renombrar columnas de la base con <code>rename()</code></a></li>
<li class="chapter" data-level="4.6" data-path="manejo-de-datos.html"><a href="manejo-de-datos.html#filtrar-observaciones-de-la-base-con-filter"><i class="fa fa-check"></i><b>4.6</b> Filtrar observaciones de la base con <code>filter()</code></a></li>
<li class="chapter" data-level="4.7" data-path="manejo-de-datos.html"><a href="manejo-de-datos.html#crear-nuevas-variables-en-la-base-con-mutate"><i class="fa fa-check"></i><b>4.7</b> Crear nuevas variables en la base con <code>mutate()</code></a></li>
<li class="chapter" data-level="4.8" data-path="manejo-de-datos.html"><a href="manejo-de-datos.html#concatenar-comandos-las-pipes"><i class="fa fa-check"></i><b>4.8</b> Concatenar comandos: las pipes (<code>%&gt;%</code>)</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="dataviz.html"><a href="dataviz.html"><i class="fa fa-check"></i><b>5</b> Visualización de datos</a><ul>
<li class="chapter" data-level="5.1" data-path="dataviz.html"><a href="dataviz.html#por-que-quiero-visualizar-mis-datos"><i class="fa fa-check"></i><b>5.1</b> ¿Por qué quiero visualizar mis datos?</a></li>
<li class="chapter" data-level="5.2" data-path="dataviz.html"><a href="dataviz.html#primeros-pasos"><i class="fa fa-check"></i><b>5.2</b> Primeros pasos</a><ul>
<li class="chapter" data-level="5.2.1" data-path="dataviz.html"><a href="dataviz.html#las-capas-del-multiverso-ggplotidiano"><i class="fa fa-check"></i><b>5.2.1</b> Las capas del multiverso ggplotidiano</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="dataviz.html"><a href="dataviz.html#elecciones-locales-y-visualizacion-de-datos"><i class="fa fa-check"></i><b>5.3</b> Elecciones locales y visualización de datos</a><ul>
<li class="chapter" data-level="5.3.1" data-path="dataviz.html"><a href="dataviz.html#grafico-de-barras"><i class="fa fa-check"></i><b>5.3.1</b> Gráfico de barras</a></li>
<li class="chapter" data-level="5.3.2" data-path="dataviz.html"><a href="dataviz.html#boxplot"><i class="fa fa-check"></i><b>5.3.2</b> Boxplot</a></li>
<li class="chapter" data-level="5.3.3" data-path="dataviz.html"><a href="dataviz.html#relacion-entre-variables"><i class="fa fa-check"></i><b>5.3.3</b> Relación entre variables</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="dataviz.html"><a href="dataviz.html#para-seguir-aprendiendo"><i class="fa fa-check"></i><b>5.4</b> Para seguir aprendiendo</a><ul>
<li class="chapter" data-level="5.4.1" data-path="dataviz.html"><a href="dataviz.html#otros-paquetes"><i class="fa fa-check"></i><b>5.4.1</b> Otros paquetes:</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="carga-flujo.html"><a href="carga-flujo.html"><i class="fa fa-check"></i><b>6</b> Carga de bases y flujo de trabajo</a></li>
<li class="part"><span><b>II Modelos</b></span></li>
<li class="chapter" data-level="7" data-path="stats.html"><a href="stats.html"><i class="fa fa-check"></i><b>7</b> Estadística inferencial básica</a></li>
<li class="chapter" data-level="8" data-path="lineal.html"><a href="lineal.html"><i class="fa fa-check"></i><b>8</b> Modelos lineales</a><ul>
<li class="chapter" data-level="8.1" data-path="lineal.html"><a href="lineal.html#introduccion-1"><i class="fa fa-check"></i><b>8.1</b> Introducción</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="aplicacion-en-r.html"><a href="aplicacion-en-r.html"><i class="fa fa-check"></i><b>9</b> Aplicación en R</a></li>
<li class="chapter" data-level="10" data-path="estadisticos-descriptivos.html"><a href="estadisticos-descriptivos.html"><i class="fa fa-check"></i><b>10</b> Estadísticos Descriptivos</a><ul>
<li class="chapter" data-level="10.1" data-path="estadisticos-descriptivos.html"><a href="estadisticos-descriptivos.html#estadisticos-descriptivos-y-distribucion-de-las-variables-del-modelo"><i class="fa fa-check"></i><b>10.1</b> Estadísticos Descriptivos y Distribución de las variables del modelo</a></li>
<li class="chapter" data-level="10.2" data-path="estadisticos-descriptivos.html"><a href="estadisticos-descriptivos.html#matriz-de-correlacion-de-variables-independientes"><i class="fa fa-check"></i><b>10.2</b> Matriz de correlación de variables independientes</a></li>
<li class="chapter" data-level="10.3" data-path="estadisticos-descriptivos.html"><a href="estadisticos-descriptivos.html#distribucion-de-las-variables-de-interes"><i class="fa fa-check"></i><b>10.3</b> Distribución de las variables de interés</a></li>
<li class="chapter" data-level="10.4" data-path="estadisticos-descriptivos.html"><a href="estadisticos-descriptivos.html#relacion-entre-la-variable-dependiente-e-independiente"><i class="fa fa-check"></i><b>10.4</b> Relación entre la variable dependiente e independiente</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="modelo-bivariado-regresion-lineal-simple.html"><a href="modelo-bivariado-regresion-lineal-simple.html"><i class="fa fa-check"></i><b>11</b> Modelo bivariado: Regresión Lineal Simple</a></li>
<li class="chapter" data-level="12" data-path="estimando-un-modelo-lineal-en-r.html"><a href="estimando-un-modelo-lineal-en-r.html"><i class="fa fa-check"></i><b>12</b> Estimando un modelo lineal en R</a><ul>
<li class="chapter" data-level="12.1" data-path="estimando-un-modelo-lineal-en-r.html"><a href="estimando-un-modelo-lineal-en-r.html#section"><i class="fa fa-check"></i><b>12.1</b> 1.233/0.25</a></li>
<li class="chapter" data-level="12.2" data-path="estimando-un-modelo-lineal-en-r.html"><a href="estimando-un-modelo-lineal-en-r.html#section-1"><i class="fa fa-check"></i><b>12.2</b> [1] 4.932</a></li>
<li class="chapter" data-level="12.3" data-path="estimando-un-modelo-lineal-en-r.html"><a href="estimando-un-modelo-lineal-en-r.html#representacion-grafica."><i class="fa fa-check"></i><b>12.3</b> Representación gráfica.</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="modelo-multivariado-regresion-multiple.html"><a href="modelo-multivariado-regresion-multiple.html"><i class="fa fa-check"></i><b>13</b> Modelo Multivariado: Regresión Múltiple</a><ul>
<li class="chapter" data-level="13.1" data-path="modelo-multivariado-regresion-multiple.html"><a href="modelo-multivariado-regresion-multiple.html#ajuste-del-modelo"><i class="fa fa-check"></i><b>13.1</b> Ajuste del modelo</a></li>
<li class="chapter" data-level="13.2" data-path="modelo-multivariado-regresion-multiple.html"><a href="modelo-multivariado-regresion-multiple.html#inferencia-en-modelos-lineales-multiples"><i class="fa fa-check"></i><b>13.2</b> Inferencia en modelos lineales múltiples</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="supuestos-de-ols.html"><a href="supuestos-de-ols.html"><i class="fa fa-check"></i><b>14</b> Supuestos de OLS:</a><ul>
<li class="chapter" data-level="14.1" data-path="supuestos-de-ols.html"><a href="supuestos-de-ols.html#errores-estandares-robustos"><i class="fa fa-check"></i><b>14.1</b> Errores estándares robustos</a><ul>
<li class="chapter" data-level="14.1.1" data-path="supuestos-de-ols.html"><a href="supuestos-de-ols.html#un-caso-especial-de-heterocedasticidad-la-varianza-del-error-asociada-a-clusters"><i class="fa fa-check"></i><b>14.1.1</b> Un caso especial de Heterocedasticidad: la varianza del error asociada a clusters</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="supuestos-de-ols.html"><a href="supuestos-de-ols.html#un-supuesto-adicional-para-poder-realizar-inferencia"><i class="fa fa-check"></i><b>14.2</b> Un supuesto adicional para poder realizar <strong>inferencia</strong></a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="seleccion-de-casos.html"><a href="seleccion-de-casos.html"><i class="fa fa-check"></i><b>15</b> Selección de casos</a></li>
<li class="chapter" data-level="16" data-path="que-casos-seleccionar.html"><a href="que-casos-seleccionar.html"><i class="fa fa-check"></i><b>16</b> ¿Qué casos seleccionar?</a><ul>
<li class="chapter" data-level="16.1" data-path="que-casos-seleccionar.html"><a href="que-casos-seleccionar.html#casos-tipicos"><i class="fa fa-check"></i><b>16.1</b> 1. Casos Típicos</a></li>
<li class="chapter" data-level="16.2" data-path="que-casos-seleccionar.html"><a href="que-casos-seleccionar.html#casos-desviados"><i class="fa fa-check"></i><b>16.2</b> 2. Casos desviados</a></li>
<li class="chapter" data-level="16.3" data-path="que-casos-seleccionar.html"><a href="que-casos-seleccionar.html#casos-influyentes"><i class="fa fa-check"></i><b>16.3</b> 3. Casos Influyentes</a></li>
<li class="chapter" data-level="16.4" data-path="que-casos-seleccionar.html"><a href="que-casos-seleccionar.html#casos-extremos"><i class="fa fa-check"></i><b>16.4</b> 4. Casos extremos</a><ul>
<li class="chapter" data-level="16.4.1" data-path="que-casos-seleccionar.html"><a href="que-casos-seleccionar.html#a-casos-extremos-en-la-variable-independiente-x"><i class="fa fa-check"></i><b>16.4.1</b> 4.a Casos extremos en la variable independiente: <span class="math inline">\(x\)</span></a></li>
<li class="chapter" data-level="16.4.2" data-path="que-casos-seleccionar.html"><a href="que-casos-seleccionar.html#b-casos-extremos-en-la-variable-dependiente-y"><i class="fa fa-check"></i><b>16.4.2</b> 4.b Casos extremos en la variable dependiente: <span class="math inline">\(y\)</span></a></li>
</ul></li>
<li class="chapter" data-level="16.5" data-path="que-casos-seleccionar.html"><a href="que-casos-seleccionar.html#casos-mas-similares"><i class="fa fa-check"></i><b>16.5</b> 5. Casos más similares</a></li>
<li class="chapter" data-level="16.6" data-path="que-casos-seleccionar.html"><a href="que-casos-seleccionar.html#casos-mas-diferentes"><i class="fa fa-check"></i><b>16.6</b> 6. Casos más diferentes</a></li>
<li class="chapter" data-level="16.7" data-path="que-casos-seleccionar.html"><a href="que-casos-seleccionar.html#la-relevancia-de-combinar-metodos"><i class="fa fa-check"></i><b>16.7</b> La relevancia de combinar métodos</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="referencias.html"><a href="referencias.html"><i class="fa fa-check"></i><b>17</b> Referencias</a></li>
<li class="chapter" data-level="18" data-path="logit.html"><a href="logit.html"><i class="fa fa-check"></i><b>18</b> Modelos binarios</a></li>
<li class="chapter" data-level="19" data-path="surv.html"><a href="surv.html"><i class="fa fa-check"></i><b>19</b> Modelos de supervivencia</a><ul>
<li class="chapter" data-level="19.1" data-path="surv.html"><a href="surv.html#el-modelo-cox-de-riesgos-proporcionales"><i class="fa fa-check"></i><b>19.1</b> El modelo Cox de riesgos proporcionales:</a></li>
</ul></li>
<li class="part"><span><b>III Aplicaciones</b></span></li>
<li class="chapter" data-level="20" data-path="manejo-av.html"><a href="manejo-av.html"><i class="fa fa-check"></i><b>20</b> Manejo avanzado de datos políticos</a></li>
<li class="chapter" data-level="21" data-path="pca.html"><a href="pca.html"><i class="fa fa-check"></i><b>21</b> Creación de índices con Análisis de Componentes Principales (PCA)</a><ul>
<li class="chapter" data-level="21.1" data-path="pca.html"><a href="pca.html#conceptos-importantes"><i class="fa fa-check"></i><b>21.1</b> Conceptos importantes</a></li>
<li class="chapter" data-level="21.2" data-path="pca.html"><a href="pca.html#aplicacion-en-r-1"><i class="fa fa-check"></i><b>21.2</b> Aplicación en R</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="web-mining.html"><a href="web-mining.html"><i class="fa fa-check"></i><b>22</b> Mínería de datos</a></li>
<li class="chapter" data-level="23" data-path="redes.html"><a href="redes.html"><i class="fa fa-check"></i><b>23</b> Análisis de redes</a></li>
<li class="chapter" data-level="24" data-path="qta.html"><a href="qta.html"><i class="fa fa-check"></i><b>24</b> Análisis cuantitativo de textos</a><ul>
<li class="chapter" data-level="24.1" data-path="qta.html"><a href="qta.html#introduccion-2"><i class="fa fa-check"></i><b>24.1</b> Introducción</a></li>
<li class="chapter" data-level="24.2" data-path="qta.html"><a href="qta.html#bases-de-datos"><i class="fa fa-check"></i><b>24.2</b> Bases de datos</a></li>
<li class="chapter" data-level="24.3" data-path="qta.html"><a href="qta.html#calculo-de-frecuencias"><i class="fa fa-check"></i><b>24.3</b> Cálculo de frecuencias</a><ul>
<li class="chapter" data-level="24.3.1" data-path="qta.html"><a href="qta.html#hashtags-mas-usados-de-las-cuentas-de-los-diputados"><i class="fa fa-check"></i><b>24.3.1</b> 10 hashtags mas usados de las cuentas de los diputados</a></li>
<li class="chapter" data-level="24.3.2" data-path="qta.html"><a href="qta.html#frecuencias-por-genero-cantidad-de-hashtags-usados-por-los-diputados-en-total"><i class="fa fa-check"></i><b>24.3.2</b> Frecuencias por género: cantidad de hashtags usados por los diputados en total</a></li>
</ul></li>
<li class="chapter" data-level="24.4" data-path="qta.html"><a href="qta.html#wordcloud-de-hashtags"><i class="fa fa-check"></i><b>24.4</b> Wordcloud de hashtags</a></li>
<li class="chapter" data-level="24.5" data-path="qta.html"><a href="qta.html#hashtags-mas-usados-por-genero"><i class="fa fa-check"></i><b>24.5</b> Hashtags más usados por género</a><ul>
<li class="chapter" data-level="24.5.1" data-path="qta.html"><a href="qta.html#entre-las-diputadas"><i class="fa fa-check"></i><b>24.5.1</b> Entre las diputadas</a></li>
<li class="chapter" data-level="24.5.2" data-path="qta.html"><a href="qta.html#entre-las-diputadas-1"><i class="fa fa-check"></i><b>24.5.2</b> Entre las diputadas</a></li>
</ul></li>
<li class="chapter" data-level="24.6" data-path="qta.html"><a href="qta.html#hashtags-de-genero-por-caracteristicas-del-diputado"><i class="fa fa-check"></i><b>24.6</b> Hashtags de género por características del diputado</a><ul>
<li class="chapter" data-level="24.6.1" data-path="qta.html"><a href="qta.html#por-el-genero-del-diputado"><i class="fa fa-check"></i><b>24.6.1</b> Por el género del diputado</a></li>
<li class="chapter" data-level="24.6.2" data-path="qta.html"><a href="qta.html#por-la-coalicion-de-los-diputados"><i class="fa fa-check"></i><b>24.6.2</b> Por la coalición de los diputados</a></li>
</ul></li>
<li class="chapter" data-level="24.7" data-path="qta.html"><a href="qta.html#variacion-temporal-del-uso-de-estos-hashtags"><i class="fa fa-check"></i><b>24.7</b> Variación temporal del uso de estos hashtags</a><ul>
<li class="chapter" data-level="24.7.1" data-path="qta.html"><a href="qta.html#frecuencia-semanal-de-olafeminista"><i class="fa fa-check"></i><b>24.7.1</b> Frecuencia semanal de #olafeminista</a></li>
<li class="chapter" data-level="24.7.2" data-path="qta.html"><a href="qta.html#frecuencia-semanal-de-tres-hashtags-de-genero"><i class="fa fa-check"></i><b>24.7.2</b> Frecuencia semanal de tres hashtags de género</a></li>
<li class="chapter" data-level="24.7.3" data-path="qta.html"><a href="qta.html#grafiquemos-los-hashtags-de-genero-por-semana"><i class="fa fa-check"></i><b>24.7.3</b> Grafiquemos los hashtags de género por semana</a></li>
<li class="chapter" data-level="24.7.4" data-path="qta.html"><a href="qta.html#ponderamos-en-relacion-al-total-de-hashtags-por-semana"><i class="fa fa-check"></i><b>24.7.4</b> Ponderamos en relación al total de hashtags por semana</a></li>
<li class="chapter" data-level="24.7.5" data-path="qta.html"><a href="qta.html#grafiquemos-los-hashtags-interesantes-ponderados-por-el-total-semanal"><i class="fa fa-check"></i><b>24.7.5</b> Grafiquemos los hashtags interesantes ponderados por el total semanal</a></li>
<li class="chapter" data-level="24.7.6" data-path="qta.html"><a href="qta.html#diputadas"><i class="fa fa-check"></i><b>24.7.6</b> Diputadas</a></li>
<li class="chapter" data-level="24.7.7" data-path="qta.html"><a href="qta.html#agenda-mujer-por-semana"><i class="fa fa-check"></i><b>24.7.7</b> agenda mujer por semana</a></li>
<li class="chapter" data-level="24.7.8" data-path="qta.html"><a href="qta.html#hashtags-interesantes-por-semana"><i class="fa fa-check"></i><b>24.7.8</b> hashtags interesantes por semana:</a></li>
<li class="chapter" data-level="24.7.9" data-path="qta.html"><a href="qta.html#grafiquemos-los-hashtags-interesantes-por-semana"><i class="fa fa-check"></i><b>24.7.9</b> Grafiquemos los hashtags interesantes por semana:</a></li>
<li class="chapter" data-level="24.7.10" data-path="qta.html"><a href="qta.html#agenda-hombre-por-semana"><i class="fa fa-check"></i><b>24.7.10</b> agenda hombre por semana</a></li>
<li class="chapter" data-level="24.7.11" data-path="qta.html"><a href="qta.html#hashtags-interesantes-por-semana-1"><i class="fa fa-check"></i><b>24.7.11</b> hashtags interesantes por semana:</a></li>
<li class="chapter" data-level="24.7.12" data-path="qta.html"><a href="qta.html#grafiquemos-los-hashtags-interesantes-por-semana-1"><i class="fa fa-check"></i><b>24.7.12</b> Grafiquemos los hashtags interesantes por semana:</a></li>
</ul></li>
<li class="chapter" data-level="24.8" data-path="qta.html"><a href="qta.html#hashtags-de-genero-por-semana-a-nivel-de-diputados-ponderados-por-semana"><i class="fa fa-check"></i><b>24.8</b> Hashtags de género por semana a nivel de diputados (ponderados por semana)</a></li>
<li class="chapter" data-level="24.9" data-path="qta.html"><a href="qta.html#comentarios-finales"><i class="fa fa-check"></i><b>24.9</b> Comentarios finales</a></li>
</ul></li>
<li class="chapter" data-level="25" data-path="mapas.html"><a href="mapas.html"><i class="fa fa-check"></i><b>25</b> Generación de mapas</a><ul>
<li class="chapter" data-level="25.1" data-path="mapas.html"><a href="mapas.html#datos-espaciales"><i class="fa fa-check"></i><b>25.1</b> Datos Espaciales</a><ul>
<li class="chapter" data-level="25.1.1" data-path="mapas.html"><a href="mapas.html#que-son"><i class="fa fa-check"></i><b>25.1.1</b> ¿Qué son?</a></li>
<li class="chapter" data-level="25.1.2" data-path="mapas.html"><a href="mapas.html#estructura-de-los-datos-espaciales"><i class="fa fa-check"></i><b>25.1.2</b> Estructura de los Datos Espaciales</a></li>
</ul></li>
<li class="chapter" data-level="25.2" data-path="mapas.html"><a href="mapas.html#datos-espaciales-en-r"><i class="fa fa-check"></i><b>25.2</b> Datos Espaciales en R</a></li>
<li class="chapter" data-level="25.3" data-path="mapas.html"><a href="mapas.html#special-features-en-r"><i class="fa fa-check"></i><b>25.3</b> Special Features en R</a><ul>
<li class="chapter" data-level="25.3.1" data-path="mapas.html"><a href="mapas.html#estructura"><i class="fa fa-check"></i><b>25.3.1</b> Estructura</a></li>
</ul></li>
<li class="chapter" data-level="25.4" data-path="mapas.html"><a href="mapas.html#manejo-de-datos-espaciales"><i class="fa fa-check"></i><b>25.4</b> Manejo de Datos Espaciales</a><ul>
<li class="chapter" data-level="25.4.1" data-path="mapas.html"><a href="mapas.html#modificaciones"><i class="fa fa-check"></i><b>25.4.1</b> Modificaciones</a></li>
<li class="chapter" data-level="25.4.2" data-path="mapas.html"><a href="mapas.html#crear-nuevos-shapefiles-con-st_write"><i class="fa fa-check"></i><b>25.4.2</b> .4 Crear nuevos shapefiles con <code>st_write</code></a></li>
<li class="chapter" data-level="25.4.3" data-path="mapas.html"><a href="mapas.html#incorporar-datos-de-otras-bases-con-merge"><i class="fa fa-check"></i><b>25.4.3</b> Incorporar datos de otras bases con <code>merge</code></a></li>
</ul></li>
<li class="chapter" data-level="25.5" data-path="mapas.html"><a href="mapas.html#mapear-en-r"><i class="fa fa-check"></i><b>25.5</b> Mapear en R</a></li>
<li class="chapter" data-level="25.6" data-path="mapas.html"><a href="mapas.html#mapeando-variables"><i class="fa fa-check"></i><b>25.6</b> Mapeando variables</a><ul>
<li class="chapter" data-level="25.6.1" data-path="mapas.html"><a href="mapas.html#mapas-animados-con-gganimate"><i class="fa fa-check"></i><b>25.6.1</b> Mapas animados con gganimate</a></li>
</ul></li>
<li class="chapter" data-level="25.7" data-path="mapas.html"><a href="mapas.html#inferencia-a-partir-de-datos-espaciales"><i class="fa fa-check"></i><b>25.7</b> Inferencia a partir de Datos Espaciales</a><ul>
<li class="chapter" data-level="25.7.1" data-path="mapas.html"><a href="mapas.html#indicadores-locales-de-asociacion-espacial-lisa"><i class="fa fa-check"></i><b>25.7.1</b> Indicadores locales de asociación espacial (LISA)</a></li>
<li class="chapter" data-level="25.7.2" data-path="mapas.html"><a href="mapas.html#matriz-de-pesos-espaciales"><i class="fa fa-check"></i><b>25.7.2</b> Matriz de Pesos Espaciales</a></li>
<li class="chapter" data-level="25.7.3" data-path="mapas.html"><a href="mapas.html#morans-i"><i class="fa fa-check"></i><b>25.7.3</b> Moran’s I</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="creditos.html"><a href="creditos.html"><i class="fa fa-check"></i>Créditos</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">AnalizaR datos políticos</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="supuestos-de-ols" class="section level1">
<h1><span class="header-section-number">Capítulo 14</span> Supuestos de OLS:</h1>
<p>El estimador de Mínimos Cuadrados Ordinarios será de utilidad (estimará insesgadamente el parámetro poblacional) si es que se cumplen los supuestos de Gauss-Markov que permiten que sea el Mejor Estimador Lineal Insesgado (MELI o BLUE por sus siglas en inglés). Para profundizar sobre los supuestos es recomendable consultar: Wooldrige,2006;Stock y Watson, 2012; Monogan III, 2015.</p>
<p>Por tanto, es importante evaluar que en nuestra estimación se estén cumpliendo estos supuestos. Como veremos a continuación, esta evaluación es teórica y, en algunos casos, se podrá aproximar empíricamente.</p>
<div id="media-condicional-cero" class="section level4">
<h4><span class="header-section-number">14.0.0.1</span> 1. Media condicional cero</h4>
<p>El supuesto central para utilizar el estimador de MCO. El postulado crucial de este supuesto es la independencia entre las variables indpendientes y el término de error, esto nos permite aislar de los factores no observables (contenidos en el término de error <span class="math inline">\(u\)</span>) el efecto de las <span class="math inline">\(x\)</span>.
Este supuesto no puede ser evaluado empíricamente porque, por definición, no conocemos los factores contenidos en el término de error. Por lo tanto, la defensa de este supuesto siempre será <em>teórica</em>.</p>
</div>
<div id="muestreo-aleatorio" class="section level4">
<h4><span class="header-section-number">14.0.0.2</span> 2. Muestreo aleatorio</h4>
<p>Este es un supuesto sobre la generación de los datos. Se asume un muestreo aleatorio de tamaño <span class="math inline">\(n\)</span> que implica que la muestra fue tomada de forma tal que todas las unidades poblacionales tuvieron la misma probabilidad de ser seleccionadas. Es decir, no hay un sesgo de selección muestral.</p>
</div>
<div id="linealidad-en-los-parametros" class="section level4">
<h4><span class="header-section-number">14.0.0.3</span> 3. Linealidad en los Parámetros</h4>
<p>MCO asume que la variable dependiente (<span class="math inline">\(y\)</span>) esta relacionada linealmente con la variable(s) independiente(s) y el término de error (<span class="math inline">\(u\)</span>). Es decir, el aumento en una unidad de <span class="math inline">\(x\)</span> implica un efecto constante en la variable dependiente <span class="math inline">\(y\)</span>. De aquí la forma funcional de la ecuación de regresión:</p>
<p><span class="math display">\[Y = \beta_0 + \beta_1x + u\]</span></p>
<p>Si la relación en realidad no es lineal, entonces estaremos ante un problema de especificación del modelo. Es decir, los valores predichos por nuestro modelo no se ajustarán a la realidad de nuestros datos y, en consecuencia, las estimaciones serán sesgadas. Por tanto, es clave evaluar si la relación que queremos estimar es lineal o si la forma funcional que caracteriza dicha relación es otra (por ejemplo, podría ser cuadrática, cúbica, logarítmica, etc).</p>
<p>La buena noticia es que si tenemos motivos teóricos y empíricos para creer que la relación no es lineal, es posible realizar transformaciones a nuestras variables para lograr una mejor especificación del modelo. Un clásico ejemplo refiere a la relación parabólica entre la edad y el salario: a medida que aumenta la edad aumenta el salario hasta que llega un punto de inflexión donde el aumento de la edad se relaciona con menores niveles de ingreso. En este caso lo recomnedable es realizar una transformación cuadrática a la variable edad para lograr una mejor especificación del modelo.</p>
<p>Para evaluar la linealidad realizamos un gráfico de dispersión de los valores predichos contra los residuos <span class="math inline">\(u\)</span>. Lo que se intenta es evaluar si el promedio de los residuos tiende a ubicarse de manera aleatoria por encima y debajo del cero. Si los residuos muestran un patrón creciente o decreciente - o de cualquier otro tipo - entonces la forma funcional de alguna de las variables en cuestión no es lineal.
Para esto utilizamos el comando <code>plot</code>:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1"> <span class="kw">plot</span>(<span class="dt">y=</span>modelo_<span class="dv">1</span><span class="op">$</span>residuals,<span class="dt">x=</span>modelo_<span class="dv">1</span><span class="op">$</span>fitted.values,</a>
<a class="sourceLine" id="cb36-2" data-line-number="2">      <span class="dt">xlab=</span><span class="st">&quot;Valores Predichos&quot;</span>,<span class="dt">ylab=</span><span class="st">&quot;Residuales&quot;</span>)</a>
<a class="sourceLine" id="cb36-3" data-line-number="3"><span class="kw">abline</span>(<span class="dv">0</span>, <span class="dv">0</span>)</a></code></pre></div>
<p><img src="adp-bookdown_files/figure-html/unnamed-chunk-45-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Además, podemos hacer un gráfico de residuales parciales (o de componentes), donde se grafican cada una de las variables independientes del modelo contra los residuos. El objetivo es obtener un gráfico “parcial” para observar la relación entre la(s) variable(s) independiente(s) y la variable dependiente dando cuenta (controlando) de las demás variables del modelo. Una línea punteada nos muestra la predicción de OLS, y otra línea (rosada) nos muestra la relación “real”. Si observamos que alguna de nuestras variables <strong>no tiene una relación lineal</strong> podemos realizar transformaciones (a las variables!) para que la forma funcional se acerque a la empiria. Cabe destacar que, además de la justificación empírica, esta transformación lineal <strong>siempre</strong> debe ir acompañada de un argumento teórico de por qué la relación entre las dos variables toma esa forma.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" data-line-number="1"><span class="kw">library</span>(car)</a>
<a class="sourceLine" id="cb37-2" data-line-number="2"><span class="kw">crPlots</span>(modelo_<span class="dv">1</span>)</a></code></pre></div>
<p><img src="adp-bookdown_files/figure-html/unnamed-chunk-46-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>La relación de nuestra variable de interés con la variable dependiente parece ser cuadrática creciente. Por tanto, podría ser razonable realizar una transformación cuadrática a la variable. Evaluemos esto gráficamente:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" data-line-number="1">basehys_sinna<span class="op">$</span>cseduc2 &lt;-<span class="st"> </span>basehys_sinna<span class="op">$</span>cseduc<span class="op">*</span>basehys_sinna<span class="op">$</span>cseduc</a>
<a class="sourceLine" id="cb38-2" data-line-number="2">modelo_<span class="dv">1</span>_tl&lt;-<span class="st"> </span><span class="kw">lm</span>(gini_slc<span class="op">~</span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>cseduc2 <span class="op">+</span><span class="st"> </span>cseduc, <span class="dt">data=</span>basehys_sinna)</a>
<a class="sourceLine" id="cb38-3" data-line-number="3"></a>
<a class="sourceLine" id="cb38-4" data-line-number="4"><span class="kw">library</span>(car)</a>
<a class="sourceLine" id="cb38-5" data-line-number="5"><span class="kw">crPlots</span>(modelo_<span class="dv">1</span>_tl)</a></code></pre></div>
<p><img src="adp-bookdown_files/figure-html/unnamed-chunk-47-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>A partir de un diagnostico visual, se observa una tendencia creciente en los residuos a medida que se avanza en los valores predichos. Además, se detectó una relación no lineal entre el gasto en educación y los niveles de desigualdad. La sospecha es que esta relación pueda ser cuadrática (parábola cuadrática creciente) y, de acuerdo al gráfico de residuales parciales parece ser que la variable transformada se acerca bastante más a la relación lineal que estima MCO (marcada por la línea punteada).</p>
<p>Para confirmar las observaciones visuales, se suele utilizar un test estadístico para diagnosticar una mala especificación funcional del modelo: RESET Test de Ramsey. La idea es justamente evaluar si es que existe un error de especificación de la ecuación de regresión. Este test lo que hace es volver a estimar el modelo pero incorporando los valores predichos del modelo original con alguna transformación no lineal de las variables. Luego, a partir de un Test-F se evalúa si el modelo con la especificación no lineal tiene un mejor ajuste que el modelo original sin la transformación no lineal. La hipótesis nula postula que las nuevas variables (en este caso cseduc^2) no aportan significativamente para explicar la variación de la variable dependiente; es decir, que su coeficiente es igual a cero (<span class="math inline">\(\beta=0\)</span>).</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" data-line-number="1"><span class="kw">library</span>(lmtest)</a>
<a class="sourceLine" id="cb39-2" data-line-number="2"><span class="co">## Loading required package: zoo</span></a>
<a class="sourceLine" id="cb39-3" data-line-number="3"><span class="co">## </span></a>
<a class="sourceLine" id="cb39-4" data-line-number="4"><span class="co">## Attaching package: &#39;zoo&#39;</span></a>
<a class="sourceLine" id="cb39-5" data-line-number="5"><span class="co">## The following objects are masked from &#39;package:base&#39;:</span></a>
<a class="sourceLine" id="cb39-6" data-line-number="6"><span class="co">## </span></a>
<a class="sourceLine" id="cb39-7" data-line-number="7"><span class="co">##     as.Date, as.Date.numeric</span></a>
<a class="sourceLine" id="cb39-8" data-line-number="8"><span class="kw">resettest</span>(modelo_<span class="dv">1</span>, <span class="dt">power=</span><span class="dv">2</span>, <span class="dt">type=</span><span class="kw">c</span>(<span class="st">&quot;fitted&quot;</span>), <span class="dt">data=</span>basehys_sinna)</a>
<a class="sourceLine" id="cb39-9" data-line-number="9"><span class="co">## </span></a>
<a class="sourceLine" id="cb39-10" data-line-number="10"><span class="co">##  RESET test</span></a>
<a class="sourceLine" id="cb39-11" data-line-number="11"><span class="co">## </span></a>
<a class="sourceLine" id="cb39-12" data-line-number="12"><span class="co">## data:  modelo_1</span></a>
<a class="sourceLine" id="cb39-13" data-line-number="13"><span class="co">## RESET = 9, df1 = 1, df2 = 400, p-value = 0.004</span></a></code></pre></div>
<p>De acuerdo al resultado del Test F, confirmamos lo observado gráficamente: el incorporar un término cuadrático del gasto en educación mejora el ajuste de nuestra estimación. A esta conclusión llegamos observando el <em>valor-p</em> del test RESET de Ramsey: a un nivel de significancia estadística del 5%, se rechaza la hipótesis nula de que la incorporación del término cuadrático no mejora el ajuste del modelo.</p>
<ul>
<li><em>Nota</em>: Esta evaluación se realizó para un modelo de regresión simple (bivariado). Pero bien puede realizarse exactamente lo mismo para modelos multivariados.</li>
</ul>
</div>
<div id="variacion-en-las-variables-independientes-y-no-colinealidad-perfecta" class="section level4">
<h4><span class="header-section-number">14.0.0.4</span> 4. Variación en las variables independientes y no Colinealidad Perfecta</h4>
<p>En primer lugar, es necesario que exista variación en la(s) variable(s) independiente(s). Si no tengo variación, la estimación de los coeficientes será indeterminada. Además, mayor variación en las variables independientes me permitirá realizar estimaciones más precisas.</p>
<p>Por otra parte, la no-colinealidad perfecta implica que las variables independientes no estén perfectamente correlacionadas <em>linealmente</em>. Es decir, si bien las variables independientes por lo general suelen tener alguna relación entre ellas, no queremos que midan prácticamente lo mismo! Eso lo evaluaremos con tests de multicolinealidad.</p>
<p><strong>Problemas de la multicolinealidad:</strong></p>
<p>A. <em>Pérdida de eficiencia</em>, pues sus errores estándar serán infinitos. Aún si la multicolinealidad es menos que perfecta los coeficientes de regresión poseen grandes errores estándar, lo que hace que no puedan ser estimados con gran precisión.</p>
<p>Repasemos la fórmula del error estándar de los coeficientes:</p>
<p><span class="math display">\[\hat{\sigma}{_\hat{\beta}{_1}} = \frac{\hat{\sigma}} {\sqrt{\sum(X_j – \bar{X})^2(1 - R^2_j)}}\]</span></p>
<ul>
<li><p><span class="math inline">\(\hat{\sigma}\)</span> Es la varianza del término de error: <span class="math inline">\(\frac{\sum\hat{u}}{n-k-1}\)</span></p></li>
<li><p><span class="math inline">\(\sum(X_j – \bar{X})^2\)</span> Es la variabilidad de <span class="math inline">\(x_j\)</span> (<span class="math inline">\(STCx_j\)</span>)</p></li>
<li><p><span class="math inline">\(1 - R^2_j\)</span> Es la porción de <span class="math inline">\(x_j\)</span> que no es explicada por el resto de las <em>x</em> en el modelo (<span class="math inline">\(R^2_j\)</span> indica la varianza de <span class="math inline">\(x_j\)</span> que es explicada por el resto de las equis del modelo). Es por este término que la no colinealidad perfecta es tan importante!</p></li>
</ul>
<p>B. Las <em>estimaciones de los coeficientes pueden oscilar demasiado</em> en función de qué otras variables independientes están en el modelo. En una estimación OLS la idea es que puedes cambiar el valor de una variable independiente y no de las otras (de esto se trata ceteris paribus). Sin embargo, cuando las variables independientes están correlacionadas, los cambios en una variable están asociados con los cambios en otra variable. Cuanto más fuerte es la correlación, más difícil es cambiar una variable sin cambiar otra. Se vuelve difícil para el modelo estimar la relación entre cada variable independiente y la variable dependiente manteniendo el resto constante porque las variables independientes tienden a cambiar simultáneamente.</p>
<p>Repasemos la fórmula del estimación del coeficiente en una regresión múltiple:</p>
<p><span class="math display">\[\hat{\beta_1} = \frac{\sum(\hat{r_{i1}}\hat{y_i})}{\sum(\hat{r^2_{i1}})}\]</span></p>
<p>Donde:</p>
<ul>
<li><span class="math inline">\(\hat{r_{i1}}\)</span> son los residuales de una regresión de <span class="math inline">\(x_1\)</span> sobre el resto de las <span class="math inline">\(x\)</span> en el modelo (osea la parte de <span class="math inline">\(x_1\)</span> que no puede ser explicada - o que no está correlacionada - con el resto de las <span class="math inline">\(x\)</span>)</li>
</ul>
<p>Por tanto, <span class="math inline">\(\hat{\beta_1}\)</span> mide la relación muestral entre <span class="math inline">\(y\)</span> y <span class="math inline">\(x_1\)</span> luego de haber descontado los efectos parciales de <span class="math inline">\(x_2\)</span>, <span class="math inline">\(x_3\)</span>…<span class="math inline">\(x_k\)</span>.</p>
<p>Para evaluar la multicolinealidad, un primer paso es observar la matriz de correlación de las variables de nuestro modelo (tal como hicimos en la etapa de analizar los estadísticos descriptivos):</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" data-line-number="1">variables &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;gini_slc&quot;</span>,<span class="st">&quot;cseduc&quot;</span>,<span class="st">&quot;s_dualism&quot;</span>,<span class="st">&quot;fdiingdp&quot;</span>,<span class="st">&quot;rgdpch&quot;</span>,<span class="st">&quot;pop014wdi&quot;</span>,<span class="st">&quot;ethnicdicot&quot;</span>,<span class="st">&quot;demrss&quot;</span>,<span class="st">&quot;cshlth&quot;</span>,<span class="st">&quot;csssw&quot;</span>,<span class="st">&quot;legbal&quot;</span>,<span class="st">&quot;repressauthor&quot;</span>)</a>
<a class="sourceLine" id="cb40-2" data-line-number="2">vind &lt;-<span class="st"> </span>basehys[variables]</a>
<a class="sourceLine" id="cb40-3" data-line-number="3">Hmisc<span class="op">::</span><span class="kw">rcorr</span>(<span class="kw">as.matrix</span>(vind))</a>
<a class="sourceLine" id="cb40-4" data-line-number="4"><span class="co">##               gini_slc cseduc s_dualism fdiingdp rgdpch pop014wdi</span></a>
<a class="sourceLine" id="cb40-5" data-line-number="5"><span class="co">##               ethnicdicot demrss cshlth csssw legbal repressauthor</span></a>
<a class="sourceLine" id="cb40-6" data-line-number="6"><span class="co">##  [ reached getOption(&quot;max.print&quot;) -- omitted 12 rows ]</span></a>
<a class="sourceLine" id="cb40-7" data-line-number="7"><span class="co">## </span></a>
<a class="sourceLine" id="cb40-8" data-line-number="8"><span class="co">## n</span></a>
<a class="sourceLine" id="cb40-9" data-line-number="9"><span class="co">##               gini_slc cseduc s_dualism fdiingdp rgdpch pop014wdi</span></a>
<a class="sourceLine" id="cb40-10" data-line-number="10"><span class="co">##               ethnicdicot demrss cshlth csssw legbal repressauthor</span></a>
<a class="sourceLine" id="cb40-11" data-line-number="11"><span class="co">##  [ reached getOption(&quot;max.print&quot;) -- omitted 12 rows ]</span></a>
<a class="sourceLine" id="cb40-12" data-line-number="12"><span class="co">## </span></a>
<a class="sourceLine" id="cb40-13" data-line-number="13"><span class="co">## P</span></a>
<a class="sourceLine" id="cb40-14" data-line-number="14"><span class="co">##               gini_slc cseduc s_dualism fdiingdp rgdpch pop014wdi</span></a>
<a class="sourceLine" id="cb40-15" data-line-number="15"><span class="co">##               ethnicdicot demrss cshlth csssw  legbal repressauthor</span></a>
<a class="sourceLine" id="cb40-16" data-line-number="16"><span class="co">##  [ reached getOption(&quot;max.print&quot;) -- omitted 12 rows ]</span></a></code></pre></div>
<p>Vemos que algunas de nuestras variables están fuertemente correlacionadas!</p>
<p>De todos modos, para detecter multicolinealidad es necesario realizar un test de vif (variance inflation factors) porque ver correlación de a pares no nos ayuda a dilucidar si más de dos variables tienen una correlación lineal. Lo que nos dice este test vif es qué tanto se “agrandan” los errores de cada coeficiente en presencia de las demás variables (qué tanto se incrementa la varianza del error).</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" data-line-number="1"><span class="kw">library</span>(car)</a>
<a class="sourceLine" id="cb41-2" data-line-number="2"><span class="kw">vif</span>(modelo_<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb41-3" data-line-number="3"><span class="co">##      cseduc    fdiingdp      cshlth       csssw   pop014wdi   s_dualism </span></a>
<a class="sourceLine" id="cb41-4" data-line-number="4"><span class="co">##         1.8         1.5         1.7         4.8         5.0         1.2 </span></a>
<a class="sourceLine" id="cb41-5" data-line-number="5"><span class="co">## ethnicdicot      rgdpch </span></a>
<a class="sourceLine" id="cb41-6" data-line-number="6"><span class="co">##         1.9         2.4 </span></a>
<a class="sourceLine" id="cb41-7" data-line-number="7"><span class="co">##  [ reached getOption(&quot;max.print&quot;) -- omitted 3 entries ]</span></a>
<a class="sourceLine" id="cb41-8" data-line-number="8"><span class="kw">sqrt</span>(<span class="kw">vif</span>(modelo_<span class="dv">2</span>)) <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb41-9" data-line-number="9"><span class="co">##      cseduc    fdiingdp      cshlth       csssw   pop014wdi   s_dualism </span></a>
<a class="sourceLine" id="cb41-10" data-line-number="10"><span class="co">##       FALSE       FALSE       FALSE        TRUE        TRUE       FALSE </span></a>
<a class="sourceLine" id="cb41-11" data-line-number="11"><span class="co">## ethnicdicot      rgdpch </span></a>
<a class="sourceLine" id="cb41-12" data-line-number="12"><span class="co">##       FALSE       FALSE </span></a>
<a class="sourceLine" id="cb41-13" data-line-number="13"><span class="co">##  [ reached getOption(&quot;max.print&quot;) -- omitted 3 entries ]</span></a></code></pre></div>
<p>Luego, realizo una consulta sobre si la raíz cuadrada de vif para cada variable es menor que 2 (raíz cuadrada porque lo que me interesa es el error estándar y no la varianza). Vif: debería ser menor a 2, si es mayor a dos quiere decir que la varianza es demasiado alta y por tanto hay problema de multicolinealidad.</p>
<p>De acuerdo a la consulta, parece ser que no tenemos un problema serio de multicolinealidad.
Pero si lo tuvieramos, debríamos corregirla?</p>
<p>La necesidad de reducir la multicolinealidad depende de su gravedad y de cuál es el objetivo principal del modelo de regresión. Hay que tener en cuenta los siguientes tres puntos:</p>
<ol style="list-style-type: decimal">
<li><p>La gravedad de los problemas aumenta con el grado de multicolinealidad. Por lo tanto, si la multicolinealidad es moderada, es posible que no necesitemos resolverla.</p></li>
<li><p>La multicolinealidad afecta solo a las variables independientes específicas que están correlacionadas. Por lo tanto, si la multicolinealidad no está presente para las variables independientes de interés, es posible que no necesitemos resolverla.</p></li>
<li><p>La multicolinealidad afecta los coeficientes y los valores-p, y el error estándar, pero no influye directamente en los valores predichos del modelo, la precisión de estas predicciones y las estadísticas de bondad de ajuste. Si el objetivo principal es hacer predicciones, y no necesitamos comprender el papel de cada variable independiente, no necesitamos reducir la multicolinealidad.</p></li>
</ol>
<p><strong>Soluciones a la multicolinealidad</strong></p>
<ol style="list-style-type: decimal">
<li><p>Remover una de las variables indpendientes que esté altamente correlacionada. Esto constituye un trade-off, y se tiene que justificar teóricamente por qué se mantiene una variable y no la otra, además de hacer evidente el alto grado de correlación.</p></li>
<li><p>Puedo combinar las variables que estén altamente correlacionadas, hacer un índice por ejemplo.</p></li>
<li><p>Realizar un análisis diseñado para variables altamente correlacionadas, como por ejemplo el análisis de componentes principales (ver capítulo Nro. ##).</p></li>
</ol>
<ul>
<li>Hasta ahora hemos visto cuatro supuestos, que permiten derivar la insesgadez de los estimadores por MCO. Es decir, nos permiten confiar en que la esperanza de la estimación realizada a través de MCO será igual al promedio poblacional: <span class="math inline">\(E(\hat\beta)=\beta\)</span></li>
</ul>
<p>El quinto supuesto tiene que ver con la eficiencia. Esto es, con la varianza del término de error de nuestra estimación.</p>
</div>
<div id="homocedasticidad" class="section level4">
<h4><span class="header-section-number">14.0.0.5</span> 5. Homocedasticidad</h4>
<p>La varianza del término de error es constante. Es decir, dado cualquier valor de las variables explicativas, el error tiene la misma varianza:</p>
<p><span class="math inline">\(Var(u\mid{x})=\sigma^2\)</span>, es decir <span class="math inline">\(Var(u)=\sigma^2\)</span></p>
<p>De este modo, la varianza del error no observable, <span class="math inline">\(u\)</span>, condicional sobre las variables explicativas, es constante.</p>
<p>Como mencionamos anteriormente, este supuesto <strong>no afecta la sesgadez</strong> del estimador (es decir, que la distribución muestral de nuestra estimación <span class="math inline">\(_\hat{\beta_1}\)</span> esté centrada en <span class="math inline">\(\beta_1\)</span>), sino su <em>eficiencia</em> (qué tanta dispersión hay en torno a la estimación <span class="math inline">\(_\hat{\beta_1}\)</span> del parámetro <span class="math inline">\(\beta_1\)</span>).</p>
<p>Este supuesto es central para poder calcular la varianza de los estimadores de MCO, y es el que permite que sea el estimador de mínima varianza entre los estimadores lineales insesgados.</p>
<p>Si evaluamos la fórmula del error estándar de los coeficientes, se hace evidente la necesidad del supuesto:
<span class="math display">\[\hat{\sigma}{_\hat{\beta}{_1}} = \frac{\hat{\sigma}} {\sqrt{\sum(X_j – \bar{X})^2(1 - R^2_j)}}\]</span></p>
<ul>
<li><span class="math inline">\(\hat{\sigma}\)</span> Es la varianza del término de error: <span class="math inline">\(\frac{\sum\hat{u}}{n-k-1}\)</span></li>
</ul>
<p>Para poder aplicar esta fórmula, <strong>necesitamos</strong> que <span class="math inline">\({\sigma^2}\)</span> sea constante!!</p>
<p>Cuando este supuesto no se cumple, es decir el término de error no se mantiene constante para distintos valores de <span class="math inline">\(x\)</span>, estamos ante un escenario de <strong>heterocedasticidad</strong>. Es bastante frecuente tener heterocedasticidad.
La buena noticia es que esto no imposibilita la utilización del estimador OLS: hay una solución!</p>
<p><strong>A. Evaluando el supuesto</strong></p>
<p>Para la evaluación de este supuesto se suelen seguir dos pasos:</p>
<ol style="list-style-type: decimal">
<li>Diagnóstico visual</li>
</ol>
<p>Lo que buscamos es observar si los residuales (distancia entre los puntos y la línea de regresión) son constantes para distintos valores de equis.</p>
<p>En primer lugar, hacemos un simple diagrama de dispersión entre la variable independiente que nos interesa y la variable dependiente:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" data-line-number="1"><span class="kw">ggplot</span>(basehys_sinna, <span class="kw">aes</span>(cseduc, gini_slc)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb42-2" data-line-number="2"><span class="st">    </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb42-3" data-line-number="3"><span class="st">    </span><span class="kw">theme_bw</span>()<span class="op">+</span><span class="st"> </span><span class="kw">geom_smooth</span>(<span class="dt">method=</span>lm)</a></code></pre></div>
<p><img src="adp-bookdown_files/figure-html/unnamed-chunk-51-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Otra manera de hacer lo mismo y donde es más evidente:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" data-line-number="1">car<span class="op">::</span><span class="kw">scatterplot</span>(basehys_sinna<span class="op">$</span>cseduc,basehys_sinna<span class="op">$</span>gini_slc)</a></code></pre></div>
<p><img src="adp-bookdown_files/figure-html/unnamed-chunk-52-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Parece ser que en los niveles más bajos de gasto en educación la variabilidad de los niveles de desigualdad es bastante más alta que a niveles más elevados de gasto en educación.</p>
<p>Podemos hacer un mejor diagnóstico visual si utilizamos el modelo estimado (y no solo la relación entre las dos variables) y graficamos los residuos.</p>
<p>Primero lo hacemos para el modelo bivariado:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" data-line-number="1"><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>))</a>
<a class="sourceLine" id="cb44-2" data-line-number="2"><span class="kw">plot</span>(modelo_<span class="dv">1</span>)</a></code></pre></div>
<p><img src="adp-bookdown_files/figure-html/unnamed-chunk-53-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Luego para el modelo multivariado:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" data-line-number="1"><span class="kw">plot</span>(modelo_<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb45-2" data-line-number="2"><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</a></code></pre></div>
<p><img src="adp-bookdown_files/figure-html/unnamed-chunk-54-1.png" width="480" style="display: block; margin: auto;" /><img src="adp-bookdown_files/figure-html/unnamed-chunk-54-2.png" width="480" style="display: block; margin: auto;" /><img src="adp-bookdown_files/figure-html/unnamed-chunk-54-3.png" width="480" style="display: block; margin: auto;" /><img src="adp-bookdown_files/figure-html/unnamed-chunk-54-4.png" width="480" style="display: block; margin: auto;" /></p>
<p>Los dos gráficos que nos interesa analizar son los de la izquierda: donde se grafican los valores predichos y los residuos.</p>
<p>Recordemos que bajo el supuesto de homocedasticidad, como la <span class="math inline">\(Var(u\mid{x})=\sigma^2\)</span> , entonces la <span class="math inline">\(Var(Y\mid{x})=\sigma^2\)</span>. En otras palabras, la varianza de los residuos de los valores predichos a partir de las equis <strong>debiera ser constante</strong>. Por tanto, si no hay absolutamente ninguna heterocedasticidad (osea si estamos ante un escenario de homocedasticidad), deberíamos ver una distribución de puntos completamente aleatoria e igual en todo el rango del eje X y una línea roja constante.</p>
<p>Sin embargo, claramente se observa que los residuos no son constantes para distintos valores de la variable de gasto en educación! Estamos frente a un caso de <strong>heterocedasticidad</strong></p>
<ul>
<li>Podemos también evaluar cada una de las variables del modelo y, así, identificar para qué variables específicas hay heterocedasticidad. Nuevamente, lo que esperamos es que la línea azul coincida con la línea punteada (en cero).</li>
</ul>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" data-line-number="1">car<span class="op">::</span><span class="kw">residualPlots</span>(modelo_<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb46-2" data-line-number="2"><span class="co">##               Test stat Pr(&gt;|Test stat|)    </span></a>
<a class="sourceLine" id="cb46-3" data-line-number="3"><span class="co">## cseduc            -1.80            0.073 .  </span></a>
<a class="sourceLine" id="cb46-4" data-line-number="4"><span class="co">## fdiingdp          -0.12            0.901    </span></a>
<a class="sourceLine" id="cb46-5" data-line-number="5"><span class="co">##  [ reached getOption(&quot;max.print&quot;) -- omitted 10 rows ]</span></a>
<a class="sourceLine" id="cb46-6" data-line-number="6"><span class="co">## ---</span></a>
<a class="sourceLine" id="cb46-7" data-line-number="7"><span class="co">## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</span></a></code></pre></div>
<p><img src="adp-bookdown_files/figure-html/unnamed-chunk-55-1.png" width="480" style="display: block; margin: auto;" /><img src="adp-bookdown_files/figure-html/unnamed-chunk-55-2.png" width="480" style="display: block; margin: auto;" /></p>
<ol start="2" style="list-style-type: decimal">
<li>Diagnóstico estadístico</li>
</ol>
<p>En un segundo paso realizamos un diagnóstico estadístico. Hay distintas maneras de evaluar la homocedasticidad, pero hay el Test de <em>Breusch-Pagan</em> es el que se utiliza con más frecuencia.</p>
<p>La lógica que está por detrás de este test es la siguiente: se realiza una regresión donde la variable dependiente son los residuos al cuadrado, para evaluar si las variables independientes del modelo tienen relación con <span class="math inline">\(u\)</span>. Lo que se quiere encontrar es que ese efecto sea 0, porque si la varianza del error es constante, el error (residuos) no debería variar según los valores de las <span class="math inline">\(x&#39;s\)</span>. En definitiva, ¡no se quiere rechazar la hipótesis nula!</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" data-line-number="1"><span class="kw">bptest</span>(modelo_<span class="dv">2</span>,<span class="dt">studentize=</span>T)</a>
<a class="sourceLine" id="cb47-2" data-line-number="2"><span class="co">## </span></a>
<a class="sourceLine" id="cb47-3" data-line-number="3"><span class="co">##  studentized Breusch-Pagan test</span></a>
<a class="sourceLine" id="cb47-4" data-line-number="4"><span class="co">## </span></a>
<a class="sourceLine" id="cb47-5" data-line-number="5"><span class="co">## data:  modelo_2</span></a>
<a class="sourceLine" id="cb47-6" data-line-number="6"><span class="co">## BP = 30, df = 10, p-value = 7e-04</span></a></code></pre></div>
<p>El resultado del test de Breusch-Pagan nos confirma que estamos ante un escenario de Heterocedasticidad. Como el p-value es menor a 0.05, se rechaza la hipótesis nula y, por tanto, estamos en un escenario de heterocedasticidad.</p>
<p><strong>B. Soluciones a la Heterocedasticidad</strong></p>
<p>Una vez que identificamos que tenemos heterocedasticidad, es necesario solucionarla.</p>
<ol style="list-style-type: decimal">
<li>Una primera alternativa es corregir la <em>forma funcional</em></li>
</ol>
<p>Claramente podes estar ante el caso que la no constancia del término de error se deba a que la relación entre las variables no es lineal!</p>
<p>Para esto ya vimos posibles soluciones a la no linealidad.</p>
<ol start="2" style="list-style-type: decimal">
<li>Muy frecuentemente sucede que la naturaleza empírica de la relación hace que el error no sea constante.</li>
</ol>
<p>Sabemos que no podemos calcular los errores estándar de los estimadores como lo hacemos siempre en OLS: como la varianza del error <strong>no es constante</strong> es necesario modificar la forma en la que calculamos los errores!</p>
<p>Entonces, para poder hacer inferencia necesitamos ajustar la estimación del error de forma tal de hacer una estimación válida en presencia de <strong>heterocedasticidad de la forma desconocida</strong>. Esto es, aunque no sepa el tipo de heterocedasticidad que tengo, puedo mejorar mi precisión y, además, hacer inferencia estadística válida.</p>
<p>La fórmula habitual del error estándar del estimador es:</p>
<p><span class="math display">\[\hat{\sigma}{_\hat{\beta}{_1}} = \frac{\sum_{i=1}^{n}(x_{i}-\overline{x})^2\hat{\sigma}} {\sqrt{\sum(X_j – \bar{X})^2(1 - R^2_j)}}\]</span></p>
<p>Lo que pasa es que cuando tenemos <strong>homocedasticidad</strong>, lo que está en el nominador: <span class="math inline">\(\sum_{i=1}^{n}(x_{i}-\overline{x})^2\hat{\sigma}=\hat\sigma\)</span></p>
<p>Como ahora <span class="math inline">\(\hat{\sigma}\)</span> ya no es constante, esa igualdad ya no se mantiene! Esto porque el valor que adquiere <span class="math inline">\(\hat{\sigma}\)</span> si va a depender de los distintos valores de <span class="math inline">\(x\)</span>.</p>
<p>Además, recordemos que al estimar una regresión <strong>múltiple</strong>, en la estimación del error estándar es necesario descontar la variación de la <span class="math inline">\(x_1\)</span> que es explicada por el resto de las <span class="math inline">\(x_k\)</span> del modelo.</p>
<p>De este modo, en una regresión múltiple, un estimador válido de <span class="math inline">\(\hat{\sigma}{_\hat{\beta}{_1}}\)</span> bajo heterocedasticidad, será:</p>
<p><span class="math display">\[\hat{\sigma}{_\hat{\beta}{_1}} = \frac{\sum_{i=1}^{n}r_{ij}^2\hat{u}^2}{\sqrt{\sum(X_j–\bar{X})^2(1 - R^2_j)}}\]</span></p>
<p>Donde:</p>
<ul>
<li><span class="math inline">\(r_{ij}^2\)</span> Representa los residuos cuadrados de la regresión del resto de las variables independientes sobre la variable independiente <span class="math inline">\(j\)</span>.</li>
<li> Representa la Varianza Total de equis luego de haber descontado el efecto del resto de las equis.</li>
</ul>
<p>A esta forma de estimar los errores estándar se la denomina <strong>“errores estándares robustos”</strong> o también le decimos <strong>“robustecer”</strong> el error, que no es otra cosa que dar cuenta y permitir la heterocedasticidad, volviendo los errores más exigentes.</p>
</div>
<div id="errores-estandares-robustos" class="section level2">
<h2><span class="header-section-number">14.1</span> Errores estándares robustos</h2>
<p>Si bien hay varias formas de robustecer los errores (incluso se podría hacer a mano), R nos permite calcularlos muy fácilmente con el comando <code>coeftest</code> del paquete <code>lmtest</code>. Además, el paquete <code>sandwich</code> con su función <code>vcovHC</code> nos permite incorporar la especificación de la matriz de varianza-covarianza robusta.</p>
<ul>
<li>HC0 = es la original de White (Wooldrige,2006)</li>
<li>HC1= Es la que utiliza el software de Stata</li>
<li>HC3 = Es la más conservadora y, por tanto, se suele ser altamente recomendada.</li>
</ul>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" data-line-number="1"><span class="kw">library</span>(lmtest)</a>
<a class="sourceLine" id="cb48-2" data-line-number="2"><span class="kw">library</span>(sandwich)</a>
<a class="sourceLine" id="cb48-3" data-line-number="3">modelo_robusto_<span class="dv">3</span>=<span class="kw">coeftest</span>(modelo_<span class="dv">2</span>, <span class="dt">vcov =</span> <span class="kw">vcovHC</span>(modelo_<span class="dv">2</span>, <span class="st">&quot;HC3&quot;</span>))</a>
<a class="sourceLine" id="cb48-4" data-line-number="4">modelo_robusto_<span class="dv">1</span>=<span class="kw">coeftest</span>(modelo_<span class="dv">2</span>, <span class="dt">vcov =</span> <span class="kw">vcovHC</span>(modelo_<span class="dv">2</span>, <span class="st">&quot;HC1&quot;</span>))</a>
<a class="sourceLine" id="cb48-5" data-line-number="5">modelo_robusto_<span class="dv">0</span>=<span class="kw">coeftest</span>(modelo_<span class="dv">2</span>, <span class="dt">vcov =</span> <span class="kw">vcovHC</span>(modelo_<span class="dv">2</span>, <span class="st">&quot;HC0&quot;</span>))</a>
<a class="sourceLine" id="cb48-6" data-line-number="6">stargazer<span class="op">::</span><span class="kw">stargazer</span>(modelo_robusto_<span class="dv">3</span>, modelo_robusto_<span class="dv">1</span>, modelo_robusto_<span class="dv">0</span>, <span class="dt">type =</span> <span class="st">&quot;text&quot;</span>)</a>
<a class="sourceLine" id="cb48-7" data-line-number="7"><span class="co">## </span></a>
<a class="sourceLine" id="cb48-8" data-line-number="8"><span class="co">## ==============================================</span></a>
<a class="sourceLine" id="cb48-9" data-line-number="9"><span class="co">##                     Dependent variable:       </span></a>
<a class="sourceLine" id="cb48-10" data-line-number="10"><span class="co">##               --------------------------------</span></a>
<a class="sourceLine" id="cb48-11" data-line-number="11"><span class="co">##                                               </span></a>
<a class="sourceLine" id="cb48-12" data-line-number="12"><span class="co">##                  (1)        (2)        (3)    </span></a>
<a class="sourceLine" id="cb48-13" data-line-number="13"><span class="co">## ----------------------------------------------</span></a>
<a class="sourceLine" id="cb48-14" data-line-number="14"><span class="co">## cseduc         1.600***   1.600***   1.600*** </span></a>
<a class="sourceLine" id="cb48-15" data-line-number="15"><span class="co">##                (0.540)    (0.500)    (0.480)  </span></a>
<a class="sourceLine" id="cb48-16" data-line-number="16"><span class="co">##                                               </span></a>
<a class="sourceLine" id="cb48-17" data-line-number="17"><span class="co">## fdiingdp        0.240      0.240*     0.240*  </span></a>
<a class="sourceLine" id="cb48-18" data-line-number="18"><span class="co">##                (0.150)    (0.140)    (0.140)  </span></a>
<a class="sourceLine" id="cb48-19" data-line-number="19"><span class="co">##                                               </span></a>
<a class="sourceLine" id="cb48-20" data-line-number="20"><span class="co">## cshlth        -0.830***  -0.830***  -0.830*** </span></a>
<a class="sourceLine" id="cb48-21" data-line-number="21"><span class="co">##                (0.240)    (0.230)    (0.220)  </span></a>
<a class="sourceLine" id="cb48-22" data-line-number="22"><span class="co">##                                               </span></a>
<a class="sourceLine" id="cb48-23" data-line-number="23"><span class="co">## csssw         -0.830***  -0.830***  -0.830*** </span></a>
<a class="sourceLine" id="cb48-24" data-line-number="24"><span class="co">##                (0.280)    (0.260)    (0.250)  </span></a>
<a class="sourceLine" id="cb48-25" data-line-number="25"><span class="co">##                                               </span></a>
<a class="sourceLine" id="cb48-26" data-line-number="26"><span class="co">## pop014wdi     -0.930***  -0.930***  -0.930*** </span></a>
<a class="sourceLine" id="cb48-27" data-line-number="27"><span class="co">##                (0.220)    (0.210)    (0.200)  </span></a>
<a class="sourceLine" id="cb48-28" data-line-number="28"><span class="co">##                                               </span></a>
<a class="sourceLine" id="cb48-29" data-line-number="29"><span class="co">## s_dualism     -0.170***  -0.170***  -0.170*** </span></a>
<a class="sourceLine" id="cb48-30" data-line-number="30"><span class="co">##                (0.034)    (0.032)    (0.031)  </span></a>
<a class="sourceLine" id="cb48-31" data-line-number="31"><span class="co">##                                               </span></a>
<a class="sourceLine" id="cb48-32" data-line-number="32"><span class="co">## ethnicdicot    3.700***   3.700***   3.700*** </span></a>
<a class="sourceLine" id="cb48-33" data-line-number="33"><span class="co">##                (1.000)    (0.950)    (0.920)  </span></a>
<a class="sourceLine" id="cb48-34" data-line-number="34"><span class="co">##                                               </span></a>
<a class="sourceLine" id="cb48-35" data-line-number="35"><span class="co">## rgdpch        -0.0004**  -0.0004**  -0.0004** </span></a>
<a class="sourceLine" id="cb48-36" data-line-number="36"><span class="co">##                (0.0002)   (0.0002)   (0.0002) </span></a>
<a class="sourceLine" id="cb48-37" data-line-number="37"><span class="co">##                                               </span></a>
<a class="sourceLine" id="cb48-38" data-line-number="38"><span class="co">## demrss        -2.100***  -2.100***  -2.100*** </span></a>
<a class="sourceLine" id="cb48-39" data-line-number="39"><span class="co">##                (0.630)    (0.590)    (0.570)  </span></a>
<a class="sourceLine" id="cb48-40" data-line-number="40"><span class="co">##                                               </span></a>
<a class="sourceLine" id="cb48-41" data-line-number="41"><span class="co">## legbal        -11.000*** -11.000*** -11.000***</span></a>
<a class="sourceLine" id="cb48-42" data-line-number="42"><span class="co">##                (2.500)    (2.300)    (2.200)  </span></a>
<a class="sourceLine" id="cb48-43" data-line-number="43"><span class="co">##                                               </span></a>
<a class="sourceLine" id="cb48-44" data-line-number="44"><span class="co">## repressauthor   -1.300     -1.300     -1.300  </span></a>
<a class="sourceLine" id="cb48-45" data-line-number="45"><span class="co">##                (1.800)    (1.700)    (1.600)  </span></a>
<a class="sourceLine" id="cb48-46" data-line-number="46"><span class="co">##                                               </span></a>
<a class="sourceLine" id="cb48-47" data-line-number="47"><span class="co">## Constant      89.000***  89.000***  89.000*** </span></a>
<a class="sourceLine" id="cb48-48" data-line-number="48"><span class="co">##                (10.000)   (9.400)    (9.100)  </span></a>
<a class="sourceLine" id="cb48-49" data-line-number="49"><span class="co">##                                               </span></a>
<a class="sourceLine" id="cb48-50" data-line-number="50"><span class="co">## ==============================================</span></a>
<a class="sourceLine" id="cb48-51" data-line-number="51"><span class="co">## ==============================================</span></a>
<a class="sourceLine" id="cb48-52" data-line-number="52"><span class="co">## Note:              *p&lt;0.1; **p&lt;0.05; ***p&lt;0.01</span></a></code></pre></div>
<p>Todas las alternativas nos dan errores robustos similares. Las diferencias están dadas por distintas especificaciones sobre la matriz de varianza-covarianza robusta (HC).</p>
<div id="un-caso-especial-de-heterocedasticidad-la-varianza-del-error-asociada-a-clusters" class="section level3">
<h3><span class="header-section-number">14.1.1</span> Un caso especial de Heterocedasticidad: la varianza del error asociada a clusters</h3>
<p>Sabemos que hay observaciones que pueden estar relacionadas entre sí dentro de determinados grupos (o clusters). Por ejemplo, los países de América Latina podrían estar relacionados por pertenecer a regiones similares (América del Sur versus América Central o Caribe, regiones Andinas versus no Andinas, etc). Así, sus errores podrían estar correlacionados en base a la región que pertenecen. Entonces, tengo que la varianza del error condicionada por región no es constante.</p>
<p>Cuando trabajamos con datos de panel, como es nuestro caso, esto es bastante más claro. Al contar con gasto en educación por país para varios años existe una <em>auto-correlación del error</em> entre observaciones de un mismo país. Es decir, los errores se encuentran correlacionados entre las observaciones de un mismo país para cada año (lo que se gasta en un año particular, probablemente esté relacionado con lo que se gastó en el año anterior).</p>
<p>Entonces, cuando mis observaciones pertenecen a clusters y tengo motivos teóricos para pensar que sus errores estarán correlacionados dentro del cluster, la corrección supondrá clusterizar los errores estándar: <strong>cluster standard errors</strong>.</p>
<p>Lo que estamos haciendo cuando clusterizamos los errores estándar es permitir que exista correlación del error dentro de los clusters (se relaja el supuesto de homocedasticidad). Así, permitimos que la varianza del error no sea constante, sino que sea diferente según los clusters.</p>
<p>La selección de cuáles son los clusters relevantes estará dada teóricamente. En nuestro caso, hace sentido pensar que los clusters son los países.</p>
<p>Recordemos que nuestro interés era estimar el el efecto del gasto en educación sobre el índice de Gini en países de América Latina. Observemos esta relación según región para evaluar si, a primera vista, parece haber clusterización:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" data-line-number="1"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb49-2" data-line-number="2"><span class="kw">ggplot</span>(basehys_sinna, <span class="kw">aes</span>(cseduc, gini_slc)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb49-3" data-line-number="3"><span class="st">    </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb49-4" data-line-number="4"><span class="st">    </span><span class="kw">facet_wrap</span>(<span class="op">~</span>country) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb49-5" data-line-number="5"><span class="st">    </span><span class="kw">theme_bw</span>()</a></code></pre></div>
<p><img src="adp-bookdown_files/figure-html/unnamed-chunk-58-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Parece ser que si existe cierta clusterización por país. Es deir, el gasto en educación por país suele mantenerse dentro de un rango que varía por país.</p>
<p>Cuando lo vemos así no queda tan claro porque son demasiados países, pero aún así pareciera haber cierta clusterización por país (las observaciones se agrupan por país; no parecen ser independientes).</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" data-line-number="1"><span class="kw">ggplot</span>(basehys_sinna, <span class="kw">aes</span>(cseduc, gini_slc, <span class="dt">color=</span>country)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb50-2" data-line-number="2"><span class="st">    </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb50-3" data-line-number="3"><span class="st">    </span><span class="kw">theme_bw</span>()</a></code></pre></div>
<p><img src="adp-bookdown_files/figure-html/unnamed-chunk-59-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Para realizar la estimación por MCO con el error clusterizado, utilizamos el comando <code>lm.cluster</code> del paquete <code>miceadds</code>. Este comando lo que hace es clusterizar los errores estándar según la variable de clusterización indicada. En definitiva, lo que estamos haciendo es permitir que exista correlación del error dentro de los clusters, en este caso países (relajando el supuesto de homocedasticidad).</p>
<p>Los errores estándar robustos por cluster pueden aumentar o disminuir los errores estándar. Es decir, los errores estándar clusterizados pueden ser más grandes o más pequeños que los errores estándar convencionales. La dirección en la que cambiarán los errores estándar depende del signo de la correlación del error intraclase.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" data-line-number="1"><span class="co">#install.packages(&quot;miceadds&quot;)</span></a>
<a class="sourceLine" id="cb51-2" data-line-number="2"></a>
<a class="sourceLine" id="cb51-3" data-line-number="3">modelo_<span class="dv">2</span>_cluster &lt;-<span class="st"> </span>miceadds<span class="op">::</span><span class="kw">lm.cluster</span>( <span class="dt">data=</span>basehys_sinna, <span class="dt">formula=</span>gini_slc<span class="op">~</span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>cseduc <span class="op">+</span><span class="st"> </span>s_dualism <span class="op">+</span><span class="st"> </span>fdiingdp<span class="op">+</span>rgdpch<span class="op">+</span>ethnicdicot<span class="op">+</span>demrss<span class="op">+</span>cshlth<span class="op">+</span>csssw<span class="op">+</span>legbal<span class="op">+</span>repressauthor, <span class="dt">cluster=</span><span class="st">&quot;country&quot;</span>)</a>
<a class="sourceLine" id="cb51-4" data-line-number="4"><span class="kw">summary</span>(modelo_<span class="dv">2</span>_cluster)</a>
<a class="sourceLine" id="cb51-5" data-line-number="5"><span class="co">## R^2= 0.51 </span></a>
<a class="sourceLine" id="cb51-6" data-line-number="6"><span class="co">## </span></a>
<a class="sourceLine" id="cb51-7" data-line-number="7"><span class="co">##               Estimate Std. Error t value Pr(&gt;|t|)</span></a>
<a class="sourceLine" id="cb51-8" data-line-number="8"><span class="co">## (Intercept)    5.1e+01    3.96616   12.86  7.6e-38</span></a>
<a class="sourceLine" id="cb51-9" data-line-number="9"><span class="co">## cseduc         1.2e+00    0.63271    1.88  6.0e-02</span></a>
<a class="sourceLine" id="cb51-10" data-line-number="10"><span class="co">##  [ reached getOption(&quot;max.print&quot;) -- omitted 9 rows ]</span></a></code></pre></div>
</div>
</div>
<div id="un-supuesto-adicional-para-poder-realizar-inferencia" class="section level2">
<h2><span class="header-section-number">14.2</span> Un supuesto adicional para poder realizar <strong>inferencia</strong></h2>
<p>Hasta aquí hemos repasado y evaluado empíricamente - en la medida de lo posible - los cinco supuestos del teorema de Gauss-Markov que aseguran que el estimador de MCO sea MELI (Mejor Estimador Lineal Insesgado).</p>
<p>Sin embargo, estos no son suficientes para poder realizar inferencia estadística!
Para esto, debemos asumir un supuesto adicional:</p>
<div id="normalidad-en-la-distribucion-del-error" class="section level4">
<h4><span class="header-section-number">14.2.0.1</span> 6. Normalidad en la distribución del error</h4>
<p>Como hemos visto anteriormente, para testear una hipótesis de significancia individual de un coeficiente estimado por MCO se utilizan los estadísticos <span class="math inline">\(t\)</span> que permiten contrastar el valor <span class="math inline">\(t\)</span> empírico contra un valor <span class="math inline">\(t\)</span> teórico (llamado “valor crítico”) dado un nivel de significancia determinado (<span class="math inline">\(\alpha\)</span>), comúnmente se utiliza un alpha del 5% (por esto se habla de significancia estadística al 95% de confianza).</p>
<p>Sin embargo, para poder realizar esta prueba de hipótesis y, así, hacer inferencia estadística, es necesario asumir que el coeficiente (<span class="math inline">\(\beta\)</span>) sigue una distribución T-Student. Sólo así podemos realizar la prubea de hipótesis utilizando el estadístico <span class="math inline">\(t\)</span>.</p>
<p>El supuesto que permite esto es el de <em>normalidad en la distribución del error</em>. Como el estimador MCO (<span class="math inline">\(\beta\)</span>) es una combinación lineal de los errores (<span class="math inline">\(Y = \beta_0 + \beta_1x + u\)</span>), al asumir distribución normal del error (<span class="math inline">\(u\)</span>) podemos asumir distribución normal del estimador MCO.</p>
<p>Sin embargo, como el error y su varianza son desconocidos, se estiman utilizando los residuos de la regresión (<span class="math inline">\(\hat{u}\)</span>), obteniendo así el error estándar de la estimación. Sin embargo, las estimaciones implican una pérdida de grados de libertad (por cada parámetro estimado pierdo un grado de libertad: n-k-1, n=tamaño muestral, k=cantidad de parámetros estimados - variables del modelo-, 1=la estimación del intercepto, <span class="math inline">\(\beta_0\)</span>) y, por tanto, la distribución del error estándar y, por tanto, del coeficiente, ya no distribuye normal sino T-Student (<span class="math inline">\(\hat\beta \sim t_{n-k-1}\)</span>).</p>
<p>Los siguientes dos comandos nos permiten verificar que los residuos del modelo estimado a través de MCO siguen una distribución T-Student (aproximadamente normal).</p>
<ul>
<li>El comando <code>qqplot</code> viene por default en R y genera un gráfico de probabilidad normal que muestra la distribución de los datos contra una distribución normal teórica esperada. Por tanto, lo que es importante mirar del gráfico es que las observaciones (que son los residuos) no se salgan de las líneas punteadas (que delimitan la distribución normal).</li>
</ul>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" data-line-number="1"><span class="kw">qqPlot</span>(modelo_<span class="dv">2</span><span class="op">$</span>residuals)</a>
<a class="sourceLine" id="cb52-2" data-line-number="2"><span class="co">## [1] 160 118</span></a></code></pre></div>
<p><img src="adp-bookdown_files/figure-html/unnamed-chunk-61-1.png" width="480" style="display: block; margin: auto;" /></p>
<ul>
<li>El comando <code>ggpubr</code> del paquete <code>ggpubr</code> permite construir gráficos de densidad. De este modo, puedo graficar los residuos para evaluar visualmente si siguen una distribución aproximadamente normal.</li>
</ul>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" data-line-number="1"><span class="kw">library</span>(ggpubr)</a>
<a class="sourceLine" id="cb53-2" data-line-number="2"><span class="co">## Loading required package: magrittr</span></a>
<a class="sourceLine" id="cb53-3" data-line-number="3"><span class="co">## </span></a>
<a class="sourceLine" id="cb53-4" data-line-number="4"><span class="co">## Attaching package: &#39;magrittr&#39;</span></a>
<a class="sourceLine" id="cb53-5" data-line-number="5"><span class="co">## The following object is masked from &#39;package:texreg&#39;:</span></a>
<a class="sourceLine" id="cb53-6" data-line-number="6"><span class="co">## </span></a>
<a class="sourceLine" id="cb53-7" data-line-number="7"><span class="co">##     extract</span></a>
<a class="sourceLine" id="cb53-8" data-line-number="8"><span class="co">## The following object is masked from &#39;package:purrr&#39;:</span></a>
<a class="sourceLine" id="cb53-9" data-line-number="9"><span class="co">## </span></a>
<a class="sourceLine" id="cb53-10" data-line-number="10"><span class="co">##     set_names</span></a>
<a class="sourceLine" id="cb53-11" data-line-number="11"><span class="co">## The following object is masked from &#39;package:tidyr&#39;:</span></a>
<a class="sourceLine" id="cb53-12" data-line-number="12"><span class="co">## </span></a>
<a class="sourceLine" id="cb53-13" data-line-number="13"><span class="co">##     extract</span></a>
<a class="sourceLine" id="cb53-14" data-line-number="14"><span class="kw">ggdensity</span>(modelo_<span class="dv">2</span><span class="op">$</span>residuals, </a>
<a class="sourceLine" id="cb53-15" data-line-number="15">          <span class="dt">main =</span> <span class="st">&quot;Gráfico de Densidad de los Residuos&quot;</span>)</a></code></pre></div>
<p><img src="adp-bookdown_files/figure-html/unnamed-chunk-62-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Luego de la evaluación de los supuestos y buscar soluciones (cuando es necesario), podemos tener mayor confianza en nuestra estimación y la relación encontrada entre las variables. Aún así, una explicación completa de nuestro hallazgo implica profundizar en por qué y cómo se relacionan estas dos variables.</p>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="modelo-multivariado-regresion-multiple.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="seleccion-de-casos.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "serif",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": ["adp-bookdown.pdf"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 3 Manejo de datos | AnalizaR Datos Políticos</title>
  <meta name="description" content="Manual aplicado para politólogos y relacionistas internacionales en R" />
  <meta name="generator" content="bookdown  and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 3 Manejo de datos | AnalizaR Datos Políticos" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Manual aplicado para politólogos y relacionistas internacionales en R" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 3 Manejo de datos | AnalizaR Datos Políticos" />
  
  <meta name="twitter:description" content="Manual aplicado para politólogos y relacionistas internacionales en R" />
  

<meta name="author" content="Francisco Urdinez y Andrés Cruz Labrín (editores)" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="prev" href="rbas.html">
<link rel="next" href="dataviz.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<script src="libs/htmlwidgets-1.2/htmlwidgets.js"></script>
<link href="libs/wordcloud2-0.0.1/wordcloud.css" rel="stylesheet" />
<script src="libs/wordcloud2-0.0.1/wordcloud2-all.js"></script>
<script src="libs/wordcloud2-0.0.1/hover.js"></script>
<script src="libs/wordcloud2-binding-0.2.1/wordcloud2.js"></script>
<script>
% https://stackoverflow.com/a/4425214/8242291
var links = document.links;

for (var i = 0, linksLength = links.length; i < linksLength; i++) {

    if (links[i].hostname != window.location.hostname) {
        links[i].target = '_blank';
    }

}
</script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #2a211c;
    color: #bdae9d;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #bdae9d;  padding-left: 4px; }
div.sourceCode
  { color: #bdae9d; background-color: #2a211c; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ffff00; } /* Alert */
code span.an { color: #0066ff; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #44aa43; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #43a8ed; font-weight: bold; } /* ControlFlow */
code span.ch { color: #049b0a; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #0066ff; font-weight: bold; font-style: italic; } /* Comment */
code span.do { color: #0066ff; font-style: italic; } /* Documentation */
code span.dt { text-decoration: underline; } /* DataType */
code span.dv { color: #44aa43; } /* DecVal */
code span.er { color: #ffff00; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #44aa43; } /* Float */
code span.fu { color: #ff9358; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #0066ff; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #43a8ed; font-weight: bold; } /* Keyword */
code span.op { } /* Operator */
code span.pp { font-weight: bold; } /* Preprocessor */
code span.sc { color: #049b0a; } /* SpecialChar */
code span.ss { color: #049b0a; } /* SpecialString */
code span.st { color: #049b0a; } /* String */
code span.va { } /* Variable */
code span.vs { color: #049b0a; } /* VerbatimString */
code span.wa { color: #ffff00; font-weight: bold; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><b><a href="./index.html"><img style="float: left; margin-right: 5px;" src="favicon.ico"></img>AnalizaR datos políticos</a></b></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introducción</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#inicio"><i class="fa fa-check"></i><b>1.1</b> Inicio</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#como-contribuir"><i class="fa fa-check"></i><b>1.2</b> ¿Cómo contribuir?</a><ul>
<li class="chapter" data-level="1.2.1" data-path="index.html"><a href="index.html#sobre-los-autores-y-autoras"><i class="fa fa-check"></i><b>1.2.1</b> Sobre los autores y autoras</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#prefacio"><i class="fa fa-check"></i><b>1.3</b> Prefacio</a><ul>
<li class="chapter" data-level="1.3.1" data-path="index.html"><a href="index.html#agradecimientos"><i class="fa fa-check"></i><b>1.3.1</b> Agradecimientos</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#que-esperar-del-libro"><i class="fa fa-check"></i><b>1.4</b> Qué esperar del libro</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#estructura-del-libro"><i class="fa fa-check"></i><b>1.5</b> Estructura del libro</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#prerrequisitos"><i class="fa fa-check"></i><b>1.6</b> Prerrequisitos</a></li>
</ul></li>
<li class="part"><span><b>I Introducción a R</b></span></li>
<li class="chapter" data-level="2" data-path="rbas.html"><a href="rbas.html"><i class="fa fa-check"></i><b>2</b> R básico</a><ul>
<li class="chapter" data-level="2.1" data-path="rbas.html"><a href="rbas.html#instalacion"><i class="fa fa-check"></i><b>2.1</b> Instalación</a><ul>
<li class="chapter" data-level="2.1.1" data-path="rbas.html"><a href="rbas.html#r"><i class="fa fa-check"></i><b>2.1.1</b> R</a></li>
<li class="chapter" data-level="2.1.2" data-path="rbas.html"><a href="rbas.html#rstudio"><i class="fa fa-check"></i><b>2.1.2</b> RStudio</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="rbas.html"><a href="rbas.html#partes-de-rstudio"><i class="fa fa-check"></i><b>2.2</b> Partes de RStudio</a><ul>
<li class="chapter" data-level="2.2.1" data-path="rbas.html"><a href="rbas.html#consola"><i class="fa fa-check"></i><b>2.2.1</b> Consola</a></li>
<li class="chapter" data-level="2.2.2" data-path="rbas.html"><a href="rbas.html#script"><i class="fa fa-check"></i><b>2.2.2</b> Script</a></li>
<li class="chapter" data-level="2.2.3" data-path="rbas.html"><a href="rbas.html#objetos"><i class="fa fa-check"></i><b>2.2.3</b> Objetos</a></li>
<li class="chapter" data-level="2.2.4" data-path="rbas.html"><a href="rbas.html#archivos-graficos-paquetes-ayuda"><i class="fa fa-check"></i><b>2.2.4</b> Archivos / gráficos / paquetes / ayuda</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="manejo-de-datos.html"><a href="manejo-de-datos.html"><i class="fa fa-check"></i><b>3</b> Manejo de datos</a><ul>
<li class="chapter" data-level="3.1" data-path="manejo-de-datos.html"><a href="manejo-de-datos.html#introduccion-1"><i class="fa fa-check"></i><b>3.1</b> Introducción</a><ul>
<li class="chapter" data-level="3.1.1" data-path="manejo-de-datos.html"><a href="manejo-de-datos.html#nuestra-base-de-datos"><i class="fa fa-check"></i><b>3.1.1</b> Nuestra base de datos</a></li>
<li class="chapter" data-level="3.1.2" data-path="manejo-de-datos.html"><a href="manejo-de-datos.html#describir-la-base"><i class="fa fa-check"></i><b>3.1.2</b> Describir la base</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="manejo-de-datos.html"><a href="manejo-de-datos.html#operaciones-en-bases"><i class="fa fa-check"></i><b>3.2</b> Operaciones en bases</a><ul>
<li class="chapter" data-level="3.2.1" data-path="manejo-de-datos.html"><a href="manejo-de-datos.html#ordenar-una-base"><i class="fa fa-check"></i><b>3.2.1</b> Ordenar una base</a></li>
<li class="chapter" data-level="3.2.2" data-path="manejo-de-datos.html"><a href="manejo-de-datos.html#seleccionar-columnas"><i class="fa fa-check"></i><b>3.2.2</b> Seleccionar columnas</a></li>
<li class="chapter" data-level="3.2.3" data-path="manejo-de-datos.html"><a href="manejo-de-datos.html#renombrar-columnas"><i class="fa fa-check"></i><b>3.2.3</b> Renombrar columnas</a></li>
<li class="chapter" data-level="3.2.4" data-path="manejo-de-datos.html"><a href="manejo-de-datos.html#filtrar-observaciones"><i class="fa fa-check"></i><b>3.2.4</b> Filtrar observaciones</a></li>
<li class="chapter" data-level="3.2.5" data-path="manejo-de-datos.html"><a href="manejo-de-datos.html#crear-nuevas-variables"><i class="fa fa-check"></i><b>3.2.5</b> Crear nuevas variables</a></li>
<li class="chapter" data-level="3.2.6" data-path="manejo-de-datos.html"><a href="manejo-de-datos.html#concatenar-comandos"><i class="fa fa-check"></i><b>3.2.6</b> Concatenar comandos</a></li>
<li class="chapter" data-level="3.2.7" data-path="manejo-de-datos.html"><a href="manejo-de-datos.html#operaciones-agrupadas"><i class="fa fa-check"></i><b>3.2.7</b> Operaciones agrupadas</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="manejo-de-datos.html"><a href="manejo-de-datos.html#reformatear-bases"><i class="fa fa-check"></i><b>3.3</b> Reformatear bases</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="dataviz.html"><a href="dataviz.html"><i class="fa fa-check"></i><b>4</b> Visualización de datos</a><ul>
<li class="chapter" data-level="4.1" data-path="dataviz.html"><a href="dataviz.html#por-que-quiero-visualizar-mis-datos"><i class="fa fa-check"></i><b>4.1</b> ¿Por qué quiero visualizar mis datos?</a></li>
<li class="chapter" data-level="4.2" data-path="dataviz.html"><a href="dataviz.html#primeros-pasos"><i class="fa fa-check"></i><b>4.2</b> Primeros pasos</a><ul>
<li class="chapter" data-level="4.2.1" data-path="dataviz.html"><a href="dataviz.html#las-capas-del-multiverso-ggplotidiano"><i class="fa fa-check"></i><b>4.2.1</b> Las capas del multiverso ggplotidiano</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="dataviz.html"><a href="dataviz.html#elecciones-locales-y-visualizacion-de-datos"><i class="fa fa-check"></i><b>4.3</b> Elecciones locales y visualización de datos</a><ul>
<li class="chapter" data-level="4.3.1" data-path="dataviz.html"><a href="dataviz.html#grafico-de-barras"><i class="fa fa-check"></i><b>4.3.1</b> Gráfico de barras</a></li>
<li class="chapter" data-level="4.3.2" data-path="dataviz.html"><a href="dataviz.html#grafico-de-linea"><i class="fa fa-check"></i><b>4.3.2</b> Gráfico de Línea</a></li>
<li class="chapter" data-level="4.3.3" data-path="dataviz.html"><a href="dataviz.html#boxplot"><i class="fa fa-check"></i><b>4.3.3</b> Boxplot</a></li>
<li class="chapter" data-level="4.3.4" data-path="dataviz.html"><a href="dataviz.html#histograma"><i class="fa fa-check"></i><b>4.3.4</b> Histograma</a></li>
<li class="chapter" data-level="4.3.5" data-path="dataviz.html"><a href="dataviz.html#relacion-entre-variables"><i class="fa fa-check"></i><b>4.3.5</b> Relación entre variables</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="dataviz.html"><a href="dataviz.html#para-seguir-aprendiendo"><i class="fa fa-check"></i><b>4.4</b> Para seguir aprendiendo</a><ul>
<li class="chapter" data-level="4.4.1" data-path="dataviz.html"><a href="dataviz.html#otros-paquetes"><i class="fa fa-check"></i><b>4.4.1</b> Otros paquetes:</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="carga.html"><a href="carga.html"><i class="fa fa-check"></i><b>5</b> Carga de bases</a><ul>
<li class="chapter" data-level="5.1" data-path="carga.html"><a href="carga.html#carga-intro"><i class="fa fa-check"></i><b>5.1</b> Introducción</a></li>
<li class="chapter" data-level="5.2" data-path="carga.html"><a href="carga.html#carga-formatos"><i class="fa fa-check"></i><b>5.2</b> Distintos formatos de bases</a><ul>
<li class="chapter" data-level="5.2.1" data-path="carga.html"><a href="carga.html#archivos-separados-por-delimitadores-.csv-y-.tsv"><i class="fa fa-check"></i><b>5.2.1</b> Archivos separados por delimitadores (.csv y .tsv)</a></li>
<li class="chapter" data-level="5.2.2" data-path="carga.html"><a href="carga.html#carga-r"><i class="fa fa-check"></i><b>5.2.2</b> Archivos creados con R (.Rdata y .rds)</a></li>
<li class="chapter" data-level="5.2.3" data-path="carga.html"><a href="carga.html#carga-etiquetas"><i class="fa fa-check"></i><b>5.2.3</b> Datos con etiquetas (Stata o SPSS)</a></li>
<li class="chapter" data-level="5.2.4" data-path="carga.html"><a href="carga.html#carga-excel"><i class="fa fa-check"></i><b>5.2.4</b> Archivos de Excel</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="carga.html"><a href="carga.html#multiples-bases-de-datos-a-la-vez"><i class="fa fa-check"></i><b>5.3</b> Múltiples bases de datos a la vez</a></li>
<li class="chapter" data-level="5.4" data-path="carga.html"><a href="carga.html#carga-grandes"><i class="fa fa-check"></i><b>5.4</b> Bases de datos tabulares grandes</a></li>
</ul></li>
<li class="part"><span><b>II Modelos</b></span></li>
<li class="chapter" data-level="6" data-path="lineal.html"><a href="lineal.html"><i class="fa fa-check"></i><b>6</b> Modelos lineales</a><ul>
<li class="chapter" data-level="6.1" data-path="lineal.html"><a href="lineal.html#introduccion-2"><i class="fa fa-check"></i><b>6.1</b> Introducción</a></li>
<li class="chapter" data-level="6.2" data-path="lineal.html"><a href="lineal.html#aplicacion-en-r"><i class="fa fa-check"></i><b>6.2</b> Aplicación en <code>R</code></a><ul>
<li class="chapter" data-level="6.2.1" data-path="lineal.html"><a href="lineal.html#estadisticos-descriptivos"><i class="fa fa-check"></i><b>6.2.1</b> Estadísticos Descriptivos</a></li>
<li class="chapter" data-level="6.2.2" data-path="lineal.html"><a href="lineal.html#estadisticos-descriptivos-y-distribucion-de-las-variables-del-modelo"><i class="fa fa-check"></i><b>6.2.2</b> Estadísticos descriptivos y distribución de las variables del modelo</a></li>
<li class="chapter" data-level="6.2.3" data-path="lineal.html"><a href="lineal.html#matriz-de-correlacion-de-variables-independientes"><i class="fa fa-check"></i><b>6.2.3</b> Matriz de correlación de variables independientes</a></li>
<li class="chapter" data-level="6.2.4" data-path="lineal.html"><a href="lineal.html#distribucion-de-las-variables-de-interes"><i class="fa fa-check"></i><b>6.2.4</b> Distribución de las variables de interés</a></li>
<li class="chapter" data-level="6.2.5" data-path="lineal.html"><a href="lineal.html#relacion-entre-la-variable-dependiente-e-independiente"><i class="fa fa-check"></i><b>6.2.5</b> Relación entre la variable dependiente e independiente</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="lineal.html"><a href="lineal.html#modelo-bivariado-regresion-lineal-simple"><i class="fa fa-check"></i><b>6.3</b> Modelo bivariado: regresión lineal simple</a><ul>
<li class="chapter" data-level="6.3.1" data-path="lineal.html"><a href="lineal.html#estimando-un-modelo-lineal-en-r"><i class="fa fa-check"></i><b>6.3.1</b> Estimando un modelo lineal en <code>R</code></a></li>
<li class="chapter" data-level="6.3.2" data-path="lineal.html"><a href="lineal.html#representacion-grafica"><i class="fa fa-check"></i><b>6.3.2</b> Representación gráfica</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="lineal.html"><a href="lineal.html#modelo-multivariado-regresion-multiple"><i class="fa fa-check"></i><b>6.4</b> Modelo multivariado: regresión múltiple</a><ul>
<li class="chapter" data-level="6.4.1" data-path="lineal.html"><a href="lineal.html#ajuste-del-modelo"><i class="fa fa-check"></i><b>6.4.1</b> Ajuste del modelo</a></li>
<li class="chapter" data-level="6.4.2" data-path="lineal.html"><a href="lineal.html#inferencia-en-modelos-lineales-multiples"><i class="fa fa-check"></i><b>6.4.2</b> Inferencia en modelos lineales múltiples</a></li>
<li class="chapter" data-level="6.4.3" data-path="lineal.html"><a href="lineal.html#supuestos-de-ols"><i class="fa fa-check"></i><b>6.4.3</b> Supuestos de OLS</a></li>
<li class="chapter" data-level="6.4.4" data-path="lineal.html"><a href="lineal.html#errores-estandares-robustos"><i class="fa fa-check"></i><b>6.4.4</b> Errores estándares robustos</a></li>
<li class="chapter" data-level="6.4.5" data-path="lineal.html"><a href="lineal.html#un-caso-especial-de-heterocedasticidad-la-varianza-del-error-asociada-a-clusters"><i class="fa fa-check"></i><b>6.4.5</b> Un caso especial de Heterocedasticidad: la varianza del error asociada a clusters</a></li>
<li class="chapter" data-level="6.4.6" data-path="lineal.html"><a href="lineal.html#un-supuesto-adicional-para-poder-realizar-inferencia"><i class="fa fa-check"></i><b>6.4.6</b> Un supuesto adicional para poder realizar <strong>inferencia</strong></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="logit.html"><a href="logit.html"><i class="fa fa-check"></i><b>7</b> Modelos logísticos</a><ul>
<li class="chapter" data-level="7.1" data-path="logit.html"><a href="logit.html#nociones-basicas"><i class="fa fa-check"></i><b>7.1</b> Nociones básicas</a></li>
<li class="chapter" data-level="7.2" data-path="logit.html"><a href="logit.html#aplicacion-en-r-1"><i class="fa fa-check"></i><b>7.2</b> Aplicación en <code>R</code></a><ul>
<li class="chapter" data-level="7.2.1" data-path="logit.html"><a href="logit.html#estimar-los-modelos"><i class="fa fa-check"></i><b>7.2.1</b> Estimar los modelos</a></li>
<li class="chapter" data-level="7.2.2" data-path="logit.html"><a href="logit.html#crear-tablas"><i class="fa fa-check"></i><b>7.2.2</b> Crear tablas</a></li>
<li class="chapter" data-level="7.2.3" data-path="logit.html"><a href="logit.html#visualizacion-de-resultados"><i class="fa fa-check"></i><b>7.2.3</b> Visualización de resultados</a></li>
<li class="chapter" data-level="7.2.4" data-path="logit.html"><a href="logit.html#ajuste-de-los-modelos"><i class="fa fa-check"></i><b>7.2.4</b> Ajuste de los modelos</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="surv.html"><a href="surv.html"><i class="fa fa-check"></i><b>8</b> Modelos de supervivencia</a><ul>
<li class="chapter" data-level="8.1" data-path="surv.html"><a href="surv.html#nociones-basicas-1"><i class="fa fa-check"></i><b>8.1</b> Nociones básicas</a></li>
<li class="chapter" data-level="8.2" data-path="surv.html"><a href="surv.html#el-modelo-cox-de-riesgos-proporcionales"><i class="fa fa-check"></i><b>8.2</b> El modelo Cox de riesgos proporcionales</a></li>
<li class="chapter" data-level="8.3" data-path="surv.html"><a href="surv.html#aplicacion-en-r-2"><i class="fa fa-check"></i><b>8.3</b> Aplicación en <code>R</code></a><ul>
<li class="chapter" data-level="8.3.1" data-path="surv.html"><a href="surv.html#modelos-de-supervivencia-e-interpretacion-sus-coeficientes-como-hazard-ratios."><i class="fa fa-check"></i><b>8.3.1</b> Modelos de supervivencia e interpretación sus coeficientes como Hazard Ratios.</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Aplicaciones</b></span></li>
<li class="chapter" data-level="9" data-path="manejo-av.html"><a href="manejo-av.html"><i class="fa fa-check"></i><b>9</b> Manejo avanzado de datos políticos</a><ul>
<li class="chapter" data-level="9.1" data-path="manejo-av.html"><a href="manejo-av.html#introduccion-3"><i class="fa fa-check"></i><b>9.1</b> Introducción</a></li>
<li class="chapter" data-level="9.2" data-path="manejo-av.html"><a href="manejo-av.html#como-aprovechar-countrycode"><i class="fa fa-check"></i><b>9.2</b> ¿Cómo aprovechar <code>countrycode</code>?</a></li>
<li class="chapter" data-level="9.3" data-path="manejo-av.html"><a href="manejo-av.html#como-imputar-datos-faltantes"><i class="fa fa-check"></i><b>9.3</b> ¿Cómo imputar datos faltantes?</a></li>
<li class="chapter" data-level="9.4" data-path="manejo-av.html"><a href="manejo-av.html#imputar-datos-usando-amelia"><i class="fa fa-check"></i><b>9.4</b> Imputar datos usando Amelia</a><ul>
<li class="chapter" data-level="9.4.1" data-path="manejo-av.html"><a href="manejo-av.html#diagnosticos"><i class="fa fa-check"></i><b>9.4.1</b> Diagnosticos</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="manejo-av.html"><a href="manejo-av.html#regresiones-luego-de-imputar-datos"><i class="fa fa-check"></i><b>9.5</b> Regresiones luego de imputar datos</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="pca.html"><a href="pca.html"><i class="fa fa-check"></i><b>10</b> Creación de índices con PCA</a><ul>
<li class="chapter" data-level="10.1" data-path="pca.html"><a href="pca.html#aplicacion-en-r-3"><i class="fa fa-check"></i><b>10.1</b> Aplicación en <code>R</code></a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="casos.html"><a href="casos.html"><i class="fa fa-check"></i><b>11</b> Selección de casos a partir de regresiones</a><ul>
<li class="chapter" data-level="11.1" data-path="casos.html"><a href="casos.html#que-casos-de-estudio-debo-seleccionar-para-testear-mi-hipotesis"><i class="fa fa-check"></i><b>11.1</b> ¿Qué casos de estudio debo seleccionar para testear mi hipótesis?</a><ul>
<li class="chapter" data-level="11.1.1" data-path="casos.html"><a href="casos.html#casos-tipicos"><i class="fa fa-check"></i><b>11.1.1</b> Casos Típicos</a></li>
<li class="chapter" data-level="11.1.2" data-path="casos.html"><a href="casos.html#casos-desviados"><i class="fa fa-check"></i><b>11.1.2</b> Casos desviados</a></li>
<li class="chapter" data-level="11.1.3" data-path="casos.html"><a href="casos.html#casos-influyentes"><i class="fa fa-check"></i><b>11.1.3</b> Casos Influyentes</a></li>
<li class="chapter" data-level="11.1.4" data-path="casos.html"><a href="casos.html#casos-extremos"><i class="fa fa-check"></i><b>11.1.4</b> Casos extremos</a></li>
<li class="chapter" data-level="11.1.5" data-path="casos.html"><a href="casos.html#casos-mas-similares"><i class="fa fa-check"></i><b>11.1.5</b> Casos más similares</a></li>
<li class="chapter" data-level="11.1.6" data-path="casos.html"><a href="casos.html#casos-mas-diferentes"><i class="fa fa-check"></i><b>11.1.6</b> Casos más diferentes</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="casos.html"><a href="casos.html#la-relevancia-de-combinar-metodos"><i class="fa fa-check"></i><b>11.2</b> La relevancia de combinar métodos</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="web-mining.html"><a href="web-mining.html"><i class="fa fa-check"></i><b>12</b> Mínería de datos</a></li>
<li class="chapter" data-level="13" data-path="redes.html"><a href="redes.html"><i class="fa fa-check"></i><b>13</b> Análisis de redes</a><ul>
<li class="chapter" data-level="13.1" data-path="redes.html"><a href="redes.html#introduccion-4"><i class="fa fa-check"></i><b>13.1</b> Introducción</a></li>
<li class="chapter" data-level="13.2" data-path="redes.html"><a href="redes.html#conceptos-iniciales"><i class="fa fa-check"></i><b>13.2</b> Conceptos iniciales</a><ul>
<li class="chapter" data-level="13.2.1" data-path="redes.html"><a href="redes.html#nodos-y-enlaces"><i class="fa fa-check"></i><b>13.2.1</b> Nodos y enlaces</a></li>
<li class="chapter" data-level="13.2.2" data-path="redes.html"><a href="redes.html#matriz-de-adyacencia"><i class="fa fa-check"></i><b>13.2.2</b> Matriz de adyacencia</a></li>
<li class="chapter" data-level="13.2.3" data-path="redes.html"><a href="redes.html#pesos-y-direccion"><i class="fa fa-check"></i><b>13.2.3</b> Pesos y dirección</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="redes.html"><a href="redes.html#bases-de-datos-de-redes"><i class="fa fa-check"></i><b>13.3</b> Bases de datos de redes</a></li>
<li class="chapter" data-level="13.4" data-path="redes.html"><a href="redes.html#disposicion-grafica"><i class="fa fa-check"></i><b>13.4</b> Disposición gráfica</a><ul>
<li class="chapter" data-level="13.4.1" data-path="redes.html"><a href="redes.html#color-y-forma-en-la-representacion-visual"><i class="fa fa-check"></i><b>13.4.1</b> Color y forma en la representación visual</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="redes.html"><a href="redes.html#analisis-basico-de-redes"><i class="fa fa-check"></i><b>13.5</b> Análisis básico de redes</a><ul>
<li class="chapter" data-level="13.5.1" data-path="redes.html"><a href="redes.html#medidas-de-centralidad"><i class="fa fa-check"></i><b>13.5.1</b> Medidas de centralidad</a></li>
<li class="chapter" data-level="13.5.2" data-path="redes.html"><a href="redes.html#comunidades-en-las-redes"><i class="fa fa-check"></i><b>13.5.2</b> Comunidades en las redes</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="qta.html"><a href="qta.html"><i class="fa fa-check"></i><b>14</b> Análisis cuantitativo de texto</a><ul>
<li class="chapter" data-level="14.1" data-path="qta.html"><a href="qta.html#introduccion-5"><i class="fa fa-check"></i><b>14.1</b> Introducción</a></li>
<li class="chapter" data-level="14.2" data-path="qta.html"><a href="qta.html#exploracion-de-la-bases-de-datos"><i class="fa fa-check"></i><b>14.2</b> Exploración de la bases de datos</a></li>
<li class="chapter" data-level="14.3" data-path="qta.html"><a href="qta.html#calculo-de-frecuencias"><i class="fa fa-check"></i><b>14.3</b> Cálculo de frecuencias</a><ul>
<li class="chapter" data-level="14.3.1" data-path="qta.html"><a href="qta.html#cuales-son-los-diez-hashtags-mas-usados-de-las-cuentas-de-los-diputados"><i class="fa fa-check"></i><b>14.3.1</b> ¿Cuáles son los diez hashtags más usados de las cuentas de los diputados?</a></li>
<li class="chapter" data-level="14.3.2" data-path="qta.html"><a href="qta.html#frecuencias-por-genero-cantidad-de-hashtags-usados-por-los-diputados-en-total"><i class="fa fa-check"></i><b>14.3.2</b> Frecuencias por género: cantidad de hashtags usados por los diputados en total</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="qta.html"><a href="qta.html#wordcloud-de-hashtags"><i class="fa fa-check"></i><b>14.4</b> Wordcloud de hashtags</a></li>
<li class="chapter" data-level="14.5" data-path="qta.html"><a href="qta.html#graficar-los-hashtags-mas-utilizados-por-grupos-de-interes"><i class="fa fa-check"></i><b>14.5</b> Graficar los hashtags más utilizados por grupos de interés</a><ul>
<li class="chapter" data-level="14.5.1" data-path="qta.html"><a href="qta.html#hashtags-mas-usados-entre-las-diputadas"><i class="fa fa-check"></i><b>14.5.1</b> Hashtags más usados entre las diputadas</a></li>
<li class="chapter" data-level="14.5.2" data-path="qta.html"><a href="qta.html#hashtags-mas-usados-entre-los-diputados"><i class="fa fa-check"></i><b>14.5.2</b> Hashtags más usados entre los diputados</a></li>
</ul></li>
<li class="chapter" data-level="14.6" data-path="qta.html"><a href="qta.html#hashtags-de-genero-por-caracteristicas-del-diputado"><i class="fa fa-check"></i><b>14.6</b> Hashtags de género por características del diputado</a><ul>
<li class="chapter" data-level="14.6.1" data-path="qta.html"><a href="qta.html#por-el-genero-del-diputado"><i class="fa fa-check"></i><b>14.6.1</b> Por el género del diputado</a></li>
<li class="chapter" data-level="14.6.2" data-path="qta.html"><a href="qta.html#por-la-coalicion-de-los-diputados"><i class="fa fa-check"></i><b>14.6.2</b> Por la coalición de los diputados</a></li>
</ul></li>
<li class="chapter" data-level="14.7" data-path="qta.html"><a href="qta.html#variacion-temporal-del-uso-de-estos-hashtags"><i class="fa fa-check"></i><b>14.7</b> Variación temporal del uso de estos hashtags</a><ul>
<li class="chapter" data-level="14.7.1" data-path="qta.html"><a href="qta.html#frecuencia-semanal-de-olafeminista"><i class="fa fa-check"></i><b>14.7.1</b> Frecuencia semanal de #olafeminista</a></li>
<li class="chapter" data-level="14.7.2" data-path="qta.html"><a href="qta.html#frecuencia-semanal-de-tres-hashtags-de-genero"><i class="fa fa-check"></i><b>14.7.2</b> Frecuencia semanal de tres hashtags de género</a></li>
<li class="chapter" data-level="14.7.3" data-path="qta.html"><a href="qta.html#grafiquemos-los-hashtags-de-genero-por-semana"><i class="fa fa-check"></i><b>14.7.3</b> Grafiquemos los hashtags de género por semana</a></li>
<li class="chapter" data-level="14.7.4" data-path="qta.html"><a href="qta.html#ponderamos-en-relacion-al-total-de-hashtags-por-semana"><i class="fa fa-check"></i><b>14.7.4</b> Ponderamos en relación al total de hashtags por semana</a></li>
<li class="chapter" data-level="14.7.5" data-path="qta.html"><a href="qta.html#grafiquemos-los-hashtags-interesantes-ponderados-por-el-total-semanal"><i class="fa fa-check"></i><b>14.7.5</b> Grafiquemos los hashtags interesantes ponderados por el total semanal</a></li>
<li class="chapter" data-level="14.7.6" data-path="qta.html"><a href="qta.html#diputadas"><i class="fa fa-check"></i><b>14.7.6</b> Diputadas</a></li>
</ul></li>
<li class="chapter" data-level="14.8" data-path="qta.html"><a href="qta.html#hashtags-de-genero-por-semana-a-nivel-de-diputados-ponderados-por-semana"><i class="fa fa-check"></i><b>14.8</b> Hashtags de género por semana a nivel de diputados (ponderados por semana)</a></li>
<li class="chapter" data-level="14.9" data-path="qta.html"><a href="qta.html#comentarios-finales"><i class="fa fa-check"></i><b>14.9</b> Comentarios finales</a></li>
<li class="chapter" data-level="14.10" data-path="qta.html"><a href="qta.html#anexo-problemas-que-se-presentan-cuando-analizas-discursos-debates-o-leyes"><i class="fa fa-check"></i><b>14.10</b> Anexo: Problemas que se presentan cuando analizas discursos, debates o leyes</a></li>
<li class="chapter" data-level="14.11" data-path="qta.html"><a href="qta.html#tidy-text"><i class="fa fa-check"></i><b>14.11</b> <code>Tidy text</code></a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="mapas.html"><a href="mapas.html"><i class="fa fa-check"></i><b>15</b> Generación de mapas</a><ul>
<li class="chapter" data-level="15.1" data-path="mapas.html"><a href="mapas.html#datos-espaciales"><i class="fa fa-check"></i><b>15.1</b> Datos Espaciales</a><ul>
<li class="chapter" data-level="15.1.1" data-path="mapas.html"><a href="mapas.html#que-son"><i class="fa fa-check"></i><b>15.1.1</b> ¿Qué son?</a></li>
<li class="chapter" data-level="15.1.2" data-path="mapas.html"><a href="mapas.html#estructura-de-los-datos-espaciales"><i class="fa fa-check"></i><b>15.1.2</b> Estructura de los Datos Espaciales</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="mapas.html"><a href="mapas.html#datos-espaciales-en-r"><i class="fa fa-check"></i><b>15.2</b> Datos Espaciales en R</a></li>
<li class="chapter" data-level="15.3" data-path="mapas.html"><a href="mapas.html#special-features-en-r"><i class="fa fa-check"></i><b>15.3</b> Special Features en R</a><ul>
<li class="chapter" data-level="15.3.1" data-path="mapas.html"><a href="mapas.html#estructura"><i class="fa fa-check"></i><b>15.3.1</b> Estructura</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="mapas.html"><a href="mapas.html#manejo-de-datos-espaciales"><i class="fa fa-check"></i><b>15.4</b> Manejo de Datos Espaciales</a><ul>
<li class="chapter" data-level="15.4.1" data-path="mapas.html"><a href="mapas.html#modificaciones"><i class="fa fa-check"></i><b>15.4.1</b> Modificaciones</a></li>
<li class="chapter" data-level="15.4.2" data-path="mapas.html"><a href="mapas.html#crear-nuevos-shapefiles-con-st_write"><i class="fa fa-check"></i><b>15.4.2</b> Crear nuevos shapefiles con <code>st_write</code></a></li>
<li class="chapter" data-level="15.4.3" data-path="mapas.html"><a href="mapas.html#incorporar-datos-de-otras-bases-con-merge"><i class="fa fa-check"></i><b>15.4.3</b> Incorporar datos de otras bases con <code>merge</code></a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="mapas.html"><a href="mapas.html#mapear-en-r"><i class="fa fa-check"></i><b>15.5</b> Mapear en R</a></li>
<li class="chapter" data-level="15.6" data-path="mapas.html"><a href="mapas.html#mapeando-variables"><i class="fa fa-check"></i><b>15.6</b> Mapeando variables</a><ul>
<li class="chapter" data-level="15.6.1" data-path="mapas.html"><a href="mapas.html#mapas-animados-con-gganimate"><i class="fa fa-check"></i><b>15.6.1</b> Mapas animados con <code>gganimate</code></a></li>
</ul></li>
<li class="chapter" data-level="15.7" data-path="mapas.html"><a href="mapas.html#inferencia-a-partir-de-datos-espaciales"><i class="fa fa-check"></i><b>15.7</b> Inferencia a partir de Datos Espaciales</a><ul>
<li class="chapter" data-level="15.7.1" data-path="mapas.html"><a href="mapas.html#indicadores-locales-de-asociacion-espacial-lisa"><i class="fa fa-check"></i><b>15.7.1</b> Indicadores locales de asociación espacial (LISA)</a></li>
<li class="chapter" data-level="15.7.2" data-path="mapas.html"><a href="mapas.html#matriz-de-pesos-espaciales"><i class="fa fa-check"></i><b>15.7.2</b> Matriz de Pesos Espaciales</a></li>
<li class="chapter" data-level="15.7.3" data-path="mapas.html"><a href="mapas.html#morans-i"><i class="fa fa-check"></i><b>15.7.3</b> Moran’s I</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">AnalizaR Datos Políticos</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="manejo-de-datos" class="section level1">
<h1><span class="header-section-number">Capítulo 3</span> Manejo de datos</h1>
<p><em>Por Andrés Cruz</em></p>
<div id="introduccion-1" class="section level2">
<h2><span class="header-section-number">3.1</span> Introducción</h2>
<p>Cuando hablamos de análisis de datos, casi siempre nos referimos a análisis de <em>bases de datos</em>. Aunque hay varios formatos de bases de datos disponibles, en ciencias sociales generalmente usamos y creamos <em>bases de datos tabulares</em>, que son las que este libro tratará. Muy probablemente el lector estará familiarizado con la estructura básica de este tipo de bases, gracias a las planillas de Microsoft Excel, Google Spreadsheets y/o LibreOffice Calc. La primera fila suele ser un <strong>header</strong> o encabezado, que indica qué datos registran las celdas de esa columna.</p>
<p>En general, queremos que nuestras bases de datos tabulares tengan una estructura <em>tidy</em> (véase <a href="http://r4ds.had.co.nz/">R4DS</a>). La idea de una base <em>tidy</em> es simple: cada columna es una variable, cada fila una observación (de acuerdo a la unidad de análisis) y, por lo tanto, cada celda es una observación.</p>
<div id="nuestra-base-de-datos" class="section level3">
<h3><span class="header-section-number">3.1.1</span> Nuestra base de datos</h3>
<p>Para este capítulo usaremos una sección de la base de datos de <em>Quality of Government</em> <a href="https://qog.pol.gu.se">(QoG, 2017)</a>, un proyecto que registra diversos datos de países.</p>
<p>Las variables de la base de datos están descritas a continuación:</p>
<table>
<colgroup>
<col width="16%" />
<col width="83%" />
</colgroup>
<thead>
<tr class="header">
<th>variable</th>
<th>descripción</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>cname</td>
<td>Nombre del país</td>
</tr>
<tr class="even">
<td>wdi_gdppppcon2011</td>
<td>GDP PPP, en dólares del 2011, según los datos de WDI (p. 635 del codebook)</td>
</tr>
<tr class="odd">
<td>wdi_pop</td>
<td>Población, según los datos de WDI (p. 665)</td>
</tr>
<tr class="even">
<td>ti_cpi</td>
<td>Índice de Percepción de la Corrupción de TI. Va de 0 a 100, con 0 lo más corrupto (p. 560)</td>
</tr>
<tr class="odd">
<td>lp_muslim80</td>
<td>Porcentaje de población de religión musulmana, para 1980, según LP (p. 447)</td>
</tr>
<tr class="even">
<td>fh_ipolity2</td>
<td>Nivel de democracia según FH. Va de 0 a 10, con 0 como menos democrático (p. 291)</td>
</tr>
<tr class="odd">
<td>region</td>
<td>Región del país, según WDI (añadida a la base)</td>
</tr>
</tbody>
</table>
<p>Para comenzar a trabajar carguemos el paquete <code>tidyverse</code>, uno de los centrales del libro, que nos dará funciones útiles para trabajar con nuestra base datos.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)</code></pre>
<p>Ahora carguemos la base de datos a nuestra sesión de R R. Se llama “qog”, y podemos cargarla con facilidad desde el paquete del libro, por medio de la función <code>data()</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(paqueteadp)
<span class="kw">data</span>(qog)</code></pre>
<p>Puedes chequear que la base se cargó correctamente utilizando el comando <code>ls()</code> (o viendo la pestaña de Environment en RStudio):</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ls</span>()
<span class="co">## [1] &quot;qog&quot;</span></code></pre>
</div>
<div id="describir-la-base" class="section level3">
<h3><span class="header-section-number">3.1.2</span> Describir la base</h3>
<p>Para aproximarnos a nuestra base recién cargada tenemos varias opciones. Podemos, como antes, simplemente usar su nombre como un comando para un resumen rápido:</p>
<pre class="sourceCode r"><code class="sourceCode r">qog
<span class="co">## # A tibble: 139 x 7</span>
<span class="co">##    cname  wdi_gdppppcon2011 wdi_pop ti_cpi lp_muslim80 fh_ipolity2 region  </span>
<span class="co">##    &lt;chr&gt;              &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;   </span>
<span class="co">##  1 Afgha…       57566228480  3.07e7      8      99.3         2.02  Souther…</span>
<span class="co">##  2 Alban…       28715335680  2.90e6     31      20.5         8.08  Souther…</span>
<span class="co">##  3 Alger…      507901640704  3.82e7     36      99.1         4.25  Norther…</span>
<span class="co">##  4 Angola      152477499392  2.34e7     23       0           3.25  Middle …</span>
<span class="co">##  5 Austr…      990474338304  2.31e7     81       0.200      10     Austral…</span>
<span class="co">##  6 Austr…      373413642240  8.48e6     69       0.600      10     Western…</span>
<span class="co">##  7 Baham…        8497731584  3.78e5     71       0          10     Caribbe…</span>
<span class="co">##  8 Bahra…       56583507968  1.35e6     48      95           0.833 Western…</span>
<span class="co">##  9 Bangl…      446835425280  1.57e8     27      85.9         6.42  Souther…</span>
<span class="co">## 10 Barba…        4333428224  2.83e5     75       0.200      10     Caribbe…</span>
<span class="co">## # … with 129 more rows</span></code></pre>
<p>También podemos utilizar la función <code>glimpse()</code> para tener un resumen desde otra perspectiva:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">glimpse</span>(qog)
<span class="co">## Observations: 139</span>
<span class="co">## Variables: 7</span>
<span class="co">## $ cname             &lt;chr&gt; &quot;Afghanistan&quot;, &quot;Albania&quot;, &quot;Algeria&quot;, &quot;Angola&quot;,…</span>
<span class="co">## $ wdi_gdppppcon2011 &lt;dbl&gt; 5.8e+10, 2.9e+10, 5.1e+11, 1.5e+11, 9.9e+11, 3…</span>
<span class="co">## $ wdi_pop           &lt;dbl&gt; 3.1e+07, 2.9e+06, 3.8e+07, 2.3e+07, 2.3e+07, 8…</span>
<span class="co">## $ ti_cpi            &lt;dbl&gt; 8, 31, 36, 23, 81, 69, 71, 48, 27, 75, 75, 63,…</span>
<span class="co">## $ lp_muslim80       &lt;dbl&gt; 99.3, 20.5, 99.1, 0.0, 0.2, 0.6, 0.0, 95.0, 85…</span>
<span class="co">## $ fh_ipolity2       &lt;dbl&gt; 2.02, 8.08, 4.25, 3.25, 10.00, 10.00, 10.00, 0…</span>
<span class="co">## $ region            &lt;chr&gt; &quot;Southern Asia&quot;, &quot;Southern Europe&quot;, &quot;Northern …</span></code></pre>
<p>Una alternativa que nos permite ver la base completa es la función <code>View()</code>, análoga a clickear nuestro objeto en la pestaña “Environment” de Rstudio:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">View</span>(qog)</code></pre>
</div>
</div>
<div id="operaciones-en-bases" class="section level2">
<h2><span class="header-section-number">3.2</span> Operaciones en bases</h2>
<p>A continuación veremos varias operaciones en nuestra base de datos, en línea con lo enseñado en <a href="https://r4ds.had.co.nz/transform.html">el capítulo del R4DS</a>.</p>
<div id="ordenar-una-base" class="section level3">
<h3><span class="header-section-number">3.2.1</span> Ordenar una base</h3>
<p>Una de las operaciones más comunes con bases de datos es ordenarlas de acuerdo a alguna de las variables. Esto nos puede dar insights (¿traducción?) inmediatos sobre nuestras observaciones. Por ejemplo, ordenemos la base de acuerdo a población:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">arrange</span>(qog, wdi_pop)
<span class="co">## # A tibble: 139 x 7</span>
<span class="co">##    cname    wdi_gdppppcon20… wdi_pop ti_cpi lp_muslim80 fh_ipolity2 region </span>
<span class="co">##    &lt;chr&gt;               &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;  </span>
<span class="co">##  1 Dominica        722668736   72005   58         0           10    Caribb…</span>
<span class="co">##  2 Seychel…       2229991168   89900   54         0.300        6.94 Easter…</span>
<span class="co">##  3 Tonga           513904512  105139   31.4       0            8.59 Polyne…</span>
<span class="co">##  4 Kiribati        183852816  108544   30.8       0           10    Micron…</span>
<span class="co">##  5 St Lucia       1871906688  182305   71         0           10    Caribb…</span>
<span class="co">##  6 Sao Tom…        540452288  182386   42         0            8.59 Middle…</span>
<span class="co">##  7 Samoa          1047012608  190390   52         0            8.59 Polyne…</span>
<span class="co">##  8 Barbados       4333428224  282503   75         0.200       10    Caribb…</span>
<span class="co">##  9 Iceland       13266284544  323764   78         0           10    Northe…</span>
<span class="co">## 10 Bahamas        8497731584  377841   71         0           10    Caribb…</span>
<span class="co">## # … with 129 more rows</span></code></pre>
<p>El lector debe notar cómo el primer argumento, “qog”, toma la base de datos y los siguientes enuncian <strong>cómo</strong> ordenarla, en este caso, por “wdi_pop”, la variable de población.</p>
<p>Debe notar también cómo el comando anterior no crea ningún objeto, solo muestra los resultados en la consola. Para crear uno tenemos que seguir la fórmula típica de asignación:</p>
<pre class="sourceCode r"><code class="sourceCode r">qog_ordenada &lt;-<span class="st"> </span><span class="kw">arrange</span>(qog, wdi_pop)</code></pre>
<p>Podemos realizar ambas operaciones, mostrar los resultados y crear el objeto, rodeando este último comando con paréntesis:</p>
<pre class="sourceCode r"><code class="sourceCode r">( qog_ordenada &lt;-<span class="st"> </span><span class="kw">arrange</span>(qog, wdi_pop) )
<span class="co">## # A tibble: 139 x 7</span>
<span class="co">##    cname    wdi_gdppppcon20… wdi_pop ti_cpi lp_muslim80 fh_ipolity2 region </span>
<span class="co">##    &lt;chr&gt;               &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;  </span>
<span class="co">##  1 Dominica        722668736   72005   58         0           10    Caribb…</span>
<span class="co">##  2 Seychel…       2229991168   89900   54         0.300        6.94 Easter…</span>
<span class="co">##  3 Tonga           513904512  105139   31.4       0            8.59 Polyne…</span>
<span class="co">##  4 Kiribati        183852816  108544   30.8       0           10    Micron…</span>
<span class="co">##  5 St Lucia       1871906688  182305   71         0           10    Caribb…</span>
<span class="co">##  6 Sao Tom…        540452288  182386   42         0            8.59 Middle…</span>
<span class="co">##  7 Samoa          1047012608  190390   52         0            8.59 Polyne…</span>
<span class="co">##  8 Barbados       4333428224  282503   75         0.200       10    Caribb…</span>
<span class="co">##  9 Iceland       13266284544  323764   78         0           10    Northe…</span>
<span class="co">## 10 Bahamas        8497731584  377841   71         0           10    Caribb…</span>
<span class="co">## # … with 129 more rows</span></code></pre>
<p>La operación para ordenar realizada antes iba de menor a mayor, en términos de población. Si queremos el orden inverso (decreciente), basta con añadir un signo menos (-) antes de la variable:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">arrange</span>(qog, <span class="op">-</span>wdi_pop)
<span class="co">## # A tibble: 139 x 7</span>
<span class="co">##    cname   wdi_gdppppcon2011 wdi_pop ti_cpi lp_muslim80 fh_ipolity2 region </span>
<span class="co">##    &lt;chr&gt;               &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;  </span>
<span class="co">##  1 China      16023988207616  1.36e9     40       2.40         1.17 Easter…</span>
<span class="co">##  2 India       6566166134784  1.28e9     36      11.6          8.5  Southe…</span>
<span class="co">##  3 United…    16230494765056  3.16e8     73       0.800       10    Northe…</span>
<span class="co">##  4 Indone…     2430921605120  2.51e8     32      43.4          7.83 South-…</span>
<span class="co">##  5 Brazil      3109301780480  2.04e8     42       0.100        8.67 South …</span>
<span class="co">##  6 Pakist…      810954457088  1.81e8     28      96.8          6.33 Southe…</span>
<span class="co">##  7 Nigeria      941462781952  1.73e8     25      45            5.58 Wester…</span>
<span class="co">##  8 Bangla…      446835425280  1.57e8     27      85.9          6.42 Southe…</span>
<span class="co">##  9 Japan       4535077044224  1.27e8     74       0           10    Easter…</span>
<span class="co">## 10 Mexico      1997247479808  1.24e8     34       0            7.83 Centra…</span>
<span class="co">## # … with 129 more rows</span></code></pre>
<p>¡Con eso tenemos los países con mayor población en el mundo! ¿Qué pasa si queremos los países con mayor población <strong>dentro de cada región</strong>? Tendríamos que realizar un ordenamiento en dos pasos: primero por región y luego por población. Con <code>arrange()</code> esto es simple:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">arrange</span>(qog, region, <span class="op">-</span>wdi_pop)
<span class="co">## # A tibble: 139 x 7</span>
<span class="co">##    cname   wdi_gdppppcon20… wdi_pop ti_cpi lp_muslim80 fh_ipolity2 region  </span>
<span class="co">##    &lt;chr&gt;              &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;   </span>
<span class="co">##  1 Austra…     990474338304  2.31e7     81       0.200       10    Austral…</span>
<span class="co">##  2 New Ze…     148189986816  4.44e6     91       0           10    Austral…</span>
<span class="co">##  3 Cuba        226685157376  1.14e7     46       0            1.17 Caribbe…</span>
<span class="co">##  4 Haiti        16999370752  1.04e7     19       0            4.58 Caribbe…</span>
<span class="co">##  5 Domini…     122657308672  1.03e7     29       0            8.25 Caribbe…</span>
<span class="co">##  6 Jamaica      22884503552  2.71e6     38       0.100        8.5  Caribbe…</span>
<span class="co">##  7 Trinid…      40973463552  1.35e6     38       6.5          9.17 Caribbe…</span>
<span class="co">##  8 Bahamas       8497731584  3.78e5     71       0           10    Caribbe…</span>
<span class="co">##  9 Barbad…       4333428224  2.83e5     75       0.200       10    Caribbe…</span>
<span class="co">## 10 St Luc…       1871906688  1.82e5     71       0           10    Caribbe…</span>
<span class="co">## # … with 129 more rows</span></code></pre>
<p>A propósito del resultado anterior, el lector puede deducir que cuando <code>arrange()</code> ordena variables categóricas (en vez de numéricas) lo hace alfabéticamente. Añadir un signo menos (-) antes de la variable hará que el orden sea al revés en términos del alfabeto:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">arrange</span>(qog, <span class="kw">desc</span>(region), <span class="op">-</span>wdi_pop) <span class="co"># no sé por qué - no funciona, ARREGLAR</span>
<span class="co">## # A tibble: 139 x 7</span>
<span class="co">##    cname    wdi_gdppppcon20… wdi_pop ti_cpi lp_muslim80 fh_ipolity2 region </span>
<span class="co">##    &lt;chr&gt;               &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;  </span>
<span class="co">##  1 France …    2459435270144  6.59e7     71       3            9.75 Wester…</span>
<span class="co">##  2 Netherl…     762382450688  1.68e7     83       1           10    Wester…</span>
<span class="co">##  3 Belgium      452154359808  1.12e7     75       1.10         9.5  Wester…</span>
<span class="co">##  4 Austria      373413642240  8.48e6     69       0.600       10    Wester…</span>
<span class="co">##  5 Switzer…     444201566208  8.09e6     85       0.300       10    Wester…</span>
<span class="co">##  6 Luxembo…      48842280960  5.43e5     80       0           10    Wester…</span>
<span class="co">##  7 Turkey      1392197369856  7.50e7     50      99.2          7.67 Wester…</span>
<span class="co">##  8 Iraq         510895521792  3.38e7     16      95.8          4.5  Wester…</span>
<span class="co">##  9 Saudi A…    1478747750400  3.02e7     46      98.8          0    Wester…</span>
<span class="co">## 10 United …     560986259456  9.04e6     69      94.9          1.33 Wester…</span>
<span class="co">## # … with 129 more rows</span></code></pre>
</div>
<div id="seleccionar-columnas" class="section level3">
<h3><span class="header-section-number">3.2.2</span> Seleccionar columnas</h3>
<p>A veces queremos trabajar solo con algunas variables de una base de datos. Para esto existe la función <code>select()</code>. Pensemos que queremos solo el nombre de cada país (cname) y su porcentaje de población musulmana para 1980:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">select</span>(qog, cname, lp_muslim80)
<span class="co">## # A tibble: 139 x 2</span>
<span class="co">##    cname       lp_muslim80</span>
<span class="co">##    &lt;chr&gt;             &lt;dbl&gt;</span>
<span class="co">##  1 Afghanistan      99.3  </span>
<span class="co">##  2 Albania          20.5  </span>
<span class="co">##  3 Algeria          99.1  </span>
<span class="co">##  4 Angola            0    </span>
<span class="co">##  5 Australia         0.200</span>
<span class="co">##  6 Austria           0.600</span>
<span class="co">##  7 Bahamas           0    </span>
<span class="co">##  8 Bahrain          95    </span>
<span class="co">##  9 Bangladesh       85.9  </span>
<span class="co">## 10 Barbados          0.200</span>
<span class="co">## # … with 129 more rows</span></code></pre>
<p>Al igual que para <code>arrange()</code>, aquí el primer argumento designa la base a modificar y los demás cómo se debería hacer eso -en este caso, qué variables deben ser seleccionadas.</p>
<p>Añadir un signo menos (-) aquí indica qué variables <em>no</em> seleccionar. Por ejemplo, quitemos el porcentaje de población musulmana para 1980 de la base:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">select</span>(qog, <span class="op">-</span>lp_muslim80)
<span class="co">## # A tibble: 139 x 6</span>
<span class="co">##    cname     wdi_gdppppcon2011  wdi_pop ti_cpi fh_ipolity2 region          </span>
<span class="co">##    &lt;chr&gt;                 &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;           </span>
<span class="co">##  1 Afghanis…       57566228480   3.07e7      8       2.02  Southern Asia   </span>
<span class="co">##  2 Albania         28715335680   2.90e6     31       8.08  Southern Europe </span>
<span class="co">##  3 Algeria        507901640704   3.82e7     36       4.25  Northern Africa </span>
<span class="co">##  4 Angola         152477499392   2.34e7     23       3.25  Middle Africa   </span>
<span class="co">##  5 Australia      990474338304   2.31e7     81      10     Australia and N…</span>
<span class="co">##  6 Austria        373413642240   8.48e6     69      10     Western Europe  </span>
<span class="co">##  7 Bahamas          8497731584   3.78e5     71      10     Caribbean       </span>
<span class="co">##  8 Bahrain         56583507968   1.35e6     48       0.833 Western Asia    </span>
<span class="co">##  9 Banglade…      446835425280   1.57e8     27       6.42  Southern Asia   </span>
<span class="co">## 10 Barbados         4333428224   2.83e5     75      10     Caribbean       </span>
<span class="co">## # … with 129 more rows</span></code></pre>
<p>Aparte de seleccionar variables específicas, <code>select()</code> es capaz de entender referencias a intervalos de variables. Por ejemplo, podemos querer las cuatro primeras variables:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">select</span>(qog, cname<span class="op">:</span>ti_cpi)
<span class="co">## # A tibble: 139 x 4</span>
<span class="co">##    cname       wdi_gdppppcon2011   wdi_pop ti_cpi</span>
<span class="co">##    &lt;chr&gt;                   &lt;dbl&gt;     &lt;dbl&gt;  &lt;dbl&gt;</span>
<span class="co">##  1 Afghanistan       57566228480  30682500      8</span>
<span class="co">##  2 Albania           28715335680   2897366     31</span>
<span class="co">##  3 Algeria          507901640704  38186136     36</span>
<span class="co">##  4 Angola           152477499392  23448202     23</span>
<span class="co">##  5 Australia        990474338304  23125868     81</span>
<span class="co">##  6 Austria          373413642240   8479375     69</span>
<span class="co">##  7 Bahamas            8497731584    377841     71</span>
<span class="co">##  8 Bahrain           56583507968   1349427     48</span>
<span class="co">##  9 Bangladesh       446835425280 157157392     27</span>
<span class="co">## 10 Barbados           4333428224    282503     75</span>
<span class="co">## # … with 129 more rows</span>
<span class="kw">select</span>(qog, <span class="dv">1</span><span class="op">:</span><span class="dv">4</span>) <span class="co"># lo mismo, aunque no recomendado</span>
<span class="co">## # A tibble: 139 x 4</span>
<span class="co">##    cname       wdi_gdppppcon2011   wdi_pop ti_cpi</span>
<span class="co">##    &lt;chr&gt;                   &lt;dbl&gt;     &lt;dbl&gt;  &lt;dbl&gt;</span>
<span class="co">##  1 Afghanistan       57566228480  30682500      8</span>
<span class="co">##  2 Albania           28715335680   2897366     31</span>
<span class="co">##  3 Algeria          507901640704  38186136     36</span>
<span class="co">##  4 Angola           152477499392  23448202     23</span>
<span class="co">##  5 Australia        990474338304  23125868     81</span>
<span class="co">##  6 Austria          373413642240   8479375     69</span>
<span class="co">##  7 Bahamas            8497731584    377841     71</span>
<span class="co">##  8 Bahrain           56583507968   1349427     48</span>
<span class="co">##  9 Bangladesh       446835425280 157157392     27</span>
<span class="co">## 10 Barbados           4333428224    282503     75</span>
<span class="co">## # … with 129 more rows</span></code></pre>
<p>Otra herramienta para complejizar nuestra selección se encuentra en las funciones de ayuda. Entre ellas, <code>starts_with</code> es de particular utilidad, permitiendo seleccionar variables que empiecen con cierto patrón. Por ejemplo, podríamos querer, a partir del nombre del país, todas las variables que provengan de los World Development Indicators (WDI) del Banco Mundial:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">select</span>(qog, cname, <span class="kw">starts_with</span>(<span class="st">&quot;wdi_&quot;</span>))
<span class="co">## # A tibble: 139 x 3</span>
<span class="co">##    cname       wdi_gdppppcon2011   wdi_pop</span>
<span class="co">##    &lt;chr&gt;                   &lt;dbl&gt;     &lt;dbl&gt;</span>
<span class="co">##  1 Afghanistan       57566228480  30682500</span>
<span class="co">##  2 Albania           28715335680   2897366</span>
<span class="co">##  3 Algeria          507901640704  38186136</span>
<span class="co">##  4 Angola           152477499392  23448202</span>
<span class="co">##  5 Australia        990474338304  23125868</span>
<span class="co">##  6 Austria          373413642240   8479375</span>
<span class="co">##  7 Bahamas            8497731584    377841</span>
<span class="co">##  8 Bahrain           56583507968   1349427</span>
<span class="co">##  9 Bangladesh       446835425280 157157392</span>
<span class="co">## 10 Barbados           4333428224    282503</span>
<span class="co">## # … with 129 more rows</span></code></pre>
<p>Otra función de ayuda útil es <code>everything()</code>, que se lee como “todas las demás variables”. Es especialmente útil para cambiar el orden de las variables en una bases de datos. Por ejemplo, pasemos región al segundo lugar entre las variables:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">select</span>(qog, cname, region, <span class="kw">everything</span>())
<span class="co">## # A tibble: 139 x 7</span>
<span class="co">##    cname  region    wdi_gdppppcon20… wdi_pop ti_cpi lp_muslim80 fh_ipolity2</span>
<span class="co">##    &lt;chr&gt;  &lt;chr&gt;                &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;</span>
<span class="co">##  1 Afgha… Southern…      57566228480  3.07e7      8      99.3         2.02 </span>
<span class="co">##  2 Alban… Southern…      28715335680  2.90e6     31      20.5         8.08 </span>
<span class="co">##  3 Alger… Northern…     507901640704  3.82e7     36      99.1         4.25 </span>
<span class="co">##  4 Angola Middle A…     152477499392  2.34e7     23       0           3.25 </span>
<span class="co">##  5 Austr… Australi…     990474338304  2.31e7     81       0.200      10    </span>
<span class="co">##  6 Austr… Western …     373413642240  8.48e6     69       0.600      10    </span>
<span class="co">##  7 Baham… Caribbean       8497731584  3.78e5     71       0          10    </span>
<span class="co">##  8 Bahra… Western …      56583507968  1.35e6     48      95           0.833</span>
<span class="co">##  9 Bangl… Southern…     446835425280  1.57e8     27      85.9         6.42 </span>
<span class="co">## 10 Barba… Caribbean       4333428224  2.83e5     75       0.200      10    </span>
<span class="co">## # … with 129 more rows</span></code></pre>
</div>
<div id="renombrar-columnas" class="section level3">
<h3><span class="header-section-number">3.2.3</span> Renombrar columnas</h3>
<p>La notación para el GDP es un poco confusa. ¿Y si queremos cambiar el nombre de la variable? Aprovechemos también de cambiar el nombre de la variable de identificación por país.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rename</span>(qog, <span class="dt">wdi_gdp =</span> wdi_gdppppcon2011, <span class="dt">country_name =</span> cname)
<span class="co">## # A tibble: 139 x 7</span>
<span class="co">##    country_name   wdi_gdp wdi_pop ti_cpi lp_muslim80 fh_ipolity2 region    </span>
<span class="co">##    &lt;chr&gt;            &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;     </span>
<span class="co">##  1 Afghanistan    5.76e10  3.07e7      8      99.3         2.02  Southern …</span>
<span class="co">##  2 Albania        2.87e10  2.90e6     31      20.5         8.08  Southern …</span>
<span class="co">##  3 Algeria        5.08e11  3.82e7     36      99.1         4.25  Northern …</span>
<span class="co">##  4 Angola         1.52e11  2.34e7     23       0           3.25  Middle Af…</span>
<span class="co">##  5 Australia      9.90e11  2.31e7     81       0.200      10     Australia…</span>
<span class="co">##  6 Austria        3.73e11  8.48e6     69       0.600      10     Western E…</span>
<span class="co">##  7 Bahamas        8.50e 9  3.78e5     71       0          10     Caribbean </span>
<span class="co">##  8 Bahrain        5.66e10  1.35e6     48      95           0.833 Western A…</span>
<span class="co">##  9 Bangladesh     4.47e11  1.57e8     27      85.9         6.42  Southern …</span>
<span class="co">## 10 Barbados       4.33e 9  2.83e5     75       0.200      10     Caribbean </span>
<span class="co">## # … with 129 more rows</span></code></pre>
</div>
<div id="filtrar-observaciones" class="section level3">
<h3><span class="header-section-number">3.2.4</span> Filtrar observaciones</h3>
<p>Es muy común el querer filtrar nuestras observaciones de acuerdo a algún tipo de criterio lógico. Para esto R cuenta con operadores lógicos. Los más comunes son los siguientes:</p>
<table>
<thead>
<tr class="header">
<th align="center">operador</th>
<th>descripción</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">==</td>
<td>es igual a</td>
</tr>
<tr class="even">
<td align="center">!=</td>
<td>es distinto a</td>
</tr>
<tr class="odd">
<td align="center">&gt;</td>
<td>es mayor a</td>
</tr>
<tr class="even">
<td align="center">&lt;</td>
<td>es menor a</td>
</tr>
<tr class="odd">
<td align="center">&gt;=</td>
<td>es mayor o igual a</td>
</tr>
<tr class="even">
<td align="center">&lt;=</td>
<td>es menor o igual a</td>
</tr>
<tr class="odd">
<td align="center">&amp;</td>
<td>y (intersección)</td>
</tr>
<tr class="even">
<td align="center"></td>
<td></td>
</tr>
</tbody>
</table>
<p>Por ejemplo, podríamos querer solo los países (observaciones) sudamericanos. Hacer esto con <code>filter()</code> es simple, con la ayuda de operadores lógicos:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(qog, region <span class="op">==</span><span class="st"> &quot;South America&quot;</span>)
<span class="co">## # A tibble: 11 x 7</span>
<span class="co">##    cname   wdi_gdppppcon20… wdi_pop ti_cpi lp_muslim80 fh_ipolity2 region  </span>
<span class="co">##    &lt;chr&gt;              &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;   </span>
<span class="co">##  1 Bolivia      63344840704  1.04e7     34       0            7.58 South A…</span>
<span class="co">##  2 Brazil     3109301780480  2.04e8     42       0.100        8.67 South A…</span>
<span class="co">##  3 Chile       383162515456  1.76e7     71       0           10    South A…</span>
<span class="co">##  4 Colomb…     582488686592  4.73e7     36       0.200        7.17 South A…</span>
<span class="co">##  5 Ecuador     166412222464  1.57e7     35       0            7.08 South A…</span>
<span class="co">##  6 Guyana        5066298368  7.61e5     27       9            7.75 South A…</span>
<span class="co">##  7 Paragu…      53195030528  6.47e6     24       0            8.08 South A…</span>
<span class="co">##  8 Peru        346126876672  3.06e7     38       0            8.5  South A…</span>
<span class="co">##  9 Surina…       8388805120  5.33e5     36      13            7.92 South A…</span>
<span class="co">## 10 Uruguay      65827684352  3.41e6     73       0           10    South A…</span>
<span class="co">## 11 Venezu…     535572054016  3.03e7     20       0            5.17 South A…</span></code></pre>
<p>¿Qué pasa si queremos solo las filas de países sudamericanos con más de 10 millones de habitantes (nos quedamos con 8 de 12)?</p>
<p>¿Cuáles son los filtros que aplican los siguientes comandos?</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(qog, fh_ipolity2 <span class="op">&gt;</span><span class="st"> </span><span class="dv">9</span>)

<span class="kw">filter</span>(qog, wdi_pop <span class="op">&gt;</span><span class="st"> </span><span class="fl">10e7</span>)

<span class="kw">filter</span>(qog, cname <span class="op">!=</span><span class="st"> &quot;Albania&quot;</span>)

<span class="kw">filter</span>(qog, lp_muslim80 <span class="op">&gt;=</span><span class="st"> </span><span class="dv">95</span>)

<span class="kw">filter</span>(qog, region <span class="op">==</span><span class="st"> &quot;South America&quot;</span> <span class="op">&amp;</span><span class="st"> </span>wdi_pop <span class="op">&gt;</span><span class="st"> </span><span class="fl">10e6</span>)

<span class="kw">filter</span>(qog, region <span class="op">==</span><span class="st"> &quot;South America&quot;</span> <span class="op">|</span><span class="st"> </span>region <span class="op">==</span><span class="st"> &quot;South-Eastern Asia&quot;</span>)</code></pre>
</div>
<div id="crear-nuevas-variables" class="section level3">
<h3><span class="header-section-number">3.2.5</span> Crear nuevas variables</h3>
<p>Muchas veces queremos crear nuevas variables, a partir de las que ya tenemos. Por ejemplo, podríamos querer el GDP per capita, en vez del absoluto. Tenemos los ingredientes para calcularlo: el GDP absoluto y la población. Creemos una nueva variable, entonces:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mutate</span>(qog, <span class="dt">gdp_ppp_per_capita =</span> wdi_gdppppcon2011<span class="op">/</span>wdi_pop)
<span class="co">## # A tibble: 139 x 8</span>
<span class="co">##    cname wdi_gdppppcon20… wdi_pop ti_cpi lp_muslim80 fh_ipolity2 region</span>
<span class="co">##    &lt;chr&gt;            &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt; </span>
<span class="co">##  1 Afgh…      57566228480  3.07e7      8      99.3         2.02  South…</span>
<span class="co">##  2 Alba…      28715335680  2.90e6     31      20.5         8.08  South…</span>
<span class="co">##  3 Alge…     507901640704  3.82e7     36      99.1         4.25  North…</span>
<span class="co">##  4 Ango…     152477499392  2.34e7     23       0           3.25  Middl…</span>
<span class="co">##  5 Aust…     990474338304  2.31e7     81       0.200      10     Austr…</span>
<span class="co">##  6 Aust…     373413642240  8.48e6     69       0.600      10     Weste…</span>
<span class="co">##  7 Baha…       8497731584  3.78e5     71       0          10     Carib…</span>
<span class="co">##  8 Bahr…      56583507968  1.35e6     48      95           0.833 Weste…</span>
<span class="co">##  9 Bang…     446835425280  1.57e8     27      85.9         6.42  South…</span>
<span class="co">## 10 Barb…       4333428224  2.83e5     75       0.200      10     Carib…</span>
<span class="co">## # … with 129 more rows, and 1 more variable: gdp_ppp_per_capita &lt;dbl&gt;</span></code></pre>
<p>Otra nueva variable que podría interesarnos es el número de musulmanes por país. Con la proporción de musulmanes y la población total del país podemos hacer una buena estimación:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mutate</span>(qog, <span class="dt">n_muslim =</span> wdi_pop <span class="op">*</span><span class="st"> </span>lp_muslim80)
<span class="co">## # A tibble: 139 x 8</span>
<span class="co">##    cname wdi_gdppppcon20… wdi_pop ti_cpi lp_muslim80 fh_ipolity2 region</span>
<span class="co">##    &lt;chr&gt;            &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt; </span>
<span class="co">##  1 Afgh…      57566228480  3.07e7      8      99.3         2.02  South…</span>
<span class="co">##  2 Alba…      28715335680  2.90e6     31      20.5         8.08  South…</span>
<span class="co">##  3 Alge…     507901640704  3.82e7     36      99.1         4.25  North…</span>
<span class="co">##  4 Ango…     152477499392  2.34e7     23       0           3.25  Middl…</span>
<span class="co">##  5 Aust…     990474338304  2.31e7     81       0.200      10     Austr…</span>
<span class="co">##  6 Aust…     373413642240  8.48e6     69       0.600      10     Weste…</span>
<span class="co">##  7 Baha…       8497731584  3.78e5     71       0          10     Carib…</span>
<span class="co">##  8 Bahr…      56583507968  1.35e6     48      95           0.833 Weste…</span>
<span class="co">##  9 Bang…     446835425280  1.57e8     27      85.9         6.42  South…</span>
<span class="co">## 10 Barb…       4333428224  2.83e5     75       0.200      10     Carib…</span>
<span class="co">## # … with 129 more rows, and 1 more variable: n_muslim &lt;dbl&gt;</span></code></pre>
<p>¡Es posible crear más de una variable con el mismo comando! Creemos las dos de antes, a la vez:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mutate</span>(qog, 
       <span class="dt">gdp_ppp_per_capita =</span> wdi_gdppppcon2011<span class="op">/</span>wdi_pop,
       <span class="dt">n_muslim           =</span> wdi_pop <span class="op">*</span><span class="st"> </span>lp_muslim80)
<span class="co">## # A tibble: 139 x 9</span>
<span class="co">##    cname wdi_gdppppcon20… wdi_pop ti_cpi lp_muslim80 fh_ipolity2 region</span>
<span class="co">##    &lt;chr&gt;            &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt; </span>
<span class="co">##  1 Afgh…      57566228480  3.07e7      8      99.3         2.02  South…</span>
<span class="co">##  2 Alba…      28715335680  2.90e6     31      20.5         8.08  South…</span>
<span class="co">##  3 Alge…     507901640704  3.82e7     36      99.1         4.25  North…</span>
<span class="co">##  4 Ango…     152477499392  2.34e7     23       0           3.25  Middl…</span>
<span class="co">##  5 Aust…     990474338304  2.31e7     81       0.200      10     Austr…</span>
<span class="co">##  6 Aust…     373413642240  8.48e6     69       0.600      10     Weste…</span>
<span class="co">##  7 Baha…       8497731584  3.78e5     71       0          10     Carib…</span>
<span class="co">##  8 Bahr…      56583507968  1.35e6     48      95           0.833 Weste…</span>
<span class="co">##  9 Bang…     446835425280  1.57e8     27      85.9         6.42  South…</span>
<span class="co">## 10 Barb…       4333428224  2.83e5     75       0.200      10     Carib…</span>
<span class="co">## # … with 129 more rows, and 2 more variables: gdp_ppp_per_capita &lt;dbl&gt;,</span>
<span class="co">## #   n_muslim &lt;dbl&gt;</span></code></pre>
</div>
<div id="concatenar-comandos" class="section level3">
<h3><span class="header-section-number">3.2.6</span> Concatenar comandos</h3>
<p>A menudo no queremos hacer una sola de las operaciones con bases de datos reseñadas antes, sino que una seguidilla de estas. Si quisiéramos crear una nueva base a través de, por ejemplo, (1) seleccionar las variables de país, población y GDP, (2) crear la variable de GDP per capita, y (3) ordenar los países de mayor a menor según GDP per capita, nuestro procedimiento en R sería algo como esto:</p>
<pre class="sourceCode r"><code class="sourceCode r">qog_seguidilla_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">select</span>(qog, cname, wdi_pop, wdi_gdppppcon2011)
qog_seguidilla_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">mutate</span>(qog_seguidilla_<span class="dv">1</span>, 
                               <span class="dt">gdp_ppp_per_capita =</span> wdi_gdppppcon2011<span class="op">/</span>wdi_pop)
qog_seguidilla_<span class="dv">3</span> &lt;-<span class="st"> </span><span class="kw">arrange</span>(qog_seguidilla_<span class="dv">2</span>, <span class="op">-</span>gdp_ppp_per_capita)</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">qog_seguidilla_<span class="dv">3</span>
<span class="co">## # A tibble: 139 x 4</span>
<span class="co">##    cname                  wdi_pop wdi_gdppppcon2011 gdp_ppp_per_capita</span>
<span class="co">##    &lt;chr&gt;                    &lt;dbl&gt;             &lt;dbl&gt;              &lt;dbl&gt;</span>
<span class="co">##  1 Qatar                  2101288      280302059520            133395.</span>
<span class="co">##  2 Luxembourg              543360       48842280960             89889.</span>
<span class="co">##  3 Singapore              5399200      419630612480             77721.</span>
<span class="co">##  4 Kuwait                 3593689      266584637440             74181.</span>
<span class="co">##  5 Norway                 5079623      321651408896             63322.</span>
<span class="co">##  6 United Arab Emirates   9039978      560986259456             62056.</span>
<span class="co">##  7 Switzerland            8089346      444201566208             54912.</span>
<span class="co">##  8 United States        316497536    16230494765056             51282.</span>
<span class="co">##  9 Saudi Arabia          30201052     1478747750400             48963.</span>
<span class="co">## 10 Ireland                4598294      212357021696             46182.</span>
<span class="co">## # … with 129 more rows</span></code></pre>
<p>El lector notará que esto es bastante complicado y nos deja con dos <strong>objetos intermedios</strong> que no nos interesan, “qog_seguidilla_1” y “qog_seguidilla_2”.</p>
<p>La solución del paquete tidyverse que estamos utilizando son <strong>las pipes</strong>. El lector notará que en las tres funciones de nuestra seguidilla anterior (select, mutate y arrange) el primer argumento es la base de datos a tratar. En vez de crear objetos intermedios podemos “chutear” la base de datos a través de nuestros comandos con pipes, omitiendo los primeros argumentos:</p>
<pre class="sourceCode r"><code class="sourceCode r">qog_seguidilla &lt;-<span class="st"> </span>qog <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(cname, wdi_pop, wdi_gdppppcon2011) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">gdp_ppp_per_capita =</span> wdi_gdppppcon2011<span class="op">/</span>wdi_pop) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="op">-</span>gdp_ppp_per_capita)</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">qog_seguidilla
<span class="co">## # A tibble: 139 x 4</span>
<span class="co">##    cname                  wdi_pop wdi_gdppppcon2011 gdp_ppp_per_capita</span>
<span class="co">##    &lt;chr&gt;                    &lt;dbl&gt;             &lt;dbl&gt;              &lt;dbl&gt;</span>
<span class="co">##  1 Qatar                  2101288      280302059520            133395.</span>
<span class="co">##  2 Luxembourg              543360       48842280960             89889.</span>
<span class="co">##  3 Singapore              5399200      419630612480             77721.</span>
<span class="co">##  4 Kuwait                 3593689      266584637440             74181.</span>
<span class="co">##  5 Norway                 5079623      321651408896             63322.</span>
<span class="co">##  6 United Arab Emirates   9039978      560986259456             62056.</span>
<span class="co">##  7 Switzerland            8089346      444201566208             54912.</span>
<span class="co">##  8 United States        316497536    16230494765056             51282.</span>
<span class="co">##  9 Saudi Arabia          30201052     1478747750400             48963.</span>
<span class="co">## 10 Ireland                4598294      212357021696             46182.</span>
<span class="co">## # … with 129 more rows</span></code></pre>
<p>Las pipes pueden leerse como “pero luego”. Nuestra seguidilla anterior, entonces, se leería de la siguiente forma:</p>
<blockquote>
<p>qog_seguilla es igual a qog; pero luego seleccionamos las variables cname, wdi_pop, wdi_gdppppcon2011; pero luego creamos la variable gdp_ppp_per_capita; pero luego ordenamos la base en forma decreciente según gdp_ppp_per_capita.</p>
</blockquote>
</div>
<div id="operaciones-agrupadas" class="section level3">
<h3><span class="header-section-number">3.2.7</span> Operaciones agrupadas</h3>
<p><strong>PENDIENTE</strong></p>
</div>
</div>
<div id="reformatear-bases" class="section level2">
<h2><span class="header-section-number">3.3</span> Reformatear bases</h2>
<p><strong>PENDIENTE</strong></p>
<div class="books">
<p>
<strong>Ejercicios antes de continuar al próximo capítulo</strong> - Cree una base nueva, llamada <code>qog_2</code>, con una nueva variable llamada <code>porc_muslim</code>, que sea el porcentaje de población musulmana del país.
</p>
<ul>
<li>
<p>
Cree una base nueva, llamada <code>qog_3</code>, que incluya solo países latinoamericanos, China y Sudáfrica.
</p>
</li>
<li>
<p>
Cree una base nueva, llamada <code>qog_4</code>, que incluya solo países con población mayor a la media de población entre todos los países. Debe contener solo las variables de nombre del país, región y población (en ese orden). Ordene la base según población, de mayor a menor. ¡Use pipes!
</p>
</li>
</ul>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="rbas.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="dataviz.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "night",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/arcruz0/libroadp/edit/master/manejo-de-datos.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>

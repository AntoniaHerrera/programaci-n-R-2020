<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 2 Manejo de datos | AnalizaR Datos Políticos (v1.0)</title>
  <meta name="description" content="Capítulo 2 Manejo de datos | AnalizaR Datos Políticos (v1.0)" />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 2 Manejo de datos | AnalizaR Datos Políticos (v1.0)" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 2 Manejo de datos | AnalizaR Datos Políticos (v1.0)" />
  
  
  

<meta name="author" content="Francisco Urdinez y Andrés Cruz Labrín (editores)" />


<meta name="date" content="2020-08-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="prev" href="basic-r.html"/>
<link rel="next" href="dataviz.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<script>
% https://stackoverflow.com/a/4425214/8242291
var links = document.links;

for (var i = 0, linksLength = links.length; i < linksLength; i++) {

    if (links[i].hostname != window.location.hostname) {
        links[i].target = '_blank';
    }

}
</script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #2a211c;
    color: #bdae9d;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #bdae9d;  padding-left: 4px; }
div.sourceCode
  { color: #bdae9d; background-color: #2a211c; }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ffff00; } /* Alert */
code span.an { color: #0066ff; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #44aa43; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #43a8ed; font-weight: bold; } /* ControlFlow */
code span.ch { color: #049b0a; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #0066ff; font-weight: bold; font-style: italic; } /* Comment */
code span.do { color: #0066ff; font-style: italic; } /* Documentation */
code span.dt { text-decoration: underline; } /* DataType */
code span.dv { color: #44aa43; } /* DecVal */
code span.er { color: #ffff00; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #44aa43; } /* Float */
code span.fu { color: #ff9358; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #0066ff; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #43a8ed; font-weight: bold; } /* Keyword */
code span.op { } /* Operator */
code span.pp { font-weight: bold; } /* Preprocessor */
code span.sc { color: #049b0a; } /* SpecialChar */
code span.ss { color: #049b0a; } /* SpecialString */
code span.st { color: #049b0a; } /* String */
code span.va { } /* Variable */
code span.vs { color: #049b0a; } /* VerbatimString */
code span.wa { color: #ffff00; font-weight: bold; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><b><a href="./index.html"><img style="float: left; margin-right: 5px;" src="favicon.ico"></img>AnalizaR datos políticos</a></b></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introducción</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#inicio"><i class="fa fa-check"></i>Inicio</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#cómo-contribuir"><i class="fa fa-check"></i>¿Cómo contribuir?</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#sobre-los-autores-y-autoras"><i class="fa fa-check"></i>Sobre los autores y autoras</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#prefacio"><i class="fa fa-check"></i>Prefacio</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#agradecimientos"><i class="fa fa-check"></i>Agradecimientos</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#qué-esperar-del-libro"><i class="fa fa-check"></i>Qué esperar del libro</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#estructura-del-libro"><i class="fa fa-check"></i>Estructura del libro</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#cómo-utilizar-el-libro-en-un-curso-de-métodos"><i class="fa fa-check"></i>¿Cómo utilizar el libro en un curso de métodos?</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#primera-opción-curso-semestral-de-análisis-de-datos-políticos"><i class="fa fa-check"></i>Primera opción: Curso semestral de análisis de datos políticos</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#segunda-opción-curso-semestral-de-introducción-a-métodos-cuantitativos"><i class="fa fa-check"></i>Segunda opción: Curso semestral de introducción a métodos cuantitativos</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#prerrequisitos"><i class="fa fa-check"></i>Prerrequisitos</a></li>
</ul></li>
<li class="part"><span><b>I Introducción a R</b></span></li>
<li class="chapter" data-level="1" data-path="basic-r.html"><a href="basic-r.html"><i class="fa fa-check"></i><b>1</b> R Básico</a><ul>
<li class="chapter" data-level="1.1" data-path="basic-r.html"><a href="basic-r.html#instalación"><i class="fa fa-check"></i><b>1.1</b> Instalación</a><ul>
<li class="chapter" data-level="" data-path="basic-r.html"><a href="basic-r.html#r"><i class="fa fa-check"></i>R</a></li>
<li class="chapter" data-level="" data-path="basic-r.html"><a href="basic-r.html#rstudio"><i class="fa fa-check"></i>RStudio</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="basic-r.html"><a href="basic-r.html#consola"><i class="fa fa-check"></i><b>1.2</b> Consola</a></li>
<li class="chapter" data-level="1.3" data-path="basic-r.html"><a href="basic-r.html#script"><i class="fa fa-check"></i><b>1.3</b> Script</a></li>
<li class="chapter" data-level="1.4" data-path="basic-r.html"><a href="basic-r.html#objetos-y-funciones"><i class="fa fa-check"></i><b>1.4</b> Objetos (y funciones)</a><ul>
<li class="chapter" data-level="1.4.1" data-path="basic-r.html"><a href="basic-r.html#vectores"><i class="fa fa-check"></i><b>1.4.1</b> Vectores</a></li>
<li class="chapter" data-level="1.4.2" data-path="basic-r.html"><a href="basic-r.html#basic-r-functions"><i class="fa fa-check"></i><b>1.4.2</b> Functions</a></li>
<li class="chapter" data-level="1.4.3" data-path="basic-r.html"><a href="basic-r.html#archivos-gráficos-paquetes-ayuda"><i class="fa fa-check"></i><b>1.4.3</b> Archivos / gráficos / paquetes / ayuda</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>2</b> Manejo de datos</a><ul>
<li class="chapter" data-level="" data-path="data.html"><a href="data.html#los-paquetes-que-necesitas-instalar"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="2.1" data-path="data.html"><a href="data.html#introducción-al-manejo-de-datos"><i class="fa fa-check"></i><b>2.1</b> Introducción al manejo de datos</a><ul>
<li class="chapter" data-level="2.1.1" data-path="data.html"><a href="data.html#nuestra-base-de-datos"><i class="fa fa-check"></i><b>2.1.1</b> Nuestra base de datos</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data.html"><a href="data.html#describiendo-una-base-de-datos"><i class="fa fa-check"></i><b>2.2</b> Describiendo una base de datos</a></li>
<li class="chapter" data-level="2.3" data-path="data.html"><a href="data.html#operaciones-básicas"><i class="fa fa-check"></i><b>2.3</b> Operaciones básicas</a><ul>
<li class="chapter" data-level="2.3.1" data-path="data.html"><a href="data.html#seleccionar-columnas"><i class="fa fa-check"></i><b>2.3.1</b> Seleccionar columnas</a></li>
<li class="chapter" data-level="2.3.2" data-path="data.html"><a href="data.html#renombra-las-columnas"><i class="fa fa-check"></i><b>2.3.2</b> Renombra las columnas</a></li>
<li class="chapter" data-level="2.3.3" data-path="data.html"><a href="data.html#filtrar-las-observaciones"><i class="fa fa-check"></i><b>2.3.3</b> Filtrar las observaciones</a></li>
<li class="chapter" data-level="2.3.4" data-path="data.html"><a href="data.html#cambiar-el-orden-de-una-base-de-datos"><i class="fa fa-check"></i><b>2.3.4</b> Cambiar el orden de una base de datos</a></li>
<li class="chapter" data-level="2.3.5" data-path="data.html"><a href="data.html#transformar-y-crear-variables"><i class="fa fa-check"></i><b>2.3.5</b> Transformar y crear variables</a></li>
<li class="chapter" data-level="2.3.6" data-path="data.html"><a href="data.html#resúmenes"><i class="fa fa-check"></i><b>2.3.6</b> Resúmenes</a></li>
<li class="chapter" data-level="2.3.7" data-path="data.html"><a href="data.html#resúmenes-por-grupo"><i class="fa fa-check"></i><b>2.3.7</b> Resúmenes por grupo</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="data.html"><a href="data.html#comandos-en-cadena"><i class="fa fa-check"></i><b>2.4</b> Comandos en cadena</a></li>
<li class="chapter" data-level="2.5" data-path="data.html"><a href="data.html#data-recodificar"><i class="fa fa-check"></i><b>2.5</b> Recodificar valores</a><ul>
<li class="chapter" data-level="2.5.1" data-path="data.html"><a href="data.html#pivoteo-de-datos-data-pivot"><i class="fa fa-check"></i><b>2.5.1</b> Pivoteo de datos {data-pivot}</a></li>
<li class="chapter" data-level="2.5.2" data-path="data.html"><a href="data.html#bases-de-datos-anchas-con-más-de-una-variable-de-interés"><i class="fa fa-check"></i><b>2.5.2</b> Bases de datos anchas con más de una variable de interés</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="dataviz.html"><a href="dataviz.html"><i class="fa fa-check"></i><b>3</b> Visualización de datos</a><ul>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#lecturas-sugeridas"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#los-paquetes-que-necesitas-instalar-1"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="3.1" data-path="dataviz.html"><a href="dataviz.html#por-qué-visualizar-mis-datos"><i class="fa fa-check"></i><b>3.1</b> ¿Por qué visualizar mis datos?</a></li>
<li class="chapter" data-level="3.2" data-path="dataviz.html"><a href="dataviz.html#primeros-pasos"><i class="fa fa-check"></i><b>3.2</b> Primeros pasos</a><ul>
<li class="chapter" data-level="3.2.1" data-path="dataviz.html"><a href="dataviz.html#las-capas-del-universo-ggplotiano"><i class="fa fa-check"></i><b>3.2.1</b> Las capas del “universo ggplotiano”</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="dataviz.html"><a href="dataviz.html#ejemplo-aplicado-elecciones-locales-y-visualización-de-datos"><i class="fa fa-check"></i><b>3.3</b> Ejemplo aplicado: Elecciones locales y visualización de datos</a><ul>
<li class="chapter" data-level="3.3.1" data-path="dataviz.html"><a href="dataviz.html#gráfico-de-barras"><i class="fa fa-check"></i><b>3.3.1</b> Gráfico de barras</a></li>
<li class="chapter" data-level="3.3.2" data-path="dataviz.html"><a href="dataviz.html#gráfico-de-caja"><i class="fa fa-check"></i><b>3.3.2</b> Gráfico de caja</a></li>
<li class="chapter" data-level="3.3.3" data-path="dataviz.html"><a href="dataviz.html#histograma"><i class="fa fa-check"></i><b>3.3.3</b> Histograma</a></li>
<li class="chapter" data-level="3.3.4" data-path="dataviz.html"><a href="dataviz.html#relación-entre-las-variables"><i class="fa fa-check"></i><b>3.3.4</b> Relación entre las variables</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="dataviz.html"><a href="dataviz.html#para-continuar-aprendiendo"><i class="fa fa-check"></i><b>3.4</b> Para continuar aprendiendo</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="load.html"><a href="load.html"><i class="fa fa-check"></i><b>4</b> Carga de bases</a><ul>
<li class="chapter" data-level="" data-path="load.html"><a href="load.html#los-paquetes-que-necesitas-instalar-2"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="4.1" data-path="load.html"><a href="load.html#load-intro"><i class="fa fa-check"></i><b>4.1</b> Introducción</a></li>
<li class="chapter" data-level="4.2" data-path="load.html"><a href="load.html#carga-formatos"><i class="fa fa-check"></i><b>4.2</b> Diferentes formatos de bases de datos</a></li>
<li class="chapter" data-level="4.3" data-path="load.html"><a href="load.html#los-archivos-separados-por-delimitadores-.csv-y-.tsv"><i class="fa fa-check"></i><b>4.3</b> Los archivos separados por delimitadores (.csv y .tsv)</a><ul>
<li class="chapter" data-level="4.3.1" data-path="load.html"><a href="load.html#r-básico-utils"><i class="fa fa-check"></i><b>4.3.1</b> R básico: <code>utils</code></a></li>
<li class="chapter" data-level="4.3.2" data-path="load.html"><a href="load.html#load-r"><i class="fa fa-check"></i><b>4.3.2</b> Archivos creados con R (.Rdata y .rds)</a></li>
<li class="chapter" data-level="4.3.3" data-path="load.html"><a href="load.html#load-labels"><i class="fa fa-check"></i><b>4.3.3</b> Bases de datos con etiquetas (de Stata or SPSS)</a></li>
<li class="chapter" data-level="4.3.4" data-path="load.html"><a href="load.html#load-excel"><i class="fa fa-check"></i><b>4.3.4</b> Archivos de Excel</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="load.html"><a href="load.html#load-large"><i class="fa fa-check"></i><b>4.4</b> Grandes bases de datos tabulares</a></li>
</ul></li>
<li class="part"><span><b>II Modelos</b></span></li>
<li class="chapter" data-level="5" data-path="linear.html"><a href="linear.html"><i class="fa fa-check"></i><b>5</b> Modelos lineales</a><ul>
<li class="chapter" data-level="" data-path="linear.html"><a href="linear.html#lecturas-sugeridas-1"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="linear.html"><a href="linear.html#los-paquetes-que-necesitas-instalar-3"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="" data-path="linear.html"><a href="linear.html#introducción-1"><i class="fa fa-check"></i>Introducción</a></li>
<li class="chapter" data-level="5.1" data-path="linear.html"><a href="linear.html#mínimos-cuadrados-ordinarios-en-r"><i class="fa fa-check"></i><b>5.1</b> Mínimos cuadrados ordinarios en R</a><ul>
<li class="chapter" data-level="5.1.1" data-path="linear.html"><a href="linear.html#cómo-obtener-estadísticas-descriptivas"><i class="fa fa-check"></i><b>5.1.1</b> Cómo obtener estadísticas descriptivas</a></li>
<li class="chapter" data-level="5.1.2" data-path="linear.html"><a href="linear.html#estadísticas-descriptivas-y-distribución-de-las-variables-en-el-modelo"><i class="fa fa-check"></i><b>5.1.2</b> Estadísticas descriptivas y distribución de las variables en el modelo</a></li>
<li class="chapter" data-level="5.1.3" data-path="linear.html"><a href="linear.html#matriz-de-correlación-de-variables-independientes"><i class="fa fa-check"></i><b>5.1.3</b> Matriz de correlación de variables independientes</a></li>
<li class="chapter" data-level="5.1.4" data-path="linear.html"><a href="linear.html#distribución-de-las-variables-de-interés"><i class="fa fa-check"></i><b>5.1.4</b> Distribución de las variables de interés</a></li>
<li class="chapter" data-level="5.1.5" data-path="linear.html"><a href="linear.html#relación-entre-la-variable-dependiente-e-independiente"><i class="fa fa-check"></i><b>5.1.5</b> Relación entre la variable dependiente e independiente</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="linear.html"><a href="linear.html#modelo-bivariado-regresión-lineal-simple"><i class="fa fa-check"></i><b>5.2</b> Modelo bivariado: regresión lineal simple</a><ul>
<li class="chapter" data-level="5.2.1" data-path="linear.html"><a href="linear.html#la-función-lm"><i class="fa fa-check"></i><b>5.2.1</b> La función <code>lm</code></a></li>
<li class="chapter" data-level="5.2.2" data-path="linear.html"><a href="linear.html#representación-gráfica"><i class="fa fa-check"></i><b>5.2.2</b> Representación gráfica</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="linear.html"><a href="linear.html#modelo-multivariado-regresión-múltiple"><i class="fa fa-check"></i><b>5.3</b> Modelo multivariado: regresión múltiple</a></li>
<li class="chapter" data-level="5.4" data-path="linear.html"><a href="linear.html#ajuste-del-modelo"><i class="fa fa-check"></i><b>5.4</b> Ajuste del modelo</a></li>
<li class="chapter" data-level="5.5" data-path="linear.html"><a href="linear.html#inferencia-en-los-modelos-lineales-múltiples"><i class="fa fa-check"></i><b>5.5</b> Inferencia en los modelos lineales múltiples</a></li>
<li class="chapter" data-level="5.6" data-path="linear.html"><a href="linear.html#testeando-los-supuestos-de-mco"><i class="fa fa-check"></i><b>5.6</b> Testeando los supuestos de MCO</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="case-sel.html"><a href="case-sel.html"><i class="fa fa-check"></i><b>6</b> Selección de casos basada en regresiones</a><ul>
<li class="chapter" data-level="" data-path="case-sel.html"><a href="case-sel.html#lecturas-sugeridas-2"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="case-sel.html"><a href="case-sel.html#los-paquetes-que-necesitas-instalar-4"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="6.1" data-path="case-sel.html"><a href="case-sel.html#selección-de-estudios-de-casos"><i class="fa fa-check"></i><b>6.1</b> Selección de estudios de casos</a></li>
<li class="chapter" data-level="6.2" data-path="case-sel.html"><a href="case-sel.html#qué-estudio-de-caso-debería-seleccionar-para-la-investigación-cualitativa"><i class="fa fa-check"></i><b>6.2</b> ¿Qué estudio de caso debería seleccionar para la investigación cualitativa?</a><ul>
<li class="chapter" data-level="6.2.1" data-path="case-sel.html"><a href="case-sel.html#casos-típicos"><i class="fa fa-check"></i><b>6.2.1</b> Casos típicos</a></li>
<li class="chapter" data-level="6.2.2" data-path="case-sel.html"><a href="case-sel.html#los-valores-atípicos"><i class="fa fa-check"></i><b>6.2.2</b> Los valores atípicos</a></li>
<li class="chapter" data-level="6.2.3" data-path="case-sel.html"><a href="case-sel.html#casos-influyentes"><i class="fa fa-check"></i><b>6.2.3</b> Casos influyentes</a></li>
<li class="chapter" data-level="6.2.4" data-path="case-sel.html"><a href="case-sel.html#casos-extremos"><i class="fa fa-check"></i><b>6.2.4</b> Casos extremos</a></li>
<li class="chapter" data-level="6.2.5" data-path="case-sel.html"><a href="case-sel.html#casos-más-similares"><i class="fa fa-check"></i><b>6.2.5</b> Casos más similares</a></li>
<li class="chapter" data-level="6.2.6" data-path="case-sel.html"><a href="case-sel.html#casos-mas-diferentes"><i class="fa fa-check"></i><b>6.2.6</b> Casos mas diferentes</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="case-sel.html"><a href="case-sel.html#la-importancia-de-la-combinación-de-métodos"><i class="fa fa-check"></i><b>6.3</b> La importancia de la combinación de métodos</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="panel.html"><a href="panel.html"><i class="fa fa-check"></i><b>7</b> Modelos de panel</a><ul>
<li class="chapter" data-level="" data-path="panel.html"><a href="panel.html#lecturas-sugeridas-3"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="panel.html"><a href="panel.html#los-paquetes-que-necesitas-instalar-5"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="7.1" data-path="panel.html"><a href="panel.html#introducción-2"><i class="fa fa-check"></i><b>7.1</b> Introducción</a></li>
<li class="chapter" data-level="7.2" data-path="panel.html"><a href="panel.html#describiendo-la-base-de-datos-en-panel"><i class="fa fa-check"></i><b>7.2</b> Describiendo la base de datos en panel</a><ul>
<li class="chapter" data-level="7.2.1" data-path="panel.html"><a href="panel.html#opción-a.-gráfico-de-líneas"><i class="fa fa-check"></i><b>7.2.1</b> Opción A. Gráfico de líneas</a></li>
<li class="chapter" data-level="7.2.2" data-path="panel.html"><a href="panel.html#option-b.-gráfico-de-cajas"><i class="fa fa-check"></i><b>7.2.2</b> Option B. Gráfico de cajas</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="panel.html"><a href="panel.html#modelización-de-la-variación-a-nivel-de-grupo"><i class="fa fa-check"></i><b>7.3</b> Modelización de la variación a nivel de grupo</a></li>
<li class="chapter" data-level="7.4" data-path="panel.html"><a href="panel.html#efectos-fijos-vs.-efectos-aleatorios"><i class="fa fa-check"></i><b>7.4</b> Efectos fijos vs. efectos aleatorios</a><ul>
<li class="chapter" data-level="7.4.1" data-path="panel.html"><a href="panel.html#test-de-hausman"><i class="fa fa-check"></i><b>7.4.1</b> Test de Hausman</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="panel.html"><a href="panel.html#testeando-raíces-unitarias"><i class="fa fa-check"></i><b>7.5</b> Testeando raíces unitarias</a><ul>
<li class="chapter" data-level="7.5.1" data-path="panel.html"><a href="panel.html#creación-de-variables-rezagadas-lags-y-variables-prospectivas-leads"><i class="fa fa-check"></i><b>7.5.1</b> Creación de variables rezagadas (<em>lags</em>) y variables prospectivas (<em>leads</em>)</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="panel.html"><a href="panel.html#errores-estándar-robustos-corregidos-para-panel"><i class="fa fa-check"></i><b>7.6</b> Errores estándar robustos corregidos para panel</a><ul>
<li class="chapter" data-level="7.6.1" data-path="panel.html"><a href="panel.html#errores-estándar-robustos-1"><i class="fa fa-check"></i><b>7.6.1</b> Errores estándar robustos</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="logit.html"><a href="logit.html"><i class="fa fa-check"></i><b>8</b> Modelos logísticos</a><ul>
<li class="chapter" data-level="" data-path="logit.html"><a href="logit.html#lecturas-sugeridas-4"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="logit.html"><a href="logit.html#los-paquetes-que-necesitas-instalar-6"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="8.1" data-path="logit.html"><a href="logit.html#introducción-3"><i class="fa fa-check"></i><b>8.1</b> Introducción</a></li>
<li class="chapter" data-level="8.2" data-path="logit.html"><a href="logit.html#uso-de-los-modelos-logísticos"><i class="fa fa-check"></i><b>8.2</b> Uso de los modelos logísticos</a></li>
<li class="chapter" data-level="8.3" data-path="logit.html"><a href="logit.html#cómo-se-estiman-las-probabilidades"><i class="fa fa-check"></i><b>8.3</b> ¿Cómo se estiman las probabilidades?</a></li>
<li class="chapter" data-level="8.4" data-path="logit.html"><a href="logit.html#estimación-de-los-modelos"><i class="fa fa-check"></i><b>8.4</b> Estimación de los modelos</a></li>
<li class="chapter" data-level="8.5" data-path="logit.html"><a href="logit.html#creando-tablas"><i class="fa fa-check"></i><b>8.5</b> Creando tablas</a></li>
<li class="chapter" data-level="8.6" data-path="logit.html"><a href="logit.html#representación-visual-de-los-resultados"><i class="fa fa-check"></i><b>8.6</b> Representación visual de los resultados</a><ul>
<li class="chapter" data-level="8.6.1" data-path="logit.html"><a href="logit.html#visualización-de-las-interacciones-entre-las-variables"><i class="fa fa-check"></i><b>8.6.1</b> Visualización de las interacciones entre las variables</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="logit.html"><a href="logit.html#medidas-para-evaluar-el-ajuste-de-los-modelos"><i class="fa fa-check"></i><b>8.7</b> Medidas para evaluar el ajuste de los modelos</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="surv.html"><a href="surv.html"><i class="fa fa-check"></i><b>9</b> Modelos de supervivencia</a><ul>
<li class="chapter" data-level="" data-path="surv.html"><a href="surv.html#lecturas-sugeridas-5"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="surv.html"><a href="surv.html#los-paquetes-que-necesitas-instalar-7"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="9.1" data-path="surv.html"><a href="surv.html#introducción-4"><i class="fa fa-check"></i><b>9.1</b> Introducción</a></li>
<li class="chapter" data-level="9.2" data-path="surv.html"><a href="surv.html#cómo-interpretamos-las-tasas-de-riesgo"><i class="fa fa-check"></i><b>9.2</b> ¿Cómo interpretamos las tasas de riesgo?</a></li>
<li class="chapter" data-level="9.3" data-path="surv.html"><a href="surv.html#el-modelo-cox-de-riesgos-proporcionales"><i class="fa fa-check"></i><b>9.3</b> El modelo Cox de riesgos proporcionales</a></li>
<li class="chapter" data-level="9.4" data-path="surv.html"><a href="surv.html#estimación-de-los-modelos-de-cox-en-r"><i class="fa fa-check"></i><b>9.4</b> Estimación de los modelos de Cox en R</a></li>
<li class="chapter" data-level="9.5" data-path="surv.html"><a href="surv.html#modelos-de-supervivencia-e-interpretación-sus-coeficientes-como-hazard-ratios."><i class="fa fa-check"></i><b>9.5</b> Modelos de supervivencia e interpretación sus coeficientes como Hazard Ratios.</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="causal-inf.html"><a href="causal-inf.html"><i class="fa fa-check"></i><b>10</b> Inferencia causal</a><ul>
<li class="chapter" data-level="" data-path="causal-inf.html"><a href="causal-inf.html#lecturas-sugeridas-6"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="causal-inf.html"><a href="causal-inf.html#los-paquetes-que-necesitas-instalar-8"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="10.1" data-path="causal-inf.html"><a href="causal-inf.html#introducción-5"><i class="fa fa-check"></i><b>10.1</b> Introducción</a></li>
<li class="chapter" data-level="10.2" data-path="causal-inf.html"><a href="causal-inf.html#causalidad-y-gráficos-causales"><i class="fa fa-check"></i><b>10.2</b> Causalidad y gráficos causales</a></li>
<li class="chapter" data-level="10.3" data-path="causal-inf.html"><a href="causal-inf.html#midiendo-efectos-causales"><i class="fa fa-check"></i><b>10.3</b> Midiendo efectos causales</a></li>
<li class="chapter" data-level="10.4" data-path="causal-inf.html"><a href="causal-inf.html#dags-y-asociaciones-estadísticas"><i class="fa fa-check"></i><b>10.4</b> DAGs y asociaciones estadísticas</a></li>
<li class="chapter" data-level="10.5" data-path="causal-inf.html"><a href="causal-inf.html#puertas-traseras-y-cálculos-hacer"><i class="fa fa-check"></i><b>10.5</b> Puertas traseras y cálculos “<em>hacer</em>”</a></li>
<li class="chapter" data-level="10.6" data-path="causal-inf.html"><a href="causal-inf.html#dibujar-y-analizar-dags"><i class="fa fa-check"></i><b>10.6</b> Dibujar y analizar DAGs</a><ul>
<li class="chapter" data-level="10.6.1" data-path="causal-inf.html"><a href="causal-inf.html#dibujar-un-dag-con-dagitty"><i class="fa fa-check"></i><b>10.6.1</b> Dibujar un DAG con DAGitty</a></li>
<li class="chapter" data-level="10.6.2" data-path="causal-inf.html"><a href="causal-inf.html#encontrar-sets-de-ajuste-con-dagitty"><i class="fa fa-check"></i><b>10.6.2</b> Encontrar sets de ajuste con DAGitty</a></li>
<li class="chapter" data-level="10.6.3" data-path="causal-inf.html"><a href="causal-inf.html#diseñar-dags-en-r"><i class="fa fa-check"></i><b>10.6.3</b> Diseñar DAGs en R</a></li>
<li class="chapter" data-level="10.6.4" data-path="causal-inf.html"><a href="causal-inf.html#encontrar-caminos-y-sets-de-ajustes-con-r"><i class="fa fa-check"></i><b>10.6.4</b> Encontrar caminos y sets de ajustes con R</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="causal-inf.html"><a href="causal-inf.html#haciendo-ajustes-causales"><i class="fa fa-check"></i><b>10.7</b> Haciendo ajustes causales</a><ul>
<li class="chapter" data-level="10.7.1" data-path="causal-inf.html"><a href="causal-inf.html#datos-de-redes-para-mosquitos"><i class="fa fa-check"></i><b>10.7.1</b> Datos de redes para mosquitos</a></li>
<li class="chapter" data-level="10.7.2" data-path="causal-inf.html"><a href="causal-inf.html#verificar-las-independencias-condicionales"><i class="fa fa-check"></i><b>10.7.2</b> Verificar las independencias condicionales</a></li>
<li class="chapter" data-level="10.7.3" data-path="causal-inf.html"><a href="causal-inf.html#encuentra-el-set-de-ajuste"><i class="fa fa-check"></i><b>10.7.3</b> Encuentra el set de ajuste</a></li>
<li class="chapter" data-level="10.7.4" data-path="causal-inf.html"><a href="causal-inf.html#estimación-ingenua-no-ajustada"><i class="fa fa-check"></i><b>10.7.4</b> Estimación ingenua no ajustada</a></li>
<li class="chapter" data-level="10.7.5" data-path="causal-inf.html"><a href="causal-inf.html#regresiones"><i class="fa fa-check"></i><b>10.7.5</b> Regresiones</a></li>
<li class="chapter" data-level="10.7.6" data-path="causal-inf.html"><a href="causal-inf.html#matching"><i class="fa fa-check"></i><b>10.7.6</b> Matching</a></li>
<li class="chapter" data-level="10.7.7" data-path="causal-inf.html"><a href="causal-inf.html#ponderación-de-probabilidad-inversa"><i class="fa fa-check"></i><b>10.7.7</b> Ponderación de probabilidad inversa</a></li>
<li class="chapter" data-level="10.7.8" data-path="causal-inf.html"><a href="causal-inf.html#comparando-todos-los-métodos"><i class="fa fa-check"></i><b>10.7.8</b> Comparando todos los métodos</a></li>
</ul></li>
<li class="chapter" data-level="10.8" data-path="causal-inf.html"><a href="causal-inf.html#cconsejos-finales"><i class="fa fa-check"></i><b>10.8</b> CConsejos finales</a></li>
</ul></li>
<li class="part"><span><b>III Aplicaciones</b></span></li>
<li class="chapter" data-level="11" data-path="adv-data.html"><a href="adv-data.html"><i class="fa fa-check"></i><b>11</b> Manejo avanzado de datos políticos</a><ul>
<li class="chapter" data-level="" data-path="adv-data.html"><a href="adv-data.html#lecturas-sugeridas-7"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="adv-data.html"><a href="adv-data.html#los-paquetes-que-necesitas-instalar-9"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="11.1" data-path="adv-data.html"><a href="adv-data.html#introducción-6"><i class="fa fa-check"></i><b>11.1</b> Introducción</a></li>
<li class="chapter" data-level="11.2" data-path="adv-data.html"><a href="adv-data.html#uniendo-bases-de-datos"><i class="fa fa-check"></i><b>11.2</b> Uniendo bases de datos</a></li>
<li class="chapter" data-level="11.3" data-path="adv-data.html"><a href="adv-data.html#estandarizando-los-códigos-de-país"><i class="fa fa-check"></i><b>11.3</b> Estandarizando los códigos de país</a></li>
<li class="chapter" data-level="11.4" data-path="adv-data.html"><a href="adv-data.html#la-unión-borrosa-o-inexacta-de-los-datos"><i class="fa fa-check"></i><b>11.4</b> La unión borrosa o inexacta de los datos</a></li>
<li class="chapter" data-level="11.5" data-path="adv-data.html"><a href="adv-data.html#gestión-de-valores-perdidos"><i class="fa fa-check"></i><b>11.5</b> Gestión de valores perdidos</a><ul>
<li class="chapter" data-level="11.5.1" data-path="adv-data.html"><a href="adv-data.html#tipos-de-valores-perdidos"><i class="fa fa-check"></i><b>11.5.1</b> Tipos de valores perdidos</a></li>
<li class="chapter" data-level="11.5.2" data-path="adv-data.html"><a href="adv-data.html#descripción-de-los-valores-que-faltan-en-la-base-de-datos"><i class="fa fa-check"></i><b>11.5.2</b> Descripción de los valores que faltan en la base de datos</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="adv-data.html"><a href="adv-data.html#imputación-de-valores-perdidos"><i class="fa fa-check"></i><b>11.6</b> Imputación de valores perdidos</a><ul>
<li class="chapter" data-level="11.6.1" data-path="adv-data.html"><a href="adv-data.html#regresiones-luego-de-imputar-datos"><i class="fa fa-check"></i><b>11.6.1</b> Regresiones luego de imputar datos</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="web-mining.html"><a href="web-mining.html"><i class="fa fa-check"></i><b>12</b> Minería de datos web</a><ul>
<li class="chapter" data-level="" data-path="web-mining.html"><a href="web-mining.html#lecturas-sugeridas-8"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="web-mining.html"><a href="web-mining.html#los-paquetes-que-necesitas-instalar-10"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="12.1" data-path="web-mining.html"><a href="web-mining.html#introducción-7"><i class="fa fa-check"></i><b>12.1</b> Introducción</a></li>
<li class="chapter" data-level="12.2" data-path="web-mining.html"><a href="web-mining.html#formas-de-hacer-web-scraping"><i class="fa fa-check"></i><b>12.2</b> Formas de hacer web scraping</a><ul>
<li class="chapter" data-level="12.2.1" data-path="web-mining.html"><a href="web-mining.html#estándar-de-exclusión-de-robot"><i class="fa fa-check"></i><b>12.2.1</b> Estándar de exclusión de robot</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="web-mining.html"><a href="web-mining.html#web-scraping-en-r"><i class="fa fa-check"></i><b>12.3</b> Web scraping en R</a><ul>
<li class="chapter" data-level="12.3.1" data-path="web-mining.html"><a href="web-mining.html#ejemplo-aplicado-los-comunicados-de-prensa-de-la-organización-de-estados-americanos-oea"><i class="fa fa-check"></i><b>12.3.1</b> Ejemplo aplicado: los comunicados de prensa de la Organización de Estados Americanos (OEA)</a></li>
<li class="chapter" data-level="12.3.2" data-path="web-mining.html"><a href="web-mining.html#caraga-el-html-para-trabajar-con-r"><i class="fa fa-check"></i><b>12.3.2</b> Caraga el html para trabajar con R</a></li>
<li class="chapter" data-level="12.3.3" data-path="web-mining.html"><a href="web-mining.html#extraer-la-información-con-html_nodes-html_text"><i class="fa fa-check"></i><b>12.3.3</b> Extraer la información con <code>html_nodes()</code> + <code>html_text()</code></a></li>
<li class="chapter" data-level="12.3.4" data-path="web-mining.html"><a href="web-mining.html#iteraciones"><i class="fa fa-check"></i><b>12.3.4</b> Iteraciones</a></li>
<li class="chapter" data-level="12.3.5" data-path="web-mining.html"><a href="web-mining.html#funciones-personalizadas-recetas"><i class="fa fa-check"></i><b>12.3.5</b> Funciones personalizadas (recetas)</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="web-mining.html"><a href="web-mining.html#usando-apis-y-extrayendo-datos-de-twitter"><i class="fa fa-check"></i><b>12.4</b> Usando APIs y extrayendo datos de Twitter</a><ul>
<li class="chapter" data-level="12.4.1" data-path="web-mining.html"><a href="web-mining.html#buscar-una-palabra-clave"><i class="fa fa-check"></i><b>12.4.1</b> Buscar una palabra clave</a></li>
<li class="chapter" data-level="12.4.2" data-path="web-mining.html"><a href="web-mining.html#buscar-una-frase"><i class="fa fa-check"></i><b>12.4.2</b> Buscar una frase</a></li>
<li class="chapter" data-level="12.4.3" data-path="web-mining.html"><a href="web-mining.html#descargando-características-relacionadas-con-los-usuarios-de-twitter"><i class="fa fa-check"></i><b>12.4.3</b> Descargando características relacionadas con los usuarios de Twitter</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="qta.html"><a href="qta.html"><i class="fa fa-check"></i><b>13</b> Análisis cuantitativo de textos políticos</a><ul>
<li class="chapter" data-level="" data-path="qta.html"><a href="qta.html#lecturas-recomendadas"><i class="fa fa-check"></i>Lecturas recomendadas</a></li>
<li class="chapter" data-level="" data-path="qta.html"><a href="qta.html#paquetes-que-necesitas-instalar"><i class="fa fa-check"></i>Paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="13.1" data-path="qta.html"><a href="qta.html#sqta1"><i class="fa fa-check"></i><b>13.1</b> Análisis de hashtags políticos</a><ul>
<li class="chapter" data-level="13.1.1" data-path="qta.html"><a href="qta.html#exploración-de-datos-de-twitter"><i class="fa fa-check"></i><b>13.1.1</b> Exploración de datos de Twitter</a></li>
<li class="chapter" data-level="13.1.2" data-path="qta.html"><a href="qta.html#diagnóstico-visual"><i class="fa fa-check"></i><b>13.1.2</b> Diagnóstico visual</a></li>
<li class="chapter" data-level="13.1.3" data-path="qta.html"><a href="qta.html#hashtags-más-utilizados"><i class="fa fa-check"></i><b>13.1.3</b> Hashtags más utilizados</a></li>
<li class="chapter" data-level="13.1.4" data-path="qta.html"><a href="qta.html#wordclouds-nubes-de-palabras"><i class="fa fa-check"></i><b>13.1.4</b> Wordclouds (Nubes de palabras)</a></li>
<li class="chapter" data-level="13.1.5" data-path="qta.html"><a href="qta.html#nubes-de-palabras-por-grupos"><i class="fa fa-check"></i><b>13.1.5</b> Nubes de palabras por grupos</a></li>
<li class="chapter" data-level="13.1.6" data-path="qta.html"><a href="qta.html#gráficos-de-barras"><i class="fa fa-check"></i><b>13.1.6</b> Gráficos de barras</a></li>
<li class="chapter" data-level="13.1.7" data-path="qta.html"><a href="qta.html#variación-temporal-en-el-uso-de-hashtags"><i class="fa fa-check"></i><b>13.1.7</b> Variación temporal en el uso de hashtags</a></li>
<li class="chapter" data-level="13.1.8" data-path="qta.html"><a href="qta.html#para-resumir"><i class="fa fa-check"></i><b>13.1.8</b> Para resumir</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="qta.html"><a href="qta.html#wordfish"><i class="fa fa-check"></i><b>13.2</b> Wordfish</a><ul>
<li class="chapter" data-level="13.2.1" data-path="qta.html"><a href="qta.html#inspección-y-limpieza-de-datos"><i class="fa fa-check"></i><b>13.2.1</b> Inspección y limpieza de datos</a></li>
<li class="chapter" data-level="13.2.2" data-path="qta.html"><a href="qta.html#pre-procesamiento"><i class="fa fa-check"></i><b>13.2.2</b> Pre-procesamiento</a></li>
<li class="chapter" data-level="13.2.3" data-path="qta.html"><a href="qta.html#sqta2"><i class="fa fa-check"></i><b>13.2.3</b> Wordfish</a></li>
<li class="chapter" data-level="13.2.4" data-path="qta.html"><a href="qta.html#qué-aprendimos-de-wordfish"><i class="fa fa-check"></i><b>13.2.4</b> ¿Qué aprendimos de Wordfish?</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="qta.html"><a href="qta.html#sqta3"><i class="fa fa-check"></i><b>13.3</b> Structural Topic Modeling (STM)</a><ul>
<li class="chapter" data-level="13.3.1" data-path="qta.html"><a href="qta.html#pre-procesamiento-1"><i class="fa fa-check"></i><b>13.3.1</b> Pre-procesamiento</a></li>
<li class="chapter" data-level="13.3.2" data-path="qta.html"><a href="qta.html#diagnósticos"><i class="fa fa-check"></i><b>13.3.2</b> Diagnósticos</a></li>
<li class="chapter" data-level="13.3.3" data-path="qta.html"><a href="qta.html#análisis"><i class="fa fa-check"></i><b>13.3.3</b> Análisis</a></li>
<li class="chapter" data-level="13.3.4" data-path="qta.html"><a href="qta.html#observaciones-finales"><i class="fa fa-check"></i><b>13.3.4</b> Observaciones finales</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="networks.html"><a href="networks.html"><i class="fa fa-check"></i><b>14</b> Análisis de redes</a><ul>
<li class="chapter" data-level="" data-path="networks.html"><a href="networks.html#lecturas-sugeridas-9"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="networks.html"><a href="networks.html#los-paquetes-que-necesitas-instalar-11"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="14.1" data-path="networks.html"><a href="networks.html#introducción-8"><i class="fa fa-check"></i><b>14.1</b> Introducción</a></li>
<li class="chapter" data-level="14.2" data-path="networks.html"><a href="networks.html#conceptos-básicos-en-una-red"><i class="fa fa-check"></i><b>14.2</b> Conceptos básicos en una red</a><ul>
<li class="chapter" data-level="14.2.1" data-path="networks.html"><a href="networks.html#nodos-y-enlaces"><i class="fa fa-check"></i><b>14.2.1</b> Nodos y enlaces</a></li>
<li class="chapter" data-level="14.2.2" data-path="networks.html"><a href="networks.html#matriz-de-adyacencia"><i class="fa fa-check"></i><b>14.2.2</b> Matriz de adyacencia</a></li>
<li class="chapter" data-level="14.2.3" data-path="networks.html"><a href="networks.html#pesos-y-direcciones"><i class="fa fa-check"></i><b>14.2.3</b> Pesos y direcciones</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="networks.html"><a href="networks.html#bases-de-datos-de-la-red"><i class="fa fa-check"></i><b>14.3</b> Bases de datos de la red</a></li>
<li class="chapter" data-level="14.4" data-path="networks.html"><a href="networks.html#presentación-gráfica-de-una-red"><i class="fa fa-check"></i><b>14.4</b> Presentación gráfica de una red</a></li>
<li class="chapter" data-level="14.5" data-path="networks.html"><a href="networks.html#medidas-de-centralidad"><i class="fa fa-check"></i><b>14.5</b> Medidas de centralidad</a><ul>
<li class="chapter" data-level="14.5.1" data-path="networks.html"><a href="networks.html#grado"><i class="fa fa-check"></i><b>14.5.1</b> Grado</a></li>
<li class="chapter" data-level="14.5.2" data-path="networks.html"><a href="networks.html#centralidad-del-eigenvector"><i class="fa fa-check"></i><b>14.5.2</b> Centralidad del eigenvector</a></li>
<li class="chapter" data-level="14.5.3" data-path="networks.html"><a href="networks.html#centralidad-de-intermediación-betweenness"><i class="fa fa-check"></i><b>14.5.3</b> Centralidad de intermediación (<em>betweenness</em>)</a></li>
<li class="chapter" data-level="14.5.4" data-path="networks.html"><a href="networks.html#cercanía"><i class="fa fa-check"></i><b>14.5.4</b> Cercanía</a></li>
</ul></li>
<li class="chapter" data-level="14.6" data-path="networks.html"><a href="networks.html#aplicación-en-r"><i class="fa fa-check"></i><b>14.6</b> Aplicación en R</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="indexes.html"><a href="indexes.html"><i class="fa fa-check"></i><b>15</b> Análisis de componentes principales</a><ul>
<li class="chapter" data-level="" data-path="indexes.html"><a href="indexes.html#lecturas-sugeridas-10"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="indexes.html"><a href="indexes.html#los-paquetes-que-necesitas-instalar-12"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="15.1" data-path="indexes.html"><a href="indexes.html#introducción-9"><i class="fa fa-check"></i><b>15.1</b> Introducción</a><ul>
<li class="chapter" data-level="15.1.1" data-path="indexes.html"><a href="indexes.html#conceptos-medidas-y-validez"><i class="fa fa-check"></i><b>15.1.1</b> Conceptos, medidas y validez</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="indexes.html"><a href="indexes.html#cómo-funciona-el-análisis-de-componentes-principales"><i class="fa fa-check"></i><b>15.2</b> Cómo funciona el Análisis de Componentes Principales</a></li>
<li class="chapter" data-level="15.3" data-path="indexes.html"><a href="indexes.html#nociones-básicas-en-r"><i class="fa fa-check"></i><b>15.3</b> Nociones básicas en R</a></li>
<li class="chapter" data-level="15.4" data-path="indexes.html"><a href="indexes.html#dimensionalidad-del-concepto"><i class="fa fa-check"></i><b>15.4</b> Dimensionalidad del concepto</a></li>
<li class="chapter" data-level="15.5" data-path="indexes.html"><a href="indexes.html#variación-del-concepto"><i class="fa fa-check"></i><b>15.5</b> Variación del concepto</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="maps.html"><a href="maps.html"><i class="fa fa-check"></i><b>16</b> Mapas y datos espaciales</a><ul>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#lecturas-sugeridas-11"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#los-paquetes-que-necesitas-instalar-13"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="16.1" data-path="maps.html"><a href="maps.html#introducción-10"><i class="fa fa-check"></i><b>16.1</b> Introducción</a><ul>
<li class="chapter" data-level="16.1.1" data-path="maps.html"><a href="maps.html#datos-espaciales-qué-son"><i class="fa fa-check"></i><b>16.1.1</b> Datos espaciales: ¿qué son?</a></li>
<li class="chapter" data-level="16.1.2" data-path="maps.html"><a href="maps.html#estructura-de-datos-espaciales"><i class="fa fa-check"></i><b>16.1.2</b> Estructura de datos espaciales</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="maps.html"><a href="maps.html#datos-espaciales-en-r"><i class="fa fa-check"></i><b>16.2</b> Datos espaciales en R</a><ul>
<li class="chapter" data-level="16.2.1" data-path="maps.html"><a href="maps.html#características-simples-en-r"><i class="fa fa-check"></i><b>16.2.1</b> Características simples en R</a></li>
<li class="chapter" data-level="16.2.2" data-path="maps.html"><a href="maps.html#estructura"><i class="fa fa-check"></i><b>16.2.2</b> Estructura</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="maps.html"><a href="maps.html#gestión-de-datos-espaciales"><i class="fa fa-check"></i><b>16.3</b> Gestión de Datos Espaciales</a><ul>
<li class="chapter" data-level="16.3.1" data-path="maps.html"><a href="maps.html#modificaciones"><i class="fa fa-check"></i><b>16.3.1</b> Modificaciones</a></li>
<li class="chapter" data-level="16.3.2" data-path="maps.html"><a href="maps.html#añade-datos-de-otras-bases-de-datos-con-left_join"><i class="fa fa-check"></i><b>16.3.2</b> Añade datos de otras bases de datos con <code>left_join()</code></a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="maps.html"><a href="maps.html#mapeo"><i class="fa fa-check"></i><b>16.4</b> Mapeo</a><ul>
<li class="chapter" data-level="16.4.1" data-path="maps.html"><a href="maps.html#generando-centroides"><i class="fa fa-check"></i><b>16.4.1</b> Generando centroides</a></li>
<li class="chapter" data-level="16.4.2" data-path="maps.html"><a href="maps.html#mapeando-variables"><i class="fa fa-check"></i><b>16.4.2</b> Mapeando variables</a></li>
<li class="chapter" data-level="16.4.3" data-path="maps.html"><a href="maps.html#mapeando-puntos"><i class="fa fa-check"></i><b>16.4.3</b> Mapeando puntos</a></li>
</ul></li>
<li class="chapter" data-level="16.5" data-path="maps.html"><a href="maps.html#inferencia-a-partir-de-datos-espaciales"><i class="fa fa-check"></i><b>16.5</b> Inferencia a partir de datos espaciales</a><ul>
<li class="chapter" data-level="16.5.1" data-path="maps.html"><a href="maps.html#indicador-local-de-asociación-espacial-lisa-por-sus-siglas-en-inglés"><i class="fa fa-check"></i><b>16.5.1</b> Indicador local de asociación espacial (LISA, por sus siglas en inglés)</a></li>
<li class="chapter" data-level="16.5.2" data-path="maps.html"><a href="maps.html#matriz-de-pesos-espaciales"><i class="fa fa-check"></i><b>16.5.2</b> Matriz de pesos espaciales</a></li>
<li class="chapter" data-level="16.5.3" data-path="maps.html"><a href="maps.html#i-de-moran"><i class="fa fa-check"></i><b>16.5.3</b> I de Moran</a></li>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#comentarios-finales-referencias-para-un-mejor-análisis-de-datos-espaciales"><i class="fa fa-check"></i>Comentarios finales: Referencias para un mejor análisis de datos espaciales</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Referencias</b></span></li>
<li class="chapter" data-level="17" data-path="referencias.html"><a href="referencias.html"><i class="fa fa-check"></i><b>17</b> Referencias</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">AnalizaR Datos Políticos (v1.0)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data" class="section level1">
<h1><span class="header-section-number">Capítulo 2</span> Manejo de datos</h1>
<p>Andrés Cruz<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a></p>
<div id="los-paquetes-que-necesitas-instalar" class="section level3 unnumbered">
<h3>Los paquetes que necesitas instalar</h3>
<ul>
<li><code>tidyverse</code> <span class="citation">(Wickham <a href="referencias.html#ref-R-tidyverse" role="doc-biblioref">2019</a><a href="referencias.html#ref-R-tidyverse" role="doc-biblioref">b</a>)</span>, <code>paqueteadp</code> <span class="citation">(Urdinez and Cruz <a href="referencias.html#ref-R-paqueteadp" role="doc-biblioref">2020</a>)</span>, <code>skimr</code> <span class="citation">(Waring et al. <a href="referencias.html#ref-R-skimr" role="doc-biblioref">2020</a>)</span>.</li>
</ul>
</div>
<div id="introducción-al-manejo-de-datos" class="section level2">
<h2><span class="header-section-number">2.1</span> Introducción al manejo de datos</h2>
<p>Las bases de datos tabulares son la forma por excelencia de guardar información en las ciencias sociales. Su poder se basa en la capacidad de registrar múltiples dimensiones de información para cada observación que nos interesa. Por ejemplo, para cada representante en el Congreso podemos saber su sexo, edad, porcentaje de asistencia a la sala, número de proyectos de ley presentados, etcétera:</p>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-2">Tabla 2.1: </span>Base de datos de ejemplo con representantes.
</caption>
<thead>
<tr>
<th style="text-align:left;">
representante
</th>
<th style="text-align:left;">
género
</th>
<th style="text-align:right;">
edad
</th>
<th style="text-align:right;">
asistencia
</th>
<th style="text-align:right;">
n_proyectos_presentados
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Estuardo, Carlos
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:right;">
48
</td>
<td style="text-align:right;">
68
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:left;">
Cerna, Marta
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:right;">
57
</td>
<td style="text-align:right;">
74
</td>
<td style="text-align:right;">
3
</td>
</tr>
</tbody>
</table>
<p>Probablemente estés familiarizado con este tipo de datos gracias a Microsoft Excel o Google Sheets. La primera fila es la <strong>cabecera</strong>, que indica qué datos están registrados en las celdas de esa columna. La primera columna en este caso es nuestra <strong>columna de observaciones</strong>: al consultar <code>representante</code>, podemos saber a qué observación se refiere cada fila. Así, sobre esta pequeña base de datos podemos decir que la <strong>unidad de observación</strong> es el legislador o representante, para los cuales tenemos información en cuatro variables: género, edad, asistencia a la sala y número de proyectos presentados.</p>
<p>En este capítulo aprenderás a modificar bases de datos tabulares como el del ejemplo. Aprenderás a ordenar las bases de datos, filtrar sus observaciones, crear nuevas variables, generar resúmenes, cambiar los nombres, recodificar los valores y modificar la estructura de la base de datos. Todas estas operaciones son un paso inicial para cualquier análisis o visualización: se estima que el 80% del tiempo de análisis de datos se invierte en modificar y limpiar nuestros datos para su uso óptimo <span class="citation">(Dasu &amp; Johnson, 2003 en Wickham <a href="referencias.html#ref-wickhamTidyData2014" role="doc-biblioref">2014</a>)</span>.</p>
<div id="nuestra-base-de-datos" class="section level3">
<h3><span class="header-section-number">2.1.1</span> Nuestra base de datos</h3>
<p>En el presente capítulo utilizaremos datos de <span class="citation">Reyes-Housholder (<a href="referencias.html#ref-reyes-housholderTheoryGenderRole2019" role="doc-biblioref">2019</a>)</span>, con algunas adiciones de los Indicadores de Desarrollo Mundial del Banco Mundial, recogidos por <a href="https://qog.pol.gu.se/data">Quality of Government</a>. La autora argumenta que, ante escándalos de corrupción similares, las presidenteas de América Latina sufren caídas más pronunciadas en la aprobación en comparación con sus homólogos masculinos.</p>
<p>Comencemos por cargar el paquete <code>tidyverse</code>, uno de los principales paquetes del libro, que nos dará herramientas útiles para trabajar con nuestra base de datos.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="data.html#cb26-1"></a><span class="kw">library</span>(tidyverse)</span></code></pre></div>
<p>Ahora carguemos nuestra base de datos en la sesión de R. Podemos hacerlo con facilidad con el paquete de este libro usando la función <code>data()</code>. La base de datos se llama “aprobacion”:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="data.html#cb27-1"></a><span class="kw">library</span>(paqueteadp)</span>
<span id="cb27-2"><a href="data.html#cb27-2"></a><span class="kw">data</span>(<span class="st">&quot;aprobacion&quot;</span>)</span></code></pre></div>
<p>Ahora, podemos empezar a trabajar con nuestra base. Puedes comprobar que se cargó correctamente utilizando el comando <code>ls()</code> (o mirando la pestaña de Ambiente en RStudio):</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="data.html#cb28-1"></a><span class="kw">ls</span>()</span>
<span id="cb28-2"><a href="data.html#cb28-2"></a><span class="co">## [1] &quot;aprobacion&quot;</span></span></code></pre></div>
<p>Las siguientes son las variables de la base de este ejercicio:</p>
<table>
<caption>
<span id="tab:unnamed-chunk-6">Tabla 2.2: </span>Variables en la base
</caption>
<thead>
<tr>
<th style="text-align:left;">
Variable
</th>
<th style="text-align:left;">
Descripción
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
pais
</td>
<td style="text-align:left;width: 25em; ">
País
</td>
</tr>
<tr>
<td style="text-align:left;">
anio
</td>
<td style="text-align:left;width: 25em; ">
Año
</td>
</tr>
<tr>
<td style="text-align:left;">
trimestre
</td>
<td style="text-align:left;width: 25em; ">
Cuatrimestre
</td>
</tr>
<tr>
<td style="text-align:left;">
presidente
</td>
<td style="text-align:left;width: 25em; ">
Presidente
</td>
</tr>
<tr>
<td style="text-align:left;">
presidente_genero
</td>
<td style="text-align:left;width: 25em; ">
Sexo del presidentee
</td>
</tr>
<tr>
<td style="text-align:left;">
aprobacion_neta
</td>
<td style="text-align:left;width: 25em; ">
Aprobación presidencial neta (% de aprobación - % de desaprobación)
</td>
</tr>
<tr>
<td style="text-align:left;">
pib
</td>
<td style="text-align:left;width: 25em; ">
Producto Interno Bruto del país, dólares constantes de 2011 y ajustados por la Paridad de Poder Adquisitivo (PPA)
</td>
</tr>
<tr>
<td style="text-align:left;">
poblacion
</td>
<td style="text-align:left;width: 25em; ">
Población
</td>
</tr>
<tr>
<td style="text-align:left;">
corrupcion
</td>
<td style="text-align:left;width: 25em; ">
Corrupción del Poder Ejecutivo, según V-Dem. De 0 a 100 (un número mayor significa más corrupción)
</td>
</tr>
<tr>
<td style="text-align:left;">
desempleo
</td>
<td style="text-align:left;width: 25em; ">
Tasa de desempleo
</td>
</tr>
<tr>
<td style="text-align:left;">
crecimiento_pib
</td>
<td style="text-align:left;width: 25em; ">
Crecimiento del PIB
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="describiendo-una-base-de-datos" class="section level2">
<h2><span class="header-section-number">2.2</span> Describiendo una base de datos</h2>
<p>Para aproximarnos a los datos recién cargados tenemos varias opciones. Podemos, igual que antes, escribir su nombre como si fuera un comando para tener un resumen rápido:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="data.html#cb29-1"></a>aprobacion</span>
<span id="cb29-2"><a href="data.html#cb29-2"></a><span class="co">## # A tibble: 1,020 x 11</span></span>
<span id="cb29-3"><a href="data.html#cb29-3"></a><span class="co">##   pais   anio trimestre presidente presidente_gene… aprobacion_neta   pib</span></span>
<span id="cb29-4"><a href="data.html#cb29-4"></a><span class="co">##   &lt;chr&gt; &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;                      &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb29-5"><a href="data.html#cb29-5"></a><span class="co">## 1 Arge…  2000         1 Fernando … Masculino                   40.1  14.0</span></span>
<span id="cb29-6"><a href="data.html#cb29-6"></a><span class="co">## 2 Arge…  2000         2 Fernando … Masculino                   16.4  14.0</span></span>
<span id="cb29-7"><a href="data.html#cb29-7"></a><span class="co">## 3 Arge…  2000         3 Fernando … Masculino                   24.0  14.0</span></span>
<span id="cb29-8"><a href="data.html#cb29-8"></a><span class="co">## # … with 1,017 more rows, and 4 more variables</span></span></code></pre></div>
<p>También podemos usar la función <code>glimpse()</code> para obtener un resumen desde otra perspectiva, mirando las primeras observaciones en cada variable:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="data.html#cb30-1"></a><span class="kw">glimpse</span>(aprobacion)</span>
<span id="cb30-2"><a href="data.html#cb30-2"></a><span class="co">## Rows: 1,020</span></span>
<span id="cb30-3"><a href="data.html#cb30-3"></a><span class="co">## Columns: 11</span></span>
<span id="cb30-4"><a href="data.html#cb30-4"></a><span class="co">## $ pais              &lt;chr&gt; &quot;Argentina&quot;, &quot;Argentina&quot;, &quot;Argentina&quot;, &quot;Arge…</span></span>
<span id="cb30-5"><a href="data.html#cb30-5"></a><span class="co">## $ anio              &lt;dbl&gt; 2000, 2000, 2000, 2000, 2001, 2001, 2001, 20…</span></span>
<span id="cb30-6"><a href="data.html#cb30-6"></a><span class="co">## $ trimestre         &lt;dbl&gt; 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3,…</span></span>
<span id="cb30-7"><a href="data.html#cb30-7"></a><span class="co">## $ presidente        &lt;chr&gt; &quot;Fernando de la Rúa&quot;, &quot;Fernando de la Rúa&quot;, …</span></span>
<span id="cb30-8"><a href="data.html#cb30-8"></a><span class="co">## $ presidente_genero &lt;chr&gt; &quot;Masculino&quot;, &quot;Masculino&quot;, &quot;Masculino&quot;, &quot;Masc…</span></span>
<span id="cb30-9"><a href="data.html#cb30-9"></a><span class="co">## $ aprobacion_neta   &lt;dbl&gt; 40.1, 16.4, 24.0, -18.3, -7.0, -20.1, -19.4,…</span></span>
<span id="cb30-10"><a href="data.html#cb30-10"></a><span class="co">## $ pib               &lt;dbl&gt; 14, 14, 14, 14, 14, 14, 14, 14, 25, 25, 25, …</span></span>
<span id="cb30-11"><a href="data.html#cb30-11"></a><span class="co">## $ corrupcion        &lt;dbl&gt; 5.5e+11, 5.5e+11, 5.5e+11, 5.5e+11, 5.3e+11,…</span></span>
<span id="cb30-12"><a href="data.html#cb30-12"></a><span class="co">## $ poblacion         &lt;dbl&gt; 3.7e+07, 3.7e+07, 3.7e+07, 3.7e+07, 3.7e+07,…</span></span>
<span id="cb30-13"><a href="data.html#cb30-13"></a><span class="co">## $ desempleo         &lt;dbl&gt; 15, 15, 15, 15, 18, 18, 18, 18, 18, 18, 18, …</span></span>
<span id="cb30-14"><a href="data.html#cb30-14"></a><span class="co">## $ crecimiento_pib   &lt;dbl&gt; -0.8, -0.8, -0.8, -0.8, -4.4, -4.4, -4.4, -4…</span></span></code></pre></div>
<p>Una alternativa que nos permite la base completa es la función <code>View()</code>, similar a hacer clic en nuestro objeto en la pestaña “Ambiente” en RStudio:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="data.html#cb31-1"></a><span class="kw">View</span>(aprobacion)</span></code></pre></div>
<p>Podemos obtener un rápido resumen de las variables de nuestro conjunto de datos utilizando la función <code>skimr::skim()</code>, como se muestra en la Figura <a href="data.html#fig:skim-data">2.1</a>.</p>
<div class="figure" style="text-align: center"><span id="fig:skim-data"></span>
<img src="00-images/data/skim_data.png" alt="Skim de nuestra base de datos." width="100%" />
<p class="caption">
Figura 2.1: Skim de nuestra base de datos.
</p>
</div>
<blockquote>
<p>Nota: Cada vez que ves que después de un paquete usamos :: significa que dentro de ese paquete estamos pidiendo que se use una función específica. Por ejemplo, en el ejemplo anterior llamamos a la función <code>skim()</code> del paquete <code>skimr</code>.</p>
</blockquote>
<p>Obtener la tabulación de una de las columnas de nuestra base, una función común para las variables categóricas, es una tarea fácil gracias a la función <code>count()</code>. Por ejemplo, podemos comprobar que los países-cuatrimestre con mujeres como presidentees son una minoría en la región, 98 de 1020:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="data.html#cb32-1"></a><span class="kw">count</span>(aprobacion, presidente_genero,</span>
<span id="cb32-2"><a href="data.html#cb32-2"></a>      <span class="dt">sort =</span> T) <span class="co"># orden de mayor a menor por n</span></span>
<span id="cb32-3"><a href="data.html#cb32-3"></a><span class="co">## # A tibble: 2 x 2</span></span>
<span id="cb32-4"><a href="data.html#cb32-4"></a><span class="co">##   presidente_genero     n</span></span>
<span id="cb32-5"><a href="data.html#cb32-5"></a><span class="co">##   &lt;chr&gt;             &lt;int&gt;</span></span>
<span id="cb32-6"><a href="data.html#cb32-6"></a><span class="co">## 1 Masculino           922</span></span>
<span id="cb32-7"><a href="data.html#cb32-7"></a><span class="co">## 2 Femenino             98</span></span></code></pre></div>
</div>
<div id="operaciones-básicas" class="section level2">
<h2><span class="header-section-number">2.3</span> Operaciones básicas</h2>
<p>A continuación, veremos algunas operaciones básicas para nuestra base de datos, que en su conjunto nos permitirán hacer una importante edición en la estructura y los contenidos <span class="citation">(Wickham and Grolemund <a href="referencias.html#ref-wickhamDataScienceImport2016" role="doc-biblioref">2016</a>, cap. 5)</span>. Esta subsección utiliza las herramientas del paquete <code>dplyr</code>, que está disponible al cargar <code>tidyverse</code>.</p>
<div id="seleccionar-columnas" class="section level3">
<h3><span class="header-section-number">2.3.1</span> Seleccionar columnas</h3>
<p>A veces queremos trabajar sólo con un extracto de las variables de nuestros datos. Para ello, existe la función <code>select()</code>. Seleccionemos sólo la columna de países:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="data.html#cb33-1"></a><span class="kw">select</span>(aprobacion, pais)</span>
<span id="cb33-2"><a href="data.html#cb33-2"></a><span class="co">## # A tibble: 1,020 x 1</span></span>
<span id="cb33-3"><a href="data.html#cb33-3"></a><span class="co">##   pais     </span></span>
<span id="cb33-4"><a href="data.html#cb33-4"></a><span class="co">##   &lt;chr&gt;    </span></span>
<span id="cb33-5"><a href="data.html#cb33-5"></a><span class="co">## 1 Argentina</span></span>
<span id="cb33-6"><a href="data.html#cb33-6"></a><span class="co">## 2 Argentina</span></span>
<span id="cb33-7"><a href="data.html#cb33-7"></a><span class="co">## 3 Argentina</span></span>
<span id="cb33-8"><a href="data.html#cb33-8"></a><span class="co">## # … with 1,017 more rows</span></span></code></pre></div>
<p>El primer argumento de la función anterior (<code>aprobacion</code>) es la base de datos en la que queremos ejecutar la operación. El siguiente argumento indica qué columnas seleccionar (<code>pais</code>). Todas las funciones para operaciones básicas que veremos en esta subsección siguen la misma lógica: el primer argumento es siempre la base de datos en la que operaremos, mientras que el resto designa cómo queremos ejecutar la operación.</p>
<p>Recordemos que el código anterior no creó ningún objeto nuevo, es sólo un comando que estamos ejecutando en la consola. Si quisiéramos crear un nuevo objeto, tendríamos que asignarlo, usando el operador <code>&lt;-</code>:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="data.html#cb34-1"></a>aprobacion_reducida &lt;-<span class="st"> </span><span class="kw">select</span>(aprobacion, pais)</span>
<span id="cb34-2"><a href="data.html#cb34-2"></a>aprobacion_reducida</span>
<span id="cb34-3"><a href="data.html#cb34-3"></a><span class="co">## # A tibble: 1,020 x 1</span></span>
<span id="cb34-4"><a href="data.html#cb34-4"></a><span class="co">##   pais     </span></span>
<span id="cb34-5"><a href="data.html#cb34-5"></a><span class="co">##   &lt;chr&gt;    </span></span>
<span id="cb34-6"><a href="data.html#cb34-6"></a><span class="co">## 1 Argentina</span></span>
<span id="cb34-7"><a href="data.html#cb34-7"></a><span class="co">## 2 Argentina</span></span>
<span id="cb34-8"><a href="data.html#cb34-8"></a><span class="co">## 3 Argentina</span></span>
<span id="cb34-9"><a href="data.html#cb34-9"></a><span class="co">## # … with 1,017 more rows</span></span></code></pre></div>
<p>Podemos seleccionar varias columnas a la vez, separadas por comas:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="data.html#cb35-1"></a><span class="kw">select</span>(aprobacion, pais, anio, desempleo)</span>
<span id="cb35-2"><a href="data.html#cb35-2"></a><span class="co">## # A tibble: 1,020 x 3</span></span>
<span id="cb35-3"><a href="data.html#cb35-3"></a><span class="co">##   pais       anio desempleo</span></span>
<span id="cb35-4"><a href="data.html#cb35-4"></a><span class="co">##   &lt;chr&gt;     &lt;dbl&gt;     &lt;dbl&gt;</span></span>
<span id="cb35-5"><a href="data.html#cb35-5"></a><span class="co">## 1 Argentina  2000        15</span></span>
<span id="cb35-6"><a href="data.html#cb35-6"></a><span class="co">## 2 Argentina  2000        15</span></span>
<span id="cb35-7"><a href="data.html#cb35-7"></a><span class="co">## 3 Argentina  2000        15</span></span>
<span id="cb35-8"><a href="data.html#cb35-8"></a><span class="co">## # … with 1,017 more rows</span></span></code></pre></div>
<p>Supongamos que queremos las primeras cinco variables de nuestra base. A continuación se presentan tres formas de obtener el mismo resultado, aunque recomendamos la segunda, ya que es breve y clara:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="data.html#cb36-1"></a><span class="kw">select</span>(aprobacion, pais, anio, trimestre, presidente, aprobacion_neta)</span>
<span id="cb36-2"><a href="data.html#cb36-2"></a><span class="kw">select</span>(aprobacion, pais<span class="op">:</span>aprobacion_neta) <span class="co"># forma recomendada</span></span>
<span id="cb36-3"><a href="data.html#cb36-3"></a><span class="kw">select</span>(aprobacion, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1,020 x 6
##   pais     anio trimestre presidente     presidente_gene… aprobacion_neta
##   &lt;chr&gt;   &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;          &lt;chr&gt;                      &lt;dbl&gt;
## 1 Argent…  2000         1 Fernando de l… Masculino                   40.1
## 2 Argent…  2000         2 Fernando de l… Masculino                   16.4
## 3 Argent…  2000         3 Fernando de l… Masculino                   24.0
## # … with 1,017 more rows</code></pre>
<p>El comando <code>select()</code> también puede ayudarnos a reordenar las columnas. Supongamos que quisiéramos que la variable <code>presidente</code> fuera la primera. Podemos reordenar las variables, obteniendo la misma base con un nuevo orden para las columnas:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="data.html#cb38-1"></a><span class="kw">select</span>(aprobacion, presidente, pais<span class="op">:</span>anio, aprobacion_neta<span class="op">:</span>desempleo)</span>
<span id="cb38-2"><a href="data.html#cb38-2"></a><span class="co">## # A tibble: 1,020 x 8</span></span>
<span id="cb38-3"><a href="data.html#cb38-3"></a><span class="co">##   presidente pais   anio aprobacion_neta   pib corrupcion poblacion</span></span>
<span id="cb38-4"><a href="data.html#cb38-4"></a><span class="co">##   &lt;chr&gt;      &lt;chr&gt; &lt;dbl&gt;           &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;     &lt;dbl&gt;</span></span>
<span id="cb38-5"><a href="data.html#cb38-5"></a><span class="co">## 1 Fernando … Arge…  2000            40.1  14.0    5.52e11  37057452</span></span>
<span id="cb38-6"><a href="data.html#cb38-6"></a><span class="co">## 2 Fernando … Arge…  2000            16.4  14.0    5.52e11  37057452</span></span>
<span id="cb38-7"><a href="data.html#cb38-7"></a><span class="co">## 3 Fernando … Arge…  2000            24.0  14.0    5.52e11  37057452</span></span>
<span id="cb38-8"><a href="data.html#cb38-8"></a><span class="co">## # … with 1,017 more rows, and 1 more variable</span></span></code></pre></div>
<p>Este método es tedioso, especialmente para las bases de datos con múltiples variables. Hay una función que puede ser útil para estos escenarios, llamada <code>everything()</code>. En este caso, seleccionará la columna <code>presidente</code> y “todo lo demás”:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="data.html#cb39-1"></a><span class="kw">select</span>(aprobacion, presidente, <span class="kw">everything</span>())</span>
<span id="cb39-2"><a href="data.html#cb39-2"></a><span class="co">## # A tibble: 1,020 x 11</span></span>
<span id="cb39-3"><a href="data.html#cb39-3"></a><span class="co">##   presidente pais   anio trimestre presidente_gene… aprobacion_neta   pib</span></span>
<span id="cb39-4"><a href="data.html#cb39-4"></a><span class="co">##   &lt;chr&gt;      &lt;chr&gt; &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;                      &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb39-5"><a href="data.html#cb39-5"></a><span class="co">## 1 Fernando … Arge…  2000         1 Masculino                   40.1  14.0</span></span>
<span id="cb39-6"><a href="data.html#cb39-6"></a><span class="co">## 2 Fernando … Arge…  2000         2 Masculino                   16.4  14.0</span></span>
<span id="cb39-7"><a href="data.html#cb39-7"></a><span class="co">## 3 Fernando … Arge…  2000         3 Masculino                   24.0  14.0</span></span>
<span id="cb39-8"><a href="data.html#cb39-8"></a><span class="co">## # … with 1,017 more rows, and 4 more variables</span></span></code></pre></div>
<p>Otra función útil para <code>select()</code> es <code>starts_with()</code>, que nos permite seleccionar las columnas según los patrones en sus nombres. Por ejemplo, a continuación se seleccionarán todas las columnas que empiecen con el prefijo “pib”.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="data.html#cb40-1"></a><span class="kw">select</span>(aprobacion, <span class="kw">starts_with</span>(<span class="st">&quot;pib&quot;</span>))</span>
<span id="cb40-2"><a href="data.html#cb40-2"></a><span class="co">## # A tibble: 1,020 x 1</span></span>
<span id="cb40-3"><a href="data.html#cb40-3"></a><span class="co">##     pib</span></span>
<span id="cb40-4"><a href="data.html#cb40-4"></a><span class="co">##   &lt;dbl&gt;</span></span>
<span id="cb40-5"><a href="data.html#cb40-5"></a><span class="co">## 1  14.0</span></span>
<span id="cb40-6"><a href="data.html#cb40-6"></a><span class="co">## 2  14.0</span></span>
<span id="cb40-7"><a href="data.html#cb40-7"></a><span class="co">## 3  14.0</span></span>
<span id="cb40-8"><a href="data.html#cb40-8"></a><span class="co">## # … with 1,017 more rows</span></span></code></pre></div>
</div>
<div id="renombra-las-columnas" class="section level3">
<h3><span class="header-section-number">2.3.2</span> Renombra las columnas</h3>
<p>Podemos cambiar los nombres de las columnas de una base con el comando <code>rename()</code>. Por ejemplo, hagamos más explícito el nombre de la variable con el PIB:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="data.html#cb41-1"></a><span class="kw">rename</span>(aprobacion, <span class="dt">pib_ppp_c2011 =</span> pib)</span>
<span id="cb41-2"><a href="data.html#cb41-2"></a><span class="co">## # A tibble: 1,020 x 11</span></span>
<span id="cb41-3"><a href="data.html#cb41-3"></a><span class="co">##   pais   anio trimestre presidente presidente_gene… aprobacion_neta</span></span>
<span id="cb41-4"><a href="data.html#cb41-4"></a><span class="co">##   &lt;chr&gt; &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;                      &lt;dbl&gt;</span></span>
<span id="cb41-5"><a href="data.html#cb41-5"></a><span class="co">## 1 Arge…  2000         1 Fernando … Masculino                   40.1</span></span>
<span id="cb41-6"><a href="data.html#cb41-6"></a><span class="co">## 2 Arge…  2000         2 Fernando … Masculino                   16.4</span></span>
<span id="cb41-7"><a href="data.html#cb41-7"></a><span class="co">## 3 Arge…  2000         3 Fernando … Masculino                   24.0</span></span>
<span id="cb41-8"><a href="data.html#cb41-8"></a><span class="co">## # … with 1,017 more rows, and 5 more variables</span></span></code></pre></div>
<p>También es posible cambiar varios nombres a la vez. Observa cómo modificamos tres nombres con un solo comando:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="data.html#cb42-1"></a><span class="kw">rename</span>(aprobacion,</span>
<span id="cb42-2"><a href="data.html#cb42-2"></a>       <span class="dt">pib_ppp_c2011              =</span> pib,</span>
<span id="cb42-3"><a href="data.html#cb42-3"></a>       <span class="dt">desempleo_porcentaje       =</span> desempleo,</span>
<span id="cb42-4"><a href="data.html#cb42-4"></a>       <span class="dt">crecimiento_pib_porcentaje =</span> crecimiento_pib)</span>
<span id="cb42-5"><a href="data.html#cb42-5"></a><span class="co">## # A tibble: 1,020 x 11</span></span>
<span id="cb42-6"><a href="data.html#cb42-6"></a><span class="co">##   pais   anio trimestre presidente presidente_gene… aprobacion_neta</span></span>
<span id="cb42-7"><a href="data.html#cb42-7"></a><span class="co">##   &lt;chr&gt; &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;                      &lt;dbl&gt;</span></span>
<span id="cb42-8"><a href="data.html#cb42-8"></a><span class="co">## 1 Arge…  2000         1 Fernando … Masculino                   40.1</span></span>
<span id="cb42-9"><a href="data.html#cb42-9"></a><span class="co">## 2 Arge…  2000         2 Fernando … Masculino                   16.4</span></span>
<span id="cb42-10"><a href="data.html#cb42-10"></a><span class="co">## 3 Arge…  2000         3 Fernando … Masculino                   24.0</span></span>
<span id="cb42-11"><a href="data.html#cb42-11"></a><span class="co">## # … with 1,017 more rows, and 5 more variables</span></span></code></pre></div>
</div>
<div id="filtrar-las-observaciones" class="section level3">
<h3><span class="header-section-number">2.3.3</span> Filtrar las observaciones</h3>
<p>A menudo queremos mantener sólo algunas observaciones de nuestra base de datos, filtrando según características específicas. Podemos hacerlo gracias a la función <code>filter()</code> y a los operadores lógicos. Para empezar, mantengamos sólo las observaciones para Chile:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="data.html#cb43-1"></a><span class="kw">filter</span>(aprobacion, pais <span class="op">==</span><span class="st"> &quot;Chile&quot;</span>)</span>
<span id="cb43-2"><a href="data.html#cb43-2"></a><span class="co">## # A tibble: 60 x 11</span></span>
<span id="cb43-3"><a href="data.html#cb43-3"></a><span class="co">##   pais   anio trimestre presidente presidente_gene… aprobacion_neta   pib</span></span>
<span id="cb43-4"><a href="data.html#cb43-4"></a><span class="co">##   &lt;chr&gt; &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;                      &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb43-5"><a href="data.html#cb43-5"></a><span class="co">## 1 Chile  2000         1 Eduardo F… Masculino                   6.22  3.63</span></span>
<span id="cb43-6"><a href="data.html#cb43-6"></a><span class="co">## 2 Chile  2000         2 Ricardo L… Masculino                  19.8   3.63</span></span>
<span id="cb43-7"><a href="data.html#cb43-7"></a><span class="co">## 3 Chile  2000         3 Ricardo L… Masculino                  19.5   3.63</span></span>
<span id="cb43-8"><a href="data.html#cb43-8"></a><span class="co">## # … with 57 more rows, and 4 more variables</span></span></code></pre></div>
<p>Le decimos <code>filter()</code>, a través del segundo argumento, sólo para retener las observaciones en las que la variable país <em>es igual a</em> “Chile”. Esta <em>es igual a</em> es un operador lógico, que se escribe como “==” en R<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a> Aquí hay una lista de operadores lógicos comunes:</p>
<table>
<thead>
<tr class="header">
<th align="center">operador</th>
<th>descripción</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><code>==</code></td>
<td>es igual a</td>
</tr>
<tr class="even">
<td align="center"><code>!=</code></td>
<td>es diferente a</td>
</tr>
<tr class="odd">
<td align="center"><code>&gt;</code></td>
<td>es más grande que</td>
</tr>
<tr class="even">
<td align="center"><code>&lt;</code></td>
<td>es menor que</td>
</tr>
<tr class="odd">
<td align="center"><code>&gt;=</code></td>
<td>es mayor o igual a</td>
</tr>
<tr class="even">
<td align="center"><code>&lt;=</code></td>
<td>es menor o igual que</td>
</tr>
<tr class="odd">
<td align="center"><code>&amp;</code></td>
<td>intersección</td>
</tr>
<tr class="even">
<td align="center"><code>|</code></td>
<td>Unión</td>
</tr>
<tr class="odd">
<td align="center"><code>%in%</code></td>
<td>…está contenida en…</td>
</tr>
</tbody>
</table>
<p>Por ejemplo, podemos obtener todas las observaciones (país-año-cuatrimestre) en las que la aprobación presidencial neta es positiva:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="data.html#cb44-1"></a><span class="kw">filter</span>(aprobacion, aprobacion_neta <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>)</span>
<span id="cb44-2"><a href="data.html#cb44-2"></a><span class="co">## # A tibble: 709 x 11</span></span>
<span id="cb44-3"><a href="data.html#cb44-3"></a><span class="co">##   pais   anio trimestre presidente presidente_gene… aprobacion_neta   pib</span></span>
<span id="cb44-4"><a href="data.html#cb44-4"></a><span class="co">##   &lt;chr&gt; &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;                      &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb44-5"><a href="data.html#cb44-5"></a><span class="co">## 1 Arge…  2000         1 Fernando … Masculino                   40.1  14.0</span></span>
<span id="cb44-6"><a href="data.html#cb44-6"></a><span class="co">## 2 Arge…  2000         2 Fernando … Masculino                   16.4  14.0</span></span>
<span id="cb44-7"><a href="data.html#cb44-7"></a><span class="co">## 3 Arge…  2000         3 Fernando … Masculino                   24.0  14.0</span></span>
<span id="cb44-8"><a href="data.html#cb44-8"></a><span class="co">## # … with 706 more rows, and 4 more variables</span></span></code></pre></div>
<p>También es posible ejecutar filtros más complejos. Filtremos sólo las observaciones para el Cono Sur:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="data.html#cb45-1"></a><span class="kw">filter</span>(aprobacion, </span>
<span id="cb45-2"><a href="data.html#cb45-2"></a>       pais <span class="op">==</span><span class="st"> &quot;Argentina&quot;</span> <span class="op">|</span><span class="st"> </span>pais <span class="op">==</span><span class="st"> &quot;Chile&quot;</span> <span class="op">|</span><span class="st"> </span>pais <span class="op">==</span><span class="st"> &quot;Uruguay&quot;</span>)</span>
<span id="cb45-3"><a href="data.html#cb45-3"></a><span class="co">## # A tibble: 180 x 11</span></span>
<span id="cb45-4"><a href="data.html#cb45-4"></a><span class="co">##   pais   anio trimestre presidente presidente_gene… aprobacion_neta   pib</span></span>
<span id="cb45-5"><a href="data.html#cb45-5"></a><span class="co">##   &lt;chr&gt; &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;                      &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb45-6"><a href="data.html#cb45-6"></a><span class="co">## 1 Arge…  2000         1 Fernando … Masculino                   40.1  14.0</span></span>
<span id="cb45-7"><a href="data.html#cb45-7"></a><span class="co">## 2 Arge…  2000         2 Fernando … Masculino                   16.4  14.0</span></span>
<span id="cb45-8"><a href="data.html#cb45-8"></a><span class="co">## 3 Arge…  2000         3 Fernando … Masculino                   24.0  14.0</span></span>
<span id="cb45-9"><a href="data.html#cb45-9"></a><span class="co">## # … with 177 more rows, and 4 more variables</span></span></code></pre></div>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="data.html#cb46-1"></a><span class="co"># Lo mismo, pero con otro operador lógico:</span></span>
<span id="cb46-2"><a href="data.html#cb46-2"></a><span class="kw">filter</span>(aprobacion, pais <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Argentina&quot;</span>, <span class="st">&quot;Chile&quot;</span>, <span class="st">&quot;Uruguay&quot;</span>))</span>
<span id="cb46-3"><a href="data.html#cb46-3"></a><span class="co">## # A tibble: 180 x 11</span></span>
<span id="cb46-4"><a href="data.html#cb46-4"></a><span class="co">##   pais   anio trimestre presidente presidente_gene… aprobacion_neta   pib</span></span>
<span id="cb46-5"><a href="data.html#cb46-5"></a><span class="co">##   &lt;chr&gt; &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;                      &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb46-6"><a href="data.html#cb46-6"></a><span class="co">## 1 Arge…  2000         1 Fernando … Masculino                   40.1  14.0</span></span>
<span id="cb46-7"><a href="data.html#cb46-7"></a><span class="co">## 2 Arge…  2000         2 Fernando … Masculino                   16.4  14.0</span></span>
<span id="cb46-8"><a href="data.html#cb46-8"></a><span class="co">## 3 Arge…  2000         3 Fernando … Masculino                   24.0  14.0</span></span>
<span id="cb46-9"><a href="data.html#cb46-9"></a><span class="co">## # … with 177 more rows, and 4 more variables</span></span></code></pre></div>
<p>También podemos incluir pequeñas operaciones en nuestros filtros. Obtengamos todas las observaciones en las que la corrupción del ejecutivo sea mayor que la media de la muestra:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="data.html#cb47-1"></a><span class="kw">filter</span>(aprobacion, corrupcion <span class="op">&gt;</span><span class="st"> </span><span class="kw">mean</span>(corrupcion))</span>
<span id="cb47-2"><a href="data.html#cb47-2"></a><span class="co">## # A tibble: 252 x 11</span></span>
<span id="cb47-3"><a href="data.html#cb47-3"></a><span class="co">##   pais   anio trimestre presidente presidente_gene… aprobacion_neta   pib</span></span>
<span id="cb47-4"><a href="data.html#cb47-4"></a><span class="co">##   &lt;chr&gt; &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;                      &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb47-5"><a href="data.html#cb47-5"></a><span class="co">## 1 Arge…  2000         1 Fernando … Masculino                   40.1  14.0</span></span>
<span id="cb47-6"><a href="data.html#cb47-6"></a><span class="co">## 2 Arge…  2000         2 Fernando … Masculino                   16.4  14.0</span></span>
<span id="cb47-7"><a href="data.html#cb47-7"></a><span class="co">## 3 Arge…  2000         3 Fernando … Masculino                   24.0  14.0</span></span>
<span id="cb47-8"><a href="data.html#cb47-8"></a><span class="co">## # … with 249 more rows, and 4 more variables</span></span></code></pre></div>
<blockquote>
<p>Tip: Una advertencia práctica: no puedes buscar valores perdidos (NAs) con el intuitivo <code>== NA</code>. Necesitas usar la función <code>is.na()</code> que revisamos brevemente en la sección <a href="basic-r.html#basic-r-packages">1.4.3.3</a>. Nuestra base de datos no tiene valores perdidos, y por lo tanto un filtro como el siguiente no devolverá ninguna fila:</p>
</blockquote>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="data.html#cb48-1"></a><span class="kw">filter</span>(aprobacion, <span class="kw">is.na</span>(corrupcion))</span>
<span id="cb48-2"><a href="data.html#cb48-2"></a><span class="co">## # A tibble: 0 x 11</span></span>
<span id="cb48-3"><a href="data.html#cb48-3"></a><span class="co">## # … with 11 variables</span></span></code></pre></div>
<blockquote>
<p><strong>Ejercicio 2A.</strong> Seleccione sólo las dos columnas que registran el género del presidentee en la base de datos.</p>
<p><strong>Ejercicio 2B.</strong> Filtrar los datos para que contengan sólo observaciones del año 2000.</p>
</blockquote>
</div>
<div id="cambiar-el-orden-de-una-base-de-datos" class="section level3">
<h3><span class="header-section-number">2.3.4</span> Cambiar el orden de una base de datos</h3>
<p>Una de las operaciones más comunes con los bases de datos es clasificarlas según una variable de interés. Esto puede darnos pistas claras sobre nuestras observaciones. Podemos hacerlo gracias a la función <code>arrange()</code>. Por ejemplo, clasifiquemos las observaciones desde el país menos corrupto - hasta el más corrupto, por trimestre del año:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="data.html#cb49-1"></a><span class="kw">arrange</span>(aprobacion, corrupcion)</span>
<span id="cb49-2"><a href="data.html#cb49-2"></a><span class="co">## # A tibble: 1,020 x 11</span></span>
<span id="cb49-3"><a href="data.html#cb49-3"></a><span class="co">##   pais   anio trimestre presidente presidente_gene… aprobacion_neta   pib</span></span>
<span id="cb49-4"><a href="data.html#cb49-4"></a><span class="co">##   &lt;chr&gt; &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;                      &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb49-5"><a href="data.html#cb49-5"></a><span class="co">## 1 Nica…  2000         1 Arnoldo A… Masculino                   7.60  85.7</span></span>
<span id="cb49-6"><a href="data.html#cb49-6"></a><span class="co">## 2 Nica…  2000         2 Arnoldo A… Masculino                   7.57  85.7</span></span>
<span id="cb49-7"><a href="data.html#cb49-7"></a><span class="co">## 3 Nica…  2000         3 Arnoldo A… Masculino                   3.87  85.7</span></span>
<span id="cb49-8"><a href="data.html#cb49-8"></a><span class="co">## # … with 1,017 more rows, and 4 more variables</span></span></code></pre></div>
<p>Si quisiéramos ordenarlas a la inversa, tendríamos que añadir un - (signo menos) antes de la variable:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="data.html#cb50-1"></a><span class="kw">arrange</span>(aprobacion, <span class="op">-</span>corrupcion)</span>
<span id="cb50-2"><a href="data.html#cb50-2"></a><span class="co">## # A tibble: 1,020 x 11</span></span>
<span id="cb50-3"><a href="data.html#cb50-3"></a><span class="co">##   pais   anio trimestre presidente presidente_gene… aprobacion_neta   pib</span></span>
<span id="cb50-4"><a href="data.html#cb50-4"></a><span class="co">##   &lt;chr&gt; &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;                      &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb50-5"><a href="data.html#cb50-5"></a><span class="co">## 1 Bras…  2014         1 Dilma Van… Femenino                    22.6  27.3</span></span>
<span id="cb50-6"><a href="data.html#cb50-6"></a><span class="co">## 2 Bras…  2014         2 Dilma Van… Femenino                    12.6  27.3</span></span>
<span id="cb50-7"><a href="data.html#cb50-7"></a><span class="co">## 3 Bras…  2014         3 Dilma Van… Femenino                    16.2  27.3</span></span>
<span id="cb50-8"><a href="data.html#cb50-8"></a><span class="co">## # … with 1,017 more rows, and 4 more variables</span></span></code></pre></div>
<p>Para utilizar un orden alfabético inverso (de la Z a la A), tenemos que utilizar la función <code>desc()</code>.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="data.html#cb51-1"></a><span class="kw">arrange</span>(aprobacion, <span class="kw">desc</span>(presidente))</span>
<span id="cb51-2"><a href="data.html#cb51-2"></a><span class="co">## # A tibble: 1,020 x 11</span></span>
<span id="cb51-3"><a href="data.html#cb51-3"></a><span class="co">##   pais   anio trimestre presidente presidente_gene… aprobacion_neta   pib</span></span>
<span id="cb51-4"><a href="data.html#cb51-4"></a><span class="co">##   &lt;chr&gt; &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;                      &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb51-5"><a href="data.html#cb51-5"></a><span class="co">## 1 Méxi…  2001         1 Vicente F… Masculino                   53.8  37.6</span></span>
<span id="cb51-6"><a href="data.html#cb51-6"></a><span class="co">## 2 Méxi…  2001         2 Vicente F… Masculino                   40.7  37.6</span></span>
<span id="cb51-7"><a href="data.html#cb51-7"></a><span class="co">## 3 Méxi…  2001         3 Vicente F… Masculino                   40.1  37.6</span></span>
<span id="cb51-8"><a href="data.html#cb51-8"></a><span class="co">## # … with 1,017 more rows, and 4 more variables</span></span></code></pre></div>
<p>Por último, podemos clasificar la base de datos por más de una variable. Esto es, ordenar los datos según la primera variable, y luego ordenarla según una segunda variable. Examinemos el siguiente ejemplo:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="data.html#cb52-1"></a><span class="kw">arrange</span>(aprobacion, presidente_genero, <span class="op">-</span>aprobacion_neta)</span>
<span id="cb52-2"><a href="data.html#cb52-2"></a><span class="co">## # A tibble: 1,020 x 11</span></span>
<span id="cb52-3"><a href="data.html#cb52-3"></a><span class="co">##   pais   anio trimestre presidente presidente_gene… aprobacion_neta   pib</span></span>
<span id="cb52-4"><a href="data.html#cb52-4"></a><span class="co">##   &lt;chr&gt; &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;                      &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb52-5"><a href="data.html#cb52-5"></a><span class="co">## 1 Bras…  2013         1 Dilma Van… Femenino                    62.5  27.3</span></span>
<span id="cb52-6"><a href="data.html#cb52-6"></a><span class="co">## 2 Bras…  2012         4 Dilma Van… Femenino                    60.9  33.4</span></span>
<span id="cb52-7"><a href="data.html#cb52-7"></a><span class="co">## 3 Bras…  2012         2 Dilma Van… Femenino                    60.5  33.4</span></span>
<span id="cb52-8"><a href="data.html#cb52-8"></a><span class="co">## # … with 1,017 more rows, and 4 more variables</span></span></code></pre></div>
</div>
<div id="transformar-y-crear-variables" class="section level3">
<h3><span class="header-section-number">2.3.5</span> Transformar y crear variables</h3>
<p>La mayoría de las veces queremos crear nuevas variables a partir de las que ya tenemos. Supongamos que quisiéramos transformar la escala de población (<code>poblacion</code>) en millones:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="data.html#cb53-1"></a><span class="kw">mutate</span>(aprobacion, <span class="dt">poblacion_mill =</span> poblacion <span class="op">/</span><span class="st"> </span><span class="dv">1000000</span>)</span>
<span id="cb53-2"><a href="data.html#cb53-2"></a><span class="co">## # A tibble: 1,020 x 12</span></span>
<span id="cb53-3"><a href="data.html#cb53-3"></a><span class="co">##   pais   anio trimestre presidente presidente_gene… aprobacion_neta   pib</span></span>
<span id="cb53-4"><a href="data.html#cb53-4"></a><span class="co">##   &lt;chr&gt; &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;                      &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb53-5"><a href="data.html#cb53-5"></a><span class="co">## 1 Arge…  2000         1 Fernando … Masculino                   40.1  14.0</span></span>
<span id="cb53-6"><a href="data.html#cb53-6"></a><span class="co">## 2 Arge…  2000         2 Fernando … Masculino                   16.4  14.0</span></span>
<span id="cb53-7"><a href="data.html#cb53-7"></a><span class="co">## 3 Arge…  2000         3 Fernando … Masculino                   24.0  14.0</span></span>
<span id="cb53-8"><a href="data.html#cb53-8"></a><span class="co">## # … with 1,017 more rows, and 5 more variables</span></span></code></pre></div>
<p>El comando anterior genera una nueva variable en la base de datos, <code>pop_mill</code>, que es <code>poblacion</code> pero en la escala de millones. Podemos ejecutar todo tipo de operaciones en nuestras columnas, como crear una variable PIB en una escala logarítmica:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="data.html#cb54-1"></a><span class="kw">mutate</span>(aprobacion, <span class="dt">log_gdp =</span> <span class="kw">log</span>(pib))</span>
<span id="cb54-2"><a href="data.html#cb54-2"></a><span class="co">## # A tibble: 1,020 x 12</span></span>
<span id="cb54-3"><a href="data.html#cb54-3"></a><span class="co">##   pais   anio trimestre presidente presidente_gene… aprobacion_neta   pib</span></span>
<span id="cb54-4"><a href="data.html#cb54-4"></a><span class="co">##   &lt;chr&gt; &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;                      &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb54-5"><a href="data.html#cb54-5"></a><span class="co">## 1 Arge…  2000         1 Fernando … Masculino                   40.1  14.0</span></span>
<span id="cb54-6"><a href="data.html#cb54-6"></a><span class="co">## 2 Arge…  2000         2 Fernando … Masculino                   16.4  14.0</span></span>
<span id="cb54-7"><a href="data.html#cb54-7"></a><span class="co">## 3 Arge…  2000         3 Fernando … Masculino                   24.0  14.0</span></span>
<span id="cb54-8"><a href="data.html#cb54-8"></a><span class="co">## # … with 1,017 more rows, and 5 more variables</span></span></code></pre></div>
<p>También podemos crear nuevas variables a partir de operaciones entre variables. Por ejemplo, calculamos el PIB <em>per cápita</em>, lo que nos permite comparar mejor los países con diferentes poblaciones:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="data.html#cb55-1"></a><span class="kw">mutate</span>(aprobacion, <span class="dt">pib_pc =</span> pib <span class="op">/</span><span class="st"> </span>poblacion)</span>
<span id="cb55-2"><a href="data.html#cb55-2"></a><span class="co">## # A tibble: 1,020 x 12</span></span>
<span id="cb55-3"><a href="data.html#cb55-3"></a><span class="co">##   pais   anio trimestre presidente presidente_gene… aprobacion_neta   pib</span></span>
<span id="cb55-4"><a href="data.html#cb55-4"></a><span class="co">##   &lt;chr&gt; &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;                      &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb55-5"><a href="data.html#cb55-5"></a><span class="co">## 1 Arge…  2000         1 Fernando … Masculino                   40.1  14.0</span></span>
<span id="cb55-6"><a href="data.html#cb55-6"></a><span class="co">## 2 Arge…  2000         2 Fernando … Masculino                   16.4  14.0</span></span>
<span id="cb55-7"><a href="data.html#cb55-7"></a><span class="co">## 3 Arge…  2000         3 Fernando … Masculino                   24.0  14.0</span></span>
<span id="cb55-8"><a href="data.html#cb55-8"></a><span class="co">## # … with 1,017 more rows, and 5 more variables</span></span></code></pre></div>
<p>Por último, también podemos generar más de una transformación a la vez con <code>mutate()</code>, utilizando múltiples argumentos:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="data.html#cb56-1"></a><span class="kw">mutate</span>(aprobacion,</span>
<span id="cb56-2"><a href="data.html#cb56-2"></a>       <span class="dt">pop_mill =</span> poblacion <span class="op">/</span><span class="st"> </span><span class="dv">1000000</span>,</span>
<span id="cb56-3"><a href="data.html#cb56-3"></a>       <span class="dt">pib_pc =</span> pib <span class="op">/</span><span class="st"> </span>poblacion)</span>
<span id="cb56-4"><a href="data.html#cb56-4"></a><span class="co">## # A tibble: 1,020 x 13</span></span>
<span id="cb56-5"><a href="data.html#cb56-5"></a><span class="co">##   pais   anio trimestre presidente presidente_gene… aprobacion_neta   pib</span></span>
<span id="cb56-6"><a href="data.html#cb56-6"></a><span class="co">##   &lt;chr&gt; &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;                      &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb56-7"><a href="data.html#cb56-7"></a><span class="co">## 1 Arge…  2000         1 Fernando … Masculino                   40.1  14.0</span></span>
<span id="cb56-8"><a href="data.html#cb56-8"></a><span class="co">## 2 Arge…  2000         2 Fernando … Masculino                   16.4  14.0</span></span>
<span id="cb56-9"><a href="data.html#cb56-9"></a><span class="co">## 3 Arge…  2000         3 Fernando … Masculino                   24.0  14.0</span></span>
<span id="cb56-10"><a href="data.html#cb56-10"></a><span class="co">## # … with 1,017 more rows, and 6 more variables</span></span></code></pre></div>
<blockquote>
<p><strong>Ejercicio 2C.</strong> Crear una nueva base, que está ordenada por país-trimestre del año con menos aprobación presidencial al de más alto nivel (recuerde crear un nuevo objeto y darle un nombre descriptivo). En tu nuevo objeto, conserva sólo las observaciones con mujeres como presidenteas.</p>
<p><strong>Ejercicio 2D.</strong> Crear una nueva variable, que registre el desempleo como proporción en lugar de como porcentaje.</p>
</blockquote>
</div>
<div id="resúmenes" class="section level3">
<h3><span class="header-section-number">2.3.6</span> Resúmenes</h3>
<p>Podemos hacer resúmenes para nuestros bases de datos con <code>summarize</code>:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="data.html#cb57-1"></a><span class="kw">summarize</span>(aprobacion, <span class="dt">desempleo_medio =</span> <span class="kw">mean</span>(desempleo))</span>
<span id="cb57-2"><a href="data.html#cb57-2"></a><span class="co">## # A tibble: 1 x 1</span></span>
<span id="cb57-3"><a href="data.html#cb57-3"></a><span class="co">##   desempleo_medio</span></span>
<span id="cb57-4"><a href="data.html#cb57-4"></a><span class="co">##             &lt;dbl&gt;</span></span>
<span id="cb57-5"><a href="data.html#cb57-5"></a><span class="co">## 1            7.04</span></span></code></pre></div>
<p>Este proceso a menudo se llama <em>colapsar</em> la base de datos: estamos comprimiendo la información de las filas para generar una sola fila de resumen. En este caso, la función de colapso <code>mean()</code> opera en el vector <code>desempleo</code> para obtener su media.</p>
<p>Como en las otras operaciones, podemos hacer varios resúmenes a la vez:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="data.html#cb58-1"></a><span class="kw">summarize</span>(aprobacion,</span>
<span id="cb58-2"><a href="data.html#cb58-2"></a>          <span class="dt">desempleo_medio   =</span> <span class="kw">mean</span>(desempleo),</span>
<span id="cb58-3"><a href="data.html#cb58-3"></a>          <span class="dt">crecimiento_medio =</span> <span class="kw">mean</span>(crecimiento_pib),</span>
<span id="cb58-4"><a href="data.html#cb58-4"></a>          <span class="dt">aprobacion_media  =</span> <span class="kw">mean</span>(aprobacion_neta))</span>
<span id="cb58-5"><a href="data.html#cb58-5"></a><span class="co">## # A tibble: 1 x 3</span></span>
<span id="cb58-6"><a href="data.html#cb58-6"></a><span class="co">##   desempleo_medio crecimiento_medio aprobacion_media</span></span>
<span id="cb58-7"><a href="data.html#cb58-7"></a><span class="co">##             &lt;dbl&gt;             &lt;dbl&gt;            &lt;dbl&gt;</span></span>
<span id="cb58-8"><a href="data.html#cb58-8"></a><span class="co">## 1            7.04              3.77             15.3</span></span></code></pre></div>
</div>
<div id="resúmenes-por-grupo" class="section level3">
<h3><span class="header-section-number">2.3.7</span> Resúmenes por grupo</h3>
<p>¡Esta es una función muy divertida! Esta tarea consiste en colapsar filas hasta obtener una fila por observación que resuma la información de los diferentes grupos de la base.</p>
<p>Para ello, primero necesitamos tener variables que agrupen nuestras observaciones (partido, país, región, etc.). Le haremos saber a R cuál es la variable que estamos agrupando nuestras observaciones, y este nuevo conjunto de datos será el mismo que el original, pero R sabrá que las próximas operaciones que hagamos necesitan ser agrupadas.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="data.html#cb59-1"></a>aprobacion_por_pais &lt;-<span class="st"> </span><span class="kw">group_by</span>(aprobacion, pais)</span></code></pre></div>
<p>Hagamos una operación de resumen en este nuevo objeto:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="data.html#cb60-1"></a><span class="kw">summarize</span>(aprobacion,</span>
<span id="cb60-2"><a href="data.html#cb60-2"></a>          <span class="dt">desempleo_medio   =</span> <span class="kw">mean</span>(desempleo),</span>
<span id="cb60-3"><a href="data.html#cb60-3"></a>          <span class="dt">crecimiento_medio =</span> <span class="kw">mean</span>(crecimiento_pib),</span>
<span id="cb60-4"><a href="data.html#cb60-4"></a>          <span class="dt">aprobacion_media  =</span> <span class="kw">mean</span>(aprobacion_neta))</span>
<span id="cb60-5"><a href="data.html#cb60-5"></a><span class="co">## # A tibble: 1 x 3</span></span>
<span id="cb60-6"><a href="data.html#cb60-6"></a><span class="co">##   desempleo_medio crecimiento_medio aprobacion_media</span></span>
<span id="cb60-7"><a href="data.html#cb60-7"></a><span class="co">##             &lt;dbl&gt;             &lt;dbl&gt;            &lt;dbl&gt;</span></span>
<span id="cb60-8"><a href="data.html#cb60-8"></a><span class="co">## 1            7.04              3.77             15.3</span></span></code></pre></div>
<p>Los grupos también pueden ser combinaciones de variables. Por ejemplo, nuestra base de datos a nivel de país-año-cuarimestre puede ser agrupado por país-año, y entonces podemos obtener el mismo cálculo previo:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="data.html#cb61-1"></a>aprobacion_por_pais_anio &lt;-<span class="st"> </span><span class="kw">group_by</span>(aprobacion, </span>
<span id="cb61-2"><a href="data.html#cb61-2"></a>                                      pais, anio)</span>
<span id="cb61-3"><a href="data.html#cb61-3"></a><span class="kw">summarize</span>(aprobacion_por_pais,</span>
<span id="cb61-4"><a href="data.html#cb61-4"></a>          <span class="dt">desempleo_mean =</span> <span class="kw">mean</span>(desempleo),</span>
<span id="cb61-5"><a href="data.html#cb61-5"></a>          <span class="dt">crecimiento_pib_mean =</span> <span class="kw">mean</span>(crecimiento_pib),</span>
<span id="cb61-6"><a href="data.html#cb61-6"></a>          <span class="dt">approv_mean =</span> <span class="kw">mean</span>(aprobacion_neta))</span>
<span id="cb61-7"><a href="data.html#cb61-7"></a><span class="co">## # A tibble: 17 x 4</span></span>
<span id="cb61-8"><a href="data.html#cb61-8"></a><span class="co">##   pais      desempleo_mean crecimiento_pib_mean approv_mean</span></span>
<span id="cb61-9"><a href="data.html#cb61-9"></a><span class="co">##   &lt;chr&gt;              &lt;dbl&gt;                &lt;dbl&gt;       &lt;dbl&gt;</span></span>
<span id="cb61-10"><a href="data.html#cb61-10"></a><span class="co">## 1 Argentina          11.0                  2.72        16.7</span></span>
<span id="cb61-11"><a href="data.html#cb61-11"></a><span class="co">## 2 Bolivia             3.70                 4.24        11.3</span></span>
<span id="cb61-12"><a href="data.html#cb61-12"></a><span class="co">## 3 Brasil              8.35                 3.4         34.2</span></span>
<span id="cb61-13"><a href="data.html#cb61-13"></a><span class="co">## # … with 14 more rows</span></span></code></pre></div>
<p>Por cierto, podemos desagrupar un conjunto de datos con <code>ungroup()</code>. Es una gran idea si no queremos seguir ejecutando operaciones agrupadas, evitando errores:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="data.html#cb62-1"></a>aprobacion_por_pais_anio <span class="op">%&gt;%</span></span>
<span id="cb62-2"><a href="data.html#cb62-2"></a><span class="st">  </span><span class="kw">ungroup</span>() <span class="co"># nota que ya no hay &quot;grupos&quot; en el resumen de datos</span></span>
<span id="cb62-3"><a href="data.html#cb62-3"></a><span class="co">## # A tibble: 1,020 x 11</span></span>
<span id="cb62-4"><a href="data.html#cb62-4"></a><span class="co">##   pais   anio trimestre presidente presidente_gene… aprobacion_neta   pib</span></span>
<span id="cb62-5"><a href="data.html#cb62-5"></a><span class="co">##   &lt;chr&gt; &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;                      &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb62-6"><a href="data.html#cb62-6"></a><span class="co">## 1 Arge…  2000         1 Fernando … Masculino                   40.1  14.0</span></span>
<span id="cb62-7"><a href="data.html#cb62-7"></a><span class="co">## 2 Arge…  2000         2 Fernando … Masculino                   16.4  14.0</span></span>
<span id="cb62-8"><a href="data.html#cb62-8"></a><span class="co">## 3 Arge…  2000         3 Fernando … Masculino                   24.0  14.0</span></span>
<span id="cb62-9"><a href="data.html#cb62-9"></a><span class="co">## # … with 1,017 more rows, and 4 more variables</span></span></code></pre></div>
</div>
</div>
<div id="comandos-en-cadena" class="section level2">
<h2><span class="header-section-number">2.4</span> Comandos en cadena</h2>
<p>La mayoría de las veces queremos hacer <strong>más de una operación</strong> sobre una base. Por ejemplo, podríamos querer (a) crear una nueva variable del PIB per cápita, y luego (b) filtrar las observaciones con valores iguales o mayores que el PIB medio per cápita de la muestra:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="data.html#cb63-1"></a>aprobacion_con_pib_pc &lt;-<span class="st"> </span><span class="kw">mutate</span>(aprobacion,</span>
<span id="cb63-2"><a href="data.html#cb63-2"></a>                                <span class="dt">pib_pc =</span> pib <span class="op">/</span><span class="st"> </span>poblacion)</span>
<span id="cb63-3"><a href="data.html#cb63-3"></a></span>
<span id="cb63-4"><a href="data.html#cb63-4"></a><span class="kw">filter</span>(aprobacion_con_pib_pc, pib_pc <span class="op">&gt;</span><span class="st"> </span><span class="kw">mean</span>(pib_pc))</span>
<span id="cb63-5"><a href="data.html#cb63-5"></a><span class="co">## # A tibble: 344 x 12</span></span>
<span id="cb63-6"><a href="data.html#cb63-6"></a><span class="co">##   pais   anio trimestre presidente presidente_gene… aprobacion_neta   pib</span></span>
<span id="cb63-7"><a href="data.html#cb63-7"></a><span class="co">##   &lt;chr&gt; &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;                      &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb63-8"><a href="data.html#cb63-8"></a><span class="co">## 1 Boli…  2000         1 Hugo Banz… Masculino                  -19.0  60.5</span></span>
<span id="cb63-9"><a href="data.html#cb63-9"></a><span class="co">## 2 Boli…  2000         2 Hugo Banz… Masculino                  -19.0  60.5</span></span>
<span id="cb63-10"><a href="data.html#cb63-10"></a><span class="co">## 3 Boli…  2000         3 Hugo Banz… Masculino                  -23.8  60.5</span></span>
<span id="cb63-11"><a href="data.html#cb63-11"></a><span class="co">## # … with 341 more rows, and 5 more variables</span></span></code></pre></div>
<p>La misma cadena de operaciones puede escribirse de la siguiente manera en lenguaje “tidy”:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="data.html#cb64-1"></a>aprobacion <span class="op">%&gt;%</span></span>
<span id="cb64-2"><a href="data.html#cb64-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">pib_pc =</span> pib <span class="op">/</span><span class="st"> </span>poblacion) <span class="op">%&gt;%</span></span>
<span id="cb64-3"><a href="data.html#cb64-3"></a><span class="st">  </span><span class="kw">filter</span>(pib_pc <span class="op">&gt;</span><span class="st"> </span><span class="kw">mean</span>(pib_pc)) </span>
<span id="cb64-4"><a href="data.html#cb64-4"></a><span class="co">## # A tibble: 344 x 12</span></span>
<span id="cb64-5"><a href="data.html#cb64-5"></a><span class="co">##   pais   anio trimestre presidente presidente_gene… aprobacion_neta   pib</span></span>
<span id="cb64-6"><a href="data.html#cb64-6"></a><span class="co">##   &lt;chr&gt; &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;                      &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb64-7"><a href="data.html#cb64-7"></a><span class="co">## 1 Boli…  2000         1 Hugo Banz… Masculino                  -19.0  60.5</span></span>
<span id="cb64-8"><a href="data.html#cb64-8"></a><span class="co">## 2 Boli…  2000         2 Hugo Banz… Masculino                  -19.0  60.5</span></span>
<span id="cb64-9"><a href="data.html#cb64-9"></a><span class="co">## 3 Boli…  2000         3 Hugo Banz… Masculino                  -23.8  60.5</span></span>
<span id="cb64-10"><a href="data.html#cb64-10"></a><span class="co">## # … with 341 more rows, and 5 more variables</span></span></code></pre></div>
<p>¡Este código es sorprendentemente legible! Las pipas (<code>%&gt;%</code>) se leen como “entonces” (o “pero entonces”), y se pueden insertar con Ctrl o Cmd + Shift + M en RStudio<a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a>. A continuación se reproduce nuestro código anterior en español:</p>
<blockquote>
<p>Tomar el conjunto de datos “aprobacion”, <em>entonces</em> generar una nueva variable llamada “pib_pc” (la división entre “pib” y “poblacion”) y <em>entonces</em> filtrar las observaciones para que sólo queden aquellas en las que “pib_pc” sea mayor que la media.</p>
</blockquote>
<p>Uno de los usos más comunes de las pipes es el combo <code>group_by()</code>+ <code>summarize()</code>. Repitamos nuestras operaciones anteriores para hacer un resumen agrupado:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="data.html#cb65-1"></a>aprobacion <span class="op">%&gt;%</span></span>
<span id="cb65-2"><a href="data.html#cb65-2"></a><span class="st">  </span><span class="kw">group_by</span>(pais) <span class="op">%&gt;%</span></span>
<span id="cb65-3"><a href="data.html#cb65-3"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">desempleo_medio   =</span> <span class="kw">mean</span>(desempleo),</span>
<span id="cb65-4"><a href="data.html#cb65-4"></a>            <span class="dt">crecimiento_medio =</span> <span class="kw">mean</span>(crecimiento_pib),</span>
<span id="cb65-5"><a href="data.html#cb65-5"></a>            <span class="dt">aprobacion_media  =</span> <span class="kw">mean</span>(aprobacion_neta))</span>
<span id="cb65-6"><a href="data.html#cb65-6"></a><span class="co">## # A tibble: 17 x 4</span></span>
<span id="cb65-7"><a href="data.html#cb65-7"></a><span class="co">##   pais      desempleo_medio crecimiento_medio aprobacion_media</span></span>
<span id="cb65-8"><a href="data.html#cb65-8"></a><span class="co">##   &lt;chr&gt;               &lt;dbl&gt;             &lt;dbl&gt;            &lt;dbl&gt;</span></span>
<span id="cb65-9"><a href="data.html#cb65-9"></a><span class="co">## 1 Argentina           11.0               2.72             16.7</span></span>
<span id="cb65-10"><a href="data.html#cb65-10"></a><span class="co">## 2 Bolivia              3.70              4.24             11.3</span></span>
<span id="cb65-11"><a href="data.html#cb65-11"></a><span class="co">## 3 Brasil               8.35              3.4              34.2</span></span>
<span id="cb65-12"><a href="data.html#cb65-12"></a><span class="co">## # … with 14 more rows</span></span></code></pre></div>
<blockquote>
<p><strong>Ejercicio 3E.</strong> Calcular, con la ayuda de las pipas, la corrupción del ejecutivo medio y el PIB por país. Recuerde que puede insertar tuberías con Ctrl o Cmd + Shift + M.</p>
<p><strong>Ejercicio 3F.</strong> Una vez más, utilizando pipas, clasifique los países de la base de datos desde el que obtuvo el mayor promedio de PIB per cápita en el período 2010-2014 hasta el más bajo.</p>
<p><strong>Ejercicio 3G.</strong> ¿Qué cuatrimestre del año, entre los gobernados por mujeres presidenteas, tuvo la corrupción más alta? ¿Y la mayor aprobación neta?</p>
</blockquote>
</div>
<div id="data-recodificar" class="section level2">
<h2><span class="header-section-number">2.5</span> Recodificar valores</h2>
<p>Un ejercicio común en la gestión de bases de datos es la generación de variables (o la edición de las ya existentes) basadas en ciertas condiciones lógicas. Ya construimos condiciones lógicas antes de usar <code>filter()</code>, así que la sintaxis general debería ser familiar. Por ejemplo, podríamos querer registrar los valores de una variable categórica binaria como ceros y unos, creando una variable <em>dummy</em>. Esto es fácil gracias al comando <code>if_else()</code>. Podemos especificar la condición lógica (<code>presidente_genero==female</code>), y luego los valores que se asignarán cuando se cumpla esta condición (<code>1</code>) o no (<code>0</code>):</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="data.html#cb66-1"></a>aprobacion <span class="op">%&gt;%</span></span>
<span id="cb66-2"><a href="data.html#cb66-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">d_pres_mujer =</span> <span class="kw">if_else</span>(<span class="dt">condition =</span> presidente_genero <span class="op">==</span><span class="st"> &quot;female&quot;</span>,</span>
<span id="cb66-3"><a href="data.html#cb66-3"></a>                                <span class="dt">true      =</span> <span class="dv">1</span>,</span>
<span id="cb66-4"><a href="data.html#cb66-4"></a>                                <span class="dt">false     =</span> <span class="dv">0</span>)) <span class="op">%&gt;%</span></span>
<span id="cb66-5"><a href="data.html#cb66-5"></a><span class="st">  </span><span class="kw">select</span>(pais<span class="op">:</span>presidente, presidente_genero, d_pres_mujer) <span class="co"># para legibilidad</span></span>
<span id="cb66-6"><a href="data.html#cb66-6"></a><span class="co">## # A tibble: 1,020 x 6</span></span>
<span id="cb66-7"><a href="data.html#cb66-7"></a><span class="co">##   pais      anio trimestre presidente       presidente_gene… d_pres_mujer</span></span>
<span id="cb66-8"><a href="data.html#cb66-8"></a><span class="co">##   &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;                   &lt;dbl&gt;</span></span>
<span id="cb66-9"><a href="data.html#cb66-9"></a><span class="co">## 1 Argenti…  2000         1 Fernando de la … Masculino                   0</span></span>
<span id="cb66-10"><a href="data.html#cb66-10"></a><span class="co">## 2 Argenti…  2000         2 Fernando de la … Masculino                   0</span></span>
<span id="cb66-11"><a href="data.html#cb66-11"></a><span class="co">## 3 Argenti…  2000         3 Fernando de la … Masculino                   0</span></span>
<span id="cb66-12"><a href="data.html#cb66-12"></a><span class="co">## # … with 1,017 more rows</span></span></code></pre></div>
<p>Es posible especificar condiciones lógicas más complejas, como en <code>filter()</code>. Por ejemplo, generemos una variable <em>dummy</em> para los países-años-cuatrimestre en crisis económica, definida como: el crecimiento del PIB es negativo y/o la tasa de desempleo es superior al 20%. Bajo esta simple clasificación, Argentina estaría en crisis en 2001 y en 2010:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="data.html#cb67-1"></a>aprobacion <span class="op">%&gt;%</span></span>
<span id="cb67-2"><a href="data.html#cb67-2"></a><span class="st">  </span><span class="co"># No explicamos los argumentos para hacer el código conciso:</span></span>
<span id="cb67-3"><a href="data.html#cb67-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">d_crisis_ec =</span> <span class="kw">if_else</span>(crecimiento_pib <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">|</span><span class="st"> </span>desempleo <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span>, <span class="dv">1</span>, <span class="dv">0</span>)) <span class="op">%&gt;%</span></span>
<span id="cb67-4"><a href="data.html#cb67-4"></a><span class="st">  </span><span class="co"># Lo siguiente es sólo para mostrar los resultados más claramente:</span></span>
<span id="cb67-5"><a href="data.html#cb67-5"></a><span class="st">  </span><span class="kw">select</span>(pais<span class="op">:</span>trimestre, crecimiento_pib, desempleo, d_crisis_ec) <span class="op">%&gt;%</span></span>
<span id="cb67-6"><a href="data.html#cb67-6"></a><span class="st">  </span><span class="kw">filter</span>(pais <span class="op">==</span><span class="st"> &quot;Argentina&quot;</span> <span class="op">&amp;</span><span class="st"> </span>anio <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">2001</span>, <span class="dv">2013</span>))</span>
<span id="cb67-7"><a href="data.html#cb67-7"></a><span class="co">## # A tibble: 8 x 6</span></span>
<span id="cb67-8"><a href="data.html#cb67-8"></a><span class="co">##   pais       anio trimestre crecimiento_pib desempleo d_crisis_ec</span></span>
<span id="cb67-9"><a href="data.html#cb67-9"></a><span class="co">##   &lt;chr&gt;     &lt;dbl&gt;     &lt;dbl&gt;           &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;</span></span>
<span id="cb67-10"><a href="data.html#cb67-10"></a><span class="co">## 1 Argentina  2001         1            -4.4      18.3           1</span></span>
<span id="cb67-11"><a href="data.html#cb67-11"></a><span class="co">## 2 Argentina  2001         2            -4.4      18.3           1</span></span>
<span id="cb67-12"><a href="data.html#cb67-12"></a><span class="co">## 3 Argentina  2001         3            -4.4      18.3           1</span></span>
<span id="cb67-13"><a href="data.html#cb67-13"></a><span class="co">## # … with 5 more rows</span></span></code></pre></div>
<p>Sin embargo, <code>if_else()</code> a menudo no es lo suficientemente flexible, ya que sólo permite asignar dos valores basados en una condición lógica. ¿Qué pasa si la variable que queremos crear puede asumir más de dos valores? Por ejemplo, podríamos querer una variable que divida nuestras observaciones en tres categorías, según el país: “Cono Sur” (Argentina, Chile, Uruguay), “Centroamérica” y “Resto de AL”. Para empezar, examinemos los valores que la variable “pais” puede asumir:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="data.html#cb68-1"></a><span class="kw">unique</span>(aprobacion<span class="op">$</span>pais)</span>
<span id="cb68-2"><a href="data.html#cb68-2"></a><span class="co">##  [1] &quot;Argentina&quot;   &quot;Bolivia&quot;     &quot;Brasil&quot;      &quot;Chile&quot;      </span></span>
<span id="cb68-3"><a href="data.html#cb68-3"></a><span class="co">##  [5] &quot;Colombia&quot;    &quot;Costa Rica&quot;  &quot;Ecuador&quot;     &quot;El Salvador&quot;</span></span>
<span id="cb68-4"><a href="data.html#cb68-4"></a><span class="co">##  [9] &quot;Guatemala&quot;   &quot;Honduras&quot;    &quot;México&quot;      &quot;Nicaragua&quot;  </span></span>
<span id="cb68-5"><a href="data.html#cb68-5"></a><span class="co">## [13] &quot;Panamá&quot;      &quot;Paraguay&quot;    &quot;Perú&quot;        &quot;Uruguay&quot;    </span></span>
<span id="cb68-6"><a href="data.html#cb68-6"></a><span class="co">## [17] &quot;Venezuela&quot;</span></span></code></pre></div>
<p><code>if_else()</code> no nos permitiría generar esta nueva variable, pero su función hermana <code>case_when()</code> sí lo permite.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="data.html#cb69-1"></a>aprobacion <span class="op">%&gt;%</span></span>
<span id="cb69-2"><a href="data.html#cb69-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">grupo_de_paises =</span> <span class="kw">case_when</span>(</span>
<span id="cb69-3"><a href="data.html#cb69-3"></a>    pais <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Argentina&quot;</span>, <span class="st">&quot;Chile&quot;</span>, <span class="st">&quot;Uruguay&quot;</span>) <span class="op">~</span><span class="st"> &quot;Cono Sur&quot;</span>,</span>
<span id="cb69-4"><a href="data.html#cb69-4"></a>    pais <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Costa Rica&quot;</span>, <span class="st">&quot;El Salvador&quot;</span>, <span class="st">&quot;Guatemala&quot;</span>, <span class="st">&quot;Honduras&quot;</span>,</span>
<span id="cb69-5"><a href="data.html#cb69-5"></a>                   <span class="st">&quot;Nicaragua&quot;</span>, <span class="st">&quot;Panama&quot;</span>) <span class="op">~</span><span class="st"> &quot;Centroamérica&quot;</span>,</span>
<span id="cb69-6"><a href="data.html#cb69-6"></a>    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> &quot;Resto de AL&quot;</span></span>
<span id="cb69-7"><a href="data.html#cb69-7"></a>  )) <span class="op">%&gt;%</span><span class="st">  </span></span>
<span id="cb69-8"><a href="data.html#cb69-8"></a><span class="st">  </span><span class="co"># reduciremos la base de datos para ver mejor los resultados:</span></span>
<span id="cb69-9"><a href="data.html#cb69-9"></a><span class="kw">filter</span>(anio <span class="op">==</span><span class="st"> </span><span class="dv">2000</span> <span class="op">&amp;</span><span class="st"> </span>trimestre <span class="op">==</span><span class="st"> </span><span class="dv">1</span>) <span class="op">%&gt;%</span></span>
<span id="cb69-10"><a href="data.html#cb69-10"></a><span class="st">  </span><span class="kw">select</span>(pais, grupo_de_paises) </span>
<span id="cb69-11"><a href="data.html#cb69-11"></a><span class="co">## # A tibble: 17 x 2</span></span>
<span id="cb69-12"><a href="data.html#cb69-12"></a><span class="co">##   pais      grupo_de_paises</span></span>
<span id="cb69-13"><a href="data.html#cb69-13"></a><span class="co">##   &lt;chr&gt;     &lt;chr&gt;          </span></span>
<span id="cb69-14"><a href="data.html#cb69-14"></a><span class="co">## 1 Argentina Cono Sur       </span></span>
<span id="cb69-15"><a href="data.html#cb69-15"></a><span class="co">## 2 Bolivia   Resto de AL    </span></span>
<span id="cb69-16"><a href="data.html#cb69-16"></a><span class="co">## 3 Brasil    Resto de AL    </span></span>
<span id="cb69-17"><a href="data.html#cb69-17"></a><span class="co">## # … with 14 more rows</span></span></code></pre></div>
<p>La nueva variable (<code>grupo_de_paises</code>) se construye sobre la base de múltiples condiciones lógicas, que se evalúan en orden. Si se cumple la primera condición (<code>pais %in% c("Argentina", "Chile", "Uruguay")</code>), se asigna el valor “Cono Sur” a la nueva variable. La condición lógica y el valor asignado se separan por un “~”<a href="#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a>, que se puede leer como “por lo tanto”. Lo mismo ocurrirá con la siguiente condición, que asignará “Centroamérica” si se cumple. Nuestro último argumento para <code>case_when()</code> tiene una condición lógica de gran alcance: <em>en todos los demás casos</em>, se aplicará el valor “Resto de AL”.</p>
<blockquote>
<p><strong>Ejercicio 2H.</strong> <code>if_else()</code> puede ser pensado como una versión reducida de <code>case_when</code>(): todo lo que hacemos con la primera función podría ser convertido en la sintaxis de la segunda. Traduzca uno de los ejemplos anteriores con <code>if_else()</code> a la sintaxis <code>case_when()</code>.</p>
<p><strong>Ejercicio 2I.</strong> Crea una nueva variable que separa los países en tres grupos: “América del Norte”, “América Central” y “América del Sur”.</p>
</blockquote>
<div id="pivoteo-de-datos-data-pivot" class="section level3">
<h3><span class="header-section-number">2.5.1</span> Pivoteo de datos {data-pivot}</h3>
<p>La estructura de la base anterior, donde las filas son las observaciones, las variables son las columnas, y la base de datos tiene sólo una unidad de observación, es la <em>estructura tidy</em> de la presentación de datos <span class="citation">(Wickham <a href="referencias.html#ref-wickhamTidyData2014" role="doc-biblioref">2014</a>)</span>. En general, R y el <code>tidyverse</code> funcionan muy bien bajo este formato, así que querremos usarlo cuando sea posible.</p>
<p>Sin embargo, los datos con los que trabajamos en el mundo real no siempre están disponibles en este formato. A menudo, otros formatos son más adecuados en contextos diferentes al análisis de datos, por ejemplo, las codificaciones manuales de la administración pública. Para empezar este ejemplo, creemos una base de datos a nivel de país-año con los niveles medios de aprobación presidencial:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="data.html#cb70-1"></a>aprobacion_anual &lt;-<span class="st"> </span>aprobacion <span class="op">%&gt;%</span></span>
<span id="cb70-2"><a href="data.html#cb70-2"></a><span class="st">  </span><span class="kw">group_by</span>(pais, anio) <span class="op">%&gt;%</span></span>
<span id="cb70-3"><a href="data.html#cb70-3"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">aprobacion_neta =</span> <span class="kw">mean</span>(aprobacion_neta)) <span class="op">%&gt;%</span></span>
<span id="cb70-4"><a href="data.html#cb70-4"></a><span class="st">  </span><span class="kw">ungroup</span>()</span>
<span id="cb70-5"><a href="data.html#cb70-5"></a></span>
<span id="cb70-6"><a href="data.html#cb70-6"></a>aprobacion_anual</span>
<span id="cb70-7"><a href="data.html#cb70-7"></a><span class="co">## # A tibble: 255 x 3</span></span>
<span id="cb70-8"><a href="data.html#cb70-8"></a><span class="co">##   pais       anio aprobacion_neta</span></span>
<span id="cb70-9"><a href="data.html#cb70-9"></a><span class="co">##   &lt;chr&gt;     &lt;dbl&gt;           &lt;dbl&gt;</span></span>
<span id="cb70-10"><a href="data.html#cb70-10"></a><span class="co">## 1 Argentina  2000            15.6</span></span>
<span id="cb70-11"><a href="data.html#cb70-11"></a><span class="co">## 2 Argentina  2001           -17.4</span></span>
<span id="cb70-12"><a href="data.html#cb70-12"></a><span class="co">## 3 Argentina  2002           -16.0</span></span>
<span id="cb70-13"><a href="data.html#cb70-13"></a><span class="co">## # … with 252 more rows</span></span></code></pre></div>
<p>Este conjunto de datos <em>tidy</em> puede ser presentado en diferentes formatos. El más común de ellos es el formato <em>ancho</em> o <em>wide</em><a href="#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a>, en el que una de las variables de identificación se distribuye entre las columnas (en este caso, “anio”). Ahora cargaremos el conjunto de datos en formato <em>ancho</em>, desde paquete del libro:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="data.html#cb71-1"></a><span class="kw">library</span>(paqueteadp)</span>
<span id="cb71-2"><a href="data.html#cb71-2"></a><span class="kw">data</span>(aprobacion_wide1) </span></code></pre></div>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="data.html#cb72-1"></a>aprobacion_wide1 </span>
<span id="cb72-2"><a href="data.html#cb72-2"></a><span class="co">## # A tibble: 17 x 16</span></span>
<span id="cb72-3"><a href="data.html#cb72-3"></a><span class="co">##   pais  `2000` `2001` `2002` `2003` `2004` `2005` `2006` `2007` `2008`</span></span>
<span id="cb72-4"><a href="data.html#cb72-4"></a><span class="co">##   &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb72-5"><a href="data.html#cb72-5"></a><span class="co">## 1 Arge…  15.6  -17.4  -16.0    32.6 48.5     43.8   45.9   34.3   9.52</span></span>
<span id="cb72-6"><a href="data.html#cb72-6"></a><span class="co">## 2 Boli… -18.8  -14.1   -5.77  -16.8 -0.301   24.5   34.7   28.1  16.9 </span></span>
<span id="cb72-7"><a href="data.html#cb72-7"></a><span class="co">## 3 Bras…  -8.72  -2.87   3.51   45.8 26.3     21.3   30.8   40.1  58.3 </span></span>
<span id="cb72-8"><a href="data.html#cb72-8"></a><span class="co">## # … with 14 more rows, and 6 more variables</span></span></code></pre></div>
<p>Esta base de datos contiene la misma información que la que creamos manualmente, sólo cambia su forma de presentación. Esta estructura <em>ancha</em> tiene algunos beneficios, el más destacado es su brevedad: los años no se repiten en múltiples celdas, como sucede en un conjunto de datos <em>tidy</em>. Para un codificador manual, este ahorro de espacio (y tiempo) resulta atractivo. Sin embargo, el formato <em>wide</em> tiene una mayor desventaja en comparación con el formato <em>tidy</em>: en su forma tradicional, sólo es posible registrar información para una variable por base de datos. En el caso del ejemplo, no hay una forma posible de añadir, por ejemplo, información sobre la corrupción de los años-país. Como hemos visto, este ejercicio es trivial en un conjunto de datos <em>tidy</em>, donde las variables pueden ser añadidas como columnas. Tener múltiples variables en nuestra base de datos es exactamente lo que necesitamos para generar análisis de datos sociales, donde exploramos las diferentes dimensiones de nuestros fenómenos de estudio.</p>
<p>Afortunadamente, el paquete <code>tidyr</code>, que se carga automáticamente con <code>tidyverse</code>, proporciona funciones que convierten rápidamente los datos de un formato <em>ancho</em> en una versión más amigable para el análisis. Este tipo de transformación de la estructura se llama a menudo “pivote”. La función clave aquí es <code>pivot_longer()</code>, que permite a un conjunto de datos pivotar en un formato vertical. El conjunto de datos que obtendremos es igual al conjunto de datos <em>tidy</em> que creamos antes:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="data.html#cb73-1"></a>aprobacion_wide1 <span class="op">%&gt;%</span></span>
<span id="cb73-2"><a href="data.html#cb73-2"></a><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="dt">cols =</span> <span class="op">-</span>pais, <span class="dt">names_to =</span> <span class="st">&quot;anio&quot;</span>, <span class="dt">values_to =</span> <span class="st">&quot;aprobacion_neta&quot;</span>)</span>
<span id="cb73-3"><a href="data.html#cb73-3"></a><span class="co">## # A tibble: 255 x 3</span></span>
<span id="cb73-4"><a href="data.html#cb73-4"></a><span class="co">##   pais      anio  aprobacion_neta</span></span>
<span id="cb73-5"><a href="data.html#cb73-5"></a><span class="co">##   &lt;chr&gt;     &lt;chr&gt;           &lt;dbl&gt;</span></span>
<span id="cb73-6"><a href="data.html#cb73-6"></a><span class="co">## 1 Argentina 2000             15.6</span></span>
<span id="cb73-7"><a href="data.html#cb73-7"></a><span class="co">## 2 Argentina 2001            -17.4</span></span>
<span id="cb73-8"><a href="data.html#cb73-8"></a><span class="co">## 3 Argentina 2002            -16.0</span></span>
<span id="cb73-9"><a href="data.html#cb73-9"></a><span class="co">## # … with 252 more rows</span></span></code></pre></div>
<p>El primer argumento en <code>pivot_longer()</code>, <code>cols =</code>, nos pide que seleccionemos las columnas para transformarlas en una variable de identificación, utilizando la sintaxis <code>select()</code> que aprendimos antes en este capítulo. En este caso, estamos indicando <code>pivot_longer()</code> para transformar todas las variables, excepto <code>país</code>, en una variable de identificación. Entonces, el argumento <code>names_to()</code> nos pregunta cómo queremos llamar a la nueva variable de identificación, que se crea cuando se transforma el conjunto de datos. Por último, <code>values_to =</code> requiere nombrar la nueva variable que se crea, basándose en los valores de las celdas de los datos originales.</p>
<p>En algunos casos también es útil hacer la operación inversa, para transformar un conjunto de datos <em>tidy</em> en un formato <em>wide</em> (ancho). Para ello, podemos usar otra función importante en <code>tidyr</code>, llamada <code>pivot_wider()</code>. Veamos un ejemplo, partiendo de un formato de conjunto de datos <em>tidy</em>, que creamos antes:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="data.html#cb74-1"></a>aprobacion_anual <span class="op">%&gt;%</span></span>
<span id="cb74-2"><a href="data.html#cb74-2"></a><span class="st">  </span><span class="kw">pivot_wider</span>(<span class="dt">names_from =</span> <span class="st">&quot;anio&quot;</span>, <span class="dt">values_from =</span> <span class="st">&quot;aprobacion_neta&quot;</span>) </span>
<span id="cb74-3"><a href="data.html#cb74-3"></a><span class="co">## # A tibble: 17 x 16</span></span>
<span id="cb74-4"><a href="data.html#cb74-4"></a><span class="co">##   pais  `2000` `2001` `2002` `2003` `2004` `2005` `2006` `2007` `2008`</span></span>
<span id="cb74-5"><a href="data.html#cb74-5"></a><span class="co">##   &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb74-6"><a href="data.html#cb74-6"></a><span class="co">## 1 Arge…  15.6  -17.4  -16.0    32.6 48.5     43.8   45.9   34.3   9.52</span></span>
<span id="cb74-7"><a href="data.html#cb74-7"></a><span class="co">## 2 Boli… -18.8  -14.1   -5.77  -16.8 -0.301   24.5   34.7   28.1  16.9 </span></span>
<span id="cb74-8"><a href="data.html#cb74-8"></a><span class="co">## 3 Bras…  -8.72  -2.87   3.51   45.8 26.3     21.3   30.8   40.1  58.3 </span></span>
<span id="cb74-9"><a href="data.html#cb74-9"></a><span class="co">## # … with 14 more rows, and 6 more variables</span></span></code></pre></div>
<p>Los argumentos, en este caso, son prácticamente espejos de los anteriores. Aquí lo que queremos es que la base de datos tome de “año” sus nombres de columna a lo ancho (<code>names_from="anio"</code>), mientras que los valores se toman de nuestra variable de interés “aprobacion_neta” (<code>values_from = "aprobacion_neta "</code>).</p>
<p>Por lo tanto, estos comandos son perfectamente simétricos. Por ejemplo, la siguiente cadena de comandos es inofensiva, ya que <code>pivot_wider()</code> revertirá la transformación aplicada por <code>pivot_longer()</code>:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="data.html#cb75-1"></a>aprobacion_wide1 <span class="op">%&gt;%</span></span>
<span id="cb75-2"><a href="data.html#cb75-2"></a><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="dt">cols =</span> <span class="op">-</span>pais, </span>
<span id="cb75-3"><a href="data.html#cb75-3"></a>               <span class="dt">names_to =</span> <span class="st">&quot;anio&quot;</span>, <span class="dt">values_to =</span> <span class="st">&quot;aprobacion_neta&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb75-4"><a href="data.html#cb75-4"></a><span class="st">  </span><span class="kw">pivot_wider</span>(<span class="dt">names_from =</span> <span class="st">&quot;anio&quot;</span>, <span class="dt">values_from =</span> <span class="st">&quot;aprobacion_neta&quot;</span>) </span>
<span id="cb75-5"><a href="data.html#cb75-5"></a><span class="co">## # A tibble: 17 x 16</span></span>
<span id="cb75-6"><a href="data.html#cb75-6"></a><span class="co">##   pais  `2000` `2001` `2002` `2003` `2004` `2005` `2006` `2007` `2008`</span></span>
<span id="cb75-7"><a href="data.html#cb75-7"></a><span class="co">##   &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb75-8"><a href="data.html#cb75-8"></a><span class="co">## 1 Arge…  15.6  -17.4  -16.0    32.6 48.5     43.8   45.9   34.3   9.52</span></span>
<span id="cb75-9"><a href="data.html#cb75-9"></a><span class="co">## 2 Boli… -18.8  -14.1   -5.77  -16.8 -0.301   24.5   34.7   28.1  16.9 </span></span>
<span id="cb75-10"><a href="data.html#cb75-10"></a><span class="co">## 3 Bras…  -8.72  -2.87   3.51   45.8 26.3     21.3   30.8   40.1  58.3 </span></span>
<span id="cb75-11"><a href="data.html#cb75-11"></a><span class="co">## # … with 14 more rows, and 6 more variables</span></span></code></pre></div>
<blockquote>
<p><strong>Ejercicio 2J.</strong> Genera una base en formato <em>tidy</em> con el crecimiento medio del PIB por país-año. Convierte estos datos a un formato <em>ancho/wide</em>, moviendo los años a las columnas.</p>
</blockquote>
</div>
<div id="bases-de-datos-anchas-con-más-de-una-variable-de-interés" class="section level3">
<h3><span class="header-section-number">2.5.2</span> Bases de datos anchas con más de una variable de interés</h3>
<p>Anteriormente, mencionamos que no es posible registrar, de manera simple, información para más de una variable de interés en una estructura <em>ancha</em>. Sin embargo, nuestras fuentes de datos a menudo contendrán sorpresas que no son agradables para nosotros, como el siguiente ejemplo:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="data.html#cb76-1"></a><span class="kw">library</span>(paqueteadp)</span>
<span id="cb76-2"><a href="data.html#cb76-2"></a><span class="kw">data</span>(aprobacion_wide2) </span></code></pre></div>
<p>Observa que en esta base las columnas registran información a lo largo del tiempo para dos variables, “pib” y “poblacion”. Lo que queremos es <em>extender</em> esta información en las filas, reconstruyendo nuestro par país-años y las dos variables de interés. Primero, podemos pivotear el conjunto de datos para dejarlos en el nivel de la variable país-año. En <code>pivot_longer()</code>, podemos indicar que los nombres de las columnas contienen información de más de una variable. Primero, el argumento <code>names_to = c("variable", "año")</code> toma dos valores en esta ocasión, los nombres de las nuevas variables después del pivote. En segundo lugar, <code>names_sep= "_"</code> indica que en las columnas del conjunto de datos original la información de las dos variables está separada por un guión bajo (puede ser otro carácter, como un guión alto o una barra vertical<a href="#fn10" class="footnote-ref" id="fnref10"><sup>10</sup></a>).</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="data.html#cb77-1"></a>aprobacion_wide2 <span class="op">%&gt;%</span></span>
<span id="cb77-2"><a href="data.html#cb77-2"></a><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="dt">cols =</span> <span class="op">-</span>pais,</span>
<span id="cb77-3"><a href="data.html#cb77-3"></a>               <span class="dt">names_to =</span> <span class="kw">c</span>(<span class="st">&quot;variable&quot;</span>, <span class="st">&quot;anio&quot;</span>), <span class="dt">names_sep =</span> <span class="st">&quot;_&quot;</span>) </span>
<span id="cb77-4"><a href="data.html#cb77-4"></a><span class="co">## # A tibble: 510 x 4</span></span>
<span id="cb77-5"><a href="data.html#cb77-5"></a><span class="co">##   pais      variable anio          value</span></span>
<span id="cb77-6"><a href="data.html#cb77-6"></a><span class="co">##   &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;         &lt;dbl&gt;</span></span>
<span id="cb77-7"><a href="data.html#cb77-7"></a><span class="co">## 1 Argentina pib      2000  552151219031.</span></span>
<span id="cb77-8"><a href="data.html#cb77-8"></a><span class="co">## 2 Argentina pib      2001  527807756979.</span></span>
<span id="cb77-9"><a href="data.html#cb77-9"></a><span class="co">## 3 Argentina pib      2002  470305820970.</span></span>
<span id="cb77-10"><a href="data.html#cb77-10"></a><span class="co">## # … with 507 more rows</span></span></code></pre></div>
<p>Entonces, podemos pivotar las variables a través del ancho para obtener nuestra base datos de destino, como lo hicimos antes, con <code>pivot_wider()</code>. Hagamos todo en una cadena:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="data.html#cb78-1"></a>aprobacion_wide2 <span class="op">%&gt;%</span></span>
<span id="cb78-2"><a href="data.html#cb78-2"></a><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="dt">cols =</span> <span class="op">-</span>pais,</span>
<span id="cb78-3"><a href="data.html#cb78-3"></a>               <span class="dt">names_to =</span> <span class="kw">c</span>(<span class="st">&quot;variable&quot;</span>, <span class="st">&quot;anio&quot;</span>), <span class="dt">names_sep =</span> <span class="st">&quot;_&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb78-4"><a href="data.html#cb78-4"></a><span class="st">  </span><span class="kw">pivot_wider</span>(<span class="dt">names_from =</span> <span class="st">&quot;variable&quot;</span>, <span class="dt">values_from =</span> <span class="st">&quot;value&quot;</span>)</span>
<span id="cb78-5"><a href="data.html#cb78-5"></a><span class="co">## # A tibble: 255 x 4</span></span>
<span id="cb78-6"><a href="data.html#cb78-6"></a><span class="co">##   pais      anio            pib poblacion</span></span>
<span id="cb78-7"><a href="data.html#cb78-7"></a><span class="co">##   &lt;chr&gt;     &lt;chr&gt;         &lt;dbl&gt;     &lt;dbl&gt;</span></span>
<span id="cb78-8"><a href="data.html#cb78-8"></a><span class="co">## 1 Argentina 2000  552151219031.  37057452</span></span>
<span id="cb78-9"><a href="data.html#cb78-9"></a><span class="co">## 2 Argentina 2001  527807756979.  37471509</span></span>
<span id="cb78-10"><a href="data.html#cb78-10"></a><span class="co">## 3 Argentina 2002  470305820970.  37889370</span></span>
<span id="cb78-11"><a href="data.html#cb78-11"></a><span class="co">## # … with 252 more rows</span></span></code></pre></div>

</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="5">
<li id="fn5"><p>E-mail: arcruz@uc.cl<a href="data.html#fnref5" class="footnote-back">↩︎</a></p></li>
<li id="fn6"><p>Los usuarios de Stata encontrarán esto familiar.<a href="data.html#fnref6" class="footnote-back">↩︎</a></p></li>
<li id="fn7"><p>Puedes ver todos los atajos de teclado en RStudio en Ayuda &gt; Ayuda de los atajos de teclado<a href="data.html#fnref7" class="footnote-back">↩︎</a></p></li>
<li id="fn8"><p>Aprendí que algunos usuarios de R nombran este símbolo una “colita de chancho”!<a href="data.html#fnref8" class="footnote-back">↩︎</a></p></li>
<li id="fn9"><p>A veces se utiliza el término <em>largo</em> (opuesto a ancho) en lugar de lo que llamamos <em>tidy</em>.<a href="data.html#fnref9" class="footnote-back">↩︎</a></p></li>
<li id="fn10"><p>Si la separación entre sus variables es menos clara, podemos usar el argumento <code>names_pattern=</code> en lugar de <code>names_sep=</code>. Para esto necesitarás usar expresiones regulares, un tema tratado en el capítulo <a href="qta.html#qta">13</a> de análisis cuantitativo de textos. Por ejemplo, podríamos escribir la misma operación aquí con el siguiente argumento: <code>name_pattern = "(\\D+)_(\\d+)"</code><a href="data.html#fnref10" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="basic-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="dataviz.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "night",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/arcruz0/libroadp/edit/master/02-data_es.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>

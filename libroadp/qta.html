<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 13 Análisis cuantitativo de textos políticos | AnalizaR Datos Políticos (v1.0)</title>
  <meta name="description" content="Capítulo 13 Análisis cuantitativo de textos políticos | AnalizaR Datos Políticos (v1.0)" />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 13 Análisis cuantitativo de textos políticos | AnalizaR Datos Políticos (v1.0)" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 13 Análisis cuantitativo de textos políticos | AnalizaR Datos Políticos (v1.0)" />
  
  
  

<meta name="author" content="Francisco Urdinez y Andrés Cruz Labrín (editores)" />


<meta name="date" content="2020-08-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="prev" href="web-mining.html"/>
<link rel="next" href="networks.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<script>
% https://stackoverflow.com/a/4425214/8242291
var links = document.links;

for (var i = 0, linksLength = links.length; i < linksLength; i++) {

    if (links[i].hostname != window.location.hostname) {
        links[i].target = '_blank';
    }

}
</script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #2a211c;
    color: #bdae9d;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #bdae9d;  padding-left: 4px; }
div.sourceCode
  { color: #bdae9d; background-color: #2a211c; }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ffff00; } /* Alert */
code span.an { color: #0066ff; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #44aa43; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #43a8ed; font-weight: bold; } /* ControlFlow */
code span.ch { color: #049b0a; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #0066ff; font-weight: bold; font-style: italic; } /* Comment */
code span.do { color: #0066ff; font-style: italic; } /* Documentation */
code span.dt { text-decoration: underline; } /* DataType */
code span.dv { color: #44aa43; } /* DecVal */
code span.er { color: #ffff00; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #44aa43; } /* Float */
code span.fu { color: #ff9358; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #0066ff; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #43a8ed; font-weight: bold; } /* Keyword */
code span.op { } /* Operator */
code span.pp { font-weight: bold; } /* Preprocessor */
code span.sc { color: #049b0a; } /* SpecialChar */
code span.ss { color: #049b0a; } /* SpecialString */
code span.st { color: #049b0a; } /* String */
code span.va { } /* Variable */
code span.vs { color: #049b0a; } /* VerbatimString */
code span.wa { color: #ffff00; font-weight: bold; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><b><a href="./index.html"><img style="float: left; margin-right: 5px;" src="favicon.ico"></img>AnalizaR datos políticos</a></b></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introducción</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#inicio"><i class="fa fa-check"></i>Inicio</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#cómo-contribuir"><i class="fa fa-check"></i>¿Cómo contribuir?</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#sobre-los-autores-y-autoras"><i class="fa fa-check"></i>Sobre los autores y autoras</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#prefacio"><i class="fa fa-check"></i>Prefacio</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#agradecimientos"><i class="fa fa-check"></i>Agradecimientos</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#qué-esperar-del-libro"><i class="fa fa-check"></i>Qué esperar del libro</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#estructura-del-libro"><i class="fa fa-check"></i>Estructura del libro</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#cómo-utilizar-el-libro-en-un-curso-de-métodos"><i class="fa fa-check"></i>¿Cómo utilizar el libro en un curso de métodos?</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#primera-opción-curso-semestral-de-análisis-de-datos-políticos"><i class="fa fa-check"></i>Primera opción: Curso semestral de análisis de datos políticos</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#segunda-opción-curso-semestral-de-introducción-a-métodos-cuantitativos"><i class="fa fa-check"></i>Segunda opción: Curso semestral de introducción a métodos cuantitativos</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#prerrequisitos"><i class="fa fa-check"></i>Prerrequisitos</a></li>
</ul></li>
<li class="part"><span><b>I Introducción a R</b></span></li>
<li class="chapter" data-level="1" data-path="basic-r.html"><a href="basic-r.html"><i class="fa fa-check"></i><b>1</b> R Básico</a><ul>
<li class="chapter" data-level="1.1" data-path="basic-r.html"><a href="basic-r.html#instalación"><i class="fa fa-check"></i><b>1.1</b> Instalación</a><ul>
<li class="chapter" data-level="" data-path="basic-r.html"><a href="basic-r.html#r"><i class="fa fa-check"></i>R</a></li>
<li class="chapter" data-level="" data-path="basic-r.html"><a href="basic-r.html#rstudio"><i class="fa fa-check"></i>RStudio</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="basic-r.html"><a href="basic-r.html#consola"><i class="fa fa-check"></i><b>1.2</b> Consola</a></li>
<li class="chapter" data-level="1.3" data-path="basic-r.html"><a href="basic-r.html#script"><i class="fa fa-check"></i><b>1.3</b> Script</a></li>
<li class="chapter" data-level="1.4" data-path="basic-r.html"><a href="basic-r.html#objetos-y-funciones"><i class="fa fa-check"></i><b>1.4</b> Objetos (y funciones)</a><ul>
<li class="chapter" data-level="1.4.1" data-path="basic-r.html"><a href="basic-r.html#vectores"><i class="fa fa-check"></i><b>1.4.1</b> Vectores</a></li>
<li class="chapter" data-level="1.4.2" data-path="basic-r.html"><a href="basic-r.html#basic-r-functions"><i class="fa fa-check"></i><b>1.4.2</b> Functions</a></li>
<li class="chapter" data-level="1.4.3" data-path="basic-r.html"><a href="basic-r.html#archivos-gráficos-paquetes-ayuda"><i class="fa fa-check"></i><b>1.4.3</b> Archivos / gráficos / paquetes / ayuda</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>2</b> Manejo de datos</a><ul>
<li class="chapter" data-level="" data-path="data.html"><a href="data.html#los-paquetes-que-necesitas-instalar"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="2.1" data-path="data.html"><a href="data.html#introducción-al-manejo-de-datos"><i class="fa fa-check"></i><b>2.1</b> Introducción al manejo de datos</a><ul>
<li class="chapter" data-level="2.1.1" data-path="data.html"><a href="data.html#nuestra-base-de-datos"><i class="fa fa-check"></i><b>2.1.1</b> Nuestra base de datos</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data.html"><a href="data.html#describiendo-una-base-de-datos"><i class="fa fa-check"></i><b>2.2</b> Describiendo una base de datos</a></li>
<li class="chapter" data-level="2.3" data-path="data.html"><a href="data.html#operaciones-básicas"><i class="fa fa-check"></i><b>2.3</b> Operaciones básicas</a><ul>
<li class="chapter" data-level="2.3.1" data-path="data.html"><a href="data.html#seleccionar-columnas"><i class="fa fa-check"></i><b>2.3.1</b> Seleccionar columnas</a></li>
<li class="chapter" data-level="2.3.2" data-path="data.html"><a href="data.html#renombra-las-columnas"><i class="fa fa-check"></i><b>2.3.2</b> Renombra las columnas</a></li>
<li class="chapter" data-level="2.3.3" data-path="data.html"><a href="data.html#filtrar-las-observaciones"><i class="fa fa-check"></i><b>2.3.3</b> Filtrar las observaciones</a></li>
<li class="chapter" data-level="2.3.4" data-path="data.html"><a href="data.html#cambiar-el-orden-de-una-base-de-datos"><i class="fa fa-check"></i><b>2.3.4</b> Cambiar el orden de una base de datos</a></li>
<li class="chapter" data-level="2.3.5" data-path="data.html"><a href="data.html#transformar-y-crear-variables"><i class="fa fa-check"></i><b>2.3.5</b> Transformar y crear variables</a></li>
<li class="chapter" data-level="2.3.6" data-path="data.html"><a href="data.html#resúmenes"><i class="fa fa-check"></i><b>2.3.6</b> Resúmenes</a></li>
<li class="chapter" data-level="2.3.7" data-path="data.html"><a href="data.html#resúmenes-por-grupo"><i class="fa fa-check"></i><b>2.3.7</b> Resúmenes por grupo</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="data.html"><a href="data.html#comandos-en-cadena"><i class="fa fa-check"></i><b>2.4</b> Comandos en cadena</a></li>
<li class="chapter" data-level="2.5" data-path="data.html"><a href="data.html#data-recodificar"><i class="fa fa-check"></i><b>2.5</b> Recodificar valores</a><ul>
<li class="chapter" data-level="2.5.1" data-path="data.html"><a href="data.html#pivoteo-de-datos-data-pivot"><i class="fa fa-check"></i><b>2.5.1</b> Pivoteo de datos {data-pivot}</a></li>
<li class="chapter" data-level="2.5.2" data-path="data.html"><a href="data.html#bases-de-datos-anchas-con-más-de-una-variable-de-interés"><i class="fa fa-check"></i><b>2.5.2</b> Bases de datos anchas con más de una variable de interés</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="dataviz.html"><a href="dataviz.html"><i class="fa fa-check"></i><b>3</b> Visualización de datos</a><ul>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#lecturas-sugeridas"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="dataviz.html"><a href="dataviz.html#los-paquetes-que-necesitas-instalar-1"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="3.1" data-path="dataviz.html"><a href="dataviz.html#por-qué-visualizar-mis-datos"><i class="fa fa-check"></i><b>3.1</b> ¿Por qué visualizar mis datos?</a></li>
<li class="chapter" data-level="3.2" data-path="dataviz.html"><a href="dataviz.html#primeros-pasos"><i class="fa fa-check"></i><b>3.2</b> Primeros pasos</a><ul>
<li class="chapter" data-level="3.2.1" data-path="dataviz.html"><a href="dataviz.html#las-capas-del-universo-ggplotiano"><i class="fa fa-check"></i><b>3.2.1</b> Las capas del “universo ggplotiano”</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="dataviz.html"><a href="dataviz.html#ejemplo-aplicado-elecciones-locales-y-visualización-de-datos"><i class="fa fa-check"></i><b>3.3</b> Ejemplo aplicado: Elecciones locales y visualización de datos</a><ul>
<li class="chapter" data-level="3.3.1" data-path="dataviz.html"><a href="dataviz.html#gráfico-de-barras"><i class="fa fa-check"></i><b>3.3.1</b> Gráfico de barras</a></li>
<li class="chapter" data-level="3.3.2" data-path="dataviz.html"><a href="dataviz.html#gráfico-de-caja"><i class="fa fa-check"></i><b>3.3.2</b> Gráfico de caja</a></li>
<li class="chapter" data-level="3.3.3" data-path="dataviz.html"><a href="dataviz.html#histograma"><i class="fa fa-check"></i><b>3.3.3</b> Histograma</a></li>
<li class="chapter" data-level="3.3.4" data-path="dataviz.html"><a href="dataviz.html#relación-entre-las-variables"><i class="fa fa-check"></i><b>3.3.4</b> Relación entre las variables</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="dataviz.html"><a href="dataviz.html#para-continuar-aprendiendo"><i class="fa fa-check"></i><b>3.4</b> Para continuar aprendiendo</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="load.html"><a href="load.html"><i class="fa fa-check"></i><b>4</b> Carga de datos</a><ul>
<li class="chapter" data-level="" data-path="load.html"><a href="load.html#los-paquetes-que-necesitas-instalar-2"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="4.1" data-path="load.html"><a href="load.html#load-intro"><i class="fa fa-check"></i><b>4.1</b> Introducción</a></li>
<li class="chapter" data-level="4.2" data-path="load.html"><a href="load.html#carga-formatos"><i class="fa fa-check"></i><b>4.2</b> Diferentes formatos de bases de datos</a></li>
<li class="chapter" data-level="4.3" data-path="load.html"><a href="load.html#los-archivos-separados-por-delimitadores-.csv-y-.tsv"><i class="fa fa-check"></i><b>4.3</b> Los archivos separados por delimitadores (.csv y .tsv)</a><ul>
<li class="chapter" data-level="4.3.1" data-path="load.html"><a href="load.html#r-básico-utils"><i class="fa fa-check"></i><b>4.3.1</b> R básico: <code>utils</code></a></li>
<li class="chapter" data-level="4.3.2" data-path="load.html"><a href="load.html#load-r"><i class="fa fa-check"></i><b>4.3.2</b> Archivos creados con R (.Rdata y .rds)</a></li>
<li class="chapter" data-level="4.3.3" data-path="load.html"><a href="load.html#load-labels"><i class="fa fa-check"></i><b>4.3.3</b> Bases de datos con etiquetas (de Stata or SPSS)</a></li>
<li class="chapter" data-level="4.3.4" data-path="load.html"><a href="load.html#load-excel"><i class="fa fa-check"></i><b>4.3.4</b> Archivos de Excel</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="load.html"><a href="load.html#load-large"><i class="fa fa-check"></i><b>4.4</b> Grandes bases de datos tabulares</a></li>
</ul></li>
<li class="part"><span><b>II Modelos</b></span></li>
<li class="chapter" data-level="5" data-path="linear.html"><a href="linear.html"><i class="fa fa-check"></i><b>5</b> Modelos lineales</a><ul>
<li class="chapter" data-level="" data-path="linear.html"><a href="linear.html#lecturas-sugeridas-1"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="linear.html"><a href="linear.html#los-paquetes-que-necesitas-instalar-3"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="" data-path="linear.html"><a href="linear.html#introducción-1"><i class="fa fa-check"></i>Introducción</a></li>
<li class="chapter" data-level="5.1" data-path="linear.html"><a href="linear.html#mínimos-cuadrados-ordinarios-en-r"><i class="fa fa-check"></i><b>5.1</b> Mínimos cuadrados ordinarios en R</a><ul>
<li class="chapter" data-level="5.1.1" data-path="linear.html"><a href="linear.html#cómo-obtener-estadísticas-descriptivas"><i class="fa fa-check"></i><b>5.1.1</b> Cómo obtener estadísticas descriptivas</a></li>
<li class="chapter" data-level="5.1.2" data-path="linear.html"><a href="linear.html#estadísticas-descriptivas-y-distribución-de-las-variables-en-el-modelo"><i class="fa fa-check"></i><b>5.1.2</b> Estadísticas descriptivas y distribución de las variables en el modelo</a></li>
<li class="chapter" data-level="5.1.3" data-path="linear.html"><a href="linear.html#matriz-de-correlación-de-variables-independientes"><i class="fa fa-check"></i><b>5.1.3</b> Matriz de correlación de variables independientes</a></li>
<li class="chapter" data-level="5.1.4" data-path="linear.html"><a href="linear.html#distribución-de-las-variables-de-interés"><i class="fa fa-check"></i><b>5.1.4</b> Distribución de las variables de interés</a></li>
<li class="chapter" data-level="5.1.5" data-path="linear.html"><a href="linear.html#relación-entre-la-variable-dependiente-e-independiente"><i class="fa fa-check"></i><b>5.1.5</b> Relación entre la variable dependiente e independiente</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="linear.html"><a href="linear.html#modelo-bivariado-regresión-lineal-simple"><i class="fa fa-check"></i><b>5.2</b> Modelo bivariado: regresión lineal simple</a><ul>
<li class="chapter" data-level="5.2.1" data-path="linear.html"><a href="linear.html#la-función-lm"><i class="fa fa-check"></i><b>5.2.1</b> La función <code>lm</code></a></li>
<li class="chapter" data-level="5.2.2" data-path="linear.html"><a href="linear.html#representación-gráfica"><i class="fa fa-check"></i><b>5.2.2</b> Representación gráfica</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="linear.html"><a href="linear.html#modelo-multivariado-regresión-múltiple"><i class="fa fa-check"></i><b>5.3</b> Modelo multivariado: regresión múltiple</a></li>
<li class="chapter" data-level="5.4" data-path="linear.html"><a href="linear.html#ajuste-del-modelo"><i class="fa fa-check"></i><b>5.4</b> Ajuste del modelo</a></li>
<li class="chapter" data-level="5.5" data-path="linear.html"><a href="linear.html#inferencia-en-los-modelos-lineales-múltiples"><i class="fa fa-check"></i><b>5.5</b> Inferencia en los modelos lineales múltiples</a></li>
<li class="chapter" data-level="5.6" data-path="linear.html"><a href="linear.html#testeando-los-supuestos-de-mco"><i class="fa fa-check"></i><b>5.6</b> Testeando los supuestos de MCO</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="case-sel.html"><a href="case-sel.html"><i class="fa fa-check"></i><b>6</b> Selección de casos basada en regresiones</a><ul>
<li class="chapter" data-level="" data-path="case-sel.html"><a href="case-sel.html#lecturas-sugeridas-2"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="case-sel.html"><a href="case-sel.html#los-paquetes-que-necesitas-instalar-4"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="6.1" data-path="case-sel.html"><a href="case-sel.html#selección-de-estudios-de-casos"><i class="fa fa-check"></i><b>6.1</b> Selección de estudios de casos</a></li>
<li class="chapter" data-level="6.2" data-path="case-sel.html"><a href="case-sel.html#qué-estudio-de-caso-debería-seleccionar-para-la-investigación-cualitativa"><i class="fa fa-check"></i><b>6.2</b> ¿Qué estudio de caso debería seleccionar para la investigación cualitativa?</a><ul>
<li class="chapter" data-level="6.2.1" data-path="case-sel.html"><a href="case-sel.html#casos-típicos"><i class="fa fa-check"></i><b>6.2.1</b> Casos típicos</a></li>
<li class="chapter" data-level="6.2.2" data-path="case-sel.html"><a href="case-sel.html#los-valores-atípicos"><i class="fa fa-check"></i><b>6.2.2</b> Los valores atípicos</a></li>
<li class="chapter" data-level="6.2.3" data-path="case-sel.html"><a href="case-sel.html#casos-influyentes"><i class="fa fa-check"></i><b>6.2.3</b> Casos influyentes</a></li>
<li class="chapter" data-level="6.2.4" data-path="case-sel.html"><a href="case-sel.html#casos-extremos"><i class="fa fa-check"></i><b>6.2.4</b> Casos extremos</a></li>
<li class="chapter" data-level="6.2.5" data-path="case-sel.html"><a href="case-sel.html#casos-más-similares"><i class="fa fa-check"></i><b>6.2.5</b> Casos más similares</a></li>
<li class="chapter" data-level="6.2.6" data-path="case-sel.html"><a href="case-sel.html#casos-mas-diferentes"><i class="fa fa-check"></i><b>6.2.6</b> Casos mas diferentes</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="case-sel.html"><a href="case-sel.html#la-importancia-de-la-combinación-de-métodos"><i class="fa fa-check"></i><b>6.3</b> La importancia de la combinación de métodos</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="panel.html"><a href="panel.html"><i class="fa fa-check"></i><b>7</b> Datos de panel</a><ul>
<li class="chapter" data-level="" data-path="panel.html"><a href="panel.html#lecturas-sugeridas-3"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="panel.html"><a href="panel.html#los-paquetes-que-necesitas-instalar-5"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="7.1" data-path="panel.html"><a href="panel.html#introducción-2"><i class="fa fa-check"></i><b>7.1</b> Introducción</a></li>
<li class="chapter" data-level="7.2" data-path="panel.html"><a href="panel.html#describiendo-la-base-de-datos-en-panel"><i class="fa fa-check"></i><b>7.2</b> Describiendo la base de datos en panel</a><ul>
<li class="chapter" data-level="7.2.1" data-path="panel.html"><a href="panel.html#opción-a.-gráfico-de-líneas"><i class="fa fa-check"></i><b>7.2.1</b> Opción A. Gráfico de líneas</a></li>
<li class="chapter" data-level="7.2.2" data-path="panel.html"><a href="panel.html#option-b.-gráfico-de-cajas"><i class="fa fa-check"></i><b>7.2.2</b> Option B. Gráfico de cajas</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="panel.html"><a href="panel.html#modelización-de-la-variación-a-nivel-de-grupo"><i class="fa fa-check"></i><b>7.3</b> Modelización de la variación a nivel de grupo</a></li>
<li class="chapter" data-level="7.4" data-path="panel.html"><a href="panel.html#efectos-fijos-vs.-efectos-aleatorios"><i class="fa fa-check"></i><b>7.4</b> Efectos fijos vs. efectos aleatorios</a><ul>
<li class="chapter" data-level="7.4.1" data-path="panel.html"><a href="panel.html#test-de-hausman"><i class="fa fa-check"></i><b>7.4.1</b> Test de Hausman</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="panel.html"><a href="panel.html#testeando-raíces-unitarias"><i class="fa fa-check"></i><b>7.5</b> Testeando raíces unitarias</a><ul>
<li class="chapter" data-level="7.5.1" data-path="panel.html"><a href="panel.html#creación-de-variables-rezagadas-lags-y-variables-prospectivas-leads"><i class="fa fa-check"></i><b>7.5.1</b> Creación de variables rezagadas (<em>lags</em>) y variables prospectivas (<em>leads</em>)</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="panel.html"><a href="panel.html#errores-estándar-robustos-corregidos-para-panel"><i class="fa fa-check"></i><b>7.6</b> Errores estándar robustos corregidos para panel</a><ul>
<li class="chapter" data-level="7.6.1" data-path="panel.html"><a href="panel.html#errores-estándar-robustos-1"><i class="fa fa-check"></i><b>7.6.1</b> Errores estándar robustos</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="logit.html"><a href="logit.html"><i class="fa fa-check"></i><b>8</b> Modelos logísticos</a><ul>
<li class="chapter" data-level="" data-path="logit.html"><a href="logit.html#lecturas-sugeridas-4"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="logit.html"><a href="logit.html#los-paquetes-que-necesitas-instalar-6"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="8.1" data-path="logit.html"><a href="logit.html#introducción-3"><i class="fa fa-check"></i><b>8.1</b> Introducción</a></li>
<li class="chapter" data-level="8.2" data-path="logit.html"><a href="logit.html#uso-de-los-modelos-logísticos"><i class="fa fa-check"></i><b>8.2</b> Uso de los modelos logísticos</a></li>
<li class="chapter" data-level="8.3" data-path="logit.html"><a href="logit.html#cómo-se-estiman-las-probabilidades"><i class="fa fa-check"></i><b>8.3</b> ¿Cómo se estiman las probabilidades?</a></li>
<li class="chapter" data-level="8.4" data-path="logit.html"><a href="logit.html#estimación-de-los-modelos"><i class="fa fa-check"></i><b>8.4</b> Estimación de los modelos</a></li>
<li class="chapter" data-level="8.5" data-path="logit.html"><a href="logit.html#creando-tablas"><i class="fa fa-check"></i><b>8.5</b> Creando tablas</a></li>
<li class="chapter" data-level="8.6" data-path="logit.html"><a href="logit.html#representación-visual-de-los-resultados"><i class="fa fa-check"></i><b>8.6</b> Representación visual de los resultados</a><ul>
<li class="chapter" data-level="8.6.1" data-path="logit.html"><a href="logit.html#visualización-de-las-interacciones-entre-las-variables"><i class="fa fa-check"></i><b>8.6.1</b> Visualización de las interacciones entre las variables</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="logit.html"><a href="logit.html#medidas-para-evaluar-el-ajuste-de-los-modelos"><i class="fa fa-check"></i><b>8.7</b> Medidas para evaluar el ajuste de los modelos</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="surv.html"><a href="surv.html"><i class="fa fa-check"></i><b>9</b> Modelos de supervivencia</a><ul>
<li class="chapter" data-level="" data-path="surv.html"><a href="surv.html#lecturas-sugeridas-5"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="surv.html"><a href="surv.html#los-paquetes-que-necesitas-instalar-7"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="9.1" data-path="surv.html"><a href="surv.html#introducción-4"><i class="fa fa-check"></i><b>9.1</b> Introducción</a></li>
<li class="chapter" data-level="9.2" data-path="surv.html"><a href="surv.html#cómo-interpretamos-las-tasas-de-riesgo"><i class="fa fa-check"></i><b>9.2</b> ¿Cómo interpretamos las tasas de riesgo?</a></li>
<li class="chapter" data-level="9.3" data-path="surv.html"><a href="surv.html#el-modelo-cox-de-riesgos-proporcionales"><i class="fa fa-check"></i><b>9.3</b> El modelo Cox de riesgos proporcionales</a></li>
<li class="chapter" data-level="9.4" data-path="surv.html"><a href="surv.html#estimación-de-los-modelos-de-cox-en-r"><i class="fa fa-check"></i><b>9.4</b> Estimación de los modelos de Cox en R</a></li>
<li class="chapter" data-level="9.5" data-path="surv.html"><a href="surv.html#modelos-de-supervivencia-e-interpretación-sus-coeficientes-como-hazard-ratios."><i class="fa fa-check"></i><b>9.5</b> Modelos de supervivencia e interpretación sus coeficientes como Hazard Ratios.</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="causal-inf.html"><a href="causal-inf.html"><i class="fa fa-check"></i><b>10</b> Inferencia causal</a><ul>
<li class="chapter" data-level="" data-path="causal-inf.html"><a href="causal-inf.html#lecturas-sugeridas-6"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="causal-inf.html"><a href="causal-inf.html#los-paquetes-que-necesitas-instalar-8"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="10.1" data-path="causal-inf.html"><a href="causal-inf.html#introducción-5"><i class="fa fa-check"></i><b>10.1</b> Introducción</a></li>
<li class="chapter" data-level="10.2" data-path="causal-inf.html"><a href="causal-inf.html#causalidad-y-gráficos-causales"><i class="fa fa-check"></i><b>10.2</b> Causalidad y gráficos causales</a></li>
<li class="chapter" data-level="10.3" data-path="causal-inf.html"><a href="causal-inf.html#midiendo-efectos-causales"><i class="fa fa-check"></i><b>10.3</b> Midiendo efectos causales</a></li>
<li class="chapter" data-level="10.4" data-path="causal-inf.html"><a href="causal-inf.html#dags-y-asociaciones-estadísticas"><i class="fa fa-check"></i><b>10.4</b> DAGs y asociaciones estadísticas</a></li>
<li class="chapter" data-level="10.5" data-path="causal-inf.html"><a href="causal-inf.html#puertas-traseras-y-cálculos-hacer"><i class="fa fa-check"></i><b>10.5</b> Puertas traseras y cálculos “<em>hacer</em>”</a></li>
<li class="chapter" data-level="10.6" data-path="causal-inf.html"><a href="causal-inf.html#dibujar-y-analizar-dags"><i class="fa fa-check"></i><b>10.6</b> Dibujar y analizar DAGs</a><ul>
<li class="chapter" data-level="10.6.1" data-path="causal-inf.html"><a href="causal-inf.html#dibujar-un-dag-con-dagitty"><i class="fa fa-check"></i><b>10.6.1</b> Dibujar un DAG con DAGitty</a></li>
<li class="chapter" data-level="10.6.2" data-path="causal-inf.html"><a href="causal-inf.html#encontrar-sets-de-ajuste-con-dagitty"><i class="fa fa-check"></i><b>10.6.2</b> Encontrar sets de ajuste con DAGitty</a></li>
<li class="chapter" data-level="10.6.3" data-path="causal-inf.html"><a href="causal-inf.html#diseñar-dags-en-r"><i class="fa fa-check"></i><b>10.6.3</b> Diseñar DAGs en R</a></li>
<li class="chapter" data-level="10.6.4" data-path="causal-inf.html"><a href="causal-inf.html#encontrar-caminos-y-sets-de-ajustes-con-r"><i class="fa fa-check"></i><b>10.6.4</b> Encontrar caminos y sets de ajustes con R</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="causal-inf.html"><a href="causal-inf.html#haciendo-ajustes-causales"><i class="fa fa-check"></i><b>10.7</b> Haciendo ajustes causales</a><ul>
<li class="chapter" data-level="10.7.1" data-path="causal-inf.html"><a href="causal-inf.html#datos-de-redes-para-mosquitos"><i class="fa fa-check"></i><b>10.7.1</b> Datos de redes para mosquitos</a></li>
<li class="chapter" data-level="10.7.2" data-path="causal-inf.html"><a href="causal-inf.html#verificar-las-independencias-condicionales"><i class="fa fa-check"></i><b>10.7.2</b> Verificar las independencias condicionales</a></li>
<li class="chapter" data-level="10.7.3" data-path="causal-inf.html"><a href="causal-inf.html#encuentra-el-set-de-ajuste"><i class="fa fa-check"></i><b>10.7.3</b> Encuentra el set de ajuste</a></li>
<li class="chapter" data-level="10.7.4" data-path="causal-inf.html"><a href="causal-inf.html#estimación-ingenua-no-ajustada"><i class="fa fa-check"></i><b>10.7.4</b> Estimación ingenua no ajustada</a></li>
<li class="chapter" data-level="10.7.5" data-path="causal-inf.html"><a href="causal-inf.html#regresiones"><i class="fa fa-check"></i><b>10.7.5</b> Regresiones</a></li>
<li class="chapter" data-level="10.7.6" data-path="causal-inf.html"><a href="causal-inf.html#matching"><i class="fa fa-check"></i><b>10.7.6</b> Matching</a></li>
<li class="chapter" data-level="10.7.7" data-path="causal-inf.html"><a href="causal-inf.html#ponderación-de-probabilidad-inversa"><i class="fa fa-check"></i><b>10.7.7</b> Ponderación de probabilidad inversa</a></li>
<li class="chapter" data-level="10.7.8" data-path="causal-inf.html"><a href="causal-inf.html#comparando-todos-los-métodos"><i class="fa fa-check"></i><b>10.7.8</b> Comparando todos los métodos</a></li>
</ul></li>
<li class="chapter" data-level="10.8" data-path="causal-inf.html"><a href="causal-inf.html#cconsejos-finales"><i class="fa fa-check"></i><b>10.8</b> CConsejos finales</a></li>
</ul></li>
<li class="part"><span><b>III Aplicaciones</b></span></li>
<li class="chapter" data-level="11" data-path="adv-data.html"><a href="adv-data.html"><i class="fa fa-check"></i><b>11</b> Manejo avanzado de datos políticos</a><ul>
<li class="chapter" data-level="" data-path="adv-data.html"><a href="adv-data.html#lecturas-sugeridas-7"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="adv-data.html"><a href="adv-data.html#los-paquetes-que-necesitas-instalar-9"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="11.1" data-path="adv-data.html"><a href="adv-data.html#introducción-6"><i class="fa fa-check"></i><b>11.1</b> Introducción</a></li>
<li class="chapter" data-level="11.2" data-path="adv-data.html"><a href="adv-data.html#uniendo-bases-de-datos"><i class="fa fa-check"></i><b>11.2</b> Uniendo bases de datos</a></li>
<li class="chapter" data-level="11.3" data-path="adv-data.html"><a href="adv-data.html#estandarizando-los-códigos-de-país"><i class="fa fa-check"></i><b>11.3</b> Estandarizando los códigos de país</a></li>
<li class="chapter" data-level="11.4" data-path="adv-data.html"><a href="adv-data.html#la-unión-borrosa-o-inexacta-de-los-datos"><i class="fa fa-check"></i><b>11.4</b> La unión borrosa o inexacta de los datos</a></li>
<li class="chapter" data-level="11.5" data-path="adv-data.html"><a href="adv-data.html#gestión-de-valores-perdidos"><i class="fa fa-check"></i><b>11.5</b> Gestión de valores perdidos</a><ul>
<li class="chapter" data-level="11.5.1" data-path="adv-data.html"><a href="adv-data.html#tipos-de-valores-perdidos"><i class="fa fa-check"></i><b>11.5.1</b> Tipos de valores perdidos</a></li>
<li class="chapter" data-level="11.5.2" data-path="adv-data.html"><a href="adv-data.html#descripción-de-los-valores-que-faltan-en-la-base-de-datos"><i class="fa fa-check"></i><b>11.5.2</b> Descripción de los valores que faltan en la base de datos</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="adv-data.html"><a href="adv-data.html#imputación-de-valores-perdidos"><i class="fa fa-check"></i><b>11.6</b> Imputación de valores perdidos</a><ul>
<li class="chapter" data-level="11.6.1" data-path="adv-data.html"><a href="adv-data.html#regresiones-luego-de-imputar-datos"><i class="fa fa-check"></i><b>11.6.1</b> Regresiones luego de imputar datos</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="web-mining.html"><a href="web-mining.html"><i class="fa fa-check"></i><b>12</b> Web Scraping</a><ul>
<li class="chapter" data-level="" data-path="web-mining.html"><a href="web-mining.html#lecturas-sugeridas-8"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="web-mining.html"><a href="web-mining.html#los-paquetes-que-necesitas-instalar-10"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="12.1" data-path="web-mining.html"><a href="web-mining.html#introducción-7"><i class="fa fa-check"></i><b>12.1</b> Introducción</a></li>
<li class="chapter" data-level="12.2" data-path="web-mining.html"><a href="web-mining.html#formas-de-hacer-web-scraping"><i class="fa fa-check"></i><b>12.2</b> Formas de hacer web scraping</a><ul>
<li class="chapter" data-level="12.2.1" data-path="web-mining.html"><a href="web-mining.html#estándar-de-exclusión-de-robot"><i class="fa fa-check"></i><b>12.2.1</b> Estándar de exclusión de robot</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="web-mining.html"><a href="web-mining.html#web-scraping-en-r"><i class="fa fa-check"></i><b>12.3</b> Web scraping en R</a><ul>
<li class="chapter" data-level="12.3.1" data-path="web-mining.html"><a href="web-mining.html#ejemplo-aplicado-los-comunicados-de-prensa-de-la-organización-de-estados-americanos-oea"><i class="fa fa-check"></i><b>12.3.1</b> Ejemplo aplicado: los comunicados de prensa de la Organización de Estados Americanos (OEA)</a></li>
<li class="chapter" data-level="12.3.2" data-path="web-mining.html"><a href="web-mining.html#caraga-el-html-para-trabajar-con-r"><i class="fa fa-check"></i><b>12.3.2</b> Caraga el html para trabajar con R</a></li>
<li class="chapter" data-level="12.3.3" data-path="web-mining.html"><a href="web-mining.html#extraer-la-información-con-html_nodes-html_text"><i class="fa fa-check"></i><b>12.3.3</b> Extraer la información con <code>html_nodes()</code> + <code>html_text()</code></a></li>
<li class="chapter" data-level="12.3.4" data-path="web-mining.html"><a href="web-mining.html#iteraciones"><i class="fa fa-check"></i><b>12.3.4</b> Iteraciones</a></li>
<li class="chapter" data-level="12.3.5" data-path="web-mining.html"><a href="web-mining.html#funciones-personalizadas-recetas"><i class="fa fa-check"></i><b>12.3.5</b> Funciones personalizadas (recetas)</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="web-mining.html"><a href="web-mining.html#usando-apis-y-extrayendo-datos-de-twitter"><i class="fa fa-check"></i><b>12.4</b> Usando APIs y extrayendo datos de Twitter</a><ul>
<li class="chapter" data-level="12.4.1" data-path="web-mining.html"><a href="web-mining.html#buscar-una-palabra-clave"><i class="fa fa-check"></i><b>12.4.1</b> Buscar una palabra clave</a></li>
<li class="chapter" data-level="12.4.2" data-path="web-mining.html"><a href="web-mining.html#buscar-una-frase"><i class="fa fa-check"></i><b>12.4.2</b> Buscar una frase</a></li>
<li class="chapter" data-level="12.4.3" data-path="web-mining.html"><a href="web-mining.html#descargando-características-relacionadas-con-los-usuarios-de-twitter"><i class="fa fa-check"></i><b>12.4.3</b> Descargando características relacionadas con los usuarios de Twitter</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="qta.html"><a href="qta.html"><i class="fa fa-check"></i><b>13</b> Análisis cuantitativo de textos políticos</a><ul>
<li class="chapter" data-level="" data-path="qta.html"><a href="qta.html#lecturas-recomendadas"><i class="fa fa-check"></i>Lecturas recomendadas</a></li>
<li class="chapter" data-level="" data-path="qta.html"><a href="qta.html#paquetes-que-necesitas-instalar"><i class="fa fa-check"></i>Paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="13.1" data-path="qta.html"><a href="qta.html#sqta1"><i class="fa fa-check"></i><b>13.1</b> Análisis de hashtags políticos</a><ul>
<li class="chapter" data-level="13.1.1" data-path="qta.html"><a href="qta.html#exploración-de-datos-de-twitter"><i class="fa fa-check"></i><b>13.1.1</b> Exploración de datos de Twitter</a></li>
<li class="chapter" data-level="13.1.2" data-path="qta.html"><a href="qta.html#diagnóstico-visual"><i class="fa fa-check"></i><b>13.1.2</b> Diagnóstico visual</a></li>
<li class="chapter" data-level="13.1.3" data-path="qta.html"><a href="qta.html#hashtags-más-utilizados"><i class="fa fa-check"></i><b>13.1.3</b> Hashtags más utilizados</a></li>
<li class="chapter" data-level="13.1.4" data-path="qta.html"><a href="qta.html#wordclouds-nubes-de-palabras"><i class="fa fa-check"></i><b>13.1.4</b> Wordclouds (Nubes de palabras)</a></li>
<li class="chapter" data-level="13.1.5" data-path="qta.html"><a href="qta.html#nubes-de-palabras-por-grupos"><i class="fa fa-check"></i><b>13.1.5</b> Nubes de palabras por grupos</a></li>
<li class="chapter" data-level="13.1.6" data-path="qta.html"><a href="qta.html#gráficos-de-barras"><i class="fa fa-check"></i><b>13.1.6</b> Gráficos de barras</a></li>
<li class="chapter" data-level="13.1.7" data-path="qta.html"><a href="qta.html#variación-temporal-en-el-uso-de-hashtags"><i class="fa fa-check"></i><b>13.1.7</b> Variación temporal en el uso de hashtags</a></li>
<li class="chapter" data-level="13.1.8" data-path="qta.html"><a href="qta.html#para-resumir"><i class="fa fa-check"></i><b>13.1.8</b> Para resumir</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="qta.html"><a href="qta.html#wordfish"><i class="fa fa-check"></i><b>13.2</b> Wordfish</a><ul>
<li class="chapter" data-level="13.2.1" data-path="qta.html"><a href="qta.html#inspección-y-limpieza-de-datos"><i class="fa fa-check"></i><b>13.2.1</b> Inspección y limpieza de datos</a></li>
<li class="chapter" data-level="13.2.2" data-path="qta.html"><a href="qta.html#pre-procesamiento"><i class="fa fa-check"></i><b>13.2.2</b> Pre-procesamiento</a></li>
<li class="chapter" data-level="13.2.3" data-path="qta.html"><a href="qta.html#sqta2"><i class="fa fa-check"></i><b>13.2.3</b> Wordfish</a></li>
<li class="chapter" data-level="13.2.4" data-path="qta.html"><a href="qta.html#qué-aprendimos-de-wordfish"><i class="fa fa-check"></i><b>13.2.4</b> ¿Qué aprendimos de Wordfish?</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="qta.html"><a href="qta.html#sqta3"><i class="fa fa-check"></i><b>13.3</b> Structural Topic Modeling (STM)</a><ul>
<li class="chapter" data-level="13.3.1" data-path="qta.html"><a href="qta.html#pre-procesamiento-1"><i class="fa fa-check"></i><b>13.3.1</b> Pre-procesamiento</a></li>
<li class="chapter" data-level="13.3.2" data-path="qta.html"><a href="qta.html#diagnósticos"><i class="fa fa-check"></i><b>13.3.2</b> Diagnósticos</a></li>
<li class="chapter" data-level="13.3.3" data-path="qta.html"><a href="qta.html#análisis"><i class="fa fa-check"></i><b>13.3.3</b> Análisis</a></li>
<li class="chapter" data-level="13.3.4" data-path="qta.html"><a href="qta.html#observaciones-finales"><i class="fa fa-check"></i><b>13.3.4</b> Observaciones finales</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="networks.html"><a href="networks.html"><i class="fa fa-check"></i><b>14</b> Análisis de redes</a><ul>
<li class="chapter" data-level="" data-path="networks.html"><a href="networks.html#lecturas-sugeridas-9"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="networks.html"><a href="networks.html#los-paquetes-que-necesitas-instalar-11"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="14.1" data-path="networks.html"><a href="networks.html#introducción-8"><i class="fa fa-check"></i><b>14.1</b> Introducción</a></li>
<li class="chapter" data-level="14.2" data-path="networks.html"><a href="networks.html#conceptos-básicos-en-una-red"><i class="fa fa-check"></i><b>14.2</b> Conceptos básicos en una red</a><ul>
<li class="chapter" data-level="14.2.1" data-path="networks.html"><a href="networks.html#nodos-y-enlaces"><i class="fa fa-check"></i><b>14.2.1</b> Nodos y enlaces</a></li>
<li class="chapter" data-level="14.2.2" data-path="networks.html"><a href="networks.html#matriz-de-adyacencia"><i class="fa fa-check"></i><b>14.2.2</b> Matriz de adyacencia</a></li>
<li class="chapter" data-level="14.2.3" data-path="networks.html"><a href="networks.html#pesos-y-direcciones"><i class="fa fa-check"></i><b>14.2.3</b> Pesos y direcciones</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="networks.html"><a href="networks.html#bases-de-datos-de-la-red"><i class="fa fa-check"></i><b>14.3</b> Bases de datos de la red</a></li>
<li class="chapter" data-level="14.4" data-path="networks.html"><a href="networks.html#presentación-gráfica-de-una-red"><i class="fa fa-check"></i><b>14.4</b> Presentación gráfica de una red</a></li>
<li class="chapter" data-level="14.5" data-path="networks.html"><a href="networks.html#medidas-de-centralidad"><i class="fa fa-check"></i><b>14.5</b> Medidas de centralidad</a><ul>
<li class="chapter" data-level="14.5.1" data-path="networks.html"><a href="networks.html#grado"><i class="fa fa-check"></i><b>14.5.1</b> Grado</a></li>
<li class="chapter" data-level="14.5.2" data-path="networks.html"><a href="networks.html#centralidad-del-eigenvector"><i class="fa fa-check"></i><b>14.5.2</b> Centralidad del eigenvector</a></li>
<li class="chapter" data-level="14.5.3" data-path="networks.html"><a href="networks.html#centralidad-de-intermediación-betweenness"><i class="fa fa-check"></i><b>14.5.3</b> Centralidad de intermediación (<em>betweenness</em>)</a></li>
<li class="chapter" data-level="14.5.4" data-path="networks.html"><a href="networks.html#cercanía"><i class="fa fa-check"></i><b>14.5.4</b> Cercanía</a></li>
</ul></li>
<li class="chapter" data-level="14.6" data-path="networks.html"><a href="networks.html#aplicación-en-r"><i class="fa fa-check"></i><b>14.6</b> Aplicación en R</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="indexes.html"><a href="indexes.html"><i class="fa fa-check"></i><b>15</b> Análisis de componentes principales</a><ul>
<li class="chapter" data-level="" data-path="indexes.html"><a href="indexes.html#lecturas-sugeridas-10"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="indexes.html"><a href="indexes.html#los-paquetes-que-necesitas-instalar-12"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="15.1" data-path="indexes.html"><a href="indexes.html#introducción-9"><i class="fa fa-check"></i><b>15.1</b> Introducción</a><ul>
<li class="chapter" data-level="15.1.1" data-path="indexes.html"><a href="indexes.html#conceptos-medidas-y-validez"><i class="fa fa-check"></i><b>15.1.1</b> Conceptos, medidas y validez</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="indexes.html"><a href="indexes.html#cómo-funciona-el-análisis-de-componentes-principales"><i class="fa fa-check"></i><b>15.2</b> Cómo funciona el Análisis de Componentes Principales</a></li>
<li class="chapter" data-level="15.3" data-path="indexes.html"><a href="indexes.html#nociones-básicas-en-r"><i class="fa fa-check"></i><b>15.3</b> Nociones básicas en R</a></li>
<li class="chapter" data-level="15.4" data-path="indexes.html"><a href="indexes.html#dimensionalidad-del-concepto"><i class="fa fa-check"></i><b>15.4</b> Dimensionalidad del concepto</a></li>
<li class="chapter" data-level="15.5" data-path="indexes.html"><a href="indexes.html#variación-del-concepto"><i class="fa fa-check"></i><b>15.5</b> Variación del concepto</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="maps.html"><a href="maps.html"><i class="fa fa-check"></i><b>16</b> Mapas y datos espaciales</a><ul>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#lecturas-sugeridas-11"><i class="fa fa-check"></i>Lecturas sugeridas</a></li>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#los-paquetes-que-necesitas-instalar-13"><i class="fa fa-check"></i>Los paquetes que necesitas instalar</a></li>
<li class="chapter" data-level="16.1" data-path="maps.html"><a href="maps.html#introducción-10"><i class="fa fa-check"></i><b>16.1</b> Introducción</a><ul>
<li class="chapter" data-level="16.1.1" data-path="maps.html"><a href="maps.html#datos-espaciales-qué-son"><i class="fa fa-check"></i><b>16.1.1</b> Datos espaciales: ¿qué son?</a></li>
<li class="chapter" data-level="16.1.2" data-path="maps.html"><a href="maps.html#estructura-de-datos-espaciales"><i class="fa fa-check"></i><b>16.1.2</b> Estructura de datos espaciales</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="maps.html"><a href="maps.html#datos-espaciales-en-r"><i class="fa fa-check"></i><b>16.2</b> Datos espaciales en R</a><ul>
<li class="chapter" data-level="16.2.1" data-path="maps.html"><a href="maps.html#características-simples-en-r"><i class="fa fa-check"></i><b>16.2.1</b> Características simples en R</a></li>
<li class="chapter" data-level="16.2.2" data-path="maps.html"><a href="maps.html#estructura"><i class="fa fa-check"></i><b>16.2.2</b> Estructura</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="maps.html"><a href="maps.html#gestión-de-datos-espaciales"><i class="fa fa-check"></i><b>16.3</b> Gestión de Datos Espaciales</a><ul>
<li class="chapter" data-level="16.3.1" data-path="maps.html"><a href="maps.html#modificaciones"><i class="fa fa-check"></i><b>16.3.1</b> Modificaciones</a></li>
<li class="chapter" data-level="16.3.2" data-path="maps.html"><a href="maps.html#añade-datos-de-otras-bases-de-datos-con-left_join"><i class="fa fa-check"></i><b>16.3.2</b> Añade datos de otras bases de datos con <code>left_join()</code></a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="maps.html"><a href="maps.html#mapeo"><i class="fa fa-check"></i><b>16.4</b> Mapeo</a><ul>
<li class="chapter" data-level="16.4.1" data-path="maps.html"><a href="maps.html#generando-centroides"><i class="fa fa-check"></i><b>16.4.1</b> Generando centroides</a></li>
<li class="chapter" data-level="16.4.2" data-path="maps.html"><a href="maps.html#mapeando-variables"><i class="fa fa-check"></i><b>16.4.2</b> Mapeando variables</a></li>
<li class="chapter" data-level="16.4.3" data-path="maps.html"><a href="maps.html#mapeando-puntos"><i class="fa fa-check"></i><b>16.4.3</b> Mapeando puntos</a></li>
</ul></li>
<li class="chapter" data-level="16.5" data-path="maps.html"><a href="maps.html#inferencia-a-partir-de-datos-espaciales"><i class="fa fa-check"></i><b>16.5</b> Inferencia a partir de datos espaciales</a><ul>
<li class="chapter" data-level="16.5.1" data-path="maps.html"><a href="maps.html#indicador-local-de-asociación-espacial-lisa-por-sus-siglas-en-inglés"><i class="fa fa-check"></i><b>16.5.1</b> Indicador local de asociación espacial (LISA, por sus siglas en inglés)</a></li>
<li class="chapter" data-level="16.5.2" data-path="maps.html"><a href="maps.html#matriz-de-pesos-espaciales"><i class="fa fa-check"></i><b>16.5.2</b> Matriz de pesos espaciales</a></li>
<li class="chapter" data-level="16.5.3" data-path="maps.html"><a href="maps.html#i-de-moran"><i class="fa fa-check"></i><b>16.5.3</b> I de Moran</a></li>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#comentarios-finales-referencias-para-un-mejor-análisis-de-datos-espaciales"><i class="fa fa-check"></i>Comentarios finales: Referencias para un mejor análisis de datos espaciales</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Referencias</b></span></li>
<li class="chapter" data-level="17" data-path="referencias.html"><a href="referencias.html"><i class="fa fa-check"></i><b>17</b> Referencias</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">AnalizaR Datos Políticos (v1.0)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="qta" class="section level1">
<h1><span class="header-section-number">Capítulo 13</span> Análisis cuantitativo de textos políticos</h1>
<p>Sebastián Huneeus<a href="#fn52" class="footnote-ref" id="fnref52"><sup>52</sup></a></p>
<div id="lecturas-recomendadas" class="section level3 unnumbered">
<h3>Lecturas recomendadas</h3>
<ul>
<li><p>Salganik, M. J. (2017). <em>Bit by Bit: Social Research in the Digital Age.</em> Princeton University Press, Princeton, NJ.</p></li>
<li><p>Silge, J. and Robinson, D. (2017). <em>Text Mining with R: A Tidy Approach.</em> O’Reilly, Sebastopol, CA.</p></li>
<li><p>Steinert-Threlkeld, Z. C. (2018). <em>Twitter as Data.</em> Cambridge University Press, Cambridge.</p></li>
</ul>
</div>
<div id="paquetes-que-necesitas-instalar" class="section level3 unnumbered">
<h3>Paquetes que necesitas instalar</h3>
<ul>
<li><code>tidyverse</code> <span class="citation">(Wickham <a href="referencias.html#ref-R-tidyverse" role="doc-biblioref">2019</a><a href="referencias.html#ref-R-tidyverse" role="doc-biblioref">b</a>)</span>, <code>paqueteadp</code> <span class="citation">(Urdinez and Cruz <a href="referencias.html#ref-R-paqueteadp" role="doc-biblioref">2020</a>)</span>, <code>lubridate</code> <span class="citation">(Spinu, Grolemund, and Wickham <a href="referencias.html#ref-R-lubridate" role="doc-biblioref">2020</a>)</span>, <code>skimr</code> <span class="citation">(Waring et al. <a href="referencias.html#ref-R-skimr" role="doc-biblioref">2020</a>)</span>, <code>ggwordcloud</code> <span class="citation">(Le Pennec and Slowikowski <a href="referencias.html#ref-R-ggwordcloud" role="doc-biblioref">2019</a>)</span>, <code>tidytext</code> <span class="citation">(Robinson and Silge <a href="referencias.html#ref-R-tidytext" role="doc-biblioref">2020</a>)</span>, <code>stopwords</code> <span class="citation">(Benoit, Muhr, and Watanabe <a href="referencias.html#ref-R-stopwords" role="doc-biblioref">2020</a>)</span>, <code>quanteda</code> <span class="citation">(Benoit, Watanabe, Wang, Nulty, et al. <a href="referencias.html#ref-R-quanteda" role="doc-biblioref">2020</a>)</span>, <code>quanteda.textmodels</code> <span class="citation">(Benoit, Watanabe, Wang, Müller, et al. <a href="referencias.html#ref-R-quanteda.textmodels" role="doc-biblioref">2020</a>)</span>, <code>qdapRegex</code> <span class="citation">(Rinker <a href="referencias.html#ref-R-qdapRegex" role="doc-biblioref">2017</a>)</span>, <code>stm</code> <span class="citation">(M. Roberts, Stewart, and Tingley <a href="referencias.html#ref-R-stm" role="doc-biblioref">2019</a>)</span>, <code>tidystm</code> <span class="citation">(Johannesson <a href="referencias.html#ref-R-tidystm" role="doc-biblioref">2020</a>)</span>, <code>remotes</code> <span class="citation">(Hester et al. <a href="referencias.html#ref-R-remotes" role="doc-biblioref">2020</a>)</span>.</li>
</ul>
<p>Este capítulo está dividido en tres secciones, las cuales emplean diferentes estrategias para analizar datos textuales de Twitter. La Subsección <a href="qta.html#sqta1">13.1</a> cubre la exploración del análisis de texto, la Subsección <a href="qta.html#sqta2">13.2.3</a> trabaja con Wordfish (una técnica para posicionar textos a lo largo de un eje), mientras que la Subsección <a href="qta.html#sqta3">13.3</a> cubre el Structural Topic Modeling (STM), que nos ayuda a descubrir temas subyacentes en los datos de texto.</p>
<p>En el estudio de políticas contenciosas, #olafeminista, #metoo, #blacklivesmatter y #niunamenos son hashtags que fueron virales y cuentan una rica historia sobre el activismo y la protesta en redes sociales. Usaremos como caso de estudio un ciclo de protesta llamado Ola Feminista, que ocurrió en Chile desde Mayo hasta Junio del 2018. El ciclo de protesta feminista denunció inequidades de género estructurales, comenzó como una mobilización de estudiantes en Santiago, y creció –gradualmente– expandiéndose a demandas más amplias, provenientes de organizaciones feministas y de trabajadores en todo Chile.<a href="#fn53" class="footnote-ref" id="fnref53"><sup>53</sup></a></p>
<p>En la primera mitad de este capítulo, podrás aprender cómo usar estadísticas descriptivas básicas para entender cómo los formuladores de políticas usan Twitter. Analizaremos cómo los diputados en Chile utilizaron hashtags relacionados al género durante la #olafeminista. Analizaremos variaciones simples de frecuencia en el uso de hashtags para abordar diferentes niveles de compromiso con el debate en línea sobre cuestiones feministas y de género.</p>
<p>En la segunda mitad del capítulo, aprenderás cómo usar Wordfish y Structural Topic Modeling (STM), dos técnicas recientes de procesamiento de lenguaje natural (PNL por sus siglas en inglés) utilizadas en ciencia política para minería de datos sin supervisión. Mientras que Wordfish nos permitirá posicionar las coaliciones políticas a lo largo de un eje ideológico izquierda-derecha, el STM nos permitirá identificar los temas –o grupos de palabras– más regulares y ver cómo esos tópicos están correlacionados a una variable de interés. En nuestro ejemplo, exploraremos la correlación entre el género del diputado y el uso de ciertos hashtags. En general, estas técnicas son grandes herramientas para ganar conocimiento sobre cómo las coaliciones y los formuladores de políticas participan digitalmente en una conversación política.</p>
<p>En este capítulo, utilizarás una base de datos original con variables de identificación para los diputados y diputadas, como lo son el nombre y apellido, distrito, partido político, edad, entre otras. Las variables de identificación fueron extraídas desde la <a href="https://www.camara.cl/camara/deputys.aspx#tab">página web oficial de la Cámara de Diputados</a>. Para la extracción de datos desde Twitter usamos el paquete <code>rtweet</code>, que nos permite acceder libremente a la API de Twitter para descargar información de los usuarios, fechas y hashtags (ver Capítulo <a href="web-mining.html#web-mining">12</a>).</p>
<p>En este tipo de análisis, la tarea más difícil es reunir y limpiar la base de datos para que se vea “tidy” (ordenada). Afortunadamente, la API de Twitter y paquetes como <code>rtweet</code> o <code>twitter</code> son muy útiles para manejar la información descargada de una manera simple y ordenada.<a href="#fn54" class="footnote-ref" id="fnref54"><sup>54</sup></a></p>
</div>
<div id="sqta1" class="section level2">
<h2><span class="header-section-number">13.1</span> Análisis de hashtags políticos</h2>
<p>¿Qué son los hashtags (#) y cómo están relacionado con la política? Los hashtags son textos que conectan usuarios en una conversación digital. Analizarlos nos ayuda a entender cómo, cuándo y por quién estas conversaciones están teniendo lugar. Además, los hashtags pueden ayudar a la movilización política. De hecho, existe literatura que aborda la protesta social a través de la viralización de hashtags, como los trabajos recientes que estudian el hashtag-feminismo <span class="citation">(Trott <a href="referencias.html#ref-trottConnectedFeministsForegrounding2018" role="doc-biblioref">2018</a>)</span> y hashtags de activismo de minorías raciales, como el #blacklivesmatter <span class="citation">(Ince, Rojas, and Davis <a href="referencias.html#ref-inceSocialMediaResponse2017" role="doc-biblioref">2017</a>)</span>.<a href="#fn55" class="footnote-ref" id="fnref55"><sup>55</sup></a></p>
<p>En general, usar un hashtag indica interés en un tópico, independiente de que uno esté a favor o en contra de él. Por lo tanto, este primer ejercicio no intenta medir los niveles de apoyo, sino que este análisis nos permite identificar aquellos representantes que discuten temas de género. La organización de la sección es la siguiente. La primera parte es la exploración de la base de datos y un análisis descriptivo bivariado de las frecuencias de los <code>#</code>. En la segunda parte, hacemos una comparación por género. Tercero, comparamos el uso de hashtags por coalición política. En la cuarta parte, veremos la variación semanal en el uso de algunos <code>#</code>. En la quinta parte, esta variación temporal será separada por género.</p>
<div id="exploración-de-datos-de-twitter" class="section level3">
<h3><span class="header-section-number">13.1.1</span> Exploración de datos de Twitter</h3>
<div class="sourceCode" id="cb462"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb462-1"><a href="qta.html#cb462-1"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb462-2"><a href="qta.html#cb462-2"></a><span class="kw">library</span>(tidytext)</span></code></pre></div>
<div class="sourceCode" id="cb463"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb463-1"><a href="qta.html#cb463-1"></a><span class="kw">library</span>(paqueteadp)</span>
<span id="cb463-2"><a href="qta.html#cb463-2"></a><span class="kw">data</span>(<span class="st">&quot;poltweets&quot;</span>)</span></code></pre></div>
<p>Tras cargar la base de datos <code>poltweets</code>, la exploramos con <code>skimr::skim(poltweets)</code>, como muestra la Figura <a href="qta.html#fig:skim-qta">13.1</a>. Con esta función puedes hacer una exploración rápida del tamaño de la base de datos, el número de observaciones y variables, y el tipo de variable (carácter, número entero, factor, etc.). También podemos ver el número de valores perdidos, el número de categorías o valores que la variable factor asume (<code>n_unique</code>), así como la dispersión estadística para las variables cuantitativas (min, max, cuantiles, media y desviación estándar). <code>skimr::skim()</code> es un buen primer paso que nos permite diagnosticar los datos con los que trabajaremos. En el caso de nuestra base de datos <code>poltweets</code>, podemos ver que hay 7 variables de tipo “caracter” y una de tipo “POSIXct”, que también ayuda a trabajar con fechas.</p>
<div class="figure" style="text-align: center"><span id="fig:skim-qta"></span>
<img src="00-images/qta/skim_qta.png" alt="Skim de nuestra base de datos." width="100%" />
<p class="caption">
Figura 13.1: Skim de nuestra base de datos.
</p>
</div>
<p>Mira cómo el 75,4% de las filas en la base de datos corresponden a tweets hechos por congresistas. También notamos que hay 29 congresistas mujeres y 93 congresistas hombres en el conjunto de datos.</p>
<div class="sourceCode" id="cb464"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb464-1"><a href="qta.html#cb464-1"></a><span class="co"># among tweets:</span></span>
<span id="cb464-2"><a href="qta.html#cb464-2"></a>poltweets <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">count</span>(genero) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">freq =</span> n <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(n))</span>
<span id="cb464-3"><a href="qta.html#cb464-3"></a><span class="co">## # A tibble: 2 x 3</span></span>
<span id="cb464-4"><a href="qta.html#cb464-4"></a><span class="co">##   genero        n  freq</span></span>
<span id="cb464-5"><a href="qta.html#cb464-5"></a><span class="co">##   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt;</span></span>
<span id="cb464-6"><a href="qta.html#cb464-6"></a><span class="co">## 1 Femenino   4595 0.246</span></span>
<span id="cb464-7"><a href="qta.html#cb464-7"></a><span class="co">## 2 Masculino 14063 0.754</span></span>
<span id="cb464-8"><a href="qta.html#cb464-8"></a></span>
<span id="cb464-9"><a href="qta.html#cb464-9"></a><span class="co"># deputies&#39; characteristics:</span></span>
<span id="cb464-10"><a href="qta.html#cb464-10"></a>poltweets <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb464-11"><a href="qta.html#cb464-11"></a><span class="st">    </span><span class="kw">distinct</span>(nombre_usuario, genero)<span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb464-12"><a href="qta.html#cb464-12"></a><span class="st">    </span><span class="kw">count</span>(genero) </span>
<span id="cb464-13"><a href="qta.html#cb464-13"></a><span class="co">## # A tibble: 2 x 2</span></span>
<span id="cb464-14"><a href="qta.html#cb464-14"></a><span class="co">##   genero        n</span></span>
<span id="cb464-15"><a href="qta.html#cb464-15"></a><span class="co">##   &lt;chr&gt;     &lt;int&gt;</span></span>
<span id="cb464-16"><a href="qta.html#cb464-16"></a><span class="co">## 1 Femenino     29</span></span>
<span id="cb464-17"><a href="qta.html#cb464-17"></a><span class="co">## 2 Masculino    93</span></span></code></pre></div>
<p>Tras cargar la base de datos y dar un rápido vistazo al tamaño y las variables incluídas, debemos extraer los hashtags de los tweets utilizando la función <code>unnest_tokens()</code> de <code>tidytext</code>, creando una base de datos “tokenizada” con una fila por hashtag. Luego, simplemente filtramos todas las filas que empiecen con un hashtag (#), dejándonos con una base de datos de un-hashtag-por-fila.</p>
<div class="sourceCode" id="cb465"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb465-1"><a href="qta.html#cb465-1"></a>poltweets_hashtags &lt;-<span class="st"> </span>poltweets <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb465-2"><a href="qta.html#cb465-2"></a><span class="st">  </span><span class="kw">unnest_tokens</span>(<span class="dt">output =</span> <span class="st">&quot;hashtag&quot;</span>, <span class="dt">input =</span> <span class="st">&quot;texto&quot;</span>, <span class="dt">token =</span> <span class="st">&quot;tweets&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb465-3"><a href="qta.html#cb465-3"></a><span class="st">  </span><span class="kw">filter</span>(<span class="kw">str_starts</span>(hashtag, <span class="st">&quot;#&quot;</span>))</span></code></pre></div>
<p>Queremos ver las diferencias en cómo los representantes, partidos y coaliciones participan en el debate político sobre género. Para hacerlo, creamos una nueva variable dummy que toma el valor “1” cada vez que la variable de cadena de caracter coincide con alguna de las expresiones regulares como “femi”, “niunamenos”, “aborto”, “mujer” y “genero”:</p>
<div class="sourceCode" id="cb466"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb466-1"><a href="qta.html#cb466-1"></a>poltweets_hashtags &lt;-<span class="st"> </span>poltweets_hashtags <span class="op">%&gt;%</span></span>
<span id="cb466-2"><a href="qta.html#cb466-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">fem_hashtag =</span> <span class="kw">case_when</span>(<span class="kw">str_detect</span>(hashtag, <span class="st">&quot;femi&quot;</span>) <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, </span>
<span id="cb466-3"><a href="qta.html#cb466-3"></a>                                 <span class="kw">str_detect</span>(hashtag, <span class="st">&quot;niunamenos&quot;</span>) <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, </span>
<span id="cb466-4"><a href="qta.html#cb466-4"></a>                                 <span class="kw">str_detect</span>(hashtag, <span class="st">&quot;aborto&quot;</span>) <span class="op">~</span><span class="st"> </span><span class="dv">1</span>,</span>
<span id="cb466-5"><a href="qta.html#cb466-5"></a>                                 <span class="kw">str_detect</span>(hashtag, <span class="st">&quot;mujer&quot;</span>) <span class="op">~</span><span class="st"> </span><span class="dv">1</span>,</span>
<span id="cb466-6"><a href="qta.html#cb466-6"></a>                                 <span class="kw">str_detect</span>(hashtag, <span class="st">&quot;genero&quot;</span>)<span class="op">~</span><span class="st"> </span><span class="dv">1</span>,</span>
<span id="cb466-7"><a href="qta.html#cb466-7"></a>                                 <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb466-8"><a href="qta.html#cb466-8"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">fem_hashtag =</span> <span class="kw">as.character</span>(fem_hashtag))</span></code></pre></div>
<p>Vemos que esta es una buena medida para capturar hashtags relacionados al género y el feminismo. Observa que sólo el 4.1% de las filas contienen hashtag relacionados con género bajo este criterio y que los tres hashtags más frecuentes son #aborto3causales, #interpelacionaborto3causales y #leydeidentidaddegeneroahora.<a href="#fn56" class="footnote-ref" id="fnref56"><sup>56</sup></a></p>
<div class="sourceCode" id="cb467"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb467-1"><a href="qta.html#cb467-1"></a>poltweets_hashtags <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">count</span>(fem_hashtag) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">freq =</span> n <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(n))</span>
<span id="cb467-2"><a href="qta.html#cb467-2"></a><span class="co">## # A tibble: 2 x 3</span></span>
<span id="cb467-3"><a href="qta.html#cb467-3"></a><span class="co">##   fem_hashtag     n   freq</span></span>
<span id="cb467-4"><a href="qta.html#cb467-4"></a><span class="co">##   &lt;chr&gt;       &lt;int&gt;  &lt;dbl&gt;</span></span>
<span id="cb467-5"><a href="qta.html#cb467-5"></a><span class="co">## 1 0           10423 0.958 </span></span>
<span id="cb467-6"><a href="qta.html#cb467-6"></a><span class="co">## 2 1             455 0.0418</span></span></code></pre></div>
<div class="sourceCode" id="cb468"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb468-1"><a href="qta.html#cb468-1"></a>poltweets_hashtags <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb468-2"><a href="qta.html#cb468-2"></a><span class="st">  </span><span class="kw">filter</span>(fem_hashtag <span class="op">==</span><span class="st"> &quot;1&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb468-3"><a href="qta.html#cb468-3"></a><span class="st">  </span><span class="kw">count</span>(hashtag) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb468-4"><a href="qta.html#cb468-4"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="op">-</span>n) </span>
<span id="cb468-5"><a href="qta.html#cb468-5"></a><span class="co">## # A tibble: 63 x 2</span></span>
<span id="cb468-6"><a href="qta.html#cb468-6"></a><span class="co">##   hashtag                           n</span></span>
<span id="cb468-7"><a href="qta.html#cb468-7"></a><span class="co">##   &lt;chr&gt;                         &lt;int&gt;</span></span>
<span id="cb468-8"><a href="qta.html#cb468-8"></a><span class="co">## 1 #aborto3causales                 98</span></span>
<span id="cb468-9"><a href="qta.html#cb468-9"></a><span class="co">## 2 #interpelacionaborto3causales    64</span></span>
<span id="cb468-10"><a href="qta.html#cb468-10"></a><span class="co">## 3 #leydeidentidaddegeneroahora     61</span></span>
<span id="cb468-11"><a href="qta.html#cb468-11"></a><span class="co">## # … with 60 more rows</span></span></code></pre></div>
</div>
<div id="diagnóstico-visual" class="section level3">
<h3><span class="header-section-number">13.1.2</span> Diagnóstico visual</h3>
<p>Hagamos algunos análisis bivariados agrupando por número de tweets por mes, coalición y género (Figuras <a href="qta.html#fig:qta1">13.2</a>, <a href="qta.html#fig:qta2">13.3</a>, y <a href="qta.html#fig:qta4">13.4</a>).</p>
<div class="figure" style="text-align: center"><span id="fig:qta1"></span>
<img src="13-qta_es_files/figure-html/qta1-1.png" alt="Total number of tweets by month." width="672" />
<p class="caption">
Figura 13.2: Total number of tweets by month.
</p>
</div>
<div class="figure" style="text-align: center"><span id="fig:qta2"></span>
<img src="13-qta_es_files/figure-html/qta2-1.png" alt="Total number of tweets by coalicion." width="672" />
<p class="caption">
Figura 13.3: Total number of tweets by coalicion.
</p>
</div>
<div class="figure" style="text-align: center"><span id="fig:qta4"></span>
<img src="13-qta_es_files/figure-html/qta4-1.png" alt="Total number of tweets by genero." width="672" />
<p class="caption">
Figura 13.4: Total number of tweets by genero.
</p>
</div>
</div>
<div id="hashtags-más-utilizados" class="section level3">
<h3><span class="header-section-number">13.1.3</span> Hashtags más utilizados</h3>
<p>Para ver cuáles son los hashtags más utilizados, los ordenamos desde los más frecuentes hasta los menos frecuentes. Vemos que el hashtag más utiliazdo es <code>#cuentapublica</code>, vinculado al Discurso Público del Presidente Sebastián Piñera, del 21 de mayo, al Congreso. El hashtag <code>#aborto3causales</code> es el único relacionado a género en el ranking, con 98 menciones. Este hashtag hace referencia a la discusión sobre la ley de aborto.</p>
<div class="sourceCode" id="cb469"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb469-1"><a href="qta.html#cb469-1"></a>poltweets_hashtags <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb469-2"><a href="qta.html#cb469-2"></a><span class="st">  </span><span class="kw">count</span>(hashtag, fem_hashtag) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb469-3"><a href="qta.html#cb469-3"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="op">-</span>n) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb469-4"><a href="qta.html#cb469-4"></a><span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">20</span>)</span>
<span id="cb469-5"><a href="qta.html#cb469-5"></a><span class="co">## # A tibble: 20 x 3</span></span>
<span id="cb469-6"><a href="qta.html#cb469-6"></a><span class="co">##   hashtag        fem_hashtag     n</span></span>
<span id="cb469-7"><a href="qta.html#cb469-7"></a><span class="co">##   &lt;chr&gt;          &lt;chr&gt;       &lt;int&gt;</span></span>
<span id="cb469-8"><a href="qta.html#cb469-8"></a><span class="co">## 1 #cuentapublica 0             381</span></span>
<span id="cb469-9"><a href="qta.html#cb469-9"></a><span class="co">## 2 #valdiviacl    0             323</span></span>
<span id="cb469-10"><a href="qta.html#cb469-10"></a><span class="co">## 3 #losrios       0             232</span></span>
<span id="cb469-11"><a href="qta.html#cb469-11"></a><span class="co">## # … with 17 more rows</span></span></code></pre></div>
</div>
<div id="wordclouds-nubes-de-palabras" class="section level3">
<h3><span class="header-section-number">13.1.4</span> Wordclouds (Nubes de palabras)</h3>
<p>Una rápida e intuitiva manera de representar frecuencias de palabras son las wordclouds (nubes de palabras). Estas representaciones gráficas permiten posicionar en el centro y con letras más grandes los casos que tienen mayor frecuencia. Para eso, utilizamos el paquete <code>ggwordcloud</code> para los 35 hashtags más comunes. Tras crear una base de datos de conteo, emplearemos el <code>geom_text_wordcloud()</code> con los mapeos estéticos “label”, “tamaño” y “color”. En la inspección visual vemos los tres hashtags sobre género más utilizados: #aborto3causales, #leydeidentidaddegeneroahora e #interpelacionaborto3causales (Figure <a href="qta.html#fig:qta5">13.5</a>).</p>
<div class="sourceCode" id="cb470"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb470-1"><a href="qta.html#cb470-1"></a><span class="kw">library</span>(ggwordcloud)</span>
<span id="cb470-2"><a href="qta.html#cb470-2"></a></span>
<span id="cb470-3"><a href="qta.html#cb470-3"></a>data_hashtags_wordcloud &lt;-<span class="st"> </span>poltweets_hashtags <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb470-4"><a href="qta.html#cb470-4"></a><span class="st">  </span><span class="kw">count</span>(hashtag, fem_hashtag) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb470-5"><a href="qta.html#cb470-5"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="op">-</span>n) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb470-6"><a href="qta.html#cb470-6"></a><span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">35</span>)</span></code></pre></div>
<div class="sourceCode" id="cb471"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb471-1"><a href="qta.html#cb471-1"></a><span class="kw">ggplot</span>(data_hashtags_wordcloud, </span>
<span id="cb471-2"><a href="qta.html#cb471-2"></a>       <span class="kw">aes</span>(<span class="dt">label =</span> hashtag, <span class="dt">size =</span> n, <span class="dt">color =</span> fem_hashtag)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb471-3"><a href="qta.html#cb471-3"></a><span class="st">  </span><span class="kw">geom_text_wordcloud</span>() <span class="op">+</span></span>
<span id="cb471-4"><a href="qta.html#cb471-4"></a><span class="st">  </span><span class="kw">scale_size_area</span>(<span class="dt">max_size =</span> <span class="dv">8</span>) <span class="op">+</span><span class="st"> </span><span class="co"># we set a maximum size for the text </span></span>
<span id="cb471-5"><a href="qta.html#cb471-5"></a><span class="st">  </span><span class="kw">theme_void</span>()</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:qta5"></span>
<img src="13-qta_es_files/figure-html/qta5-1.png" alt="Wordcloud of the most common hashtags." width="576" />
<p class="caption">
Figura 13.5: Wordcloud of the most common hashtags.
</p>
</div>
</div>
<div id="nubes-de-palabras-por-grupos" class="section level3">
<h3><span class="header-section-number">13.1.5</span> Nubes de palabras por grupos</h3>
<p>Utilizando la función <code>facet_wrap()</code>, las nubes de palabras se pueden dividir por variables de interés. Clasificando por género y coalición, inmediatamente vemos cómo hashtags como #olafeminista, #agendamujer y #educacionnosexista aparecen sólo entre las cuentas de Twitter de las congresistas. Al enfrentar coaliciones, nos damos cuenta que los tweets del Frente Amplio (FA) usan una alta proporción de hashtags relacionados con género, mientras que la coalición oficialista Chile Vamos (ChV) no usa ningún hashtag (Ver Figuras <a href="qta.html#fig:qta6">13.6</a> and <a href="qta.html#fig:qta7">13.7</a>).</p>
<div class="sourceCode" id="cb472"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb472-1"><a href="qta.html#cb472-1"></a><span class="kw">ggplot</span>(poltweets_hashtags <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb472-2"><a href="qta.html#cb472-2"></a><span class="st">         </span><span class="kw">count</span>(hashtag, genero, fem_hashtag) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb472-3"><a href="qta.html#cb472-3"></a><span class="st">         </span><span class="kw">arrange</span>(<span class="op">-</span>n) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb472-4"><a href="qta.html#cb472-4"></a><span class="st">         </span><span class="kw">group_by</span>(genero) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb472-5"><a href="qta.html#cb472-5"></a><span class="st">         </span><span class="kw">slice</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">20</span>), </span>
<span id="cb472-6"><a href="qta.html#cb472-6"></a>       <span class="kw">aes</span>(<span class="dt">label =</span> hashtag, <span class="dt">size =</span> n, <span class="dt">color =</span> fem_hashtag)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb472-7"><a href="qta.html#cb472-7"></a><span class="st">  </span><span class="kw">geom_text_wordcloud</span>() <span class="op">+</span></span>
<span id="cb472-8"><a href="qta.html#cb472-8"></a><span class="st">  </span><span class="kw">scale_size_area</span>(<span class="dt">max_size =</span> <span class="dv">6</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb472-9"><a href="qta.html#cb472-9"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>genero)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:qta6"></span>
<img src="13-qta_es_files/figure-html/qta6-1.png" alt="Wordclouds by genero." width="576" />
<p class="caption">
Figura 13.6: Wordclouds by genero.
</p>
</div>
<div class="sourceCode" id="cb473"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb473-1"><a href="qta.html#cb473-1"></a><span class="kw">ggplot</span>(poltweets_hashtags <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb473-2"><a href="qta.html#cb473-2"></a><span class="st">         </span><span class="kw">count</span>(hashtag, coalicion, fem_hashtag) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb473-3"><a href="qta.html#cb473-3"></a><span class="st">         </span><span class="kw">arrange</span>(<span class="op">-</span>n) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb473-4"><a href="qta.html#cb473-4"></a><span class="st">         </span><span class="kw">group_by</span>(coalicion) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb473-5"><a href="qta.html#cb473-5"></a><span class="st">         </span><span class="kw">slice</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">20</span>), </span>
<span id="cb473-6"><a href="qta.html#cb473-6"></a>       <span class="kw">aes</span>(<span class="dt">label =</span> hashtag, <span class="dt">size =</span> n, <span class="dt">color =</span> fem_hashtag)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb473-7"><a href="qta.html#cb473-7"></a><span class="st">  </span><span class="kw">geom_text_wordcloud</span>() <span class="op">+</span></span>
<span id="cb473-8"><a href="qta.html#cb473-8"></a><span class="st">  </span><span class="kw">scale_size_area</span>(<span class="dt">max_size =</span> <span class="dv">6</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb473-9"><a href="qta.html#cb473-9"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>coalicion, <span class="dt">nrow =</span> <span class="dv">3</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:qta7"></span>
<img src="13-qta_es_files/figure-html/qta7-1.png" alt="Wordclouds by coalicion." width="480" />
<p class="caption">
Figura 13.7: Wordclouds by coalicion.
</p>
</div>
</div>
<div id="gráficos-de-barras" class="section level3">
<h3><span class="header-section-number">13.1.6</span> Gráficos de barras</h3>
<p>Ahora clasificaremos la frecuencia de los hashtags por género. Generaremos este gráfico en dos pasos. Primero, creamos una tabla con 15 de los hashtags más utilizados entre mujeres y hombres. Luego, crearemos un gráfico de barras añadiendo el argumento <code>geom_col()</code> a la función <code>ggplot()</code>. Como resultado, veremos los hashtags #aborto3causales y #leydeidentidaddegeneroahora aparecer sólo en las cuentas de las congresistas, mientras que ninguno de estos hashtags relacionados con género aparecen en cuentas masculinas (Figura <a href="qta.html#fig:qta8">13.8</a>).</p>
<div class="sourceCode" id="cb474"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb474-1"><a href="qta.html#cb474-1"></a>plot_<span class="dv">15</span> &lt;-<span class="st"> </span>poltweets_hashtags <span class="op">%&gt;%</span></span>
<span id="cb474-2"><a href="qta.html#cb474-2"></a><span class="st">  </span><span class="kw">group_by</span>(genero) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb474-3"><a href="qta.html#cb474-3"></a><span class="st">  </span><span class="kw">count</span>(hashtag, fem_hashtag) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb474-4"><a href="qta.html#cb474-4"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="op">-</span>n) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb474-5"><a href="qta.html#cb474-5"></a><span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">15</span>)</span></code></pre></div>
<div class="sourceCode" id="cb475"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb475-1"><a href="qta.html#cb475-1"></a><span class="kw">ggplot</span>(<span class="dt">data    =</span> plot_<span class="dv">15</span>,</span>
<span id="cb475-2"><a href="qta.html#cb475-2"></a>       <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> n, <span class="dt">y =</span> <span class="kw">reorder_within</span>(hashtag, n, genero), </span>
<span id="cb475-3"><a href="qta.html#cb475-3"></a>                     <span class="dt">fill =</span> fem_hashtag)) <span class="op">+</span></span>
<span id="cb475-4"><a href="qta.html#cb475-4"></a><span class="st">  </span><span class="kw">geom_col</span>()<span class="op">+</span></span>
<span id="cb475-5"><a href="qta.html#cb475-5"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Frequency&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;&quot;</span>, <span class="dt">fill =</span> <span class="st">&quot;Hashtag feminista&quot;</span>) <span class="op">+</span></span>
<span id="cb475-6"><a href="qta.html#cb475-6"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>genero, <span class="dt">scales =</span> <span class="st">&quot;free&quot;</span>, <span class="dt">nrow =</span> <span class="dv">2</span>) <span class="op">+</span></span>
<span id="cb475-7"><a href="qta.html#cb475-7"></a><span class="st">  </span><span class="kw">scale_y_reordered</span>()</span></code></pre></div>
<div class="figure" style="text-align: left"><span id="fig:qta8"></span>
<img src="13-qta_es_files/figure-html/qta8-1.png" alt="Most frequent hashtags by congresswomen (April 1 - June 30)." width="672" />
<p class="caption">
Figura 13.8: Most frequent hashtags by congresswomen (April 1 - June 30).
</p>
</div>
<p>Ahora, calculamos y graficamos el estadístico tf-idf, destinado a medir cuán importante es una palabra para un documento en una colección de documentos. Este estadístico es una combinación de la frecuencia del término (tf por sus siglas en inglés) y la frecuencia de documento inversa del término (idf por sus siglas en inglés), que disminuye su valor en términos usados comunmente y lo incrementa para palabras que no se utilizan mucho a lo largo de la colección de documentos. Observamos que, cuando separamos por grupos, dos hashtags con los más altos tf_idf en el Frente Amplio están relacionados con género (#leydeidentidaddegeneroahora).</p>
<div class="sourceCode" id="cb476"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb476-1"><a href="qta.html#cb476-1"></a>hash_tf_idf &lt;-<span class="st"> </span>poltweets_hashtags <span class="op">%&gt;%</span></span>
<span id="cb476-2"><a href="qta.html#cb476-2"></a><span class="st">  </span><span class="co"># calculate tf-idf:</span></span>
<span id="cb476-3"><a href="qta.html#cb476-3"></a><span class="st">  </span><span class="kw">count</span>(coalicion, hashtag, fem_hashtag, <span class="dt">sort =</span> T) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb476-4"><a href="qta.html#cb476-4"></a><span class="st">  </span><span class="kw">bind_tf_idf</span>(<span class="dt">term =</span> hashtag, <span class="dt">document =</span> coalicion, <span class="dt">n =</span> n) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb476-5"><a href="qta.html#cb476-5"></a><span class="st">  </span><span class="co"># get 10 most distinctive hashtags per coalicion:</span></span>
<span id="cb476-6"><a href="qta.html#cb476-6"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="op">-</span>tf_idf) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb476-7"><a href="qta.html#cb476-7"></a><span class="st">  </span><span class="kw">group_by</span>(coalicion) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb476-8"><a href="qta.html#cb476-8"></a><span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</span></code></pre></div>
<div class="sourceCode" id="cb477"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb477-1"><a href="qta.html#cb477-1"></a><span class="kw">ggplot</span>(<span class="dt">data    =</span> hash_tf_idf,</span>
<span id="cb477-2"><a href="qta.html#cb477-2"></a>       <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> tf_idf,</span>
<span id="cb477-3"><a href="qta.html#cb477-3"></a>                     <span class="dt">y =</span> <span class="kw">reorder_within</span>(hashtag, tf_idf, coalicion), </span>
<span id="cb477-4"><a href="qta.html#cb477-4"></a>                     <span class="dt">fill =</span> fem_hashtag)) <span class="op">+</span></span>
<span id="cb477-5"><a href="qta.html#cb477-5"></a><span class="st">  </span><span class="kw">geom_col</span>() <span class="op">+</span></span>
<span id="cb477-6"><a href="qta.html#cb477-6"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;tf_idf&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;&quot;</span>, <span class="dt">fill =</span> <span class="st">&quot;Hashtag feminista&quot;</span>) <span class="op">+</span></span>
<span id="cb477-7"><a href="qta.html#cb477-7"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>coalicion, <span class="dt">nrow =</span> <span class="dv">3</span>, <span class="dt">scales =</span> <span class="st">&quot;free&quot;</span>) <span class="op">+</span></span>
<span id="cb477-8"><a href="qta.html#cb477-8"></a><span class="st">  </span><span class="kw">scale_y_reordered</span>()</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:tf"></span>
<img src="13-qta_es_files/figure-html/tf-1.png" alt="tf-idf statistic, intended to measure how important a word is to a document." width="576" />
<p class="caption">
Figura 13.9: tf-idf statistic, intended to measure how important a word is to a document.
</p>
</div>
</div>
<div id="variación-temporal-en-el-uso-de-hashtags" class="section level3">
<h3><span class="header-section-number">13.1.7</span> Variación temporal en el uso de hashtags</h3>
<p>Ciertos hashtags pueden aumentar o disminuir su uso a través del tiempo, dependiendo del contexto político. Exploraremos la frecuencia semanal de los dos hashtags más frecuentes en nuestro ejemplo. Utilizando el paquete <code>lubridate</code>, que trabaja con datos en formato fecha, podemos buscar por tendencias de tiempo. En nuestra base de datos tenemos una variable con una fecha: <code>creado_en</code>. Usando esta variable, podemos confirmar que hubo un “peak” de tweets entre el 27 de mayo y el 2 de junio (ver Figura <a href="qta.html#fig:qta9">13.10</a>).</p>
<div class="sourceCode" id="cb478"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb478-1"><a href="qta.html#cb478-1"></a>hashtags_weekly &lt;-<span class="st"> </span>poltweets_hashtags <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb478-2"><a href="qta.html#cb478-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">week =</span> <span class="kw">floor_date</span>(creado_en, <span class="st">&quot;week&quot;</span>, <span class="dt">week_start =</span> <span class="dv">1</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb478-3"><a href="qta.html#cb478-3"></a><span class="st">  </span><span class="kw">filter</span>(hashtag <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;#aborto3causales&quot;</span>, </span>
<span id="cb478-4"><a href="qta.html#cb478-4"></a>                        <span class="st">&quot;#leydeidentidaddegeneroahora&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb478-5"><a href="qta.html#cb478-5"></a><span class="st">  </span><span class="kw">count</span>(hashtag, week)</span>
<span id="cb478-6"><a href="qta.html#cb478-6"></a></span>
<span id="cb478-7"><a href="qta.html#cb478-7"></a><span class="kw">ggplot</span>(<span class="dt">data    =</span> hashtags_weekly,</span>
<span id="cb478-8"><a href="qta.html#cb478-8"></a>       <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> week, <span class="dt">y =</span> n, </span>
<span id="cb478-9"><a href="qta.html#cb478-9"></a>                     <span class="dt">linetype =</span> hashtag, <span class="dt">group =</span> hashtag)) <span class="op">+</span></span>
<span id="cb478-10"><a href="qta.html#cb478-10"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb478-11"><a href="qta.html#cb478-11"></a><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span></span>
<span id="cb478-12"><a href="qta.html#cb478-12"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Semana&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Uso total semanal&quot;</span>, <span class="dt">linetype =</span> <span class="st">&quot;Hashtag&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:qta9"></span>
<img src="13-qta_es_files/figure-html/qta9-1.png" alt="Temporal variation in the usage of hashtags." width="672" />
<p class="caption">
Figura 13.10: Temporal variation in the usage of hashtags.
</p>
</div>
</div>
<div id="para-resumir" class="section level3">
<h3><span class="header-section-number">13.1.8</span> Para resumir</h3>
<p>Los hashtags pueden decir mucho sobre un debate político. Podemos observar algunas diferencias evidentes entre el uso de “#” sobre género. Las congresistas usaron muchos más hashtags como #olafeminista y #agendamujer que sus contrapartes masculinas. En cuanto a las coaliciones, las de izquierda (Frente Amplio y La Fuerza de la Mayoría) los utilizaron más. Sobre la variación temporal, la mayor intensidad de menciones de temas relacionados al género ocurrieron durante la semana del 14 al 20 de mayo, la semana previa al Discurso de Cuenta Pública (21 de mayo), lo que también coincidió con manifestaciones en diversas ciudades del país. Vemos que, en términos relativos, las congresistas estuvieron cinco veces más interesadas en el movimiento feminista, ya que usaron el hashtag #agendamujer 5 veces más que sus contrapartes masculinas durante la semana del 14 al 20 de mayo.</p>
<p>¿Qué aprendiste en esta sección? Te mostramos cómo usar Twitter para analizar fenómenos políticos. Una vez tengas tu propia base de datos, puedes seguir nuestro análisis paso por paso. Esto será útil como punto de partida para diseños explicativos que se pregunten sobre las causas del alineamiento político en diferentes agendas.</p>
</div>
</div>
<div id="wordfish" class="section level2">
<h2><span class="header-section-number">13.2</span> Wordfish</h2>
<p>En esta sección del capítulo, emplearemos dos técnicas NLP comúnmente usadas en ciencia política para minería de datos sin supervisión: Wordfish y Structural Topic Models (STM). Ambos modelos de procesamiento de texto nos permiten resumir muchos documentos diferentes de manera rápida y económica y pueden complementar otras mediciones descriptivas como la frecuencia de palabras o de hashtags. Como no están supervisados, las clasificaciones se realizarán sin utilizar ningún código o diccionario previo <span class="citation">(Welbers, Van Atteveldt, and Benoit <a href="referencias.html#ref-welbersTextAnalysis2017" role="doc-biblioref">2017</a>)</span>. Esto tiene la ventaja de ahorrar trabajo en la creación manual de código, así como evitar el sesgo propio de quien hace el código. Otra ventaja es que no son dependientes del lenguaje de origen, es decir, en principio, se pueden utilizar en cualquier lenguaje. Ambos métodos utilizan el enfoque de “bolsa de palabras” (“bag of words”), ya que el orden de las palabras dentro del texto no altera el análisis. Los parámetros estimados por cada algoritmo pueden ser graficados con <code>ggplot2</code>, lo que facilita la interpretación visual de los resultados.</p>
<p>La organización de la sección tiene la siguiente estructura, Primero, haremos una pequeña limpieza de datos, como remover “palabras vacías” (stopwords) (con un diccionario de stopwords, en este caso, incorporado en Quanteda), caracteres y números extraños. Luego, aplicaremos el algoritmo Wordfish en los tweets de los parlamentarios chilenos durante el mismo periodo que en la sección anterior. En la segunda parte, haremos un modelamiento de tópicos con STM en el mismo corpus.</p>
<div id="inspección-y-limpieza-de-datos" class="section level3">
<h3><span class="header-section-number">13.2.1</span> Inspección y limpieza de datos</h3>
<p>Volvemos a cargar la base de datos <code>poltweets</code> y notamos que ahora contiene una serie de variables que son necesarias para el análisis de texto. Ahora usaremos los tweets completos, no sólo los tokens. También necesitamos las variables <code>id</code>, necesaria para que cada tweet coincida con quien lo twitteó.</p>
<div class="sourceCode" id="cb479"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb479-1"><a href="qta.html#cb479-1"></a><span class="kw">library</span>(quanteda) <span class="co"># dfm and corpus</span></span>
<span id="cb479-2"><a href="qta.html#cb479-2"></a><span class="kw">library</span>(quanteda.textmodels) <span class="co"># wordfish</span></span>
<span id="cb479-3"><a href="qta.html#cb479-3"></a><span class="kw">library</span>(qdapRegex) <span class="co"># remove non ascii characters</span></span></code></pre></div>
<p>Empecemos siempre haciendo un escaneo rápido a los datos, como hicimos en la sección previa. El análisis descriptivo nos permite resumir características básicas de la base de datos, como el tipo de las variables y el número de caracteres por observación, la cantidad de datos perdidos (NA) y el rango de unidades de texto contenidas en cada variable. Exploramos la variable de caracteres que contiene los tweets. Al usar el comando <code>glimpse()</code> tenemos una previsualización de cada variable, específicamente del tipo y una vista previa de las primeras observaciones.</p>
<div class="sourceCode" id="cb480"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb480-1"><a href="qta.html#cb480-1"></a><span class="kw">glimpse</span>(poltweets)</span>
<span id="cb480-2"><a href="qta.html#cb480-2"></a><span class="co">## Rows: 18,658</span></span>
<span id="cb480-3"><a href="qta.html#cb480-3"></a><span class="co">## Columns: 8</span></span>
<span id="cb480-4"><a href="qta.html#cb480-4"></a><span class="co">## $ id             &lt;chr&gt; &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;1…</span></span>
<span id="cb480-5"><a href="qta.html#cb480-5"></a><span class="co">## $ nombre_usuario &lt;chr&gt; &quot;vladomirosevic&quot;, &quot;vladomirosevic&quot;, &quot;vladomiros…</span></span>
<span id="cb480-6"><a href="qta.html#cb480-6"></a><span class="co">## $ nombres        &lt;chr&gt; &quot;VLADO&quot;, &quot;VLADO&quot;, &quot;VLADO&quot;, &quot;VLADO&quot;, &quot;VLADO&quot;, &quot;V…</span></span>
<span id="cb480-7"><a href="qta.html#cb480-7"></a><span class="co">## $ apellido       &lt;chr&gt; &quot;MIROSEVIC&quot;, &quot;MIROSEVIC&quot;, &quot;MIROSEVIC&quot;, &quot;MIROSEV…</span></span>
<span id="cb480-8"><a href="qta.html#cb480-8"></a><span class="co">## $ creado_en      &lt;dttm&gt; 2018-04-11 16:19:43, 2018-04-11 16:17:56, 2018…</span></span>
<span id="cb480-9"><a href="qta.html#cb480-9"></a><span class="co">## $ texto          &lt;chr&gt; &quot;@MarioEyza1 @bcnchile @IntendenciaXV @Insulza …</span></span>
<span id="cb480-10"><a href="qta.html#cb480-10"></a><span class="co">## $ coalicion      &lt;chr&gt; &quot;FA&quot;, &quot;FA&quot;, &quot;FA&quot;, &quot;FA&quot;, &quot;FA&quot;, &quot;FA&quot;, &quot;FA&quot;, &quot;FA&quot;,…</span></span>
<span id="cb480-11"><a href="qta.html#cb480-11"></a><span class="co">## $ genero         &lt;chr&gt; &quot;Masculino&quot;, &quot;Masculino&quot;, &quot;Masculino&quot;, &quot;Masculi…</span></span></code></pre></div>
</div>
<div id="pre-procesamiento" class="section level3">
<h3><span class="header-section-number">13.2.2</span> Pre-procesamiento</h3>
<p>Antes de aplicar el algoritmo, debemos pre-procesar los textos. Esto significa utilizar expresiones regulares para lograr un texto más limpio y ordenado. Utilizaremos expresiones regulares para remover caracteres extraños, nombres de usuario, URLs, emojis, además de cambiarlo todo a minúsculas.</p>
<div class="sourceCode" id="cb481"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb481-1"><a href="qta.html#cb481-1"></a><span class="co"># function to remove accents</span></span>
<span id="cb481-2"><a href="qta.html#cb481-2"></a>f_remove_accent &lt;-<span class="st"> </span><span class="cf">function</span>(x){</span>
<span id="cb481-3"><a href="qta.html#cb481-3"></a>  x <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb481-4"><a href="qta.html#cb481-4"></a><span class="st">    </span><span class="kw">str_replace_all</span>(<span class="st">&quot;á&quot;</span>, <span class="st">&quot;a&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb481-5"><a href="qta.html#cb481-5"></a><span class="st">    </span><span class="kw">str_replace_all</span>(<span class="st">&quot;é&quot;</span>, <span class="st">&quot;e&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb481-6"><a href="qta.html#cb481-6"></a><span class="st">    </span><span class="kw">str_replace_all</span>(<span class="st">&quot;í&quot;</span>, <span class="st">&quot;i&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb481-7"><a href="qta.html#cb481-7"></a><span class="st">    </span><span class="kw">str_replace_all</span>(<span class="st">&quot;ó&quot;</span>, <span class="st">&quot;o&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb481-8"><a href="qta.html#cb481-8"></a><span class="st">    </span><span class="kw">str_replace_all</span>(<span class="st">&quot;ú&quot;</span>, <span class="st">&quot;u&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb481-9"><a href="qta.html#cb481-9"></a><span class="st">    </span><span class="kw">str_replace_all</span>(<span class="st">&quot;ñ&quot;</span>, <span class="st">&quot;n&quot;</span>) <span class="co"># also replace &quot;ñ&quot;, a common letter in Spanish</span></span>
<span id="cb481-10"><a href="qta.html#cb481-10"></a>}</span>
<span id="cb481-11"><a href="qta.html#cb481-11"></a></span>
<span id="cb481-12"><a href="qta.html#cb481-12"></a><span class="co"># now pre-process the dataset:</span></span>
<span id="cb481-13"><a href="qta.html#cb481-13"></a>poltweets &lt;-<span class="st"> </span>poltweets <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb481-14"><a href="qta.html#cb481-14"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">texto =</span> texto <span class="op">%&gt;%</span></span>
<span id="cb481-15"><a href="qta.html#cb481-15"></a><span class="st">           </span><span class="co"># delete user names (which start with @):</span></span>
<span id="cb481-16"><a href="qta.html#cb481-16"></a><span class="st">           </span><span class="kw">str_remove</span>(<span class="st">&quot;</span><span class="ch">\\</span><span class="st">@[[:alnum:]]+&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb481-17"><a href="qta.html#cb481-17"></a><span class="st">           </span><span class="co"># delete URLs:</span></span>
<span id="cb481-18"><a href="qta.html#cb481-18"></a><span class="st">           </span><span class="kw">str_remove_all</span>(<span class="st">&quot;http[</span><span class="ch">\\</span><span class="st">w[:punct:]]+&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb481-19"><a href="qta.html#cb481-19"></a><span class="st">           </span><span class="co"># all text to lowercase:</span></span>
<span id="cb481-20"><a href="qta.html#cb481-20"></a><span class="st">           </span><span class="kw">str_to_lower</span>() <span class="op">%&gt;%</span></span>
<span id="cb481-21"><a href="qta.html#cb481-21"></a><span class="st">           </span><span class="co"># remove special characters:</span></span>
<span id="cb481-22"><a href="qta.html#cb481-22"></a><span class="st">           </span><span class="kw">str_remove_all</span>(<span class="st">&quot;[</span><span class="ch">\\</span><span class="st">d</span><span class="ch">\\</span><span class="st">.,_</span><span class="ch">\\</span><span class="st">@]+&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb481-23"><a href="qta.html#cb481-23"></a><span class="st">           </span><span class="kw">f_remove_accent</span>() <span class="op">%&gt;%</span></span>
<span id="cb481-24"><a href="qta.html#cb481-24"></a><span class="st">           </span><span class="co"># remove emojis</span></span>
<span id="cb481-25"><a href="qta.html#cb481-25"></a><span class="st">           </span><span class="kw">rm_non_ascii</span>() </span>
<span id="cb481-26"><a href="qta.html#cb481-26"></a>         )</span></code></pre></div>
<p>Una vez el texto está limpio, queremos agrupar de acuerdo con la variable para la comparación. Como estamos interesados en obtener las estimaciones en el nivel de coalición, agrupamos los textos por coalición. Ahora, cada coalición es un documento en la base de datos. Al ordenar por coaliciones, debes colocar los niveles del factor de forma que se parezca a un eje izquierda-derecha.</p>
<div class="sourceCode" id="cb482"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb482-1"><a href="qta.html#cb482-1"></a>by_coalition &lt;-<span class="st"> </span>poltweets <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb482-2"><a href="qta.html#cb482-2"></a><span class="st">  </span><span class="kw">group_by</span>(coalicion) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb482-3"><a href="qta.html#cb482-3"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">texto =</span> <span class="kw">str_c</span>(texto, <span class="dt">collapse =</span> <span class="st">&quot; &quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb482-4"><a href="qta.html#cb482-4"></a><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb482-5"><a href="qta.html#cb482-5"></a><span class="st">  </span><span class="co"># reorder the variable:</span></span>
<span id="cb482-6"><a href="qta.html#cb482-6"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">coalicion =</span> <span class="kw">fct_relevel</span>(<span class="kw">as.factor</span>(coalicion), <span class="st">&quot;FA&quot;</span>, <span class="st">&quot;LFM&quot;</span>, <span class="st">&quot;ChV&quot;</span>))</span></code></pre></div>
<p>Para modelar con Quanteda, primero transformamos nuestra base de datos a formato Corpus, y luego a formato DFM (Document-feature Matrix). Esto significa transformar cada documento en filas y las “características” como columnas. Hicimos la transformación de la base de datos agrupada por coaliciones hacia formato Corpus y luego a DFM. Adicionalmente, aprovechamos el uso de un comando que ayudará eliminar números, puntuaciones, símbolos y palabras vacías (conjunciones, artículos, etc.)</p>
<div class="sourceCode" id="cb483"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb483-1"><a href="qta.html#cb483-1"></a><span class="co"># Corpus format</span></span>
<span id="cb483-2"><a href="qta.html#cb483-2"></a>poltweets_corpus &lt;-<span class="st"> </span><span class="kw">corpus</span>(by_coalition, <span class="dt">text_field =</span> <span class="st">&quot;texto&quot;</span>)</span>
<span id="cb483-3"><a href="qta.html#cb483-3"></a></span>
<span id="cb483-4"><a href="qta.html#cb483-4"></a><span class="co"># DFM format</span></span>
<span id="cb483-5"><a href="qta.html#cb483-5"></a>poltweets_dfm &lt;-<span class="st"> </span><span class="kw">dfm</span>(poltweets_corpus,</span>
<span id="cb483-6"><a href="qta.html#cb483-6"></a>                     <span class="dt">remove_numbers =</span> T, <span class="dt">remove_punct =</span> T, </span>
<span id="cb483-7"><a href="qta.html#cb483-7"></a>                     <span class="dt">remove_symbols =</span> T, <span class="dt">remove =</span> <span class="kw">stopwords</span>(<span class="st">&quot;spa&quot;</span>))</span></code></pre></div>
<p>Utilizando <code>dfm_trim()</code>, eliminamos aquellas palabras con una frecuencia igual o menor que el quinto percentil y aquellas con una frecuencia igual o mayor que el percentil 95. De esta manera, eliminamos palabras inusuales que están ubicadas en los extremos de la distribución de frecuencias, ya que pueden sesgar los resultados del algoritmo.</p>
<div class="sourceCode" id="cb484"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb484-1"><a href="qta.html#cb484-1"></a>poltweets_dfm_trimmed &lt;-<span class="st"> </span><span class="kw">dfm_trim</span>(</span>
<span id="cb484-2"><a href="qta.html#cb484-2"></a>  poltweets_dfm, </span>
<span id="cb484-3"><a href="qta.html#cb484-3"></a>  <span class="dt">min_docfreq =</span> <span class="fl">0.05</span>, <span class="dt">max_docfreq =</span> <span class="fl">0.95</span>, </span>
<span id="cb484-4"><a href="qta.html#cb484-4"></a>  <span class="dt">docfreq_type =</span> <span class="st">&quot;quantile&quot;</span> <span class="co"># min 5% / max 95%</span></span>
<span id="cb484-5"><a href="qta.html#cb484-5"></a>)</span></code></pre></div>
</div>
<div id="sqta2" class="section level3">
<h3><span class="header-section-number">13.2.3</span> Wordfish</h3>
<p>Wordfish es un algoritmo que permite hacer una ecala unidimensional de un conjunto de textos <span class="citation">(Slapin and Proksch <a href="referencias.html#ref-slapinScalingModelEstimating2008" role="doc-biblioref">2008</a>)</span>. Es decir, sirve para ordenar los documentos en un eje unidimensional según cuán similar son entre sí en el uso de ciertas palabras clave. Este modelamiento asume que el número de veces que una palabra es mencionada en un documento sigue una distribución de Poisson. Este modelo es extremadamente simple ya que el número de veces que una palabra aparecerá es estimado por un único parámetro λ, que es tanto la media como la varianza de la distribución de probabilidad Poisson.</p>
<p>La distribución es la siguiente <span class="citation">(Proksch and Slapin <a href="referencias.html#ref-prokschPositionTakingEuropean2010" role="doc-biblioref">2010</a>)</span>:</p>
<p><span class="math display">\[
Wordcount_{ij} \sim Poisson(\lambda_{ij})
\]</span></p>
<p>where</p>
<p><span class="math display">\[
\lambda_{ij} = exp(\alpha_i + \psi_j + \beta_j * \omega_i)
\]</span></p>
<p>El conteo de una palabra <span class="math inline">\(j\)</span> para el documento <span class="math inline">\(i\)</span> sigue una distribución de Poisson con parámetro <span class="math inline">\(λ\)</span> para la palabra <span class="math inline">\(j\)</span> y el documento <span class="math inline">\(i\)</span>. El modelo estima el parámetro <span class="math inline">\(\lambda_{ij}\)</span>, que es la función del término <span class="math inline">\(\alpha_i\)</span> (el cual es un efecto fijado para los documentos) y el término <span class="math inline">\(\psi_j\)</span>, que es un efecto fijado para la palabra <span class="math inline">\(j\)</span> - Al ingresar estos efectos fijados, se descuenta el hecho de que algunas palabras pueden aparecer más veces que otras. El parámetro de interés es <span class="math inline">\(\beta_j\)</span>, que captura la importancia de cada palabra <span class="math inline">\(j\)</span> para discriminar las posiciones de <span class="math inline">\(i\)</span> en el eje latente <span class="math inline">\(X\)</span>. Por lo tanto, los documentos pueden ser agrupados basado en cuán similares son entre ellos, utilizando ciertas palabras.</p>
<p>Wordfish tiene dos supuestos fundamentales, primero, que las palabras siempre tienen el mismo significado dentro del texto. Segundo, que los textos son ordenados por una dimensión latente <span class="math inline">\(X\)</span>, que es un eje que articula la diferenciación ideológica de los documentos <span class="citation">(Slapin and Proksch <a href="referencias.html#ref-slapinScalingModelEstimating2008" role="doc-biblioref">2008</a>)</span>. Sin embargo, la validez de esta suposición se mantiene en la medida en que el método es robusto con otras mediciones y que el corpus de textos incluidos en el análisis son representativos de la dimensión.</p>
<p>En ciencia política, alguno de los trabajos que han utilizado este algoritmo con Twitter es el de Andrea Ceron <span class="citation">(<a href="referencias.html#ref-ceronIntrapartyPolitics1402017" role="doc-biblioref">2017</a>)</span>, en el cual utiliza las estimaciones de Wordfish para predecir la heterogeneidad ideológica dentro de los partidos políticos italianos, para ver qué legislador será elegido como ministro y la probabilidad de que abandonen el partido.</p>
<p>Aplicamos el algoritmo Wordfish al objeto de clase DFM, específicamente a Quanteda. Definimos la dirección del parámetro <span class="math inline">\(\theta\)</span> -el equivalente de <span class="math inline">\(\beta\)</span>-, en este caso, el documento 3 (FA) es el polo positivo y el documento 1 (CHV) es el polo negativo en la dimensión ideológica estimada. También, usamos el argumento <code>sparse = T</code>, que también nos permite trabajar con grandes cantidades de datos, ahorrando poder computacional.</p>
<div class="sourceCode" id="cb485"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb485-1"><a href="qta.html#cb485-1"></a>wf &lt;-<span class="st"> </span><span class="kw">textmodel_wordfish</span>(poltweets_dfm_trimmed,</span>
<span id="cb485-2"><a href="qta.html#cb485-2"></a>                         <span class="dt">dir =</span> <span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">1</span>), <span class="dt">sparse =</span> T)</span></code></pre></div>
<p>Graficamos en la Figura <a href="qta.html#fig:qta11">13.11</a>:</p>
<div class="sourceCode" id="cb486"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb486-1"><a href="qta.html#cb486-1"></a>df_wf &lt;-<span class="st"> </span><span class="kw">tibble</span>(</span>
<span id="cb486-2"><a href="qta.html#cb486-2"></a>  <span class="co"># coalicion labels:</span></span>
<span id="cb486-3"><a href="qta.html#cb486-3"></a>  <span class="dt">coalicion =</span> wf[[<span class="st">&quot;x&quot;</span>]]<span class="op">@</span>docvars[[<span class="st">&quot;coalicion&quot;</span>]],</span>
<span id="cb486-4"><a href="qta.html#cb486-4"></a>  <span class="co"># then we extract thetas and their SEs from the mode object:</span></span>
<span id="cb486-5"><a href="qta.html#cb486-5"></a>  <span class="dt">theta =</span> wf<span class="op">$</span>theta, </span>
<span id="cb486-6"><a href="qta.html#cb486-6"></a>  <span class="dt">lower =</span> wf<span class="op">$</span>theta <span class="op">-</span><span class="st"> </span><span class="fl">1.96</span> <span class="op">*</span><span class="st"> </span>wf<span class="op">$</span>se.theta, </span>
<span id="cb486-7"><a href="qta.html#cb486-7"></a>  <span class="dt">upper =</span> wf<span class="op">$</span>theta <span class="op">+</span><span class="st"> </span><span class="fl">1.96</span> <span class="op">*</span><span class="st"> </span>wf<span class="op">$</span>se.theta</span>
<span id="cb486-8"><a href="qta.html#cb486-8"></a>)</span>
<span id="cb486-9"><a href="qta.html#cb486-9"></a></span>
<span id="cb486-10"><a href="qta.html#cb486-10"></a>df_wf</span>
<span id="cb486-11"><a href="qta.html#cb486-11"></a><span class="co">## # A tibble: 3 x 4</span></span>
<span id="cb486-12"><a href="qta.html#cb486-12"></a><span class="co">##   coalicion  theta  lower  upper</span></span>
<span id="cb486-13"><a href="qta.html#cb486-13"></a><span class="co">##   &lt;fct&gt;      &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb486-14"><a href="qta.html#cb486-14"></a><span class="co">## 1 ChV        1.07   1.07   1.08 </span></span>
<span id="cb486-15"><a href="qta.html#cb486-15"></a><span class="co">## 2 FA        -0.905 -0.912 -0.897</span></span>
<span id="cb486-16"><a href="qta.html#cb486-16"></a><span class="co">## 3 LFM       -0.169 -0.180 -0.158</span></span>
<span id="cb486-17"><a href="qta.html#cb486-17"></a></span>
<span id="cb486-18"><a href="qta.html#cb486-18"></a><span class="kw">ggplot</span>(<span class="dt">data    =</span> df_wf,</span>
<span id="cb486-19"><a href="qta.html#cb486-19"></a>       <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> theta, <span class="dt">y =</span> <span class="kw">fct_reorder</span>(coalicion, theta),</span>
<span id="cb486-20"><a href="qta.html#cb486-20"></a>                     <span class="dt">xmin =</span> lower, <span class="dt">xmax =</span> upper)) <span class="op">+</span></span>
<span id="cb486-21"><a href="qta.html#cb486-21"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb486-22"><a href="qta.html#cb486-22"></a><span class="st">  </span><span class="kw">geom_linerange</span>() <span class="op">+</span></span>
<span id="cb486-23"><a href="qta.html#cb486-23"></a><span class="st">  </span><span class="co"># add vertical line at x=0:</span></span>
<span id="cb486-24"><a href="qta.html#cb486-24"></a><span class="st">  </span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> <span class="dv">0</span>, <span class="dt">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="op">+</span></span>
<span id="cb486-25"><a href="qta.html#cb486-25"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">limits =</span> <span class="kw">c</span>(<span class="op">-</span><span class="fl">1.2</span>, <span class="fl">1.2</span>)) <span class="op">+</span></span>
<span id="cb486-26"><a href="qta.html#cb486-26"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: left"><span id="fig:qta11"></span>
<img src="13-qta_es_files/figure-html/qta11-1.png" alt="Classification of coalitions by ideological positioning" width="672" />
<p class="caption">
Figura 13.11: Classification of coalitions by ideological positioning
</p>
</div>
<p>Vemos que las coaliciones están agrupadas a lo largo de una división izquierda-derecha. El parámetro de interés <span class="math inline">\(\theta\)</span>, equivalente al parámetro beta, es el parámetro que discrimina las posiciones de los documentos a partir de la frecuencia de las palabras. Vemos que este parámetro es consistente con cómo las coaliciones están agrupadas políticamente. El más a la derecha, Chile Vamos (ChV), con un <span class="math inline">\(\theta\)</span> de 1.07, se encuentra en un extremo del eje x, por el contrario, el de más a la izquierda, Frente Amplio (FA), con un <span class="math inline">\(\theta\)</span> de -0.91, está ubicado en el extremo opuesto.</p>
<blockquote>
<p><strong>Ejercicio 13A.</strong> Puedes repetir el Wordfish, pero ahora invierte la dirección del parámetro <span class="math inline">\(\theta\)</span> en el objeto <code>wf</code>. ¿Cómo cambia la distribución de los documentos al invertir la dirección del parámetro? Ahora repite el ejercicio agrupando por partidos políticos.</p>
</blockquote>
</div>
<div id="qué-aprendimos-de-wordfish" class="section level3">
<h3><span class="header-section-number">13.2.4</span> ¿Qué aprendimos de Wordfish?</h3>
<p>Usando los mismos tweets que en la sección anterior, vimos cómo los mensajes provenientes de los miembros del congreso eran consistentes con una división ideológica, ordenada en un eje izquierda-derecha. En particular, concluimos que las coaliciones Frente Amplio y Chile Vamos están en extremos opuestos con respecto a sus tweets durante el ciclo de protesta chileno. Sorprendentemente, el algoritmo es capaz de ubicar a las coaliciones chilenas en un eje izquierda-derecha tomando como entrada solo los tweets de los parlamentarios durante los ciclos de protesta, sin ningún tipo de etiquetado manual de los textos. Wordfish es una herramienta poderosa para ser utilizada como un método de posicionamiento espacial, que se suma al repertorio de otras mediciones de posición política, como las estimaciones de puntos ideales bayesianos <span class="citation">(Barberá <a href="referencias.html#ref-barberaBirdsSameFeather2015" role="doc-biblioref">2015</a>)</span>, roll call y cosponsorship <span class="citation">(Alemán et al. <a href="referencias.html#ref-alemanComparingCosponsorshipRollCall2009" role="doc-biblioref">2009</a>)</span>.</p>
</div>
</div>
<div id="sqta3" class="section level2">
<h2><span class="header-section-number">13.3</span> Structural Topic Modeling (STM)</h2>
<p>El modelado de temas es un método computacional para identificar automáticamente agrupaciones de palabras relevantes en grandes volúmenes de textos. Una de las aplicaciones más populares en ciencia política es la Latent Dirichlet Allocation (LDA), desarrollada por <span class="citation">Blei, Ng, and Jordan (<a href="referencias.html#ref-bleiLatentDirichletAllocation2003" role="doc-biblioref">2003</a>)</span> y explicada de manera didáctica por David Blei en la <a href="https://www.youtube.com/watch?v=DDq3OVp9dNA">Machine Learning Summer School 2009 de la Universidad de Cambridge</a>.</p>
<p>Otro desarrollo útil es el modelado de temas estructurales (STM por sus siglas en inglés), una técnica de NLP no supervisada para bucear grandes corpus de textos. La principal innovación del STM es que incorpora metadatos en el modelado del tema, por lo que permite a los investigadores descubrir temas y estimar su relación con las covariables, mejorando la calidad de las inferencias y la interpretabilidad de los resultados. El algoritmo STM está disponible en el paquete <code>stm</code> creado por Molly Roberts, Brandon Stewart y Dustin Tingley. Para una revisión más detallada de este método, hay una gran cantidad de material en el <a href="http://www.structuraltopicmodel.com/">sitio oficial del paquete</a>.</p>
<p>En esta sección, analizaremos un subconjunto de nuestros tweets para encontrar los temas más relevantes y ver cómo se correlacionan con las variables de género y coalición. Siguiendo el ejemplo de <a href="https://juliasilge.com/blog/evaluating-stm/">Julia Silge</a>, primero haremos todo el preprocesamiento utilizando herramientas “tidy”, para luego cargar una base de datos corregida a <code>stm</code>.</p>
<div id="pre-procesamiento-1" class="section level3">
<h3><span class="header-section-number">13.3.1</span> Pre-procesamiento</h3>
<p>Solo utilizaremos tweets de mayo de 2018:</p>
<div class="sourceCode" id="cb487"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb487-1"><a href="qta.html#cb487-1"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb487-2"><a href="qta.html#cb487-2"></a><span class="kw">library</span>(tidytext)</span>
<span id="cb487-3"><a href="qta.html#cb487-3"></a><span class="kw">library</span>(stm)</span>
<span id="cb487-4"><a href="qta.html#cb487-4"></a><span class="kw">library</span>(quanteda)</span>
<span id="cb487-5"><a href="qta.html#cb487-5"></a><span class="kw">library</span>(qdapRegex)</span></code></pre></div>
<div class="sourceCode" id="cb488"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb488-1"><a href="qta.html#cb488-1"></a>poltweets_onemonth &lt;-<span class="st"> </span>poltweets <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb488-2"><a href="qta.html#cb488-2"></a><span class="st">  </span><span class="kw">filter</span>(creado_en <span class="op">&gt;=</span><span class="st"> &quot;2018-05-01&quot;</span> <span class="op">&amp;</span><span class="st"> </span>creado_en <span class="op">&lt;</span><span class="st"> &quot;2018-06-01&quot;</span>)</span></code></pre></div>
<p>Como se mencionó anteriormente, debemos comenzar preprocesando los textos. Recuerde que en la subsección anterior eliminamos caracteres extraños del texto. A continuación, crearemos una versión “tokenizada” de <code>poltweets_onemonth</code>, donde cada fila es una palabra contenida en el tweet original, sumado a una columna que nos dice el número total de veces que cada palabra se dice en todo el conjunto de datos (solo guardamos las palabras que se mencionan diez o más veces). Justo después de hacer eso, eliminaremos las palabras vacías (conjunciones, artículos, etc.) usando el paquete <code>stopwords</code>. Tenga en cuenta que también emplearemos un diccionario “personalizado” de palabras clave, compuesto por los nombres y apellidos únicos de los diputados.</p>
<div class="sourceCode" id="cb489"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb489-1"><a href="qta.html#cb489-1"></a><span class="co"># obtain unique names and surnames of deputies</span></span>
<span id="cb489-2"><a href="qta.html#cb489-2"></a>nombres_apellido &lt;-<span class="st"> </span><span class="kw">c</span>(poltweets<span class="op">$</span>nombres, poltweets<span class="op">$</span>apellido) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb489-3"><a href="qta.html#cb489-3"></a><span class="st">  </span><span class="kw">na.omit</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb489-4"><a href="qta.html#cb489-4"></a><span class="st">  </span><span class="kw">unique</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb489-5"><a href="qta.html#cb489-5"></a><span class="st">  </span><span class="kw">str_to_lower</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb489-6"><a href="qta.html#cb489-6"></a><span class="st">  </span><span class="kw">f_remove_accent</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb489-7"><a href="qta.html#cb489-7"></a><span class="st">  </span><span class="kw">str_split</span>(<span class="st">&quot; &quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb489-8"><a href="qta.html#cb489-8"></a><span class="st">  </span><span class="kw">flatten_chr</span>()</span>
<span id="cb489-9"><a href="qta.html#cb489-9"></a></span>
<span id="cb489-10"><a href="qta.html#cb489-10"></a>poltweets_words &lt;-<span class="st"> </span>poltweets_onemonth <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb489-11"><a href="qta.html#cb489-11"></a><span class="st">  </span><span class="kw">unnest_tokens</span>(word, texto, <span class="st">&quot;words&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb489-12"><a href="qta.html#cb489-12"></a><span class="st">  </span><span class="co"># remove stop words:</span></span>
<span id="cb489-13"><a href="qta.html#cb489-13"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span>word <span class="op">%in%</span><span class="st"> </span>stopwords<span class="op">::</span><span class="kw">stopwords</span>(<span class="st">&quot;es&quot;</span>, <span class="st">&quot;stopwords-iso&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb489-14"><a href="qta.html#cb489-14"></a><span class="st">  </span><span class="co"># remove names/surnames of deputies:</span></span>
<span id="cb489-15"><a href="qta.html#cb489-15"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span>word <span class="op">%in%</span><span class="st"> </span>nombres_apellido) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb489-16"><a href="qta.html#cb489-16"></a><span class="st">  </span><span class="co"># just keep words that are present ten or more times</span></span>
<span id="cb489-17"><a href="qta.html#cb489-17"></a><span class="st">  </span><span class="kw">add_count</span>(word) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb489-18"><a href="qta.html#cb489-18"></a><span class="st">  </span><span class="kw">filter</span>(n <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span>)</span></code></pre></div>
<p>Eso es todo en términos de pre-procesamiento! A continuación, transformaremos el conjunto de datos tokenizado en un objeto stm utilizando las funciones <code>cast_dfm()</code> y <code>convert()</code>.</p>
<div class="sourceCode" id="cb490"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb490-1"><a href="qta.html#cb490-1"></a>poltweets_stm &lt;-<span class="st"> </span>poltweets_words <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb490-2"><a href="qta.html#cb490-2"></a><span class="st">  </span><span class="kw">cast_dfm</span>(id, word, n) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb490-3"><a href="qta.html#cb490-3"></a><span class="st">  </span><span class="kw">convert</span>(<span class="dt">to =</span> <span class="st">&quot;stm&quot;</span>)</span></code></pre></div>
<p>Para estimar la relación de los temas y las covariables del documento, debemos agregar los valores de covariable en el objeto <code>poltweets_stm$meta</code>. El objeto <code>metadata</code> es un marco de datos que contiene los metadatos para cada documento en el objeto stm, que luego se puede usar como el documento “prevalence” -o metadatos-. Tenga en cuenta que para crear el objeto stm_meta, es necesario unirlo mediante la variable id, una columna que contiene un identificador único para cada tweet.</p>
<div class="sourceCode" id="cb491"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb491-1"><a href="qta.html#cb491-1"></a>metadata &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">id =</span> <span class="kw">names</span>(poltweets_stm<span class="op">$</span>documents)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb491-2"><a href="qta.html#cb491-2"></a><span class="st">  </span><span class="kw">left_join</span>(<span class="kw">distinct</span>(poltweets, id, coalicion, genero), </span>
<span id="cb491-3"><a href="qta.html#cb491-3"></a>            <span class="dt">by =</span> <span class="st">&quot;id&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb491-4"><a href="qta.html#cb491-4"></a><span class="st">  </span><span class="kw">as.data.frame</span>()</span>
<span id="cb491-5"><a href="qta.html#cb491-5"></a></span>
<span id="cb491-6"><a href="qta.html#cb491-6"></a>poltweets_stm<span class="op">$</span>meta &lt;-<span class="st"> </span>metadata</span></code></pre></div>
<p>Ahora tenemos todos los ingredientes necesarios para estimar nuestro structural topic model (modelo de tema estructural), almacenados en el objeto <code>poltweets_stm</code>:</p>
<div class="sourceCode" id="cb492"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb492-1"><a href="qta.html#cb492-1"></a><span class="kw">summary</span>(poltweets_stm)</span>
<span id="cb492-2"><a href="qta.html#cb492-2"></a><span class="co">##           Length Class      Mode     </span></span>
<span id="cb492-3"><a href="qta.html#cb492-3"></a><span class="co">## documents 5647   -none-     list     </span></span>
<span id="cb492-4"><a href="qta.html#cb492-4"></a><span class="co">## vocab     1378   -none-     character</span></span>
<span id="cb492-5"><a href="qta.html#cb492-5"></a><span class="co">## meta         3   data.frame list</span></span></code></pre></div>
</div>
<div id="diagnósticos" class="section level3">
<h3><span class="header-section-number">13.3.2</span> Diagnósticos</h3>
<p>Para estimar un <code>stm</code>, es necesario definir de antemano el número de temas (<span class="math inline">\(K\)</span>). Sin embargo, no hay un número “correcto” de temas, por lo que los <span class="math inline">\(K\)</span> apropiados deberían decidirse mirando los datos en sí <span class="citation">(M. E. Roberts, Stewart, and Tingley <a href="referencias.html#ref-robertsStmPackageStructural2019" role="doc-biblioref">2019</a>)</span>. Para hacer eso, debemos entrenar varios modelos y cálculos de diagnósticos que nos ayudarán a decidir. ¿Qué rango de <span class="math inline">\(K\)</span> debemos considerar? En el manual del paquete <span class="citation">(M. Roberts, Stewart, and Tingley <a href="referencias.html#ref-R-stm" role="doc-biblioref">2019</a>)</span>, los autores ofrecen los siguientes consejos:</p>
<blockquote>
<p>Para corpus cortos centrados en temas muy específicos (como experimentos de encuestas), 3-10 temas es un rango de inicio útil. Para corporaciones pequeñas (de unos cientos a miles), 5-50 temas es un buen lugar para comenzar. Más allá de estas pautas generales, todo dependerá de la aplicación. Aplicaciones anteriores en ciencia política que han trabajado con corpus medianos (10 mil a 100 mil documentos) han encontrado que 60-100 temas funcionan bien. Para grandes corpus" 100 temas es un tamaño predeterminado útil. (pág. 61)</p>
</blockquote>
<p>Nuestro conjunto de datos tiene 5,647 documentos, por lo tanto, trataremos de 5 a 50 temas. Podemos usar la función <code>searchK()</code> del paquete <code>stm</code> para calcular los diagnósticos relevantes, que almacenaremos en el objeto<code>stm_search</code>. Este proceso es computacionalmente costoso y puede tomar varios minutos en una computadora moderna. Si no desea esperar, puede cargar el objeto del paquete del libro (<code>data(stm_search)</code>) y continuar.</p>
<div class="sourceCode" id="cb493"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb493-1"><a href="qta.html#cb493-1"></a>stm_search &lt;-<span class="st"> </span><span class="kw">searchK</span>(<span class="dt">documents =</span> poltweets_stm<span class="op">$</span>documents,</span>
<span id="cb493-2"><a href="qta.html#cb493-2"></a>                      <span class="dt">vocab =</span> poltweets_stm<span class="op">$</span>vocab,</span>
<span id="cb493-3"><a href="qta.html#cb493-3"></a>                      <span class="dt">data =</span> poltweets_stm<span class="op">$</span>meta,</span>
<span id="cb493-4"><a href="qta.html#cb493-4"></a>                      <span class="co"># our covariates, mentioned above:</span></span>
<span id="cb493-5"><a href="qta.html#cb493-5"></a>                      <span class="dt">prevalence =</span> <span class="op">~</span><span class="st"> </span>coalicion <span class="op">+</span><span class="st"> </span>genero,</span>
<span id="cb493-6"><a href="qta.html#cb493-6"></a>                      <span class="co"># 5-50 topics range:</span></span>
<span id="cb493-7"><a href="qta.html#cb493-7"></a>                      <span class="dt">K =</span> <span class="kw">seq</span>(<span class="dv">5</span>, <span class="dv">50</span>, <span class="dt">by =</span> <span class="dv">5</span>), </span>
<span id="cb493-8"><a href="qta.html#cb493-8"></a>                      <span class="co"># use all our available cores (be careful!):</span></span>
<span id="cb493-9"><a href="qta.html#cb493-9"></a>                      <span class="dt">cores =</span> parallel<span class="op">::</span><span class="kw">detectCores</span>(),</span>
<span id="cb493-10"><a href="qta.html#cb493-10"></a>                      <span class="co"># a seed to reproduce the analysis:</span></span>
<span id="cb493-11"><a href="qta.html#cb493-11"></a>                      <span class="dt">heldout.seed =</span> <span class="dv">123</span>)</span></code></pre></div>
<p>A continuación, ordenaremos nuestro objeto recién creado y graficaremos sus resultados usando <code>ggplot2</code>:</p>
<div class="sourceCode" id="cb494"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb494-1"><a href="qta.html#cb494-1"></a>diagnostics &lt;-<span class="st"> </span>stm_search<span class="op">$</span>results <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb494-2"><a href="qta.html#cb494-2"></a><span class="st">  </span><span class="co"># get a tidy structure to plot:</span></span>
<span id="cb494-3"><a href="qta.html#cb494-3"></a><span class="st">  </span><span class="kw">mutate_all</span>(flatten_dbl) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb494-4"><a href="qta.html#cb494-4"></a><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="op">-</span>K, <span class="dt">names_to =</span> <span class="st">&quot;diagnostic&quot;</span>, <span class="dt">values_to =</span> <span class="st">&quot;value&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb494-5"><a href="qta.html#cb494-5"></a><span class="st">  </span><span class="co"># we will only use some diagnostics:</span></span>
<span id="cb494-6"><a href="qta.html#cb494-6"></a><span class="st">  </span><span class="kw">filter</span>(diagnostic <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;exclus&quot;</span>, <span class="st">&quot;heldout&quot;</span>, <span class="st">&quot;residual&quot;</span>, <span class="st">&quot;semcoh&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb494-7"><a href="qta.html#cb494-7"></a><span class="st">  </span><span class="co"># give better names to the diagnostics:</span></span>
<span id="cb494-8"><a href="qta.html#cb494-8"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">diagnostic =</span> <span class="kw">case_when</span>(</span>
<span id="cb494-9"><a href="qta.html#cb494-9"></a>    diagnostic <span class="op">==</span><span class="st"> &quot;exclus&quot;</span> <span class="op">~</span><span class="st"> &quot;Exclusividad&quot;</span>,</span>
<span id="cb494-10"><a href="qta.html#cb494-10"></a>    diagnostic <span class="op">==</span><span class="st"> &quot;heldout&quot;</span> <span class="op">~</span><span class="st"> &quot;Held-out likelihood&quot;</span>,</span>
<span id="cb494-11"><a href="qta.html#cb494-11"></a>    diagnostic <span class="op">==</span><span class="st"> &quot;residual&quot;</span> <span class="op">~</span><span class="st"> &quot;Residuos&quot;</span>,</span>
<span id="cb494-12"><a href="qta.html#cb494-12"></a>    diagnostic <span class="op">==</span><span class="st"> &quot;semcoh&quot;</span> <span class="op">~</span><span class="st"> &quot;Coherencia semántica&quot;</span></span>
<span id="cb494-13"><a href="qta.html#cb494-13"></a>  ))</span></code></pre></div>
<div class="sourceCode" id="cb495"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb495-1"><a href="qta.html#cb495-1"></a><span class="kw">ggplot</span>(diagnostics, <span class="kw">aes</span>(<span class="dt">x =</span> K, <span class="dt">y =</span> value)) <span class="op">+</span></span>
<span id="cb495-2"><a href="qta.html#cb495-2"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb495-3"><a href="qta.html#cb495-3"></a><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span></span>
<span id="cb495-4"><a href="qta.html#cb495-4"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>diagnostic, <span class="dt">scales =</span> <span class="st">&quot;free&quot;</span>)</span></code></pre></div>
<p><img src="13-qta_es_files/figure-html/unnamed-chunk-34-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Aquí presentamos cuatro de los diagnósticos obtenidos con <code>searchK()</code>. Tanto la probabilidad retenida como los residuos (características de los modelos, más información en <span class="citation">M. E. Roberts, Stewart, and Tingley (<a href="referencias.html#ref-robertsStmPackageStructural2019" role="doc-biblioref">2019</a>)</span>) parecen sugerir que aumentar los temas es el enfoque correcto. Sin embargo, en nuestra experiencia, la coherencia semántica y la exclusividad son los mejores indicadores de la adecuación de <span class="math inline">\(K\)</span>. La coherencia semántica es quizás el diagnóstico que se correlaciona principalmente con el juicio humano sobre la “calidad del tema” [@ robertsStmPackageStructural2019], es decir, temas que incluyen términos que tienen sentido temático. Sin embargo, <span class="citation">Roberts et al. (<a href="referencias.html#ref-roberts_structural_2014" role="doc-biblioref">2014</a>)</span> sostiene que la coherencia semántica se puede lograr fácilmente con pocos temas, por lo tanto, se debe considerar conjuntamente con la “exclusividad”, esto es, cuán distintivos son los términos del tema en comparación con otros temas.</p>
<p>Siguiendo estas definiciones e inspeccionando el gráfico anterior anterior, los modelos con K = 10 y K = 25 parecen buenos contendientes. Vamos a estimarlos por separado (si no deseas esperar, puedes volver a cargar los objetos de nuestro paquete <code>paqueteadp</code>):</p>
<div class="sourceCode" id="cb496"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb496-1"><a href="qta.html#cb496-1"></a>stm_model_k10 &lt;-<span class="st"> </span><span class="kw">stm</span>(<span class="dt">documents =</span> poltweets_stm<span class="op">$</span>documents,</span>
<span id="cb496-2"><a href="qta.html#cb496-2"></a>                     <span class="dt">vocab =</span> poltweets_stm<span class="op">$</span>vocab, </span>
<span id="cb496-3"><a href="qta.html#cb496-3"></a>                     <span class="dt">data =</span> poltweets_stm<span class="op">$</span>meta, </span>
<span id="cb496-4"><a href="qta.html#cb496-4"></a>                     <span class="dt">prevalence =</span> <span class="op">~</span><span class="st"> </span>coalicion <span class="op">+</span><span class="st"> </span>genero,</span>
<span id="cb496-5"><a href="qta.html#cb496-5"></a>                     <span class="dt">K =</span> <span class="dv">10</span>)</span>
<span id="cb496-6"><a href="qta.html#cb496-6"></a></span>
<span id="cb496-7"><a href="qta.html#cb496-7"></a>stm_model_k25 &lt;-<span class="st"> </span><span class="kw">stm</span>(<span class="dt">documents =</span> poltweets_stm<span class="op">$</span>documents,</span>
<span id="cb496-8"><a href="qta.html#cb496-8"></a>                     <span class="dt">vocab =</span> poltweets_stm<span class="op">$</span>vocab, </span>
<span id="cb496-9"><a href="qta.html#cb496-9"></a>                     <span class="dt">data =</span> poltweets_stm<span class="op">$</span>meta, </span>
<span id="cb496-10"><a href="qta.html#cb496-10"></a>                     <span class="dt">prevalence =</span> <span class="op">~</span><span class="st"> </span>coalicion <span class="op">+</span><span class="st"> </span>genero,</span>
<span id="cb496-11"><a href="qta.html#cb496-11"></a>                     <span class="dt">K =</span> <span class="dv">25</span>)</span></code></pre></div>
<p>¿Cómo debemos decidir entre estas dos especificaciones? La exclusividad y la coherencia semántica presentadas en la gráfica anterior son medidas de resumen, por lo que quizás podamos obtener más valor al observar valores específicos para cada tema en los dos modelos. En la siguiente Figura <a href="qta.html#fig:stm-diag2">13.12</a> graficamos la coherencia semántica frente a la exclusividad, como lo sugiere <span class="citation">M. E. Roberts, Stewart, and Tingley (<a href="referencias.html#ref-robertsStmPackageStructural2019" role="doc-biblioref">2019</a>)</span>. En un mundo ideal, nos gustaría que todos los temas sean lo más semánticamente coherentes y exclusivos posible. Si bien no estamos en ese mundo ideal, parece que los temas del modelo K = 10 son mejores en este sentido, ya que el modelo K = 25 tiene bastantes temas que se posicionan como valores atípicos, pues tienen baja coherencia semántica o baja exclusividad (¡o ambas!) Por lo tanto, continuaremos nuestro análisis utilizando el modelo K = 10.</p>
<div class="sourceCode" id="cb497"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb497-1"><a href="qta.html#cb497-1"></a><span class="co"># obtener exclusividad y coherencia semántica de los tópicos dentro de los modelos</span></span>
<span id="cb497-2"><a href="qta.html#cb497-2"></a>diagnostics2 &lt;-<span class="st"> </span><span class="kw">tibble</span>(</span>
<span id="cb497-3"><a href="qta.html#cb497-3"></a>  <span class="dt">exclusivity =</span> <span class="kw">c</span>(<span class="kw">exclusivity</span>(stm_model_k10), <span class="kw">exclusivity</span>(stm_model_k25)),</span>
<span id="cb497-4"><a href="qta.html#cb497-4"></a>  <span class="dt">semantic_coherence =</span> <span class="kw">c</span>(</span>
<span id="cb497-5"><a href="qta.html#cb497-5"></a>    <span class="kw">semanticCoherence</span>(stm_model_k10, <span class="dt">documents =</span> poltweets_stm<span class="op">$</span>documents),</span>
<span id="cb497-6"><a href="qta.html#cb497-6"></a>    <span class="kw">semanticCoherence</span>(stm_model_k25, <span class="dt">documents =</span> poltweets_stm<span class="op">$</span>documents)</span>
<span id="cb497-7"><a href="qta.html#cb497-7"></a>  ),</span>
<span id="cb497-8"><a href="qta.html#cb497-8"></a>  <span class="dt">k =</span> <span class="kw">c</span>(<span class="kw">rep</span>(<span class="st">&quot;K=10&quot;</span>, <span class="dv">10</span>), <span class="kw">rep</span>(<span class="st">&quot;K=25&quot;</span>, <span class="dv">25</span>))</span>
<span id="cb497-9"><a href="qta.html#cb497-9"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb498"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb498-1"><a href="qta.html#cb498-1"></a><span class="kw">ggplot</span>(<span class="dt">data    =</span> diagnostics2, </span>
<span id="cb498-2"><a href="qta.html#cb498-2"></a>       <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> semantic_coherence, <span class="dt">y =</span> exclusivity, <span class="dt">shape =</span> k)) <span class="op">+</span></span>
<span id="cb498-3"><a href="qta.html#cb498-3"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">size =</span> <span class="dv">2</span>) <span class="op">+</span></span>
<span id="cb498-4"><a href="qta.html#cb498-4"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Semantic coherence&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Exclusivity&quot;</span>, <span class="dt">shape =</span> <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:stm-diag2"></span>
<img src="13-qta_es_files/figure-html/stm-diag2-1.png" alt="Coherencia semántica y exclusividad de los tópicos en los dos modelos." width="672" />
<p class="caption">
Figura 13.12: Coherencia semántica y exclusividad de los tópicos en los dos modelos.
</p>
</div>
</div>
<div id="análisis" class="section level3">
<h3><span class="header-section-number">13.3.3</span> Análisis</h3>
<p>Hemos elegido un modelo con 10 temas. ¿Cómo se ve? Podemos obtener los términos principales de cada tema (más sobre lo que esto significa en un segundo) y graficarlos, como se muestra en la Figura <a href="qta.html#fig:stm-terms">13.13</a>. El gráfico también ordenará los temas en función de su proporción esperada dentro de todo el conjunto de tweets.</p>
<div class="sourceCode" id="cb499"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb499-1"><a href="qta.html#cb499-1"></a>model_terms &lt;-<span class="st"> </span><span class="kw">tibble</span>(</span>
<span id="cb499-2"><a href="qta.html#cb499-2"></a>  <span class="dt">topic =</span> <span class="kw">as.character</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>),</span>
<span id="cb499-3"><a href="qta.html#cb499-3"></a>  <span class="co"># obtain the top seven terms:</span></span>
<span id="cb499-4"><a href="qta.html#cb499-4"></a>  <span class="dt">terms =</span> <span class="kw">labelTopics</span>(stm_model_k10)<span class="op">$</span>prob <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb499-5"><a href="qta.html#cb499-5"></a><span class="st">    </span><span class="kw">t</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb499-6"><a href="qta.html#cb499-6"></a><span class="st">    </span><span class="kw">as_tibble</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb499-7"><a href="qta.html#cb499-7"></a><span class="st">    </span><span class="kw">map_chr</span>(str_c, <span class="dt">collapse =</span> <span class="st">&quot;, &quot;</span>),</span>
<span id="cb499-8"><a href="qta.html#cb499-8"></a>  <span class="co"># expected proportion of each topic in the whole set of tweets:</span></span>
<span id="cb499-9"><a href="qta.html#cb499-9"></a>  <span class="dt">expected_proportion =</span> <span class="kw">colMeans</span>(stm_model_k10<span class="op">$</span>theta)</span>
<span id="cb499-10"><a href="qta.html#cb499-10"></a>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb499-11"><a href="qta.html#cb499-11"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="op">-</span>expected_proportion)</span></code></pre></div>
<div class="sourceCode" id="cb500"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb500-1"><a href="qta.html#cb500-1"></a><span class="kw">ggplot</span>(<span class="dt">data    =</span> model_terms,</span>
<span id="cb500-2"><a href="qta.html#cb500-2"></a>       <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> expected_proportion, </span>
<span id="cb500-3"><a href="qta.html#cb500-3"></a>                     <span class="dt">y =</span> <span class="kw">fct_reorder</span>(topic, expected_proportion),</span>
<span id="cb500-4"><a href="qta.html#cb500-4"></a>                     <span class="dt">label =</span> terms)) <span class="op">+</span></span>
<span id="cb500-5"><a href="qta.html#cb500-5"></a><span class="st">  </span><span class="kw">geom_col</span>() <span class="op">+</span></span>
<span id="cb500-6"><a href="qta.html#cb500-6"></a><span class="st">  </span><span class="kw">geom_text</span>(<span class="dt">size =</span> <span class="dv">3</span>, <span class="dt">hjust =</span> <span class="st">&quot;inward&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="co"># to use space better</span></span>
<span id="cb500-7"><a href="qta.html#cb500-7"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Expected proportion&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Topic&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:stm-terms"></span>
<img src="13-qta_es_files/figure-html/stm-terms-1.png" alt="Tópicos y sus términos más relevantes." width="768" />
<p class="caption">
Figura 13.13: Tópicos y sus términos más relevantes.
</p>
</div>
<p>Tenga en cuenta que el Tema 2 es el que se refiere a género, donde se incluyen las palabras “mujeres”, “derechos” y “género”. Podemos usar <code>labelTopics ()</code> para obtener más términos que caracterizan este tema, como se muestra en el resultado a continuación. Los términos con mayor probabilidad son los mismos que utilizamos en el gráfico anterior, los más comunes en el tema. Otra medida interesante es “FREX”, que selecciona términos que son distintivos de este tema, en comparación con otros (en este caso, las palabras son las mismas). Por último, “Lift” (elevación) y “Score” (puntuación) se importan de otros paquetes <span class="citation">(M. Roberts, Stewart, and Tingley <a href="referencias.html#ref-R-stm" role="doc-biblioref">2019</a>)</span>, y también pueden ser útiles al describir un tema. En este caso, observe cómo los términos principales de “Lift” incluyen “olafeminista”, uno de los hashtags que discutimos anteriormente.</p>
<div class="sourceCode" id="cb501"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb501-1"><a href="qta.html#cb501-1"></a><span class="kw">labelTopics</span>(stm_model_k10, </span>
<span id="cb501-2"><a href="qta.html#cb501-2"></a>            <span class="dt">topics =</span> <span class="dv">2</span>) <span class="co"># this is the topic we want to analyze</span></span></code></pre></div>
<pre><code>## Topic 2 Top Words:
## 
## Highest Prob:
## mujeres, presidente, derechos, protocolo, temas, apoyo, genero 
## FREX:
## mujeres, presidente, derechos, protocolo, temas, apoyo, genero 
## Lift:
## equidad, olafeminista, utilidades, violencia, apoyo, dejo, discriminacion 
## Score:
## mujeres, presidente, derechos, protocolo, genero, apoyo, temas
## NULL</code></pre>
<p>Con este tema en mente, ahora podemos analizar su relación con los metadatos, en nuestro caso, el género y la coalición de los diputados: ¿es más probable que las mujeres y los políticos de izquierda twiteen sobre la ola feminista? Como dijimos antes, la capacidad de estimar estas relaciones tema-covariable es una ventaja central de los modelos de temas estructurales. El primer paso es usar <code>estimateEffect()</code> para obtener los coeficientes del modelo:</p>
<div class="sourceCode" id="cb503"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb503-1"><a href="qta.html#cb503-1"></a>stm_effects &lt;-<span class="st"> </span><span class="kw">estimateEffect</span>(</span>
<span id="cb503-2"><a href="qta.html#cb503-2"></a>  <span class="co"># c(1:10) means that we want coefficients for all topics in our model</span></span>
<span id="cb503-3"><a href="qta.html#cb503-3"></a>  <span class="dt">formula  =</span> <span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>) <span class="op">~</span><span class="st"> </span>coalicion <span class="op">+</span><span class="st"> </span>genero, </span>
<span id="cb503-4"><a href="qta.html#cb503-4"></a>  <span class="dt">stmobj   =</span> stm_model_k10,</span>
<span id="cb503-5"><a href="qta.html#cb503-5"></a>  <span class="dt">metadata =</span> poltweets_stm<span class="op">$</span>meta</span>
<span id="cb503-6"><a href="qta.html#cb503-6"></a>)</span></code></pre></div>
<p>A continuación, usamos el paquete <code>tidystm</code><a href="#fn57" class="footnote-ref" id="fnref57"><sup>57</sup></a> para extraer los efectos del modelo, a través de <code>extract.estimateEffect()</code>. Comencemos con el género. Cuando la covariable de interés tiene dos niveles, el argumento <code>método = "diferencia"</code> obtendrá el cambio en la prevalencia (“prevalence”) del tema, cambiando de un valor específico a otro. En nuestro caso, la columna “estimate” en el objeto <code>effect_gender</code> es el cambio en la prevalencia del tema cuando se comparan congresistas mujeres con congresistas hombres. Existe una estimación relativamente grande y positiva para el Tema 2 (como se esperaba), que es significativa en los niveles de confianza habituales. Cabe señalar que, para la prevalencia de otros temas (4, 7, 10), el género parece tener un efecto opuesto (aunque más pequeño), un hallazgo que podría ser útil en investigaciones futuras.</p>
<div class="sourceCode" id="cb504"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb504-1"><a href="qta.html#cb504-1"></a><span class="kw">library</span>(tidystm)</span></code></pre></div>
<div class="sourceCode" id="cb505"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb505-1"><a href="qta.html#cb505-1"></a>effect_gender &lt;-<span class="st"> </span><span class="kw">extract.estimateEffect</span>(<span class="dt">x =</span> stm_effects,</span>
<span id="cb505-2"><a href="qta.html#cb505-2"></a>                                        <span class="dt">covariate =</span> <span class="st">&quot;genero&quot;</span>,</span>
<span id="cb505-3"><a href="qta.html#cb505-3"></a>                                        <span class="dt">method =</span> <span class="st">&quot;difference&quot;</span>,</span>
<span id="cb505-4"><a href="qta.html#cb505-4"></a>                                        <span class="dt">cov.value1 =</span> <span class="st">&quot;Femenino&quot;</span>,</span>
<span id="cb505-5"><a href="qta.html#cb505-5"></a>                                        <span class="dt">cov.value2 =</span> <span class="st">&quot;Masculino&quot;</span>,</span>
<span id="cb505-6"><a href="qta.html#cb505-6"></a>                                        <span class="dt">model =</span> stm_model_k10)</span>
<span id="cb505-7"><a href="qta.html#cb505-7"></a>effect_gender <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">arrange</span>(<span class="op">-</span>estimate)</span>
<span id="cb505-8"><a href="qta.html#cb505-8"></a><span class="co">##       method topic covariate    covariate.value estimate std.error</span></span>
<span id="cb505-9"><a href="qta.html#cb505-9"></a><span class="co">## 1 difference     2    genero Femenino-Masculino    0.052    0.0095</span></span>
<span id="cb505-10"><a href="qta.html#cb505-10"></a><span class="co">## 2 difference     8    genero Femenino-Masculino    0.015    0.0092</span></span>
<span id="cb505-11"><a href="qta.html#cb505-11"></a><span class="co">##   ci.level ci.lower ci.upper</span></span>
<span id="cb505-12"><a href="qta.html#cb505-12"></a><span class="co">## 1     0.95   0.0339    0.071</span></span>
<span id="cb505-13"><a href="qta.html#cb505-13"></a><span class="co">## 2     0.95  -0.0032    0.033</span></span>
<span id="cb505-14"><a href="qta.html#cb505-14"></a><span class="co">##                                                      label</span></span>
<span id="cb505-15"><a href="qta.html#cb505-15"></a><span class="co">## 1 Topic 2 (Covariate Level Femenino Compared to Masculino)</span></span>
<span id="cb505-16"><a href="qta.html#cb505-16"></a><span class="co">## 2 Topic 8 (Covariate Level Femenino Compared to Masculino)</span></span>
<span id="cb505-17"><a href="qta.html#cb505-17"></a><span class="co">##  [ reached &#39;max&#39; / getOption(&quot;max.print&quot;) -- omitted 8 rows ]</span></span></code></pre></div>
<p>Es posible graficar estos resultados usando <code>ggplot2</code>, una gran ventaja del paquete <code>tidystm</code>, que se muestra en la Figura <a href="qta.html#fig:stm-effects">13.14</a>:</p>
<div class="sourceCode" id="cb506"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb506-1"><a href="qta.html#cb506-1"></a><span class="kw">ggplot</span>(effect_gender,</span>
<span id="cb506-2"><a href="qta.html#cb506-2"></a>       <span class="kw">aes</span>(<span class="dt">x =</span> estimate, <span class="dt">xmin =</span> ci.lower, <span class="dt">xmax =</span> ci.upper, </span>
<span id="cb506-3"><a href="qta.html#cb506-3"></a>           <span class="dt">y =</span> <span class="kw">fct_reorder</span>(<span class="kw">as.character</span>(topic), estimate))) <span class="op">+</span></span>
<span id="cb506-4"><a href="qta.html#cb506-4"></a><span class="st">  </span><span class="co"># añadir línea de efecto nulo</span></span>
<span id="cb506-5"><a href="qta.html#cb506-5"></a><span class="st">  </span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> <span class="dv">0</span>, <span class="dt">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="op">+</span></span>
<span id="cb506-6"><a href="qta.html#cb506-6"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb506-7"><a href="qta.html#cb506-7"></a><span class="st">  </span><span class="kw">geom_linerange</span>() <span class="op">+</span></span>
<span id="cb506-8"><a href="qta.html#cb506-8"></a><span class="st">  </span><span class="co"># central la línea de efecto nulo</span></span>
<span id="cb506-9"><a href="qta.html#cb506-9"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">limits =</span> <span class="kw">c</span>(<span class="op">-</span><span class="fl">0.075</span>, <span class="fl">0.075</span>)) <span class="op">+</span></span>
<span id="cb506-10"><a href="qta.html#cb506-10"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Estadístico para la diferencia Femenino - Masculino&quot;</span>, </span>
<span id="cb506-11"><a href="qta.html#cb506-11"></a>       <span class="dt">y =</span> <span class="st">&quot;Tópico&quot;)</span></span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:stm-effects"></span>
<img src="13-qta_es_files/figure-html/stm-effects-1.png" alt="Effect of genero on topic prevalence." width="672" />
<p class="caption">
Figura 13.14: Effect of genero on topic prevalence.
</p>
</div>
<p>Podemos repetir el análisis anterior para la otra covariable en nuestro modelo, obteniendo la diferencia en la prevalencia del tema entre la coalición de más izquierda (FA o Frente Amplio) y la coalición de más derecha (ChV o Chile Vamos). Como se esperaba, el modelo estima que los políticos de izquierda tendían -probabilísticamente- a twitear más sobre la ola feminista (Tema 2).</p>
<div class="sourceCode" id="cb507"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb507-1"><a href="qta.html#cb507-1"></a>effect_coalition_diff &lt;-<span class="st"> </span><span class="kw">extract.estimateEffect</span>(<span class="dt">x =</span> stm_effects,</span>
<span id="cb507-2"><a href="qta.html#cb507-2"></a>                                                <span class="dt">covariate =</span> <span class="st">&quot;coalicion&quot;</span>,</span>
<span id="cb507-3"><a href="qta.html#cb507-3"></a>                                                <span class="dt">method =</span> <span class="st">&quot;difference&quot;</span>,</span>
<span id="cb507-4"><a href="qta.html#cb507-4"></a>                                                <span class="dt">cov.value1 =</span> <span class="st">&quot;FA&quot;</span>,</span>
<span id="cb507-5"><a href="qta.html#cb507-5"></a>                                                <span class="dt">cov.value2 =</span> <span class="st">&quot;ChV&quot;</span>,</span>
<span id="cb507-6"><a href="qta.html#cb507-6"></a>                                                <span class="dt">model =</span> stm_model_k10)</span>
<span id="cb507-7"><a href="qta.html#cb507-7"></a>effect_coalition_diff <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb507-8"><a href="qta.html#cb507-8"></a><span class="st">  </span><span class="kw">filter</span>(topic <span class="op">==</span><span class="st"> </span><span class="dv">2</span>)</span>
<span id="cb507-9"><a href="qta.html#cb507-9"></a><span class="co">##       method topic covariate covariate.value estimate std.error ci.level</span></span>
<span id="cb507-10"><a href="qta.html#cb507-10"></a><span class="co">## 1 difference     2 coalicion          FA-ChV    0.041    0.0099     0.95</span></span>
<span id="cb507-11"><a href="qta.html#cb507-11"></a><span class="co">##   ci.lower ci.upper                                        label</span></span>
<span id="cb507-12"><a href="qta.html#cb507-12"></a><span class="co">## 1    0.022    0.061 Topic 2 (Covariate Level FA Compared to ChV)</span></span></code></pre></div>
<blockquote>
<p><strong>Ejercicio 13B.</strong> Grafica los efectos de la covariable de coalición, mostrando la diferencia entre la coalición de derecha (ChV) y las otras (FA y LFM).</p>
<p><strong>Ejercicio 13C.</strong> Agregue los 7 términos principales para cada tema a la Figura <a href="qta.html#fig:stm-effects">13.14</a>. *Consejo: puede usar <code>left_join()</code> para fusionar las dos bases de datos de interés.</p>
</blockquote>
</div>
<div id="observaciones-finales" class="section level3">
<h3><span class="header-section-number">13.3.4</span> Observaciones finales</h3>
<p>Las comunicaciones políticas en ciclos de protesta tienen claras implicancias en el dominio digital. En esta sección hemos demostrado que el análisis de texto automatizado de tweets políticos captura variaciones en la forma en que se twittea, particularmente, en cómo las congresistas parecen estar más correlacionadas con ciertos temas, en este caso el tema 2, relacionado con género. STM es una de las técnicas de NLP más recientes utilizadas en ciencia política para minería de texto sin supervisión. Sin embargo, a pesar del claro beneficio del uso de la minería de texto, estas técnicas deben usarse con precaución ya que la interpretabilidad de los temas es sensible en muchas decisiones como la K (número de temas para un modelo dado) y la limpieza del texto.</p>

</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="52">
<li id="fn52"><p>E-mail: lshuneeus@uc.cl<a href="qta.html#fnref52" class="footnote-back">↩︎</a></p></li>
<li id="fn53"><p>Para un entendimiento más profundo del alcance de este movimiento, recomendamos el libro editado por la periodista Faride Zerán, “Mayo Feminista: La rebelión contra el patriarcado” <span class="citation">(<a href="referencias.html#ref-zeranMayoFeministaRebelion2018" role="doc-biblioref">2018</a>)</span>.<a href="qta.html#fnref53" class="footnote-back">↩︎</a></p></li>
<li id="fn54"><p>Para aprender más sobre algunas grandes estrategias de investigación en ciencias sociales utilizando datos de Twitter, te recomendamos el capítulo “Observing Behavior” del libro “Bit by Bit” de Matthew Salganik <span class="citation">(<a href="referencias.html#ref-salganikBitBitSocial2017" role="doc-biblioref">2017</a>, ch. 2)</span>.<a href="qta.html#fnref54" class="footnote-back">↩︎</a></p></li>
<li id="fn55"><p>Una lectura esencial sobre cómo se puede estudiar una crisis política latinoamericana a través de Twitter es <em>Political Anatomy of Twitter in Argentina</em> <span class="citation">(<a href="referencias.html#ref-calvoAnatomiaPoliticaTwitter2015" role="doc-biblioref">2015</a>)</span> sobre la estructura de red digital generada tras la muerte del fiscal Alberto Nisman en 2015.<a href="qta.html#fnref55" class="footnote-back">↩︎</a></p></li>
<li id="fn56"><p>El hashtag <code>#aborto3causales</code> está relacionado con un debate nacional de larga data: entre 1989 y 2017, Chile tenía una de las políticas de aborto más restrictivas del mundo, criminalizando su práctica sin excepción. Desde 2017, el aborto en Chile es legal en los siguientes casos: cuando la vida de la madre está en riesgo, cuando el feto no sobrevivirá el embarazo y durante las primeras 12 semanas de embarazos (14 semanas si la mujer es menor de 14 años) en caso de violación. El 12 de febrero de 2018, la Norma Técnica fue promulgada en el Diario Oficial de la Ley 21.030, que despenalizó el aborto en tres causales. La norma fue amenazada con derogación y modificación, lo que generó una gran cantidad de controversia.<a href="qta.html#fnref56" class="footnote-back">↩︎</a></p></li>
<li id="fn57"><p><code>tidystm</code> necesita ser instalado desde GitHub: <code>remotes::install_github("mikajoh/tidystm")</code>.<a href="qta.html#fnref57" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="web-mining.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="networks.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "night",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/arcruz0/libroadp/edit/master/13-qta_es.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>

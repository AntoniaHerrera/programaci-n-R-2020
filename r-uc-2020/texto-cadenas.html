<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>06B - Cadenas de texto | Programación para las Ciencias Sociales</title>
  <meta name="description" content="Sitio web ICP0506" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="06B - Cadenas de texto | Programación para las Ciencias Sociales" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Sitio web ICP0506" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="06B - Cadenas de texto | Programación para las Ciencias Sociales" />
  
  <meta name="twitter:description" content="Sitio web ICP0506" />
  

<meta name="author" content="Andrés Cruz" />


<meta name="date" content="2020-11-05" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="texto-analisis.html"/>
<link rel="next" href="texto-libros.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./index.html">Prog. Cs. Sociales</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Inicio</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#links-importantes"><i class="fa fa-check"></i>Links importantes</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#cronograma-y-materiales-del-curso"><i class="fa fa-check"></i>Cronograma y materiales del curso</a></li>
</ul></li>
<li class="part"><span><b>I Intro a R, RStudio y R Markdown</b></span></li>
<li class="chapter" data-level="" data-path="rbasico.html"><a href="rbasico.html"><i class="fa fa-check"></i>01 - R básico</a><ul>
<li class="chapter" data-level="" data-path="rbasico.html"><a href="rbasico.html#introducción-comandos-y-código"><i class="fa fa-check"></i>Introducción: comandos y código</a></li>
<li class="chapter" data-level="" data-path="rbasico.html"><a href="rbasico.html#paquetes"><i class="fa fa-check"></i>Paquetes</a></li>
<li class="chapter" data-level="" data-path="rbasico.html"><a href="rbasico.html#comandos-básicos-y-tipos-de-objeto-en-r"><i class="fa fa-check"></i>Comandos básicos y tipos de objeto en R</a></li>
<li class="chapter" data-level="" data-path="rbasico.html"><a href="rbasico.html#sintaxis-de-r-markdown"><i class="fa fa-check"></i>Sintaxis de R Markdown</a></li>
<li class="chapter" data-level="" data-path="rbasico.html"><a href="rbasico.html#siguiente-script"><i class="fa fa-check"></i>Siguiente script</a></li>
</ul></li>
<li class="part"><span><b>II Manejo de datos</b></span></li>
<li class="chapter" data-level="" data-path="manejo-2a.html"><a href="manejo-2a.html"><i class="fa fa-check"></i>02A - Manejo de datos</a><ul>
<li class="chapter" data-level="" data-path="manejo-2a.html"><a href="manejo-2a.html#repaso-de-la-clase-pasada-r-markdown"><i class="fa fa-check"></i>Repaso de la clase pasada: R Markdown</a></li>
<li class="chapter" data-level="" data-path="manejo-2a.html"><a href="manejo-2a.html#manejo-de-bases-de-datos"><i class="fa fa-check"></i>Manejo de bases de datos</a></li>
<li class="chapter" data-level="" data-path="manejo-2a.html"><a href="manejo-2a.html#la-base-de-datos-ideal-tidy"><i class="fa fa-check"></i>La base de datos ideal: tidy</a></li>
<li><a href="manejo-2a.html#operaciones-básicas-en-bases-de-datos-wickham-2014">Operaciones básicas en bases de datos <span>(Wickham, 2014)</span></a></li>
<li class="chapter" data-level="" data-path="manejo-2a.html"><a href="manejo-2a.html#trabajo-con-r"><i class="fa fa-check"></i>Trabajo con R</a></li>
<li class="chapter" data-level="" data-path="manejo-2a.html"><a href="manejo-2a.html#manejo-de-datos-operaciones-básicas"><i class="fa fa-check"></i>Manejo de datos: operaciones básicas</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="manejo-2b.html"><a href="manejo-2b.html"><i class="fa fa-check"></i>02B - Manejo de datos (ejercicio)</a><ul>
<li class="chapter" data-level="" data-path="manejo-2b.html"><a href="manejo-2b.html#contexto"><i class="fa fa-check"></i>Contexto</a></li>
<li class="chapter" data-level="" data-path="manejo-2b.html"><a href="manejo-2b.html#a."><i class="fa fa-check"></i>A.</a></li>
<li class="chapter" data-level="" data-path="manejo-2b.html"><a href="manejo-2b.html#b."><i class="fa fa-check"></i>B.</a></li>
<li class="chapter" data-level="" data-path="manejo-2b.html"><a href="manejo-2b.html#c."><i class="fa fa-check"></i>C.</a></li>
<li class="chapter" data-level="" data-path="manejo-2b.html"><a href="manejo-2b.html#d."><i class="fa fa-check"></i>D.</a></li>
<li class="chapter" data-level="" data-path="manejo-2b.html"><a href="manejo-2b.html#e."><i class="fa fa-check"></i>E.</a></li>
<li class="chapter" data-level="" data-path="manejo-2b.html"><a href="manejo-2b.html#f."><i class="fa fa-check"></i>F.</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="manejo-2c.html"><a href="manejo-2c.html"><i class="fa fa-check"></i>02C - Manejo de datos (extras)</a><ul>
<li class="chapter" data-level="" data-path="manejo-2c.html"><a href="manejo-2c.html#cargar-y-guardar-bases-de-datos"><i class="fa fa-check"></i>Cargar y guardar bases de datos</a></li>
<li><a href="manejo-2c.html#versiones-iterativas-de-summarize-y-mutate">Versiones iterativas de <code>summarize()</code> y <code>mutate()</code></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="manejo-2d.html"><a href="manejo-2d.html"><i class="fa fa-check"></i>02D - Manejo de datos (ejercicio int.)</a></li>
<li class="part"><span><b>III Visualización de datos</b></span></li>
<li class="chapter" data-level="" data-path="visualizacion-preceptos.html"><a href="visualizacion-preceptos.html"><i class="fa fa-check"></i>03 - Visualización de datos (preceptos)</a></li>
<li class="chapter" data-level="" data-path="visualizacion-intro.html"><a href="visualizacion-intro.html"><i class="fa fa-check"></i>03A - Visualización de datos (intro)</a><ul>
<li class="chapter" data-level="" data-path="visualizacion-intro.html"><a href="visualizacion-intro.html#inicio-cargar-paquetes-base-de-datos"><i class="fa fa-check"></i>Inicio: cargar paquetes, base de datos</a></li>
<li class="chapter" data-level="" data-path="visualizacion-intro.html"><a href="visualizacion-intro.html#gráficos-univariados"><i class="fa fa-check"></i>Gráficos univariados</a></li>
<li class="chapter" data-level="" data-path="visualizacion-intro.html"><a href="visualizacion-intro.html#gráficos-bivariados"><i class="fa fa-check"></i>Gráficos bivariados</a></li>
<li class="chapter" data-level="" data-path="visualizacion-intro.html"><a href="visualizacion-intro.html#un-poco-de-personalización-etiquetas"><i class="fa fa-check"></i>Un poco de personalización: etiquetas</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="visualizacion-ext.html"><a href="visualizacion-ext.html"><i class="fa fa-check"></i>03B - Visualización de datos (extensiones)</a><ul>
<li class="chapter" data-level="" data-path="visualizacion-ext.html"><a href="visualizacion-ext.html#cargar-paquetes-y-datos"><i class="fa fa-check"></i>Cargar paquetes y datos</a></li>
<li class="chapter" data-level="" data-path="visualizacion-ext.html"><a href="visualizacion-ext.html#gráfico-de-ránking"><i class="fa fa-check"></i>Gráfico de ránking</a></li>
<li class="chapter" data-level="" data-path="visualizacion-ext.html"><a href="visualizacion-ext.html#facetas"><i class="fa fa-check"></i>Facetas</a></li>
<li class="chapter" data-level="" data-path="visualizacion-ext.html"><a href="visualizacion-ext.html#gráficos-de-líneas"><i class="fa fa-check"></i>Gráficos de líneas</a></li>
<li class="chapter" data-level="" data-path="visualizacion-ext.html"><a href="visualizacion-ext.html#más-personalización"><i class="fa fa-check"></i>Más personalización</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="visualizacion-personalizacion.html"><a href="visualizacion-personalizacion.html"><i class="fa fa-check"></i>03C - Visualización de datos (personalización)</a><ul>
<li class="chapter" data-level="" data-path="visualizacion-personalizacion.html"><a href="visualizacion-personalizacion.html#inicio-cargar-paquetes-base-de-datos-1"><i class="fa fa-check"></i>Inicio: cargar paquetes, base de datos</a></li>
<li class="chapter" data-level="" data-path="visualizacion-personalizacion.html"><a href="visualizacion-personalizacion.html#gráfico-de-ejemplo"><i class="fa fa-check"></i>Gráfico de ejemplo</a></li>
<li class="chapter" data-level="" data-path="visualizacion-personalizacion.html"><a href="visualizacion-personalizacion.html#gráficos-como-objetos-guardar-gráficos-en-el-disco"><i class="fa fa-check"></i>Gráficos como objetos / guardar gráficos en el disco</a></li>
<li class="chapter" data-level="" data-path="visualizacion-personalizacion.html"><a href="visualizacion-personalizacion.html#personalización-de-gráficos"><i class="fa fa-check"></i>Personalización de gráficos</a></li>
</ul></li>
<li class="part"><span><b>IV Búsqueda de ayuda</b></span></li>
<li class="chapter" data-level="" data-path="busqueda-ayuda.html"><a href="busqueda-ayuda.html"><i class="fa fa-check"></i>04 - Guía búsqueda de ayuda</a><ul>
<li class="chapter" data-level="" data-path="busqueda-ayuda.html"><a href="busqueda-ayuda.html#leer-archivos-de-ayuda-de-r"><i class="fa fa-check"></i>Leer archivos de ayuda de R</a></li>
<li class="chapter" data-level="" data-path="busqueda-ayuda.html"><a href="busqueda-ayuda.html#encontrar-funciones-en-línea"><i class="fa fa-check"></i>Encontrar funciones en línea</a></li>
<li class="chapter" data-level="" data-path="busqueda-ayuda.html"><a href="busqueda-ayuda.html#solucionar-problemas"><i class="fa fa-check"></i>Solucionar problemas</a></li>
<li class="chapter" data-level="" data-path="busqueda-ayuda.html"><a href="busqueda-ayuda.html#pedir-ayuda-con-ejemplos-reproducibles-reprex"><i class="fa fa-check"></i>Pedir ayuda con ejemplos reproducibles (reprex)</a></li>
</ul></li>
<li class="part"><span><b>V Manejo avanzado de datos</b></span></li>
<li class="chapter" data-level="" data-path="manejo-av.html"><a href="manejo-av.html"><i class="fa fa-check"></i>05A - Manejo avanzado de datos</a><ul>
<li class="chapter" data-level="" data-path="manejo-av.html"><a href="manejo-av.html#inicio-cargar-paquetes-base-de-datos-2"><i class="fa fa-check"></i>Inicio: cargar paquetes, base de datos</a></li>
<li class="chapter" data-level="" data-path="manejo-av.html"><a href="manejo-av.html#pivotear-bases-de-datos-wide---long"><i class="fa fa-check"></i>Pivotear bases de datos (wide &lt;-&gt; long)</a></li>
<li class="chapter" data-level="" data-path="manejo-av.html"><a href="manejo-av.html#recodificar-variables"><i class="fa fa-check"></i>Recodificar variables</a></li>
<li class="chapter" data-level="" data-path="manejo-av.html"><a href="manejo-av.html#valores-perdidosmissingna"><i class="fa fa-check"></i>Valores perdidos/missing/NA</a></li>
<li class="chapter" data-level="" data-path="manejo-av.html"><a href="manejo-av.html#unir-bases-de-datos"><i class="fa fa-check"></i>Unir bases de datos</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="manejo-av-ej.html"><a href="manejo-av-ej.html"><i class="fa fa-check"></i>05B - Manejo avanzado de datos (ejercicio)</a></li>
<li class="part"><span><b>VI Análisis de texto</b></span></li>
<li class="chapter" data-level="" data-path="texto-analisis.html"><a href="texto-analisis.html"><i class="fa fa-check"></i>06A - Análisis de texto</a><ul>
<li class="chapter" data-level="" data-path="texto-analisis.html"><a href="texto-analisis.html#inicio-cargar-paquetes-base-de-datos-3"><i class="fa fa-check"></i>Inicio: cargar paquetes, base de datos</a></li>
<li class="chapter" data-level="" data-path="texto-analisis.html"><a href="texto-analisis.html#tokens-y-frecuencias"><i class="fa fa-check"></i>Tokens y frecuencias</a></li>
<li class="chapter" data-level="" data-path="texto-analisis.html"><a href="texto-analisis.html#separar-el-análisis-de-frecuencias-por-secciones"><i class="fa fa-check"></i>Separar el análisis de frecuencias por secciones</a></li>
<li class="chapter" data-level="" data-path="texto-analisis.html"><a href="texto-analisis.html#obtener-las-palabras-más-distintivas-al-comparar-documentos"><i class="fa fa-check"></i>Obtener las palabras más distintivas al comparar documentos</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="texto-cadenas.html"><a href="texto-cadenas.html"><i class="fa fa-check"></i>06B - Cadenas de texto</a><ul>
<li class="chapter" data-level="" data-path="texto-cadenas.html"><a href="texto-cadenas.html#inicio-cargar-paquetes-base-de-datos-4"><i class="fa fa-check"></i>Inicio: cargar paquetes, base de datos</a></li>
<li class="chapter" data-level="" data-path="texto-cadenas.html"><a href="texto-cadenas.html#cadenas-de-texto"><i class="fa fa-check"></i>Cadenas de texto</a></li>
<li class="chapter" data-level="" data-path="texto-cadenas.html"><a href="texto-cadenas.html#algunas-operaciones-simples-con-texto"><i class="fa fa-check"></i>Algunas operaciones simples con texto</a></li>
<li class="chapter" data-level="" data-path="texto-cadenas.html"><a href="texto-cadenas.html#funciones-para-trabajar-con-patrones"><i class="fa fa-check"></i>Funciones para trabajar con patrones</a></li>
<li><a href="texto-cadenas.html#patrones-más-complejos-con-expresiones-regulares-regex">Patrones más complejos con expresiones regulares (<em>regex</em>)</a></li>
<li class="chapter" data-level="" data-path="texto-cadenas.html"><a href="texto-cadenas.html#ejercicio-f"><i class="fa fa-check"></i>(Ejercicio f)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="texto-libros.html"><a href="texto-libros.html"><i class="fa fa-check"></i>06C - Descarga de libros</a></li>
<li class="part"><span><b>VII R avanzado</b></span></li>
<li class="chapter" data-level="" data-path="r-avanzado.html"><a href="r-avanzado.html"><i class="fa fa-check"></i>07A - R avanzado</a><ul>
<li class="chapter" data-level="" data-path="r-avanzado.html"><a href="r-avanzado.html#inicio-cargar-paquetes"><i class="fa fa-check"></i>Inicio: cargar paquetes</a></li>
<li class="chapter" data-level="" data-path="r-avanzado.html"><a href="r-avanzado.html#funciones-personalizadas-y-control-de-flujo"><i class="fa fa-check"></i>Funciones personalizadas y control de flujo</a></li>
<li><a href="r-avanzado.html#iteraciones-con-purrr">Iteraciones con <code>purrr</code></a></li>
<li class="chapter" data-level="" data-path="r-avanzado.html"><a href="r-avanzado.html#aplicación-1-programas-presidenciales"><i class="fa fa-check"></i>Aplicación 1: programas presidenciales</a></li>
<li class="chapter" data-level="" data-path="r-avanzado.html"><a href="r-avanzado.html#aplicación-2-varios-archivos-excel"><i class="fa fa-check"></i>Aplicación 2: varios archivos Excel</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Publicado con bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Programación para las Ciencias Sociales</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="texto-cadenas" class="section level1 unnumbered">
<h1>06B - Cadenas de texto</h1>
<p>Como al principio de todo script, recomiendo reiniciar R. Esto lo conseguimos en RStudio Cloud con Session &gt; Restart R y clickeando en la escoba del panel de “Environment” (superior derecho).</p>
<div id="inicio-cargar-paquetes-base-de-datos-4" class="section level2">
<h2>Inicio: cargar paquetes, base de datos</h2>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb349-1"><a href="texto-cadenas.html#cb349-1"></a><span class="kw">library</span>(tidyverse)</span></code></pre></div>
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb350-1"><a href="texto-cadenas.html#cb350-1"></a>df_legisladores_cargos &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;datos/df_legisladores_cargos.csv&quot;</span>)</span></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   nombre_comp = col_character(),
##   id = col_double(),
##   caja_trayectoria = col_character()
## )</code></pre>
<p>Esta base de datos contiene información de las reseñas parlamentarias de la BCN, para legisladores con cargos entre 1990-presente (<a href="https://www.bcn.cl/historiapolitica/resenas_parlamentarias/wiki/Felipe_Harboe_Bascu%C3%B1%C3%A1n">ejemplo</a>). La unidad de análisis de esta base es legislador-cargo.</p>
</div>
<div id="cadenas-de-texto" class="section level2">
<h2>Cadenas de texto</h2>
<p>Los elementos en un vector de caracteres se pueden denominar “strings” o cadenas de texto. Veamos los primeros elementos del vector “caja_trayectoria”:</p>
<div class="sourceCode" id="cb352"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb352-1"><a href="texto-cadenas.html#cb352-1"></a><span class="kw">head</span>(df_legisladores_cargos<span class="op">$</span>caja_trayectoria)</span></code></pre></div>
<pre><code>## [1] &quot;\nSenador institucional \n1998- 2006\n&quot;                                                                             &quot;\nDiputado \n2010- 2014\nDistrito N° 24Partido por la DemocraciaSucedido por: Jaime Hernán Gonzalo Pilowsky Greene&quot;
## [3] &quot;\nDiputado \n2006- 2010\nDistrito N° 24Partido por la Democracia&quot;                                                   &quot;\nDiputado \n2002- 2006\nDistrito N° 24Partido por la DemocraciaPrecedido por: Tomás Jocelyn Holt Letelier&quot;        
## [5] &quot;\nDiputado \n1998- 2002\nDistrito N° 52Partido Demócrata CristianoSucedido por: Fernando Meza Moncada&quot;              &quot;\nDiputado \n1994- 1998\nDistrito N° 52Partido Demócrata Cristiano&quot;</code></pre>
<p>Cada una de estas cadenas de texto contiene información que podría distribuirse en al menos cinco variables: cargo (diputado, senador*), año de inicio del período, año de término del período, distrito, partido. Nuestro objetivo será poder trabajar con dicha información, que por ahora está perdida en las cadenas (y es inútil). Para esto utilizaremos el paquete <code>stringr</code>, que se carga con el <code>tidyverse</code>.</p>
<p>Por cierto, los <code>\n</code> que se leen en las cadenas de texto significan “salto de párrafo”, como podemos ver en la caja de la reseña parlamentaria de ejemplo.</p>
</div>
<div id="algunas-operaciones-simples-con-texto" class="section level2">
<h2>Algunas operaciones simples con texto</h2>
<div id="cambiar-mayúsculas" class="section level3">
<h3>Cambiar mayúsculas</h3>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb354-1"><a href="texto-cadenas.html#cb354-1"></a>df_legisladores_cargos <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb354-2"><a href="texto-cadenas.html#cb354-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">caja_trayectoria_edit =</span> <span class="kw">str_to_lower</span>(caja_trayectoria)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb354-3"><a href="texto-cadenas.html#cb354-3"></a><span class="st">  </span><span class="kw">select</span>(caja_trayectoria, caja_trayectoria_edit) <span class="co"># solo para ver mejor el resultado</span></span></code></pre></div>
<pre><code>## # A tibble: 1,191 x 2
##    caja_trayectoria                                                                                                            caja_trayectoria_edit                                                                                                      
##    &lt;chr&gt;                                                                                                                       &lt;chr&gt;                                                                                                                      
##  1 &quot;\nSenador institucional \n1998- 2006\n&quot;                                                                                    &quot;\nsenador institucional \n1998- 2006\n&quot;                                                                                   
##  2 &quot;\nDiputado \n2010- 2014\nDistrito N° 24Partido por la DemocraciaSucedido por: Jaime Hernán Gonzalo Pilowsky Greene&quot;        &quot;\ndiputado \n2010- 2014\ndistrito n° 24partido por la democraciasucedido por: jaime hernán gonzalo pilowsky greene&quot;       
##  3 &quot;\nDiputado \n2006- 2010\nDistrito N° 24Partido por la Democracia&quot;                                                          &quot;\ndiputado \n2006- 2010\ndistrito n° 24partido por la democracia&quot;                                                         
##  4 &quot;\nDiputado \n2002- 2006\nDistrito N° 24Partido por la DemocraciaPrecedido por: Tomás Jocelyn Holt Letelier&quot;                &quot;\ndiputado \n2002- 2006\ndistrito n° 24partido por la democraciaprecedido por: tomás jocelyn holt letelier&quot;               
##  5 &quot;\nDiputado \n1998- 2002\nDistrito N° 52Partido Demócrata CristianoSucedido por: Fernando Meza Moncada&quot;                     &quot;\ndiputado \n1998- 2002\ndistrito n° 52partido demócrata cristianosucedido por: fernando meza moncada&quot;                    
##  6 &quot;\nDiputado \n1994- 1998\nDistrito N° 52Partido Demócrata Cristiano&quot;                                                        &quot;\ndiputado \n1994- 1998\ndistrito n° 52partido demócrata cristiano&quot;                                                       
##  7 &quot;\nDiputado \n1990- 1994\nDistrito N° 52Partido Demócrata Cristiano&quot;                                                        &quot;\ndiputado \n1990- 1994\ndistrito n° 52partido demócrata cristiano&quot;                                                       
##  8 &quot;\nDiputado \n2006- 2010\nDistrito N° 5Partido Renovación NacionalPrecedido por: Carlos Vilches GuzmánSucedido por: Carlos~ &quot;\ndiputado \n2006- 2010\ndistrito n° 5partido renovación nacionalprecedido por: carlos vilches guzmánsucedido por: carlos~
##  9 &quot;\nDiputado \n2014- 2018\nDistrito N° 37 Independiente&quot;                                                                     &quot;\ndiputado \n2014- 2018\ndistrito n° 37 independiente&quot;                                                                    
## 10 &quot;\nDiputado \n2010- 2014\nDistrito N° 37 Izquierda Ciudadana&quot;                                                               &quot;\ndiputado \n2010- 2014\ndistrito n° 37 izquierda ciudadana&quot;                                                              
## # ... with 1,181 more rows</code></pre>
<div id="ejercicio-a-6" class="section level4">
<h4>(Ejercicio a)</h4>
<p>Mira el archivo de ayuda de <code>str_to_lower()</code>. ¿Qué otras operaciones podemos hacer con las mayúsculas? Pruébalas con el ejemplo anterior. Tu código:</p>
</div>
</div>
<div id="eliminar-espacios-innecesarios" class="section level3">
<h3>Eliminar espacios innecesarios</h3>
<div class="sourceCode" id="cb356"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb356-1"><a href="texto-cadenas.html#cb356-1"></a>df_legisladores_cargos <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb356-2"><a href="texto-cadenas.html#cb356-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">caja_trayectoria_edit =</span> <span class="kw">str_squish</span>(caja_trayectoria)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb356-3"><a href="texto-cadenas.html#cb356-3"></a><span class="st">  </span><span class="kw">select</span>(caja_trayectoria, caja_trayectoria_edit) <span class="co"># solo para ver mejor el resultado</span></span></code></pre></div>
<pre><code>## # A tibble: 1,191 x 2
##    caja_trayectoria                                                                                                                caja_trayectoria_edit                                                                                                  
##    &lt;chr&gt;                                                                                                                           &lt;chr&gt;                                                                                                                  
##  1 &quot;\nSenador institucional \n1998- 2006\n&quot;                                                                                        Senador institucional 1998- 2006                                                                                       
##  2 &quot;\nDiputado \n2010- 2014\nDistrito N° 24Partido por la DemocraciaSucedido por: Jaime Hernán Gonzalo Pilowsky Greene&quot;            Diputado 2010- 2014 Distrito N° 24Partido por la DemocraciaSucedido por: Jaime Hernán Gonzalo Pilowsky Greene          
##  3 &quot;\nDiputado \n2006- 2010\nDistrito N° 24Partido por la Democracia&quot;                                                              Diputado 2006- 2010 Distrito N° 24Partido por la Democracia                                                            
##  4 &quot;\nDiputado \n2002- 2006\nDistrito N° 24Partido por la DemocraciaPrecedido por: Tomás Jocelyn Holt Letelier&quot;                    Diputado 2002- 2006 Distrito N° 24Partido por la DemocraciaPrecedido por: Tomás Jocelyn Holt Letelier                  
##  5 &quot;\nDiputado \n1998- 2002\nDistrito N° 52Partido Demócrata CristianoSucedido por: Fernando Meza Moncada&quot;                         Diputado 1998- 2002 Distrito N° 52Partido Demócrata CristianoSucedido por: Fernando Meza Moncada                       
##  6 &quot;\nDiputado \n1994- 1998\nDistrito N° 52Partido Demócrata Cristiano&quot;                                                            Diputado 1994- 1998 Distrito N° 52Partido Demócrata Cristiano                                                          
##  7 &quot;\nDiputado \n1990- 1994\nDistrito N° 52Partido Demócrata Cristiano&quot;                                                            Diputado 1990- 1994 Distrito N° 52Partido Demócrata Cristiano                                                          
##  8 &quot;\nDiputado \n2006- 2010\nDistrito N° 5Partido Renovación NacionalPrecedido por: Carlos Vilches GuzmánSucedido por: Carlos Vil~ Diputado 2006- 2010 Distrito N° 5Partido Renovación NacionalPrecedido por: Carlos Vilches GuzmánSucedido por: Carlos V~
##  9 &quot;\nDiputado \n2014- 2018\nDistrito N° 37 Independiente&quot;                                                                         Diputado 2014- 2018 Distrito N° 37 Independiente                                                                       
## 10 &quot;\nDiputado \n2010- 2014\nDistrito N° 37 Izquierda Ciudadana&quot;                                                                   Diputado 2010- 2014 Distrito N° 37 Izquierda Ciudadana                                                                 
## # ... with 1,181 more rows</code></pre>
</div>
<div id="obtener-número-de-caracteres" class="section level3">
<h3>Obtener número de caracteres</h3>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb358-1"><a href="texto-cadenas.html#cb358-1"></a>df_legisladores_cargos <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb358-2"><a href="texto-cadenas.html#cb358-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">caja_trayectoria_edit =</span> <span class="kw">str_length</span>(caja_trayectoria)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb358-3"><a href="texto-cadenas.html#cb358-3"></a><span class="st">  </span><span class="kw">select</span>(caja_trayectoria, caja_trayectoria_edit) <span class="co"># solo para ver mejor el resultado</span></span></code></pre></div>
<pre><code>## # A tibble: 1,191 x 2
##    caja_trayectoria                                                                                                                           caja_trayectoria_edit
##    &lt;chr&gt;                                                                                                                                                      &lt;int&gt;
##  1 &quot;\nSenador institucional \n1998- 2006\n&quot;                                                                                                                      35
##  2 &quot;\nDiputado \n2010- 2014\nDistrito N° 24Partido por la DemocraciaSucedido por: Jaime Hernán Gonzalo Pilowsky Greene&quot;                                         111
##  3 &quot;\nDiputado \n2006- 2010\nDistrito N° 24Partido por la Democracia&quot;                                                                                            61
##  4 &quot;\nDiputado \n2002- 2006\nDistrito N° 24Partido por la DemocraciaPrecedido por: Tomás Jocelyn Holt Letelier&quot;                                                 103
##  5 &quot;\nDiputado \n1998- 2002\nDistrito N° 52Partido Demócrata CristianoSucedido por: Fernando Meza Moncada&quot;                                                       98
##  6 &quot;\nDiputado \n1994- 1998\nDistrito N° 52Partido Demócrata Cristiano&quot;                                                                                          63
##  7 &quot;\nDiputado \n1990- 1994\nDistrito N° 52Partido Demócrata Cristiano&quot;                                                                                          63
##  8 &quot;\nDiputado \n2006- 2010\nDistrito N° 5Partido Renovación NacionalPrecedido por: Carlos Vilches GuzmánSucedido por: Carlos Vilches Guzmán&quot;                   133
##  9 &quot;\nDiputado \n2014- 2018\nDistrito N° 37 Independiente&quot;                                                                                                       50
## 10 &quot;\nDiputado \n2010- 2014\nDistrito N° 37 Izquierda Ciudadana&quot;                                                                                                 56
## # ... with 1,181 more rows</code></pre>
</div>
</div>
<div id="funciones-para-trabajar-con-patrones" class="section level2">
<h2>Funciones para trabajar con patrones</h2>
<p>En general, podemos encontrar patrones en las cadenas que nos permitirán interpretar la información que contienen. Como los datos de texto suelen ser desestructurados, tendremos que idear estos patrones <em>ad hoc</em>, caso a caso.</p>
<p>El patrón más sencillo es simplemente una serie textual de caracteres. Por ejemplo, podemos ocupar la función lógica <code>str_detect()</code> para marcar todas las observaciones que incluyen la serie de caracteres “Diputad” en la variable “caja_trayectoria”:</p>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="texto-cadenas.html#cb360-1"></a>df_legisladores_cargos <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb360-2"><a href="texto-cadenas.html#cb360-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">caja_trayectoria_edit =</span> <span class="kw">str_detect</span>(caja_trayectoria,</span>
<span id="cb360-3"><a href="texto-cadenas.html#cb360-3"></a>                                            <span class="dt">pattern =</span> <span class="st">&quot;Diputad&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb360-4"><a href="texto-cadenas.html#cb360-4"></a><span class="st">  </span><span class="kw">select</span>(caja_trayectoria, caja_trayectoria_edit) <span class="co"># solo para ver mejor el resultado</span></span></code></pre></div>
<pre><code>## # A tibble: 1,191 x 2
##    caja_trayectoria                                                                                                                           caja_trayectoria_edit
##    &lt;chr&gt;                                                                                                                                      &lt;lgl&gt;                
##  1 &quot;\nSenador institucional \n1998- 2006\n&quot;                                                                                                   FALSE                
##  2 &quot;\nDiputado \n2010- 2014\nDistrito N° 24Partido por la DemocraciaSucedido por: Jaime Hernán Gonzalo Pilowsky Greene&quot;                       TRUE                 
##  3 &quot;\nDiputado \n2006- 2010\nDistrito N° 24Partido por la Democracia&quot;                                                                         TRUE                 
##  4 &quot;\nDiputado \n2002- 2006\nDistrito N° 24Partido por la DemocraciaPrecedido por: Tomás Jocelyn Holt Letelier&quot;                               TRUE                 
##  5 &quot;\nDiputado \n1998- 2002\nDistrito N° 52Partido Demócrata CristianoSucedido por: Fernando Meza Moncada&quot;                                    TRUE                 
##  6 &quot;\nDiputado \n1994- 1998\nDistrito N° 52Partido Demócrata Cristiano&quot;                                                                       TRUE                 
##  7 &quot;\nDiputado \n1990- 1994\nDistrito N° 52Partido Demócrata Cristiano&quot;                                                                       TRUE                 
##  8 &quot;\nDiputado \n2006- 2010\nDistrito N° 5Partido Renovación NacionalPrecedido por: Carlos Vilches GuzmánSucedido por: Carlos Vilches Guzmán&quot; TRUE                 
##  9 &quot;\nDiputado \n2014- 2018\nDistrito N° 37 Independiente&quot;                                                                                    TRUE                 
## 10 &quot;\nDiputado \n2010- 2014\nDistrito N° 37 Izquierda Ciudadana&quot;                                                                              TRUE                 
## # ... with 1,181 more rows</code></pre>
<p>Como sabemos, las funciones lógicas nos permiten filtrar bases:</p>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="texto-cadenas.html#cb362-1"></a>df_legisladores_cargos <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb362-2"><a href="texto-cadenas.html#cb362-2"></a><span class="st">  </span><span class="kw">filter</span>(<span class="kw">str_detect</span>(caja_trayectoria, <span class="dt">pattern =</span> <span class="st">&quot;Diputad&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb362-3"><a href="texto-cadenas.html#cb362-3"></a><span class="st">  </span><span class="kw">select</span>(caja_trayectoria) <span class="co"># solo para ver mejor el resultado</span></span></code></pre></div>
<pre><code>## # A tibble: 985 x 1
##    caja_trayectoria                                                                                                                          
##    &lt;chr&gt;                                                                                                                                     
##  1 &quot;\nDiputado \n2010- 2014\nDistrito N° 24Partido por la DemocraciaSucedido por: Jaime Hernán Gonzalo Pilowsky Greene&quot;                      
##  2 &quot;\nDiputado \n2006- 2010\nDistrito N° 24Partido por la Democracia&quot;                                                                        
##  3 &quot;\nDiputado \n2002- 2006\nDistrito N° 24Partido por la DemocraciaPrecedido por: Tomás Jocelyn Holt Letelier&quot;                              
##  4 &quot;\nDiputado \n1998- 2002\nDistrito N° 52Partido Demócrata CristianoSucedido por: Fernando Meza Moncada&quot;                                   
##  5 &quot;\nDiputado \n1994- 1998\nDistrito N° 52Partido Demócrata Cristiano&quot;                                                                      
##  6 &quot;\nDiputado \n1990- 1994\nDistrito N° 52Partido Demócrata Cristiano&quot;                                                                      
##  7 &quot;\nDiputado \n2006- 2010\nDistrito N° 5Partido Renovación NacionalPrecedido por: Carlos Vilches GuzmánSucedido por: Carlos Vilches Guzmán&quot;
##  8 &quot;\nDiputado \n2014- 2018\nDistrito N° 37 Independiente&quot;                                                                                   
##  9 &quot;\nDiputado \n2010- 2014\nDistrito N° 37 Izquierda Ciudadana&quot;                                                                             
## 10 &quot;\nDiputado \n2006- 2010\nDistrito N° 37Partido Socialista de Chile&quot;                                                                      
## # ... with 975 more rows</code></pre>
<p>También podemos ocupar una negación para obtener las observaciones de senadores:</p>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb364-1"><a href="texto-cadenas.html#cb364-1"></a>df_legisladores_cargos <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb364-2"><a href="texto-cadenas.html#cb364-2"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">str_detect</span>(caja_trayectoria, <span class="dt">pattern =</span> <span class="st">&quot;Diputad&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb364-3"><a href="texto-cadenas.html#cb364-3"></a><span class="st">  </span><span class="kw">select</span>(caja_trayectoria) <span class="co"># solo para ver mejor el resultado</span></span></code></pre></div>
<pre><code>## # A tibble: 206 x 1
##    caja_trayectoria                                                                                                                                                                               
##    &lt;chr&gt;                                                                                                                                                                                          
##  1 &quot;\nSenador institucional \n1998- 2006\n&quot;                                                                                                                                                       
##  2 &quot;\nSenador \n2014- 2022\n7ª Circunscripción (2018-2022)Partido Renovación Nacional&quot;                                                                                                            
##  3 &quot;\nSenador \n2014- 2022\n8ª Circunscripción (2014-2018)Partido Renovación NacionalPrecedido por: Jovino Novoa Vásquez&quot;                                                                         
##  4 &quot;\nSenador \n2006- 2014\nTérmino de periodo: 16 de enero de 201116ª CircunscripciónPartido Renovación NacionalPrecedido por: Marco Antonio Cariola BarroilhetSucedido por: Carlos Larraín Peña&quot;
##  5 &quot;\nSenadora \n2018- 2026\n6ª CircunscripciónPartido Socialista de Chile&quot;                                                                                                                       
##  6 &quot;\nSenadora \n2010- 2018\n3ª CircunscripciónPartido Socialista de ChilePrecedido por: Ricardo Núñez Muñoz&quot;                                                                                     
##  7 &quot;\nSenadora \n2006- 2014\n8ª Circunscripción Santiago OrientePartido Demócrata CristianoSucedido por: Carlos Montes Cisternas&quot;                                                                 
##  8 &quot;\nSenador \n2002- 2010\n6ª Circunscripción CostaPartido Unión Demócrata IndependientePrecedido por: Beltrán Urenda ZegersSucedido por: Francisco Chahuán Chahuán&quot;                             
##  9 &quot;\nSenadora \n2018- 2026\n11ª Circunscripción Independiente&quot;                                                                                                                                   
## 10 &quot;\nSenador \n2014- 2022\nCircunscripción N° 3 (2018-2022) Independiente&quot;                                                                                                                       
## # ... with 196 more rows</code></pre>
<p>Ahora introduciremos tres funciones que utilizan patrones, <code>str_extract()</code>, <code>str_replace()</code> y <code>str_remove()</code>. ¿Qué hace cada una?</p>
<p>Tus notas:</p>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb366-1"><a href="texto-cadenas.html#cb366-1"></a>df_legisladores_cargos <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb366-2"><a href="texto-cadenas.html#cb366-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">caja_trayectoria_edit =</span> <span class="kw">str_extract</span>(caja_trayectoria, </span>
<span id="cb366-3"><a href="texto-cadenas.html#cb366-3"></a>                                             <span class="dt">pattern =</span> <span class="st">&quot;Diputad&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb366-4"><a href="texto-cadenas.html#cb366-4"></a><span class="st">  </span><span class="kw">select</span>(caja_trayectoria, caja_trayectoria_edit) <span class="co"># solo para ver mejor el resultado</span></span></code></pre></div>
<pre><code>## # A tibble: 1,191 x 2
##    caja_trayectoria                                                                                                                           caja_trayectoria_edit
##    &lt;chr&gt;                                                                                                                                      &lt;chr&gt;                
##  1 &quot;\nSenador institucional \n1998- 2006\n&quot;                                                                                                   &lt;NA&gt;                 
##  2 &quot;\nDiputado \n2010- 2014\nDistrito N° 24Partido por la DemocraciaSucedido por: Jaime Hernán Gonzalo Pilowsky Greene&quot;                       Diputad              
##  3 &quot;\nDiputado \n2006- 2010\nDistrito N° 24Partido por la Democracia&quot;                                                                         Diputad              
##  4 &quot;\nDiputado \n2002- 2006\nDistrito N° 24Partido por la DemocraciaPrecedido por: Tomás Jocelyn Holt Letelier&quot;                               Diputad              
##  5 &quot;\nDiputado \n1998- 2002\nDistrito N° 52Partido Demócrata CristianoSucedido por: Fernando Meza Moncada&quot;                                    Diputad              
##  6 &quot;\nDiputado \n1994- 1998\nDistrito N° 52Partido Demócrata Cristiano&quot;                                                                       Diputad              
##  7 &quot;\nDiputado \n1990- 1994\nDistrito N° 52Partido Demócrata Cristiano&quot;                                                                       Diputad              
##  8 &quot;\nDiputado \n2006- 2010\nDistrito N° 5Partido Renovación NacionalPrecedido por: Carlos Vilches GuzmánSucedido por: Carlos Vilches Guzmán&quot; Diputad              
##  9 &quot;\nDiputado \n2014- 2018\nDistrito N° 37 Independiente&quot;                                                                                    Diputad              
## 10 &quot;\nDiputado \n2010- 2014\nDistrito N° 37 Izquierda Ciudadana&quot;                                                                              Diputad              
## # ... with 1,181 more rows</code></pre>
<div class="sourceCode" id="cb368"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb368-1"><a href="texto-cadenas.html#cb368-1"></a>df_legisladores_cargos <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb368-2"><a href="texto-cadenas.html#cb368-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">caja_trayectoria_edit =</span> <span class="kw">str_replace</span>(caja_trayectoria, </span>
<span id="cb368-3"><a href="texto-cadenas.html#cb368-3"></a>                                             <span class="dt">pattern =</span> <span class="st">&quot;institucional&quot;</span>, </span>
<span id="cb368-4"><a href="texto-cadenas.html#cb368-4"></a>                                             <span class="dt">replacement =</span> <span class="st">&quot;designado&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb368-5"><a href="texto-cadenas.html#cb368-5"></a><span class="st">  </span><span class="kw">select</span>(caja_trayectoria, caja_trayectoria_edit) <span class="co"># solo para ver mejor el resultado</span></span></code></pre></div>
<pre><code>## # A tibble: 1,191 x 2
##    caja_trayectoria                                                                                                            caja_trayectoria_edit                                                                                                      
##    &lt;chr&gt;                                                                                                                       &lt;chr&gt;                                                                                                                      
##  1 &quot;\nSenador institucional \n1998- 2006\n&quot;                                                                                    &quot;\nSenador designado \n1998- 2006\n&quot;                                                                                       
##  2 &quot;\nDiputado \n2010- 2014\nDistrito N° 24Partido por la DemocraciaSucedido por: Jaime Hernán Gonzalo Pilowsky Greene&quot;        &quot;\nDiputado \n2010- 2014\nDistrito N° 24Partido por la DemocraciaSucedido por: Jaime Hernán Gonzalo Pilowsky Greene&quot;       
##  3 &quot;\nDiputado \n2006- 2010\nDistrito N° 24Partido por la Democracia&quot;                                                          &quot;\nDiputado \n2006- 2010\nDistrito N° 24Partido por la Democracia&quot;                                                         
##  4 &quot;\nDiputado \n2002- 2006\nDistrito N° 24Partido por la DemocraciaPrecedido por: Tomás Jocelyn Holt Letelier&quot;                &quot;\nDiputado \n2002- 2006\nDistrito N° 24Partido por la DemocraciaPrecedido por: Tomás Jocelyn Holt Letelier&quot;               
##  5 &quot;\nDiputado \n1998- 2002\nDistrito N° 52Partido Demócrata CristianoSucedido por: Fernando Meza Moncada&quot;                     &quot;\nDiputado \n1998- 2002\nDistrito N° 52Partido Demócrata CristianoSucedido por: Fernando Meza Moncada&quot;                    
##  6 &quot;\nDiputado \n1994- 1998\nDistrito N° 52Partido Demócrata Cristiano&quot;                                                        &quot;\nDiputado \n1994- 1998\nDistrito N° 52Partido Demócrata Cristiano&quot;                                                       
##  7 &quot;\nDiputado \n1990- 1994\nDistrito N° 52Partido Demócrata Cristiano&quot;                                                        &quot;\nDiputado \n1990- 1994\nDistrito N° 52Partido Demócrata Cristiano&quot;                                                       
##  8 &quot;\nDiputado \n2006- 2010\nDistrito N° 5Partido Renovación NacionalPrecedido por: Carlos Vilches GuzmánSucedido por: Carlos~ &quot;\nDiputado \n2006- 2010\nDistrito N° 5Partido Renovación NacionalPrecedido por: Carlos Vilches GuzmánSucedido por: Carlos~
##  9 &quot;\nDiputado \n2014- 2018\nDistrito N° 37 Independiente&quot;                                                                     &quot;\nDiputado \n2014- 2018\nDistrito N° 37 Independiente&quot;                                                                    
## 10 &quot;\nDiputado \n2010- 2014\nDistrito N° 37 Izquierda Ciudadana&quot;                                                               &quot;\nDiputado \n2010- 2014\nDistrito N° 37 Izquierda Ciudadana&quot;                                                              
## # ... with 1,181 more rows</code></pre>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb370-1"><a href="texto-cadenas.html#cb370-1"></a>df_legisladores_cargos <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb370-2"><a href="texto-cadenas.html#cb370-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">caja_trayectoria_edit =</span> <span class="kw">str_remove</span>(caja_trayectoria, </span>
<span id="cb370-3"><a href="texto-cadenas.html#cb370-3"></a>                                            <span class="dt">pattern =</span> <span class="st">&quot;N° &quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb370-4"><a href="texto-cadenas.html#cb370-4"></a><span class="st">  </span><span class="kw">select</span>(caja_trayectoria, caja_trayectoria_edit) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb370-5"><a href="texto-cadenas.html#cb370-5"></a><span class="st">  </span><span class="kw">select</span>(caja_trayectoria, caja_trayectoria_edit) <span class="co"># solo para ver mejor el resultado</span></span></code></pre></div>
<pre><code>## # A tibble: 1,191 x 2
##    caja_trayectoria                                                                                                              caja_trayectoria_edit                                                                                                    
##    &lt;chr&gt;                                                                                                                         &lt;chr&gt;                                                                                                                    
##  1 &quot;\nSenador institucional \n1998- 2006\n&quot;                                                                                      &quot;\nSenador institucional \n1998- 2006\n&quot;                                                                                 
##  2 &quot;\nDiputado \n2010- 2014\nDistrito N° 24Partido por la DemocraciaSucedido por: Jaime Hernán Gonzalo Pilowsky Greene&quot;          &quot;\nDiputado \n2010- 2014\nDistrito 24Partido por la DemocraciaSucedido por: Jaime Hernán Gonzalo Pilowsky Greene&quot;        
##  3 &quot;\nDiputado \n2006- 2010\nDistrito N° 24Partido por la Democracia&quot;                                                            &quot;\nDiputado \n2006- 2010\nDistrito 24Partido por la Democracia&quot;                                                          
##  4 &quot;\nDiputado \n2002- 2006\nDistrito N° 24Partido por la DemocraciaPrecedido por: Tomás Jocelyn Holt Letelier&quot;                  &quot;\nDiputado \n2002- 2006\nDistrito 24Partido por la DemocraciaPrecedido por: Tomás Jocelyn Holt Letelier&quot;                
##  5 &quot;\nDiputado \n1998- 2002\nDistrito N° 52Partido Demócrata CristianoSucedido por: Fernando Meza Moncada&quot;                       &quot;\nDiputado \n1998- 2002\nDistrito 52Partido Demócrata CristianoSucedido por: Fernando Meza Moncada&quot;                     
##  6 &quot;\nDiputado \n1994- 1998\nDistrito N° 52Partido Demócrata Cristiano&quot;                                                          &quot;\nDiputado \n1994- 1998\nDistrito 52Partido Demócrata Cristiano&quot;                                                        
##  7 &quot;\nDiputado \n1990- 1994\nDistrito N° 52Partido Demócrata Cristiano&quot;                                                          &quot;\nDiputado \n1990- 1994\nDistrito 52Partido Demócrata Cristiano&quot;                                                        
##  8 &quot;\nDiputado \n2006- 2010\nDistrito N° 5Partido Renovación NacionalPrecedido por: Carlos Vilches GuzmánSucedido por: Carlos V~ &quot;\nDiputado \n2006- 2010\nDistrito 5Partido Renovación NacionalPrecedido por: Carlos Vilches GuzmánSucedido por: Carlos ~
##  9 &quot;\nDiputado \n2014- 2018\nDistrito N° 37 Independiente&quot;                                                                       &quot;\nDiputado \n2014- 2018\nDistrito 37 Independiente&quot;                                                                     
## 10 &quot;\nDiputado \n2010- 2014\nDistrito N° 37 Izquierda Ciudadana&quot;                                                                 &quot;\nDiputado \n2010- 2014\nDistrito 37 Izquierda Ciudadana&quot;                                                               
## # ... with 1,181 more rows</code></pre>
</div>
<div id="patrones-más-complejos-con-expresiones-regulares-regex" class="section level2">
<h2>Patrones más complejos con expresiones regulares (<em>regex</em>)</h2>
<p><img src="imgs/regex_tweet.png" /></p>
<p><img src="imgs/regex_google.png" /></p>
<p><img src="imgs/regex_so.png" /></p>
<p>Fuentes: <a href="https://twitter.com/kvlly/status/1178665724576964614">Kelly Vaughn</a>, <a href="https://programmerhumour.tumblr.com/post/182797650525/nobody-will-believe-that-you-did-it">Programmer Humor</a> y <a href="https://towardsdatascience.com/programmatically-build-regex-regular-expression-in-python-for-pattern-matching-3fee104fe42a">Towards Data Science</a>.</p>
<p>Hasta aquí hemos utilizado patrones muy simples y específicos, por medio de series textuales de caracteres. Pero a menudo la información de nuestras cadenas de texto sigue patrones más generales. Por ejemplo, ¿cómo podemos obtener el año de inicio de cada período? Sabemos que todos tienen cuatro dígitos, y siempre son los primeros cuatro dígitos que aparecen. Conociendo esto, podemos extraerlos de nuestras cadenas:</p>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb372-1"><a href="texto-cadenas.html#cb372-1"></a>df_legisladores_cargos <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb372-2"><a href="texto-cadenas.html#cb372-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">inicio_per =</span> <span class="kw">str_extract</span>(caja_trayectoria, <span class="dt">pattern =</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">d{4}&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb372-3"><a href="texto-cadenas.html#cb372-3"></a><span class="st">  </span><span class="kw">select</span>(caja_trayectoria, inicio_per) <span class="co"># solo para ver mejor el resultado</span></span></code></pre></div>
<pre><code>## # A tibble: 1,191 x 2
##    caja_trayectoria                                                                                                                           inicio_per
##    &lt;chr&gt;                                                                                                                                      &lt;chr&gt;     
##  1 &quot;\nSenador institucional \n1998- 2006\n&quot;                                                                                                   1998      
##  2 &quot;\nDiputado \n2010- 2014\nDistrito N° 24Partido por la DemocraciaSucedido por: Jaime Hernán Gonzalo Pilowsky Greene&quot;                       2010      
##  3 &quot;\nDiputado \n2006- 2010\nDistrito N° 24Partido por la Democracia&quot;                                                                         2006      
##  4 &quot;\nDiputado \n2002- 2006\nDistrito N° 24Partido por la DemocraciaPrecedido por: Tomás Jocelyn Holt Letelier&quot;                               2002      
##  5 &quot;\nDiputado \n1998- 2002\nDistrito N° 52Partido Demócrata CristianoSucedido por: Fernando Meza Moncada&quot;                                    1998      
##  6 &quot;\nDiputado \n1994- 1998\nDistrito N° 52Partido Demócrata Cristiano&quot;                                                                       1994      
##  7 &quot;\nDiputado \n1990- 1994\nDistrito N° 52Partido Demócrata Cristiano&quot;                                                                       1990      
##  8 &quot;\nDiputado \n2006- 2010\nDistrito N° 5Partido Renovación NacionalPrecedido por: Carlos Vilches GuzmánSucedido por: Carlos Vilches Guzmán&quot; 2006      
##  9 &quot;\nDiputado \n2014- 2018\nDistrito N° 37 Independiente&quot;                                                                                    2014      
## 10 &quot;\nDiputado \n2010- 2014\nDistrito N° 37 Izquierda Ciudadana&quot;                                                                              2010      
## # ... with 1,181 more rows</code></pre>
<p>Nuestro patrón esta escrito en el lenguaje de las expresiones regulares, que permite crear <strong>patrones generales en vez de específicos</strong>. Así, <code>\\d</code> significa “un dígito” y <code>{4}</code> significa cuatro veces. Puedes consultar una guía sobre las expresiones regulares en la segunda página del <a href="https://docs.google.com/viewer?url=https://github.com/rstudio/cheatsheets/raw/master/translations/spanish/strings_Spanish.pdf">“torpedo” de esta unidad</a>.</p>
<p>Por cierto, podemos obtener el año de fin del período haciendo un combo de extracción + remoción. A continuación tenemos una cadena de pipes dentro de otra! Tomamos “caja_trayectoria”, extraemos “- cuatro dígitos”, removemos “-” y pasamos a número, todo en una operación.</p>
<div class="sourceCode" id="cb374"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb374-1"><a href="texto-cadenas.html#cb374-1"></a>df_legisladores_cargos <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb374-2"><a href="texto-cadenas.html#cb374-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">fin_per =</span> caja_trayectoria <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb374-3"><a href="texto-cadenas.html#cb374-3"></a><span class="st">           </span><span class="kw">str_extract</span>(<span class="dt">pattern =</span> <span class="st">&quot;- </span><span class="ch">\\</span><span class="st">d{4}&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb374-4"><a href="texto-cadenas.html#cb374-4"></a><span class="st">           </span><span class="kw">str_remove</span>(<span class="st">&quot;- &quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb374-5"><a href="texto-cadenas.html#cb374-5"></a><span class="st">           </span><span class="kw">as.numeric</span>()) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb374-6"><a href="texto-cadenas.html#cb374-6"></a><span class="st">  </span><span class="kw">select</span>(caja_trayectoria, fin_per) <span class="co"># solo para ver mejor el resultado</span></span></code></pre></div>
<pre><code>## # A tibble: 1,191 x 2
##    caja_trayectoria                                                                                                                           fin_per
##    &lt;chr&gt;                                                                                                                                        &lt;dbl&gt;
##  1 &quot;\nSenador institucional \n1998- 2006\n&quot;                                                                                                      2006
##  2 &quot;\nDiputado \n2010- 2014\nDistrito N° 24Partido por la DemocraciaSucedido por: Jaime Hernán Gonzalo Pilowsky Greene&quot;                          2014
##  3 &quot;\nDiputado \n2006- 2010\nDistrito N° 24Partido por la Democracia&quot;                                                                            2010
##  4 &quot;\nDiputado \n2002- 2006\nDistrito N° 24Partido por la DemocraciaPrecedido por: Tomás Jocelyn Holt Letelier&quot;                                  2006
##  5 &quot;\nDiputado \n1998- 2002\nDistrito N° 52Partido Demócrata CristianoSucedido por: Fernando Meza Moncada&quot;                                       2002
##  6 &quot;\nDiputado \n1994- 1998\nDistrito N° 52Partido Demócrata Cristiano&quot;                                                                          1998
##  7 &quot;\nDiputado \n1990- 1994\nDistrito N° 52Partido Demócrata Cristiano&quot;                                                                          1994
##  8 &quot;\nDiputado \n2006- 2010\nDistrito N° 5Partido Renovación NacionalPrecedido por: Carlos Vilches GuzmánSucedido por: Carlos Vilches Guzmán&quot;    2010
##  9 &quot;\nDiputado \n2014- 2018\nDistrito N° 37 Independiente&quot;                                                                                       2018
## 10 &quot;\nDiputado \n2010- 2014\nDistrito N° 37 Izquierda Ciudadana&quot;                                                                                 2014
## # ... with 1,181 more rows</code></pre>
<p>Hay tres tipos de constructos básicos en las expresiones regulares: pronombres o clases de caracteres (como <code>\\d</code>), cuantificadores (como <code>{4}</code>) y anclas.</p>
<div id="pronombres-o-clases-de-caracteres" class="section level3">
<h3>Pronombres o clases de caracteres</h3>
<p>Ya vimos <code>\\d</code>, que es equivalente a “un dígito”. Otros pronombres comunes son: <code>[:alpha:]</code> (una letra), <code>\\w</code> (un caracter de “palabra”: letra o dígito), <code>\\s</code> (un caracter de espacio) y <code>.</code> (cualquier cosa).</p>
<p>Por cierto, ¿qué pasa si queremos buscar por algún caracter especial en expresiones regulares, como “.”?</p>
<div class="sourceCode" id="cb376"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb376-1"><a href="texto-cadenas.html#cb376-1"></a>vector_prueba &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Ley 20.000.&quot;</span>, <span class="st">&quot;Reglamento 201&quot;</span>)</span>
<span id="cb376-2"><a href="texto-cadenas.html#cb376-2"></a></span>
<span id="cb376-3"><a href="texto-cadenas.html#cb376-3"></a><span class="kw">str_extract</span>(vector_prueba, <span class="dt">pattern =</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">d{2}.&quot;</span>) <span class="co"># esto no es lo que queremos!</span></span></code></pre></div>
<pre><code>## [1] &quot;20.&quot; &quot;201&quot;</code></pre>
<p>Debemos “escapar” el caracter, antecediéndolo de “\”:</p>
<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb378-1"><a href="texto-cadenas.html#cb378-1"></a><span class="kw">str_extract</span>(vector_prueba, <span class="dt">pattern =</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">d{2}</span><span class="ch">\\</span><span class="st">.&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;20.&quot; NA</code></pre>
<div id="ejercicio-b-5" class="section level4">
<h4>(Ejercicio b)</h4>
<p>Genera una nueva variable en la base, que tenga solo la primera letra del nombre del(la) legislador(a). Tu código:</p>
</div>
</div>
<div id="cuantificadores" class="section level3">
<h3>Cuantificadores</h3>
<p>Vimos que <code>{4}</code> busca exactamente cuatro repeticiones de un caracter en específico. También podemos pedir rangos: <code>{2, 4}</code> (entre dos y cuatro), <code>{2, }</code> (dos o más).</p>
<p>Muy utilizados son los cuantificadores <code>*</code> (cero o más) y <code>+</code> (uno o más), que pueden pensarse como abreviaciones para los rangos anteriores.</p>
<p>Por ejemplo, obtengamos la primera palabra de “caja_trayectoria”, utilizando el patrón “una o más letras”:</p>
<div class="sourceCode" id="cb380"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb380-1"><a href="texto-cadenas.html#cb380-1"></a>df_legisladores_cargos <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb380-2"><a href="texto-cadenas.html#cb380-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">primera_pal_trayectoria =</span> <span class="kw">str_extract</span>(caja_trayectoria,</span>
<span id="cb380-3"><a href="texto-cadenas.html#cb380-3"></a>                                               <span class="dt">pattern =</span> <span class="st">&quot;[:alpha:]+&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb380-4"><a href="texto-cadenas.html#cb380-4"></a><span class="st">  </span><span class="kw">select</span>(caja_trayectoria, primera_pal_trayectoria) <span class="co"># solo para ver mejor el resultado</span></span></code></pre></div>
<pre><code>## # A tibble: 1,191 x 2
##    caja_trayectoria                                                                                                                           primera_pal_trayectoria
##    &lt;chr&gt;                                                                                                                                      &lt;chr&gt;                  
##  1 &quot;\nSenador institucional \n1998- 2006\n&quot;                                                                                                   Senador                
##  2 &quot;\nDiputado \n2010- 2014\nDistrito N° 24Partido por la DemocraciaSucedido por: Jaime Hernán Gonzalo Pilowsky Greene&quot;                       Diputado               
##  3 &quot;\nDiputado \n2006- 2010\nDistrito N° 24Partido por la Democracia&quot;                                                                         Diputado               
##  4 &quot;\nDiputado \n2002- 2006\nDistrito N° 24Partido por la DemocraciaPrecedido por: Tomás Jocelyn Holt Letelier&quot;                               Diputado               
##  5 &quot;\nDiputado \n1998- 2002\nDistrito N° 52Partido Demócrata CristianoSucedido por: Fernando Meza Moncada&quot;                                    Diputado               
##  6 &quot;\nDiputado \n1994- 1998\nDistrito N° 52Partido Demócrata Cristiano&quot;                                                                       Diputado               
##  7 &quot;\nDiputado \n1990- 1994\nDistrito N° 52Partido Demócrata Cristiano&quot;                                                                       Diputado               
##  8 &quot;\nDiputado \n2006- 2010\nDistrito N° 5Partido Renovación NacionalPrecedido por: Carlos Vilches GuzmánSucedido por: Carlos Vilches Guzmán&quot; Diputado               
##  9 &quot;\nDiputado \n2014- 2018\nDistrito N° 37 Independiente&quot;                                                                                    Diputado               
## 10 &quot;\nDiputado \n2010- 2014\nDistrito N° 37 Izquierda Ciudadana&quot;                                                                              Diputado               
## # ... with 1,181 more rows</code></pre>
<div id="ejercicio-c-5" class="section level4">
<h4>(Ejercicio c)</h4>
<p>Genera una nueva variable en la base, que tenga el distrito que aparece en “caja_trayectoria”. Aparte de cuantificadores, aquí vale la pena utilizar un combo de extracción + remoción. Tu código:</p>
</div>
</div>
<div id="anclas" class="section level3">
<h3>Anclas</h3>
<p>Podemos utilizar anclas para solo capturar las partes iniciales o finales de la cadena.</p>
<p>Ancla final (<code>$</code>):</p>
<div class="sourceCode" id="cb382"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb382-1"><a href="texto-cadenas.html#cb382-1"></a>df_legisladores_cargos <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb382-2"><a href="texto-cadenas.html#cb382-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">ult_apellido =</span> <span class="kw">str_extract</span>(nombre_comp, </span>
<span id="cb382-3"><a href="texto-cadenas.html#cb382-3"></a>                                    <span class="dt">pattern =</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">w+$&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb382-4"><a href="texto-cadenas.html#cb382-4"></a><span class="st">  </span><span class="kw">select</span>(nombre_comp, ult_apellido) <span class="co"># solo para ver mejor el resultado</span></span></code></pre></div>
<pre><code>## # A tibble: 1,191 x 2
##    nombre_comp                   ult_apellido
##    &lt;chr&gt;                         &lt;chr&gt;       
##  1 Marcos Aurelio Aburto Ochoa   Ochoa       
##  2 Enrique Accorsi Opazo         Opazo       
##  3 Enrique Accorsi Opazo         Opazo       
##  4 Enrique Accorsi Opazo         Opazo       
##  5 Mario Alberto Acuña Cisternas Cisternas   
##  6 Mario Alberto Acuña Cisternas Cisternas   
##  7 Mario Alberto Acuña Cisternas Cisternas   
##  8 René Aedo Ormeño              Ormeño      
##  9 Sergio Aguiló Melo            Melo        
## 10 Sergio Aguiló Melo            Melo        
## # ... with 1,181 more rows</code></pre>
<p>Ancla inicial (<code>^</code>):</p>
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb384-1"><a href="texto-cadenas.html#cb384-1"></a>df_legisladores_cargos <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb384-2"><a href="texto-cadenas.html#cb384-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">primer_nombre =</span> <span class="kw">str_extract</span>(nombre_comp, </span>
<span id="cb384-3"><a href="texto-cadenas.html#cb384-3"></a>                                     <span class="dt">pattern =</span> <span class="st">&quot;^</span><span class="ch">\\</span><span class="st">w+&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb384-4"><a href="texto-cadenas.html#cb384-4"></a><span class="st">  </span><span class="kw">select</span>(nombre_comp, primer_nombre) <span class="co"># solo para ver mejor el resultado</span></span></code></pre></div>
<pre><code>## # A tibble: 1,191 x 2
##    nombre_comp                   primer_nombre
##    &lt;chr&gt;                         &lt;chr&gt;        
##  1 Marcos Aurelio Aburto Ochoa   Marcos       
##  2 Enrique Accorsi Opazo         Enrique      
##  3 Enrique Accorsi Opazo         Enrique      
##  4 Enrique Accorsi Opazo         Enrique      
##  5 Mario Alberto Acuña Cisternas Mario        
##  6 Mario Alberto Acuña Cisternas Mario        
##  7 Mario Alberto Acuña Cisternas Mario        
##  8 René Aedo Ormeño              René         
##  9 Sergio Aguiló Melo            Sergio       
## 10 Sergio Aguiló Melo            Sergio       
## # ... with 1,181 more rows</code></pre>
<p>En este caso, el ancla inicial no es necesaria, pero a veces es útil para tomar en cuenta ambigüedades.</p>
</div>
<div id="ejercicio-d-2" class="section level3">
<h3>(Ejercicio d)</h3>
<p>Genera una nueva base de datos, que tenga variables con el cargo, año de inicio (ya lo hicimos), año de término (ya lo hicimos), distrito (ya lo hicimos) y partido. Con esto listo, habremos conseguido nuestro objetivo inicial. Asegúrate de que las variables tengan los tipos correctos de vectores –utiliza <code>as.numeric()</code> cuando corresponda–. Tu código:</p>
</div>
<div id="combinar-pronombres-en-expresiones-regulares" class="section level3">
<h3>Combinar pronombres en expresiones regulares</h3>
<p>¿Qué pasa si queremos extraer la cadena “Diputado” o “Diputada”, según corresponda? Podríamos hacer algo como esto, por ejemplo:</p>
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb386-1"><a href="texto-cadenas.html#cb386-1"></a>df_legisladores_cargos <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb386-2"><a href="texto-cadenas.html#cb386-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">cadena =</span> <span class="kw">str_extract</span>(caja_trayectoria, <span class="st">&quot;Diputad</span><span class="ch">\\</span><span class="st">w&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb386-3"><a href="texto-cadenas.html#cb386-3"></a><span class="st">  </span><span class="kw">select</span>(cadena)</span></code></pre></div>
<pre><code>## # A tibble: 1,191 x 1
##    cadena  
##    &lt;chr&gt;   
##  1 &lt;NA&gt;    
##  2 Diputado
##  3 Diputado
##  4 Diputado
##  5 Diputado
##  6 Diputado
##  7 Diputado
##  8 Diputado
##  9 Diputado
## 10 Diputado
## # ... with 1,181 more rows</code></pre>
<p>Funciona bien, pero tal vez es demasiado general. A veces queremos ser más específicos/as y decir, con expresiones regulares, la cadena que comience con “Diputad” y siga con “a” u “o”. Podemos hacer esto de la siguiente forma:</p>
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb388-1"><a href="texto-cadenas.html#cb388-1"></a>df_legisladores_cargos <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb388-2"><a href="texto-cadenas.html#cb388-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">cadena =</span> <span class="kw">str_extract</span>(caja_trayectoria, <span class="st">&quot;Diputad[ao]&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># caracteres permitidos</span></span>
<span id="cb388-3"><a href="texto-cadenas.html#cb388-3"></a><span class="st">  </span><span class="kw">select</span>(cadena)</span></code></pre></div>
<pre><code>## # A tibble: 1,191 x 1
##    cadena  
##    &lt;chr&gt;   
##  1 &lt;NA&gt;    
##  2 Diputado
##  3 Diputado
##  4 Diputado
##  5 Diputado
##  6 Diputado
##  7 Diputado
##  8 Diputado
##  9 Diputado
## 10 Diputado
## # ... with 1,181 more rows</code></pre>
<p>Fíjate en el siguiente ejemplo. Estaríamos capturando solo los elementos número 2 y 3.</p>
<div class="sourceCode" id="cb390"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb390-1"><a href="texto-cadenas.html#cb390-1"></a><span class="kw">c</span>(<span class="st">&quot;Diputación&quot;, &quot;</span>Diputado<span class="st">&quot;, &quot;</span>Diputada<span class="st">&quot;) %&gt;% str_detect(&quot;</span>Diputad[ao]<span class="st">&quot;)</span></span></code></pre></div>
<pre><code>## [1] FALSE  TRUE  TRUE</code></pre>
</div>
<div id="ejercicio-e" class="section level3">
<h3>(Ejercicio e)</h3>
<p>Genera una nueva base de datos, que tenga variables con el cargo, año de inicio (ya lo hicimos), año de término (ya lo hicimos), distrito (ya lo hicimos) y partido. Con esto listo, habremos conseguido nuestro objetivo inicial. Asegúrate de que las variables tengan los tipos correctos de vectores –utiliza <code>as.numeric()</code> cuando corresponda–. Tu código:</p>
</div>
</div>
<div id="ejercicio-f" class="section level2">
<h2>(Ejercicio f)</h2>
<p>Carguemos esta nueva base, que tiene la caja de antecedentes para cada legislador (noten cómo cambia la unidad de análisis de la base).</p>
<div class="sourceCode" id="cb392"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb392-1"><a href="texto-cadenas.html#cb392-1"></a>df_legisladores &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;datos/df_legisladores.csv&quot;</span>)</span></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   nombre_comp = col_character(),
##   id = col_double(),
##   caja_antecedentes = col_character()
## )</code></pre>
<div class="sourceCode" id="cb394"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb394-1"><a href="texto-cadenas.html#cb394-1"></a><span class="kw">head</span>(df_legisladores<span class="op">$</span>caja_antecedentes)</span></code></pre></div>
<pre><code>## [1] &quot;\n Nombre: Marcos Aurelio Aburto Ochoa\n Nacimiento: \n25 de Mayo de 1916\n\nValdivia\n Profesión: Abogado&quot;                
## [2] &quot;\n Nombre: Enrique Accorsi Opazo\n Nacimiento: \n17 de Agosto de 1948\n\nSantiago\n Profesión: Médico&quot;                     
## [3] &quot;\n Nombre: Mario Alberto Acuña Cisternas\n Nacimiento: \n26 de Septiembre de 1951\n\n\n Profesión: Ingeniero Agrónomo&quot;     
## [4] &quot;\n Nombre: René Aedo Ormeño\n Nacimiento: \n4 de Febrero de 1960\n\n\n Profesión: Médico Cirujano&quot;                         
## [5] &quot;\n Nombre: Sergio Aguiló Melo\n Nacimiento: \n9 de Febrero de 1953\n\nSantiago\n Profesión: Ingeniero Comercial&quot;           
## [6] &quot;\n Nombre: Raúl Florcita Alarcón Rojas\n Nacimiento: \n15 de Octubre de 1945\n\n\n Profesión: Profesor normalista y Músico&quot;</code></pre>
<ul>
<li><p>Genera variables para fecha de nacimiento y profesión.</p></li>
<li><p>Calcula la edad actual de cada legislador(a). Utiliza una fórmula sencilla, 2019 - año de nacimiento.</p></li>
<li><p>Obtén la distribución de edad para los/as diputados/as del período actual. Tip: para esto debes juntar las dos bases; puedes utilizar <code>left_join()</code>.</p></li>
<li><p>(Difícil) Divide la distribución anterior por coalición.</p></li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="texto-analisis.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="texto-libros.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "serif",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
},
"search": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>

[["index.html", "Programación para las Ciencias Sociales Inicio Links importantes Cronograma y materiales del curso", " Programación para las Ciencias Sociales Andrés Cruz 2020-12-03 Inicio Este es el sitio web del curso Programación para las Ciencias Sociales (ICP0506), dictado en el Instituto de Ciencia Política UC durante el segundo semestre de 2020. El objetivo del sitio es servir como material de consulta. Todos los proyectos que ejecutemos en RStudio Cloud estarán también compilados aquí, para facilitar su revisión. Links importantes Programa del curso Clases grabadas (acceso con cuenta UC) RStudio Cloud (acceso con cuenta UC) Cronograma y materiales del curso I. Introducción J 2020-08-13 Presentación del programa Ciencia de datos y programación Introducción a R, RStudio y R Markdown Material mínimo Material complementario RStudio. 2018a. Introducción al Lenguaje R: Guía Rápida. RStudio. 2018b. RStudio IDE: Guía Rápida. RStudio. 2014. RMarkdown: Hoja de Referencia. II. Manejo de bases de datos J 2020-08-20, J 2020-08-27 Introducción al tidyverse Carga de bases de datos Manejo de bases de datos Limpieza de bases Material mínimo Material complementario Cruz, A. 2019. Manejo de Datos. RStudio. 2017. Importar Datos: Guía Rápida RStudio. 2018. Transformación de Datos con dplyr: Hoja de referencia. III. Visualización de datos J 2020-09-03, J 2020-09-10 Principios de visualización de datos Introducción a la gramática de gráficos Generación de gráficos en ggplot2 Material mínimo Material complementario Healy, K. 2018. Data Visualization: A Practical Introduction. Cap. 1. Araya, S. 2019. Visualización de Datos. RStudio. 2016. Visualización de Datos usando ggplot2: Guía Rápida. IV. Búsqueda efectiva de ayuda J 2020-09-10 Archivos de ayuda en R. Recursos de apoyo: Google, StackOverflow, GitHub. Construcción de ejemplos mínimos reproducibles (reprex). Material mínimo Material complementario Healy, K. 2018. Data Visualization: A Practical Introduction. Anexo 1.1 Wickham, H. y Grolemund, G. 2017. R for Data Science. Sección 1.6. Mostipak, J. 2018. So Youve Been Asked to Make a Reprex. Entrega Tarea 1: W 2020-09-16 V. Manejo avanzado de bases de datos J 2020-10-01, J 2020-10-08 Reformulación (pivot) de bases de datos. Recodificación de variables. Combinación (merge) de bases. Material mínimo Material complementario Urdinez, F. y Cruz, A. 2020. Manejo Avanzado de Datos Políticos. RStudio. 2017b. Importar Datos: Guía Rápida. Pág. 2. Bryan, J. 2018. Cheatsheet for dplyr join functions. VI. Análisis de texto J 2020-10-15, J 2020-10-22 Manipulación de cadenas de texto. Expresiones regulares. Introducción al análisis cuantitativo de textos (QTA). Material mínimo Material complementario Wickham, H., y Grolemund, G. 2017. R for Data Science. Cap. 14. Silge, J. y Robinson, D. 2018. Text Mining with R. Caps. 1-3. RStudio. 2017c. Trabajar con Cadenas con stringr: Guía Rápida Entrega Tarea 2: W 2020-10-28 VII. R avanzado J 2020-10-29 Tipos de objeto en R Funciones personalizadas. Iteraciones Material mínimo Material complementario Wickham, H., y Grolemund, G. 2017. R for Data Science. Caps. 19 y 21. RStudio. 2017a. Aplicar Funciones con purrr: Guía Rápida. VIII. Minería de datos J 2020-11-05 Web scraping de sitios web Extracción de datos a partir de APIs. Material mínimo Material complementario Barría, G. 2020. Minería de Datos Web. IX. Datos espaciales y mapas J 2020-11-12 Introducción a datos espaciales con sf. Mapas en ggplot2. Material mínimo Material complementario Escobar, A. y Ortiz, G. 2020. Mapas y Datos Espaciales. Entrega Tarea 3: W 2020-11-18 X. Replicación y generación de reportes J 2020-11-19 Replicación en ciencias sociales. R Markdown para reportes y presentaciones. Material mínimo Material complementario King, G. 1995. Replication, Replication. RStudio. 2014. RMarkdown: Hoja de Referencia. Presentaciones y retroalimentación para el trabajo final: J 2020-11-26 Clase de cierre J 2020-12-03 La comunidad de R Material adicional RStudio de escritorio Material mínimo Material complementario Frick, H., y Daish, A. 2017. R-Ladies Global Community. Entrega del trabajo escrito final: J 2020-12-10 "],["rbasico.html", "01 - R básico Introducción: comandos y código Paquetes Comandos básicos y tipos de objeto en R Sintaxis de R Markdown Siguiente script", " 01 - R básico Diapositivas de introducción Si quieres correr este script localmente, acá puedes descargar el proyecto comprimido en .zip. Paquetes que necesitas tener instalados antes de comenzar: tidyverse. Este es un script de R Markdown, una forma de registrar nuestro código de R. Sabemos esto por por la extensión .Rmd y todas las opciones que están fijadas más arriba (por ahora no nos concentraremos demasiado en ellas). Antes de comenzar, juguemos un poco con las opciones de RStudio. Vamos a Tools &gt; Global Options &gt; Appearance. Introducción: comandos y código En los scripts de R Markdown el texto plano (como este) nos permite añadir comentarios, explicaciones, etc. Cuando ocupemos código debemos insertarlo en chunks o bloques de código, como veremos a continuación. Haremos un bloque de código para ocupar R como una calculadora simple. Podemos correr el código línea por línea con Ctrl/Cmd + Enter, si nuestro teclado está en dicha parte del script. Para correr el chunk completo puedes presionar en el pequeño botón de Play en la parte superior derecha o presionar Ctrl/Cmd + Shift + Enter. 1 + 5 ## [1] 6 78878.12 * 8e05 / (12 - 7 + 87.2) # este es un comentario &quot;en línea&quot;, se antecede con un # ## [1] 684408850 Para crear un chunk, debes presionar Ctrl/Cmd + Alt + i. Prueba a crear un chunk y calcula alguna operación aritmética. Tu código: En R podemos crear objetos, que guardarán información para ser utilizada en operaciones siguientes: mi_objeto &lt;- 5 mi_objeto # poner su nombre lo imprime, sin más ## [1] 5 Por ejemplo, podemos hacer aritmética con este nuevo objeto: mi_objeto - 17 ## [1] -12 ¿Cuál es la diferencia entre este último comando y el siguiente? mi_objeto_b &lt;- mi_objeto - 17 Eliminemos este segundo objeto, utilizando la funcion rm() (remove): rm(mi_objeto_b) Si quisiéramos reiniciar la sesión (comenzando todo desde cero), podríamos presionar Session &gt; Restart R) y clickear en la escoba del panel Environment de RStudio (superior derecho). Paquetes Los paquetes añaden nuevas funciones a R. Hay que cargarlos en cada nueva sesión, con el comando library(). library(tidyverse) El tidyverse es un paquete que ocuparemos en todas nuestras clases, que añade una gran cantidad de funciones al lenguaje. Ojo! library() solo nos permite cargar paquetes que hayamos instalado. Aquí en RStudio Cloud yo instalé el tidyverse para todas/os, pero por defecto habría que instalarlo. Probemos a utilizar otro paquete, janitor: library(janitor) ## Error in library(janitor) : there is no package called &#39;janitor&#39; Debemos instalarlo. Basta con instalar los paquetes una vez, luego podremos cargarlos en cada sesión que queramos. La mayoría de los paquetes se instalan con el comando install.packages(\"paquete\"): install.packages(&quot;janitor&quot;) Por cierto, podemos saber que R está trabajando gracias a RStudio. Mientras el paquete se instala, fíjate que hay una pequeña línea (¿color?) en la parte izquierda del código. Terminada la instalación, carguemos el nuevo paquete: library(janitor) # ahora el paquete está instalado, por lo que carga sin problemas ## ## Attaching package: &#39;janitor&#39; ## The following objects are masked from &#39;package:stats&#39;: ## ## chisq.test, fisher.test (Ejercicio A) Prueba a instalar un paquete llamado fun. Luego, cárgalo y corre el siguiente comando: random_password(). ¿Qué hace? Recuerda registrar todo el proceso en el script! Tu código: Comandos básicos y tipos de objeto en R En esta sección veremos vectores, data frames (marcos de datos) y listas. Vectores Lo siguiente es un vector numérico: c(7, 9, 19, 2, 9) ## [1] 7 9 19 2 9 El siguiente comando creará un objeto (mi_vector). ¿Qué contendrá este nuevo objeto? mi_vector &lt;- c(2, -3, mi_objeto, 6:9) Veamos algunos comandos básicos a aplicar en números y vectores numéricos. mi_vector[2] # acceder al segundo elemento del vector ## [1] -3 sqrt(x = mi_objeto) # la raíz cuadrada es una función! ## [1] 2.236068 log(x = mi_objeto) # logaritmo natural ## [1] 1.609438 mean(x = mi_vector) # media del vector ## [1] 4.857143 media_mi_vector &lt;- mean(x = mi_vector) # si quisiéramos guardarla como objeto! median(x = mi_vector) # mediana del vector ## [1] 6 sd(x = mi_vector) # desviación estándar del vector ## [1] 4.140393 length(x = mi_vector) # número de elementos del vector ## [1] 7 sum(x = mi_vector) # suma del vector ## [1] 34 min(x = mi_vector) # ¿qué hace esta función? ## [1] -3 max(x = mi_vector) # ¿y esta? ## [1] 9 Todas las funciones que hemos visto simplemente tomaban un objeto, sin más. La mayoría de las funciones son más complejas: requieren más de un objeto o nos permiten integrar más opciones. Les damos instrucciones específicas a las funciones por medio de argumentos (hasta ahora, solo vimos funciones con el inicio de argumento x =). sort(x = mi_vector) # ordena el vector de menor a mayor ## [1] -3 2 5 6 7 8 9 sort(x = mi_vector, decreasing = TRUE) # ¿qué cambia con este argumento? ## [1] 9 8 7 6 5 2 -3 Nota que podemos añadir saltos de línea entre argumentos: sort(x = mi_vector, decreasing = TRUE) ## [1] 9 8 7 6 5 2 -3 Importante. Si ponemos los valores de los argumentos en orden, podemos evitar escribir los argumentos mismos: sort(mi_vector, TRUE) # igual resultado que nuestros comandos anteriores ## [1] 9 8 7 6 5 2 -3 Por cierto, podemos consultar el archivo de ayuda de una función fácilmente. Ahí encontraremos los distintos argumentos explicados: ?sort Los vectores también pueden ser de otros tipos: c(&quot;Manzana&quot;, &quot;Pera&quot;, &quot;Naranja&quot;, &quot;Damasco&quot;) # vector de caracteres. Nota las comillas! ## [1] &quot;Manzana&quot; &quot;Pera&quot; &quot;Naranja&quot; &quot;Damasco&quot; nchar(&quot;Manzana&quot;) # cuenta los caracteres de un elemento ## [1] 7 c(TRUE, FALSE, TRUE, TRUE) # vector lógico ## [1] TRUE FALSE TRUE TRUE c(T, F, T, T) ## [1] TRUE FALSE TRUE TRUE (Ejercicio B) De nuevo ocupa la función random_password() del paquete fun, pero esta vez con el argumento length = 10. Prueba con diferentes valores del argumento! Tu código: Data frames (marcos de datos) Los data frames son objetos centrales en R, sin duda los que más utilizaremos. Vamos a cargar uno simple: df_trump_scores &lt;- read_csv(&quot;datos/trump_scores_202003_cong116.csv&quot;) # esta función es del tidyverse! ## Parsed with column specification: ## cols( ## last_name = col_character(), ## state = col_character(), ## party = col_character(), ## trump_score = col_double(), ## trump_margin = col_double() ## ) El Trump Score es el porcentaje de votaciones en las que un senador/a ha estado alineado/a con Donald Trump. El Trump Margin es el margen que Trump obtuvo en el estado del senador/a en cuestión. Fuente: FiveThirtyEight (2020). Descargado el 11 de marzo de 2020. df_trump_scores # imprime un vistazo rápido ## # A tibble: 100 x 5 ## last_name state party trump_score trump_margin ## &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Alexander TN R 80 26.0 ## 2 Blunt MO R 84.8 18.6 ## 3 Brown OH D 14.7 8.13 ## 4 Burr NC R 90.3 3.66 ## 5 Baldwin WI D 14.7 0.764 ## 6 Boozman AR R 88.2 26.9 ## 7 Blackburn TN R 93.9 26.0 ## 8 Barrasso WY R 91.2 46.3 ## 9 Bennet CO D 15.4 -4.91 ## 10 Blumenthal CT D 11.8 -13.6 ## # ... with 90 more rows head(df_trump_scores) # imprime solo las seis primeras filas ## # A tibble: 6 x 5 ## last_name state party trump_score trump_margin ## &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Alexander TN R 80 26.0 ## 2 Blunt MO R 84.8 18.6 ## 3 Brown OH D 14.7 8.13 ## 4 Burr NC R 90.3 3.66 ## 5 Baldwin WI D 14.7 0.764 ## 6 Boozman AR R 88.2 26.9 También podemos inspeccionar un data frame clickeando su nombre en el panel superior derecho, pestaña Environment. Las columnas de un data frame son vectores! df_trump_scores$last_name ## [1] &quot;Alexander&quot; &quot;Blunt&quot; &quot;Brown&quot; &quot;Burr&quot; &quot;Baldwin&quot; &quot;Boozman&quot; &quot;Blackburn&quot; &quot;Barrasso&quot; &quot;Bennet&quot; &quot;Blumenthal&quot; &quot;Booker&quot; &quot;Braun&quot; &quot;Cantwell&quot; &quot;Cardin&quot; &quot;Carper&quot; &quot;Crapo&quot; ## [17] &quot;Collins&quot; &quot;Capito&quot; &quot;Cornyn&quot; &quot;Casey&quot; &quot;Cassidy&quot; &quot;Coons&quot; &quot;Cotton&quot; &quot;Cramer&quot; &quot;Cruz&quot; &quot;Cortez Masto&quot; &quot;Durbin&quot; &quot;Daines&quot; &quot;Duckworth&quot; &quot;Enzi&quot; &quot;Ernst&quot; &quot;Feinstein&quot; ## [33] &quot;Fischer&quot; &quot;Graham&quot; &quot;Grassley&quot; &quot;Gillibrand&quot; &quot;Gardner&quot; &quot;Hirono&quot; &quot;Heinrich&quot; &quot;Hoeven&quot; &quot;Harris&quot; &quot;Hassan&quot; &quot;Hyde-Smith&quot; &quot;Hawley&quot; &quot;Inhofe&quot; &quot;Johnson&quot; &quot;Jones&quot; &quot;Klobuchar&quot; ## [49] &quot;King&quot; &quot;Kaine&quot; &quot;Kennedy&quot; &quot;Leahy&quot; &quot;Lankford&quot; &quot;Lee&quot; &quot;Loeffler&quot; &quot;Markey&quot; &quot;McConnell&quot; &quot;Menendez&quot; &quot;Moran&quot; &quot;Murray&quot; &quot;Murkowski&quot; &quot;Murphy&quot; &quot;Merkley&quot; &quot;Manchin&quot; ## [65] &quot;McSally&quot; &quot;Portman&quot; &quot;Peters&quot; &quot;Paul&quot; &quot;Perdue&quot; &quot;Reed&quot; &quot;Roberts&quot; &quot;Risch&quot; &quot;Rubio&quot; &quot;Rounds&quot; &quot;Rosen&quot; &quot;Romney&quot; &quot;Sanders&quot; &quot;Schumer&quot; &quot;Shelby&quot; &quot;Stabenow&quot; ## [81] &quot;Shaheen&quot; &quot;Scott&quot; &quot;Sinema&quot; &quot;Schatz&quot; &quot;Sasse&quot; &quot;Sullivan&quot; &quot;Smith&quot; &quot;Scott&quot; &quot;Thune&quot; &quot;Toomey&quot; &quot;Tester&quot; &quot;Tillis&quot; &quot;Udall&quot; &quot;Van Hollen&quot; &quot;Wicker&quot; &quot;Wyden&quot; ## [97] &quot;Whitehouse&quot; &quot;Warner&quot; &quot;Warren&quot; &quot;Young&quot; df_trump_scores$trump_score ## [1] 80.000000 84.848485 14.705882 90.322581 14.705882 88.235294 93.939394 91.176471 15.384615 11.764706 4.166667 94.117647 15.151515 15.151515 11.764706 93.548387 41.176471 93.939394 91.176471 20.588235 84.848485 14.705882 ## [23] 82.352941 90.909091 93.750000 11.764706 18.181818 79.411765 16.129032 90.909091 91.176471 14.705882 88.235294 76.666667 91.176471 7.692308 83.870968 14.705882 20.588235 91.176471 4.545455 14.705882 91.176471 85.294118 ## [45] 90.909091 91.176471 21.212121 7.692308 17.647059 14.705882 88.235294 14.705882 88.235294 63.636364 100.000000 8.823529 91.176471 11.764706 57.575758 14.705882 56.250000 17.647059 11.764706 32.352941 91.176471 84.848485 ## [67] 14.705882 60.714286 92.857143 8.823529 91.176471 90.625000 81.250000 92.857143 12.500000 79.411765 5.263158 11.764706 91.176471 14.705882 14.705882 87.500000 24.242424 11.764706 87.500000 90.322581 17.647059 91.176471 ## [89] 91.176471 84.375000 11.764706 88.235294 17.647059 14.705882 85.294118 8.823529 9.375000 14.705882 9.090909 64.705882 Producto de esto, podemos operar en ellas usando las funciones que aprendimos antes. (Ejercicio C) Calcula la mediana de los Trumps Scores y la mediana de los Trump Margins. Tu código: Ejemplos de análisis con data frames En general, la forma de data frame nos es útil para correr análisis. Aquí un gráfico exploratorio (no miraremos demasiado la sintaxis): ggplot(data = df_trump_scores, mapping = aes(x = trump_margin, trump_score, color = party)) + geom_point() + scale_color_manual(values = c(&quot;blue&quot;, &quot;red&quot;)) Aquí una regresión lineal, que busca estimar el Trump Score de un senador/a de acuerdo a dos predictores: el margen de Trump en su estado y su partido político: mi_modelo &lt;- lm(trump_score ~ trump_margin + party, data = df_trump_scores) summary(mi_modelo) ## ## Call: ## lm(formula = trump_score ~ trump_margin + party, data = df_trump_scores) ## ## Residuals: ## Min 1Q Median 3Q Max ## -40.151 -1.952 1.599 4.487 17.239 ## ## Coefficients: ## Estimate Std. Error t value Pr(&gt;|t|) ## (Intercept) 15.71390 1.40190 11.209 &lt; 2e-16 *** ## trump_margin 0.17650 0.06248 2.825 0.00574 ** ## partyR 66.13619 2.50530 26.399 &lt; 2e-16 *** ## --- ## Signif. codes: 0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1 ## ## Residual standard error: 8.623 on 97 degrees of freedom ## Multiple R-squared: 0.9463, Adjusted R-squared: 0.9452 ## F-statistic: 854.5 on 2 and 97 DF, p-value: &lt; 2.2e-16 Listas Las listas son objetos que pueden contener otros objetos, sin importar su tipo! mi_lista &lt;- list(mi_objeto, mi_vector, df_trump_scores, mi_modelo) De la siguiente forma podemos acceder a los elementos de una lista, similar a lo que hicimos antes con vectores: mi_lista[3] ## [[1]] ## # A tibble: 100 x 5 ## last_name state party trump_score trump_margin ## &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Alexander TN R 80 26.0 ## 2 Blunt MO R 84.8 18.6 ## 3 Brown OH D 14.7 8.13 ## 4 Burr NC R 90.3 3.66 ## 5 Baldwin WI D 14.7 0.764 ## 6 Boozman AR R 88.2 26.9 ## 7 Blackburn TN R 93.9 26.0 ## 8 Barrasso WY R 91.2 46.3 ## 9 Bennet CO D 15.4 -4.91 ## 10 Blumenthal CT D 11.8 -13.6 ## # ... with 90 more rows mi_lista[[3]] ## # A tibble: 100 x 5 ## last_name state party trump_score trump_margin ## &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Alexander TN R 80 26.0 ## 2 Blunt MO R 84.8 18.6 ## 3 Brown OH D 14.7 8.13 ## 4 Burr NC R 90.3 3.66 ## 5 Baldwin WI D 14.7 0.764 ## 6 Boozman AR R 88.2 26.9 ## 7 Blackburn TN R 93.9 26.0 ## 8 Barrasso WY R 91.2 46.3 ## 9 Bennet CO D 15.4 -4.91 ## 10 Blumenthal CT D 11.8 -13.6 ## # ... with 90 more rows ¿Cuál es la diferencia entre estos dos últimos comandos? El primero devuelve una nueva lista con solo un elemento, el tercero de la lista original. El segundo, en tanto, devuelve el contenido del tercer elemento de la lista. Sintaxis de R Markdown En el texto de nuestros documentos podemos escribir en *cursiva* o **negrita**. También podemos insertar [links](https://www.google.com/). Usualmente cuando queremos hablar de paquetes o funciones dentro de nuestro texto los escribimos entre tildes invertidos: `tidyverse`, `mean()`. En el texto de nuestros documentos podemos escribir en cursiva o negrita. También podemos insertar links. Usualmente cuando queremos hablar de paquetes o funciones dentro de nuestro texto los escribimos entre tildes invertidos: tidyverse, mean(). Crear tablas también es relativamente simple. Con texto: Nombre | Descripción ------ | ----------- Juan | Un estudiante Marta | Una estudiante Nombre Descripción Juan Un estudiante Marta Una estudiante O a partir de un data frame, con código: ```{r} library(knitr) kable(head(df_trump_scores)) ``` last_name state party trump_score trump_margin Alexander TN R 80.00000 26.0057009 Blunt MO R 84.84848 18.6371170 Brown OH D 14.70588 8.1295744 Burr NC R 90.32258 3.6552285 Baldwin WI D 14.70588 0.7643432 Boozman AR R 88.23529 26.9209780 Importante. Por favor noten que la primera tabla ocupa sintaxis de R Markdown en vez de código de R, por lo que no está dentro de un chunk! También podemos incluir ecuaciones, escritas entre signos de peso con la sintaxis de \\(\\LaTeX\\). Un ejemplo: \\(\\hat{\\beta}=(X&#39;X)^{-1}X&#39;Y\\) ($\\hat{\\beta}=(X'X)^{-1}X'Y$). Título de prueba Subtítulo Se pueden generar el título y subtítulo de arriba con las siguientes líneas: # Título de prueba ## Subtítulo de prueba Una lista * Artículo de lista uno * Artículo de lista dos + Artículo derivado (nota los cuatro espacios antes del símbolo &quot;+&quot;). * Artículo de lista tres Artículo de lista uno Artículo de lista dos Artículo derivado (nota los cuatro espacios antes del símbolo +). Artículo de lista tres Otra lista (ahora ordenada) 1. Artículo de lista uno 1. Artículo de lista dos 1. Artículo de lista tres Artículo de lista uno Artículo de lista dos Artículo de lista tres Nota que los números de la lista aparecerán solos en el documento compilado. Una imagen Podemos insertar una imagen, referenciando su ubicación en nuestra carpeta del proyecto: ![](imgs/imagen_ejemplo.png) Compilar nuestro documento Podemos compilar nuestro código a un documento utilizando el botón Knit en RStudio, o presionando Ctrl/Cmd + Shift + K. (Ejercicios D y E) Crea un vector numérico, que vaya desde 4 hasta 109. Luego, calcula su media y mediana. Recuerda crear tu(s) chunk(s) con Ctrl/Cmd + Alt + i. Para terminar, inserta la imagen rstudio.png de la carpeta imgs en este documento, después de un subtítulo Mi imagen. Aprovecha de describirla brevemente, haciendo uso de la negrita para destacar palabras. Siguiente script Pasemos brevemente a ver el script 01b. Nota: este es un script .R, cuyo contenido es el siguiente: # Brevemente, este es un script &quot;tradicional&quot; de R, sin R Markdown. # La extensión es .R. # Nota que aquí los comentarios van con # inicial, pues se asume que todo el resto es código. # Podemos hacer exactamente lo mismo que en el formato de R Markdown, con (al menos) ## dos diferencias. Primero, el código se correrá en la consola, no inmediatamente después ## de cada comando. Segundo, no se puede compilar esto a un documento. 3 + 3 library(tidyverse) df_trump_scores &lt;- read_csv(&quot;datos/trump_scores_202003_cong116.csv&quot;) mean(df_trump_scores$trump_score) median(df_trump_scores$trump_score) # De todas formas, los scripts .R son útiles para cosas rápidas y mucha gente los ocupa. # En el curso ocuparemos mayoritariamente scripts .Rmd. "],["manejo-2a.html", "02A - Manejo de datos Repaso de la clase pasada: R Markdown Manejo de bases de datos La base de datos ideal: tidy Operaciones básicas en bases de datos (Wickham, 2014) Trabajo con R Manejo de datos: operaciones básicas", " 02A - Manejo de datos Si quieres correr este script localmente, acá puedes descargar el proyecto comprimido en .zip. Paquetes que necesitas tener instalados antes de comenzar con el proyecto (2A, 2B, 2C): tidyverse, janitor, writexl. Repaso de la clase pasada: R Markdown R Markdown interpreta texto plano y generara documentos a partir de este. Estos documentos pueden ser reportes, presentaciones, papers, pósters, CVs, etc. [ejs. de plantillas] La interpretación requiere precisión en la sintaxis. Por defecto, R Markdown interpreta todo como texto, a menos que tenga una sintaxis especial. Una forma especial de sintaxis, por ejemplo, es ![](carpeta/imagen.png) Revisemos la sintaxis en el torpedo de R Markdown. Manejo de bases de datos Manejo de datos = limpiar y ordenar datos para poder analizarlos. Se suele decir que el 80% del análisis de datos es solo manejo (Wickham, 2014). Fuente: Grolemund &amp; Wickham, 2017 Partes de una base de datos tabular Encabezado (header) Fila (row) Columna (column) Celda (cell) Una pequeña mnemotecnia: La base de datos ideal: tidy En el paradigma tidy (Wickham, 2014): Cada variable es una columna Cada observación es una fila Cada valor es una celda Existe una base de datos para cada unidad observacional (Ejercicio A) Por favor revisar este link. Contiene un panel para las emisiones anuales de CO2 de los países americanos (unidad de medida: toneladas per capita). Hay tres bases con la misma información, una por cada hoja. ¿Cuál es la tidy? Operaciones básicas en bases de datos (Wickham, 2014) Transformar columnas (añadir o modificar existentes) Puede ser en una sola columna o en múltiples columnas En el tidyverse, mutate() Seleccionar columnas (y excluir otras) En el tidyverse, select() Filtrar observaciones en base a una condición En el tidyverse, filter() Ordenar la base de datos, en base a una(s) variable(s) En el tidyverse, arrange() Agregar/colapsar la base de datos Colapsar múltiples valores en algún resumen (por ejemplo, media o suma) Puede ser para toda la base o por subgrupos En el tidyverse, summarize() (Ejercicio B) Favor ir a este link ¿Qué operaciones básicas pueden ser interesantes para comenzar a analizar estos datos? Contesta con dos ejemplos: Trabajo con R Comenzaremos cargando el tidyverse: library(tidyverse) Base de datos: aprobación de presidentes/as en Latinoamérica Tenemos una base de datos ligeramente editada a partir de Reyes-Housholder (2019). Incluye también un par de variables de los World Development Indicators, recopiladas por Quality of Government. La base de datos se encuentra en datos/base_aprob_reyes-housholder.csv. Contiene información de la aprobación de presidentes/as en 17 países de América Latina por trimestre (2000-2014), además de variables de control. ¿Cuál es la unidad de análisis de la base? ¿Cuántas observaciones tendrá, asumiendo un panel balanceado? Carga de base en formato csv df_aprob &lt;- read_csv(&quot;datos/base_aprob_reyes-housholder.csv&quot;) ## Parsed with column specification: ## cols( ## country = col_character(), ## year = col_double(), ## quarter = col_double(), ## president = col_character(), ## net_approval = col_double(), ## pres_sex = col_character(), ## pres_sex_d = col_double(), ## exec_corr = col_double(), ## gdp_growth = col_double(), ## unemp = col_double(), ## wdi_gdp = col_double(), ## wdi_pop = col_double() ## ) Resúmenes simples para data frames El resumen más simple de un objeto en R suele poder obtenerse con su nombre comando. Nota cómo debajo de cada nombre, algunas variables tienen &lt;dbl&gt; y otras &lt;chr&gt;. ¿Qué significa esto? df_aprob ## # A tibble: 1,020 x 12 ## country year quarter president net_approval pres_sex pres_sex_d exec_corr gdp_growth unemp wdi_gdp wdi_pop ## &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Argentina 2000 1 Fernando de la Rúa 40.1 male 0 14.0 -0.8 15 552151219031. 37057452 ## 2 Argentina 2000 2 Fernando de la Rúa 16.4 male 0 14.0 -0.8 15 552151219031. 37057452 ## 3 Argentina 2000 3 Fernando de la Rúa 24.0 male 0 14.0 -0.8 15 552151219031. 37057452 ## 4 Argentina 2000 4 Fernando de la Rúa -18.3 male 0 14.0 -0.8 15 552151219031. 37057452 ## 5 Argentina 2001 1 Fernando de la Rúa -6.97 male 0 14.0 -4.4 18.3 527807756979. 37471509 ## 6 Argentina 2001 2 Fernando de la Rúa -20.1 male 0 14.0 -4.4 18.3 527807756979. 37471509 ## 7 Argentina 2001 3 Fernando de la Rúa -19.4 male 0 14.0 -4.4 18.3 527807756979. 37471509 ## 8 Argentina 2001 4 Fernando de la Rúa -23.2 male 0 14.0 -4.4 18.3 527807756979. 37471509 ## 9 Argentina 2002 1 Eduardo Alberto Duhalde -2.01 male 0 25.0 -10.9 17.9 470305820970. 37889370 ## 10 Argentina 2002 2 Eduardo Alberto Duhalde -20.1 male 0 25.0 -10.9 17.9 470305820970. 37889370 ## # ... with 1,010 more rows Por cierto, podemos obtener un resumen similar clickeando nuestro objeto en el panel Environment (superior derecho) de RStudio. Esto es lo mismo que ocupar el comando View(): View(df_aprob) Otro resumen útil es la función glimpse() del tidyverse, que nos da otra perspectiva: glimpse(df_aprob) ## Rows: 1,020 ## Columns: 12 ## $ country &lt;chr&gt; &quot;Argentina&quot;, &quot;Argentina&quot;, &quot;Argentina&quot;, &quot;Argentina&quot;, &quot;Argentina&quot;, &quot;Argentina&quot;, &quot;Argentina&quot;, &quot;Argentina&quot;, &quot;Argentina&quot;, &quot;Argentina&quot;, &quot;Argentina&quot;, &quot;Argentina&quot;, &quot;Argentina&quot;, &quot;Argentina&quot;, &quot;Argentina&quot;, &quot;Argentina&quot;, &quot;Argentina&quot;, &quot;Ar... ## $ year &lt;dbl&gt; 2000, 2000, 2000, 2000, 2001, 2001, 2001, 2001, 2002, 2002, 2002, 2002, 2003, 2003, 2003, 2003, 2004, 2004, 2004, 2004, 2005, 2005, 2005, 2005, 2006, 2006, 2006, 2006, 2007, 2007, 2007, 2007, 2008, 2008, 2008, 2008, 2009, 20... ## $ quarter &lt;dbl&gt; 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3,... ## $ president &lt;chr&gt; &quot;Fernando de la Rúa&quot;, &quot;Fernando de la Rúa&quot;, &quot;Fernando de la Rúa&quot;, &quot;Fernando de la Rúa&quot;, &quot;Fernando de la Rúa&quot;, &quot;Fernando de la Rúa&quot;, &quot;Fernando de la Rúa&quot;, &quot;Fernando de la Rúa&quot;, &quot;Eduardo Alberto Duhalde&quot;, &quot;Eduardo Alberto Duha... ## $ net_approval &lt;dbl&gt; 40.126, 16.390, 23.968, -18.254, -6.973, -20.082, -19.384, -23.182, -2.006, -20.075, -24.965, -16.831, -2.775, 26.511, 53.679, 52.975, 57.142, 52.756, 39.078, 44.899, 45.691, 45.429, 40.584, 43.390, 48.887, 46.757, 44.563, 4... ## $ pres_sex &lt;chr&gt; &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, ... ## $ pres_sex_d &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,... ## $ exec_corr &lt;dbl&gt; 14.01525, 14.01525, 14.01525, 14.01525, 14.01525, 14.01525, 14.01525, 14.01525, 25.00388, 25.00388, 25.00388, 25.00388, 50.14544, 50.14544, 50.14544, 50.14544, 50.14544, 50.14544, 50.14544, 50.14544, 50.14544, 50.14544, 50.1... ## $ gdp_growth &lt;dbl&gt; -0.800000, -0.800000, -0.800000, -0.800000, -4.400000, -4.400000, -4.400000, -4.400000, -10.900000, -10.900000, -10.900000, -10.900000, 8.800000, 8.800000, 8.800000, 8.800000, 9.000000, 9.000000, 9.000000, 9.000000, 8.900000... ## $ unemp &lt;dbl&gt; 15.0000, 15.0000, 15.0000, 15.0000, 18.3000, 18.3000, 18.3000, 18.3000, 17.9000, 17.9000, 17.9000, 17.9000, 19.9500, 17.4400, 16.1318, 14.4528, 14.2935, 14.6621, 13.1475, 11.9976, 12.9295, 11.9526, 11.1434, 10.0284, 11.3064,... ## $ wdi_gdp &lt;dbl&gt; 552151219031, 552151219031, 552151219031, 552151219031, 527807756979, 527807756979, 527807756979, 527807756979, 470305820970, 470305820970, 470305820970, 470305820970, 511866938234, 511866938234, 511866938234, 511866938234, ... ## $ wdi_pop &lt;dbl&gt; 37057452, 37057452, 37057452, 37057452, 37471509, 37471509, 37471509, 37471509, 37889370, 37889370, 37889370, 37889370, 38309379, 38309379, 38309379, 38309379, 38728696, 38728696, 38728696, 38728696, 39145488, 39145488, 3914... ¿Qué significan las variables de esta base de datos? Completa la siguiente tabla: Variable Descripción country País. year Año. quarter Trimestre. president Presidente/a. net_approval Aprobación neta del presidente/a (% aprobación - % rechazo). pres_sex pres_sex_d exec_corr Corrupción en el Ejecutivo, según V-Dem. De 0 a 100 (mayor es más corrupción). gdp_growth unemp wdi_gdp Producto interno bruto del país, ajustado por paridad de cambio (PPP) y constante en dólares del 2011. wdi_pop Manejo de datos: operaciones básicas En todas las operaciones básicas que veremos hoy el primer argumento en la función será el data frame a editar. Seleccionar columnas con select() Seleccionemos solo la columna de países: select(df_aprob, country) ## # A tibble: 1,020 x 1 ## country ## &lt;chr&gt; ## 1 Argentina ## 2 Argentina ## 3 Argentina ## 4 Argentina ## 5 Argentina ## 6 Argentina ## 7 Argentina ## 8 Argentina ## 9 Argentina ## 10 Argentina ## # ... with 1,010 more rows Recuerda que esto no creó ningún objeto nuevo, es solo un comando que estamos ejecutando en la consola. Si quisiéramos crear un objeto nuevo, tendríamos que asignarlo: df_aprob_reducida &lt;- select(df_aprob, country) df_aprob_reducida ## # A tibble: 1,020 x 1 ## country ## &lt;chr&gt; ## 1 Argentina ## 2 Argentina ## 3 Argentina ## 4 Argentina ## 5 Argentina ## 6 Argentina ## 7 Argentina ## 8 Argentina ## 9 Argentina ## 10 Argentina ## # ... with 1,010 more rows Podemos seleccionar múltiples columnas a la vez, separadas por comas: select(df_aprob, country, year, unemp) ## # A tibble: 1,020 x 3 ## country year unemp ## &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Argentina 2000 15 ## 2 Argentina 2000 15 ## 3 Argentina 2000 15 ## 4 Argentina 2000 15 ## 5 Argentina 2001 18.3 ## 6 Argentina 2001 18.3 ## 7 Argentina 2001 18.3 ## 8 Argentina 2001 18.3 ## 9 Argentina 2002 17.9 ## 10 Argentina 2002 17.9 ## # ... with 1,010 more rows Supongamos que queremos las primeras cinco variables de la base de datos. Las siguientes tres formas nos permitirán obtenerlas: select(df_aprob, country, year, quarter, president, net_approval) ## # A tibble: 1,020 x 5 ## country year quarter president net_approval ## &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; ## 1 Argentina 2000 1 Fernando de la Rúa 40.1 ## 2 Argentina 2000 2 Fernando de la Rúa 16.4 ## 3 Argentina 2000 3 Fernando de la Rúa 24.0 ## 4 Argentina 2000 4 Fernando de la Rúa -18.3 ## 5 Argentina 2001 1 Fernando de la Rúa -6.97 ## 6 Argentina 2001 2 Fernando de la Rúa -20.1 ## 7 Argentina 2001 3 Fernando de la Rúa -19.4 ## 8 Argentina 2001 4 Fernando de la Rúa -23.2 ## 9 Argentina 2002 1 Eduardo Alberto Duhalde -2.01 ## 10 Argentina 2002 2 Eduardo Alberto Duhalde -20.1 ## # ... with 1,010 more rows select(df_aprob, country:net_approval) # esta es la forma recomendada para la mayoría de los casos ## # A tibble: 1,020 x 5 ## country year quarter president net_approval ## &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; ## 1 Argentina 2000 1 Fernando de la Rúa 40.1 ## 2 Argentina 2000 2 Fernando de la Rúa 16.4 ## 3 Argentina 2000 3 Fernando de la Rúa 24.0 ## 4 Argentina 2000 4 Fernando de la Rúa -18.3 ## 5 Argentina 2001 1 Fernando de la Rúa -6.97 ## 6 Argentina 2001 2 Fernando de la Rúa -20.1 ## 7 Argentina 2001 3 Fernando de la Rúa -19.4 ## 8 Argentina 2001 4 Fernando de la Rúa -23.2 ## 9 Argentina 2002 1 Eduardo Alberto Duhalde -2.01 ## 10 Argentina 2002 2 Eduardo Alberto Duhalde -20.1 ## # ... with 1,010 more rows select(df_aprob, 1:5) ## # A tibble: 1,020 x 5 ## country year quarter president net_approval ## &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; ## 1 Argentina 2000 1 Fernando de la Rúa 40.1 ## 2 Argentina 2000 2 Fernando de la Rúa 16.4 ## 3 Argentina 2000 3 Fernando de la Rúa 24.0 ## 4 Argentina 2000 4 Fernando de la Rúa -18.3 ## 5 Argentina 2001 1 Fernando de la Rúa -6.97 ## 6 Argentina 2001 2 Fernando de la Rúa -20.1 ## 7 Argentina 2001 3 Fernando de la Rúa -19.4 ## 8 Argentina 2001 4 Fernando de la Rúa -23.2 ## 9 Argentina 2002 1 Eduardo Alberto Duhalde -2.01 ## 10 Argentina 2002 2 Eduardo Alberto Duhalde -20.1 ## # ... with 1,010 more rows El comando select() también nos sirve para reordenar las columnas. Supongamos que queremos que la variable president sea la primera. Podemos hacer algo como esto: select(df_aprob, president, country:year, net_approval:unemp) ## # A tibble: 1,020 x 9 ## president country year net_approval pres_sex pres_sex_d exec_corr gdp_growth unemp ## &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Fernando de la Rúa Argentina 2000 40.1 male 0 14.0 -0.8 15 ## 2 Fernando de la Rúa Argentina 2000 16.4 male 0 14.0 -0.8 15 ## 3 Fernando de la Rúa Argentina 2000 24.0 male 0 14.0 -0.8 15 ## 4 Fernando de la Rúa Argentina 2000 -18.3 male 0 14.0 -0.8 15 ## 5 Fernando de la Rúa Argentina 2001 -6.97 male 0 14.0 -4.4 18.3 ## 6 Fernando de la Rúa Argentina 2001 -20.1 male 0 14.0 -4.4 18.3 ## 7 Fernando de la Rúa Argentina 2001 -19.4 male 0 14.0 -4.4 18.3 ## 8 Fernando de la Rúa Argentina 2001 -23.2 male 0 14.0 -4.4 18.3 ## 9 Eduardo Alberto Duhalde Argentina 2002 -2.01 male 0 25.0 -10.9 17.9 ## 10 Eduardo Alberto Duhalde Argentina 2002 -20.1 male 0 25.0 -10.9 17.9 ## # ... with 1,010 more rows Esta forma es un poco tediosa. Hay una función de ayuda que nos será útil en este caso, se llama everything() select(df_aprob, president, everything()) # selecciona &quot;president&quot; y todo lo demás ## # A tibble: 1,020 x 12 ## president country year quarter net_approval pres_sex pres_sex_d exec_corr gdp_growth unemp wdi_gdp wdi_pop ## &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Fernando de la Rúa Argentina 2000 1 40.1 male 0 14.0 -0.8 15 552151219031. 37057452 ## 2 Fernando de la Rúa Argentina 2000 2 16.4 male 0 14.0 -0.8 15 552151219031. 37057452 ## 3 Fernando de la Rúa Argentina 2000 3 24.0 male 0 14.0 -0.8 15 552151219031. 37057452 ## 4 Fernando de la Rúa Argentina 2000 4 -18.3 male 0 14.0 -0.8 15 552151219031. 37057452 ## 5 Fernando de la Rúa Argentina 2001 1 -6.97 male 0 14.0 -4.4 18.3 527807756979. 37471509 ## 6 Fernando de la Rúa Argentina 2001 2 -20.1 male 0 14.0 -4.4 18.3 527807756979. 37471509 ## 7 Fernando de la Rúa Argentina 2001 3 -19.4 male 0 14.0 -4.4 18.3 527807756979. 37471509 ## 8 Fernando de la Rúa Argentina 2001 4 -23.2 male 0 14.0 -4.4 18.3 527807756979. 37471509 ## 9 Eduardo Alberto Duhalde Argentina 2002 1 -2.01 male 0 25.0 -10.9 17.9 470305820970. 37889370 ## 10 Eduardo Alberto Duhalde Argentina 2002 2 -20.1 male 0 25.0 -10.9 17.9 470305820970. 37889370 ## # ... with 1,010 more rows Renombrar columnas con rename() Podemos cambiar el nombre de una columna con el comando rename(). Por ejemplo: rename(df_aprob, trimeste = quarter) # noten que no estoy modificando la base, solo imprimiéndola! ## # A tibble: 1,020 x 12 ## country year trimeste president net_approval pres_sex pres_sex_d exec_corr gdp_growth unemp wdi_gdp wdi_pop ## &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Argentina 2000 1 Fernando de la Rúa 40.1 male 0 14.0 -0.8 15 552151219031. 37057452 ## 2 Argentina 2000 2 Fernando de la Rúa 16.4 male 0 14.0 -0.8 15 552151219031. 37057452 ## 3 Argentina 2000 3 Fernando de la Rúa 24.0 male 0 14.0 -0.8 15 552151219031. 37057452 ## 4 Argentina 2000 4 Fernando de la Rúa -18.3 male 0 14.0 -0.8 15 552151219031. 37057452 ## 5 Argentina 2001 1 Fernando de la Rúa -6.97 male 0 14.0 -4.4 18.3 527807756979. 37471509 ## 6 Argentina 2001 2 Fernando de la Rúa -20.1 male 0 14.0 -4.4 18.3 527807756979. 37471509 ## 7 Argentina 2001 3 Fernando de la Rúa -19.4 male 0 14.0 -4.4 18.3 527807756979. 37471509 ## 8 Argentina 2001 4 Fernando de la Rúa -23.2 male 0 14.0 -4.4 18.3 527807756979. 37471509 ## 9 Argentina 2002 1 Eduardo Alberto Duhalde -2.01 male 0 25.0 -10.9 17.9 470305820970. 37889370 ## 10 Argentina 2002 2 Eduardo Alberto Duhalde -20.1 male 0 25.0 -10.9 17.9 470305820970. 37889370 ## # ... with 1,010 more rows Filtrar observaciones con filter() A menudo queremos quedarnos solo con algunas observaciones de nuestra base de datos, filtrando de acuerdo a características específicas. Podemos hacer esto gracias a la función filter() y algo llamado operadores lógicos. Para comenzar, quedémonos solo con las observaciones de Chile: filter(df_aprob, country == &quot;Chile&quot;) ## # A tibble: 60 x 12 ## country year quarter president net_approval pres_sex pres_sex_d exec_corr gdp_growth unemp wdi_gdp wdi_pop ## &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Chile 2000 1 Eduardo Frei Ruiz-Tagle 6.22 male 0 3.63 5.3 9.2 218492826314. 15262754 ## 2 Chile 2000 2 Ricardo Lagos Escobar 19.8 male 0 3.63 5.3 9.2 218492826314. 15262754 ## 3 Chile 2000 3 Ricardo Lagos Escobar 19.5 male 0 3.63 5.3 9.2 218492826314. 15262754 ## 4 Chile 2000 4 Ricardo Lagos Escobar 14.8 male 0 3.63 5.3 9.2 218492826314. 15262754 ## 5 Chile 2001 1 Ricardo Lagos Escobar 7.99 male 0 3.63 3.3 9.1 225709747742. 15444969 ## 6 Chile 2001 2 Ricardo Lagos Escobar 1.81 male 0 3.63 3.3 9.1 225709747742. 15444969 ## 7 Chile 2001 3 Ricardo Lagos Escobar -1.40 male 0 3.63 3.3 9.1 225709747742. 15444969 ## 8 Chile 2001 4 Ricardo Lagos Escobar 6.90 male 0 3.63 3.3 9.1 225709747742. 15444969 ## 9 Chile 2002 1 Ricardo Lagos Escobar 6.60 male 0 3.63 3.1 8.9 232722483093. 15623635 ## 10 Chile 2002 2 Ricardo Lagos Escobar 3.65 male 0 3.63 3.1 8.9 232722483093. 15623635 ## # ... with 50 more rows Le estamos diciendo a filter(), por medio del segundo argumento, que solo se quede con observaciones en las que la variable country es igual a Chile. Este es igual a es un operador lógico, que se escribe como == en R. Aquí hay una lista de operadores lógicos comunes: operador descripción == es igual a != es distinto a &gt; es mayor a &lt; es menor a &gt;= es mayor o igual a &lt;= es menor o igual a &amp; intersección | unión %in% está contenido en Por ejemplo, podemos obtener todas las observaciones (país-año-trimestre) en las que la aprobación presidencial neta es positiva: filter(df_aprob, net_approval &gt; 0) ## # A tibble: 709 x 12 ## country year quarter president net_approval pres_sex pres_sex_d exec_corr gdp_growth unemp wdi_gdp wdi_pop ## &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Argentina 2000 1 Fernando de la Rúa 40.1 male 0 14.0 -0.8 15 552151219031. 37057452 ## 2 Argentina 2000 2 Fernando de la Rúa 16.4 male 0 14.0 -0.8 15 552151219031. 37057452 ## 3 Argentina 2000 3 Fernando de la Rúa 24.0 male 0 14.0 -0.8 15 552151219031. 37057452 ## 4 Argentina 2003 2 Eduardo Alberto Duhalde 26.5 male 0 50.1 8.8 17.4 511866938234. 38309379 ## 5 Argentina 2003 3 Néstor Carlos Kirchner 53.7 male 0 50.1 8.8 16.1 511866938234. 38309379 ## 6 Argentina 2003 4 Néstor Carlos Kirchner 53.0 male 0 50.1 8.8 14.5 511866938234. 38309379 ## 7 Argentina 2004 1 Néstor Carlos Kirchner 57.1 male 0 50.1 9 14.3 558086338624. 38728696 ## 8 Argentina 2004 2 Néstor Carlos Kirchner 52.8 male 0 50.1 9 14.7 558086338624. 38728696 ## 9 Argentina 2004 3 Néstor Carlos Kirchner 39.1 male 0 50.1 9 13.1 558086338624. 38728696 ## 10 Argentina 2004 4 Néstor Carlos Kirchner 44.9 male 0 50.1 9 12.0 558086338624. 38728696 ## # ... with 699 more rows Podemos también realizar filtros más complejos. Obtengamos solo las observaciones del Cono Sur: filter(df_aprob, country == &quot;Argentina&quot; | country == &quot;Chile&quot; | country == &quot;Uruguay&quot;) ## # A tibble: 180 x 12 ## country year quarter president net_approval pres_sex pres_sex_d exec_corr gdp_growth unemp wdi_gdp wdi_pop ## &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Argentina 2000 1 Fernando de la Rúa 40.1 male 0 14.0 -0.8 15 552151219031. 37057452 ## 2 Argentina 2000 2 Fernando de la Rúa 16.4 male 0 14.0 -0.8 15 552151219031. 37057452 ## 3 Argentina 2000 3 Fernando de la Rúa 24.0 male 0 14.0 -0.8 15 552151219031. 37057452 ## 4 Argentina 2000 4 Fernando de la Rúa -18.3 male 0 14.0 -0.8 15 552151219031. 37057452 ## 5 Argentina 2001 1 Fernando de la Rúa -6.97 male 0 14.0 -4.4 18.3 527807756979. 37471509 ## 6 Argentina 2001 2 Fernando de la Rúa -20.1 male 0 14.0 -4.4 18.3 527807756979. 37471509 ## 7 Argentina 2001 3 Fernando de la Rúa -19.4 male 0 14.0 -4.4 18.3 527807756979. 37471509 ## 8 Argentina 2001 4 Fernando de la Rúa -23.2 male 0 14.0 -4.4 18.3 527807756979. 37471509 ## 9 Argentina 2002 1 Eduardo Alberto Duhalde -2.01 male 0 25.0 -10.9 17.9 470305820970. 37889370 ## 10 Argentina 2002 2 Eduardo Alberto Duhalde -20.1 male 0 25.0 -10.9 17.9 470305820970. 37889370 ## # ... with 170 more rows filter(df_aprob, country %in% c(&quot;Argentina&quot;, &quot;Chile&quot;, &quot;Uruguay&quot;)) # lo mismo, con otro op. lógico ## # A tibble: 180 x 12 ## country year quarter president net_approval pres_sex pres_sex_d exec_corr gdp_growth unemp wdi_gdp wdi_pop ## &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Argentina 2000 1 Fernando de la Rúa 40.1 male 0 14.0 -0.8 15 552151219031. 37057452 ## 2 Argentina 2000 2 Fernando de la Rúa 16.4 male 0 14.0 -0.8 15 552151219031. 37057452 ## 3 Argentina 2000 3 Fernando de la Rúa 24.0 male 0 14.0 -0.8 15 552151219031. 37057452 ## 4 Argentina 2000 4 Fernando de la Rúa -18.3 male 0 14.0 -0.8 15 552151219031. 37057452 ## 5 Argentina 2001 1 Fernando de la Rúa -6.97 male 0 14.0 -4.4 18.3 527807756979. 37471509 ## 6 Argentina 2001 2 Fernando de la Rúa -20.1 male 0 14.0 -4.4 18.3 527807756979. 37471509 ## 7 Argentina 2001 3 Fernando de la Rúa -19.4 male 0 14.0 -4.4 18.3 527807756979. 37471509 ## 8 Argentina 2001 4 Fernando de la Rúa -23.2 male 0 14.0 -4.4 18.3 527807756979. 37471509 ## 9 Argentina 2002 1 Eduardo Alberto Duhalde -2.01 male 0 25.0 -10.9 17.9 470305820970. 37889370 ## 10 Argentina 2002 2 Eduardo Alberto Duhalde -20.1 male 0 25.0 -10.9 17.9 470305820970. 37889370 ## # ... with 170 more rows Podemos también incluir pequeñas operaciones en nuestros filtros. Obtengamos todas las observaciones en las que la corrupción ejecutiva es mayor a la del promedio de toda la base: filter(df_aprob, exec_corr &gt; mean(exec_corr)) ## # A tibble: 456 x 12 ## country year quarter president net_approval pres_sex pres_sex_d exec_corr gdp_growth unemp wdi_gdp wdi_pop ## &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Argentina 2003 1 Eduardo Alberto Duhalde -2.78 male 0 50.1 8.8 20.0 511866938234. 38309379 ## 2 Argentina 2003 2 Eduardo Alberto Duhalde 26.5 male 0 50.1 8.8 17.4 511866938234. 38309379 ## 3 Argentina 2003 3 Néstor Carlos Kirchner 53.7 male 0 50.1 8.8 16.1 511866938234. 38309379 ## 4 Argentina 2003 4 Néstor Carlos Kirchner 53.0 male 0 50.1 8.8 14.5 511866938234. 38309379 ## 5 Argentina 2004 1 Néstor Carlos Kirchner 57.1 male 0 50.1 9 14.3 558086338624. 38728696 ## 6 Argentina 2004 2 Néstor Carlos Kirchner 52.8 male 0 50.1 9 14.7 558086338624. 38728696 ## 7 Argentina 2004 3 Néstor Carlos Kirchner 39.1 male 0 50.1 9 13.1 558086338624. 38728696 ## 8 Argentina 2004 4 Néstor Carlos Kirchner 44.9 male 0 50.1 9 12.0 558086338624. 38728696 ## 9 Argentina 2005 1 Néstor Carlos Kirchner 45.7 male 0 50.1 8.9 12.9 607486243380. 39145488 ## 10 Argentina 2005 2 Néstor Carlos Kirchner 45.4 male 0 50.1 8.9 12.0 607486243380. 39145488 ## # ... with 446 more rows (Ejercicio C) Selecciona solo las dos columnas que registran el sexo del presidente/a en la base de datos. Recuerda que los chunks se insertan con Ctrl/Cmd + Alt + i. Tu código: Filtra la base de datos para que solo tenga las observaciones del año 2000. Tu código: Filtra la base de datos para que solo incluya observaciones de crisis económica: cuando el crecimiento del PIB sea negativo y/o el desempleo sea mayor al 20%. Tu código: Ordenar el data frame con arrange() Podemos cambiar el orden de las observaciones con el comando arrange(). Por ejemplo, ordenémoslas desde el país-año-trimestre menos corrupto al más corrupto: arrange(df_aprob, exec_corr) ## # A tibble: 1,020 x 12 ## country year quarter president net_approval pres_sex pres_sex_d exec_corr gdp_growth unemp wdi_gdp wdi_pop ## &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Uruguay 2000 1 Julio Sanguietti 41.2 male 0 2.13 -1.93 13.3 42760248091. 3321245 ## 2 Uruguay 2000 2 Jorge Battle 45.4 male 0 2.13 -1.93 13.3 42760248091. 3321245 ## 3 Uruguay 2000 3 Jorge Battle 31.4 male 0 2.13 -1.93 13.3 42760248091. 3321245 ## 4 Uruguay 2000 4 Jorge Battle 18.1 male 0 2.13 -1.93 13.3 42760248091. 3321245 ## 5 Uruguay 2001 1 Jorge Battle 18.5 male 0 2.13 -3.84 14.9 41116488580. 3327103 ## 6 Uruguay 2001 2 Jorge Battle 17.8 male 0 2.13 -3.84 14.9 41116488580. 3327103 ## 7 Uruguay 2001 3 Jorge Battle 15.9 male 0 2.13 -3.84 14.9 41116488580. 3327103 ## 8 Uruguay 2001 4 Jorge Battle 14.5 male 0 2.13 -3.84 14.9 41116488580. 3327103 ## 9 Uruguay 2002 1 Jorge Battle 6.36 male 0 2.13 -7.73 16.9 37937358718. 3327773 ## 10 Uruguay 2002 2 Jorge Battle -6.37 male 0 2.13 -7.73 16.9 37937358718. 3327773 ## # ... with 1,010 more rows Si quisiéramos ordenarlo inversamente, tendríamos que añadir un - (signo menos) antes de la variable: arrange(df_aprob, -exec_corr) ## # A tibble: 1,020 x 12 ## country year quarter president net_approval pres_sex pres_sex_d exec_corr gdp_growth unemp wdi_gdp wdi_pop ## &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Venezuela 2013 1 Hugo Chávez -12.6 male 0 94.4 1.34 7.54 535572061141. 30317848 ## 2 Venezuela 2013 2 Nicolás Maduro -13.7 male 0 94.4 1.34 7.54 535572061141. 30317848 ## 3 Venezuela 2013 3 Nicolás Maduro -16.8 male 0 94.4 1.34 7.54 535572061141. 30317848 ## 4 Venezuela 2013 4 Nicolás Maduro -16.6 male 0 94.4 1.34 7.54 535572061141. 30317848 ## 5 Venezuela 2014 1 Nicolás Maduro -18.1 male 0 94.4 -3.89 6.95 514714815230. 30738378 ## 6 Venezuela 2014 2 Nicolás Maduro -19.4 male 0 94.4 -3.89 6.95 514714815230. 30738378 ## 7 Venezuela 2014 3 Nicolás Maduro -22.1 male 0 94.4 -3.89 6.95 514714815230. 30738378 ## 8 Venezuela 2014 4 Nicolás Maduro -24.9 male 0 94.4 -3.89 6.95 514714815230. 30738378 ## 9 Venezuela 2007 1 Hugo Chávez -10.2 male 0 93.5 8.75 7.47 478405261854. 27691965 ## 10 Venezuela 2007 2 Hugo Chávez -11.0 male 0 93.5 8.75 7.47 478405261854. 27691965 ## # ... with 1,010 more rows Podemos ordenar por más de una variable. Esto es, ordenar a partir de una primera variable y luego ordenar los empates a partir de otra segunda variable. Veamos el siguiente ejemplo: arrange(df_aprob, pres_sex, -net_approval) ## # A tibble: 1,020 x 12 ## country year quarter president net_approval pres_sex pres_sex_d exec_corr gdp_growth unemp wdi_gdp wdi_pop ## &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Brazil 2013 1 Dilma Vana Rousseff 62.5 female 1 27.3 3 5.55 3.12e12 202408632 ## 2 Brazil 2012 4 Dilma Vana Rousseff 60.9 female 1 33.4 1.9 4.93 3.03e12 200560983 ## 3 Brazil 2012 2 Dilma Vana Rousseff 60.5 female 1 33.4 1.9 5.9 3.03e12 200560983 ## 4 Brazil 2012 3 Dilma Vana Rousseff 58.7 female 1 33.4 1.9 5.37 3.03e12 200560983 ## 5 Brazil 2012 1 Dilma Vana Rousseff 57.2 female 1 33.4 1.9 5.8 3.03e12 200560983 ## 6 Brazil 2011 4 Dilma Vana Rousseff 54.3 female 1 33.4 4 5.23 2.97e12 198686688 ## 7 Brazil 2011 1 Dilma Vana Rousseff 47.7 female 1 33.4 4 6.33 2.97e12 198686688 ## 8 Brazil 2011 3 Dilma Vana Rousseff 45.6 female 1 33.4 4 6 2.97e12 198686688 ## 9 Brazil 2013 2 Dilma Vana Rousseff 44.4 female 1 27.3 3 5.86 3.12e12 202408632 ## 10 Argentina 2011 4 Cristina Fernández de Kirchner 44.3 female 1 52.4 6 6.75 8.18e11 41656879 ## # ... with 1,010 more rows Transformar variables con mutate() Transformaciones con una variable Supongamos que queremos crear una variable con el PIB en versión logarítmica: mutate(df_aprob, wdi_gdp_log = log(wdi_gdp)) ## # A tibble: 1,020 x 13 ## country year quarter president net_approval pres_sex pres_sex_d exec_corr gdp_growth unemp wdi_gdp wdi_pop wdi_gdp_log ## &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Argentina 2000 1 Fernando de la Rúa 40.1 male 0 14.0 -0.8 15 552151219031. 37057452 27.0 ## 2 Argentina 2000 2 Fernando de la Rúa 16.4 male 0 14.0 -0.8 15 552151219031. 37057452 27.0 ## 3 Argentina 2000 3 Fernando de la Rúa 24.0 male 0 14.0 -0.8 15 552151219031. 37057452 27.0 ## 4 Argentina 2000 4 Fernando de la Rúa -18.3 male 0 14.0 -0.8 15 552151219031. 37057452 27.0 ## 5 Argentina 2001 1 Fernando de la Rúa -6.97 male 0 14.0 -4.4 18.3 527807756979. 37471509 27.0 ## 6 Argentina 2001 2 Fernando de la Rúa -20.1 male 0 14.0 -4.4 18.3 527807756979. 37471509 27.0 ## 7 Argentina 2001 3 Fernando de la Rúa -19.4 male 0 14.0 -4.4 18.3 527807756979. 37471509 27.0 ## 8 Argentina 2001 4 Fernando de la Rúa -23.2 male 0 14.0 -4.4 18.3 527807756979. 37471509 27.0 ## 9 Argentina 2002 1 Eduardo Alberto Duhalde -2.01 male 0 25.0 -10.9 17.9 470305820970. 37889370 26.9 ## 10 Argentina 2002 2 Eduardo Alberto Duhalde -20.1 male 0 25.0 -10.9 17.9 470305820970. 37889370 26.9 ## # ... with 1,010 more rows Podemos realizar cualquier tipo de operación en las variables. Por ejemplo, transformemos la escala de wdi_pop a millones: mutate(df_aprob, wdi_pop_mill = wdi_pop / 1000000) ## # A tibble: 1,020 x 13 ## country year quarter president net_approval pres_sex pres_sex_d exec_corr gdp_growth unemp wdi_gdp wdi_pop wdi_pop_mill ## &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Argentina 2000 1 Fernando de la Rúa 40.1 male 0 14.0 -0.8 15 552151219031. 37057452 37.1 ## 2 Argentina 2000 2 Fernando de la Rúa 16.4 male 0 14.0 -0.8 15 552151219031. 37057452 37.1 ## 3 Argentina 2000 3 Fernando de la Rúa 24.0 male 0 14.0 -0.8 15 552151219031. 37057452 37.1 ## 4 Argentina 2000 4 Fernando de la Rúa -18.3 male 0 14.0 -0.8 15 552151219031. 37057452 37.1 ## 5 Argentina 2001 1 Fernando de la Rúa -6.97 male 0 14.0 -4.4 18.3 527807756979. 37471509 37.5 ## 6 Argentina 2001 2 Fernando de la Rúa -20.1 male 0 14.0 -4.4 18.3 527807756979. 37471509 37.5 ## 7 Argentina 2001 3 Fernando de la Rúa -19.4 male 0 14.0 -4.4 18.3 527807756979. 37471509 37.5 ## 8 Argentina 2001 4 Fernando de la Rúa -23.2 male 0 14.0 -4.4 18.3 527807756979. 37471509 37.5 ## 9 Argentina 2002 1 Eduardo Alberto Duhalde -2.01 male 0 25.0 -10.9 17.9 470305820970. 37889370 37.9 ## 10 Argentina 2002 2 Eduardo Alberto Duhalde -20.1 male 0 25.0 -10.9 17.9 470305820970. 37889370 37.9 ## # ... with 1,010 more rows Transformaciones con múltiples variables Crucialmente, podemos generar operaciones entre las variables. Por ejemplo, calculemos el GDP per capita: mutate(df_aprob, wdi_gdp_pc = wdi_gdp / wdi_pop) ## # A tibble: 1,020 x 13 ## country year quarter president net_approval pres_sex pres_sex_d exec_corr gdp_growth unemp wdi_gdp wdi_pop wdi_gdp_pc ## &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Argentina 2000 1 Fernando de la Rúa 40.1 male 0 14.0 -0.8 15 552151219031. 37057452 14900. ## 2 Argentina 2000 2 Fernando de la Rúa 16.4 male 0 14.0 -0.8 15 552151219031. 37057452 14900. ## 3 Argentina 2000 3 Fernando de la Rúa 24.0 male 0 14.0 -0.8 15 552151219031. 37057452 14900. ## 4 Argentina 2000 4 Fernando de la Rúa -18.3 male 0 14.0 -0.8 15 552151219031. 37057452 14900. ## 5 Argentina 2001 1 Fernando de la Rúa -6.97 male 0 14.0 -4.4 18.3 527807756979. 37471509 14086. ## 6 Argentina 2001 2 Fernando de la Rúa -20.1 male 0 14.0 -4.4 18.3 527807756979. 37471509 14086. ## 7 Argentina 2001 3 Fernando de la Rúa -19.4 male 0 14.0 -4.4 18.3 527807756979. 37471509 14086. ## 8 Argentina 2001 4 Fernando de la Rúa -23.2 male 0 14.0 -4.4 18.3 527807756979. 37471509 14086. ## 9 Argentina 2002 1 Eduardo Alberto Duhalde -2.01 male 0 25.0 -10.9 17.9 470305820970. 37889370 12413. ## 10 Argentina 2002 2 Eduardo Alberto Duhalde -20.1 male 0 25.0 -10.9 17.9 470305820970. 37889370 12413. ## # ... with 1,010 more rows Varias transformaciones a la vez: Algo como lo siguiente funcionará: mutate(df_aprob, wdi_pop_mill = wdi_pop / 1000000, wdi_gdp_pc = wdi_gdp / wdi_pop) ## # A tibble: 1,020 x 14 ## country year quarter president net_approval pres_sex pres_sex_d exec_corr gdp_growth unemp wdi_gdp wdi_pop wdi_pop_mill wdi_gdp_pc ## &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Argentina 2000 1 Fernando de la Rúa 40.1 male 0 14.0 -0.8 15 552151219031. 37057452 37.1 14900. ## 2 Argentina 2000 2 Fernando de la Rúa 16.4 male 0 14.0 -0.8 15 552151219031. 37057452 37.1 14900. ## 3 Argentina 2000 3 Fernando de la Rúa 24.0 male 0 14.0 -0.8 15 552151219031. 37057452 37.1 14900. ## 4 Argentina 2000 4 Fernando de la Rúa -18.3 male 0 14.0 -0.8 15 552151219031. 37057452 37.1 14900. ## 5 Argentina 2001 1 Fernando de la Rúa -6.97 male 0 14.0 -4.4 18.3 527807756979. 37471509 37.5 14086. ## 6 Argentina 2001 2 Fernando de la Rúa -20.1 male 0 14.0 -4.4 18.3 527807756979. 37471509 37.5 14086. ## 7 Argentina 2001 3 Fernando de la Rúa -19.4 male 0 14.0 -4.4 18.3 527807756979. 37471509 37.5 14086. ## 8 Argentina 2001 4 Fernando de la Rúa -23.2 male 0 14.0 -4.4 18.3 527807756979. 37471509 37.5 14086. ## 9 Argentina 2002 1 Eduardo Alberto Duhalde -2.01 male 0 25.0 -10.9 17.9 470305820970. 37889370 37.9 12413. ## 10 Argentina 2002 2 Eduardo Alberto Duhalde -20.1 male 0 25.0 -10.9 17.9 470305820970. 37889370 37.9 12413. ## # ... with 1,010 more rows (Ejercicio D) Crea un nuevo data frame, que esté ordenado desde el país-año-trimeste con menor aprobación presidencial al con mayor aprobación presidencial (recuerda crear el nuevo objeto y ponerle un buen nombre!). Tu código: En tu nuevo objeto, obtén solo con las observaciones que tengan presidentas. Tu código: Crea una nueva variable, que registre el desempleo como proporción en vez de porcentaje. Tu código: Agregar/colapsar con summarize() / hacer operaciones por grupos con group_by() Podemos hacer resúmenes para la base de datos con summarize: summarize(df_aprob, prom_desemp = mean(unemp)) ## # A tibble: 1 x 1 ## prom_desemp ## &lt;dbl&gt; ## 1 7.04 Como antes, podemos hacer varios a la vez: summarize(df_aprob, prom_desemp = mean(unemp), prom_crec = mean(gdp_growth), prom_aprob = mean(net_approval)) ## # A tibble: 1 x 3 ## prom_desemp prom_crec prom_aprob ## &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 7.04 3.77 15.3 Resúmenes agrupados Lo realmente interesante es hacer resúmenes por grupos. Primero debemos tener una versión agrupada de la base de datos. Esta es igual que nuestra base original, pero R sabe que las siguientes operaciones que realicemos en ella deberán ser agrupadas (veamos la ligera diferencia cuando hacemos un resumen con glimpse()) df_aprob_por_pais &lt;- group_by(df_aprob, country) glimpse(df_aprob_por_pais) ## Rows: 1,020 ## Columns: 12 ## Groups: country [17] ## $ country &lt;chr&gt; &quot;Argentina&quot;, &quot;Argentina&quot;, &quot;Argentina&quot;, &quot;Argentina&quot;, &quot;Argentina&quot;, &quot;Argentina&quot;, &quot;Argentina&quot;, &quot;Argentina&quot;, &quot;Argentina&quot;, &quot;Argentina&quot;, &quot;Argentina&quot;, &quot;Argentina&quot;, &quot;Argentina&quot;, &quot;Argentina&quot;, &quot;Argentina&quot;, &quot;Argentina&quot;, &quot;Argentina&quot;, &quot;Ar... ## $ year &lt;dbl&gt; 2000, 2000, 2000, 2000, 2001, 2001, 2001, 2001, 2002, 2002, 2002, 2002, 2003, 2003, 2003, 2003, 2004, 2004, 2004, 2004, 2005, 2005, 2005, 2005, 2006, 2006, 2006, 2006, 2007, 2007, 2007, 2007, 2008, 2008, 2008, 2008, 2009, 20... ## $ quarter &lt;dbl&gt; 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3,... ## $ president &lt;chr&gt; &quot;Fernando de la Rúa&quot;, &quot;Fernando de la Rúa&quot;, &quot;Fernando de la Rúa&quot;, &quot;Fernando de la Rúa&quot;, &quot;Fernando de la Rúa&quot;, &quot;Fernando de la Rúa&quot;, &quot;Fernando de la Rúa&quot;, &quot;Fernando de la Rúa&quot;, &quot;Eduardo Alberto Duhalde&quot;, &quot;Eduardo Alberto Duha... ## $ net_approval &lt;dbl&gt; 40.126, 16.390, 23.968, -18.254, -6.973, -20.082, -19.384, -23.182, -2.006, -20.075, -24.965, -16.831, -2.775, 26.511, 53.679, 52.975, 57.142, 52.756, 39.078, 44.899, 45.691, 45.429, 40.584, 43.390, 48.887, 46.757, 44.563, 4... ## $ pres_sex &lt;chr&gt; &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, ... ## $ pres_sex_d &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,... ## $ exec_corr &lt;dbl&gt; 14.01525, 14.01525, 14.01525, 14.01525, 14.01525, 14.01525, 14.01525, 14.01525, 25.00388, 25.00388, 25.00388, 25.00388, 50.14544, 50.14544, 50.14544, 50.14544, 50.14544, 50.14544, 50.14544, 50.14544, 50.14544, 50.14544, 50.1... ## $ gdp_growth &lt;dbl&gt; -0.800000, -0.800000, -0.800000, -0.800000, -4.400000, -4.400000, -4.400000, -4.400000, -10.900000, -10.900000, -10.900000, -10.900000, 8.800000, 8.800000, 8.800000, 8.800000, 9.000000, 9.000000, 9.000000, 9.000000, 8.900000... ## $ unemp &lt;dbl&gt; 15.0000, 15.0000, 15.0000, 15.0000, 18.3000, 18.3000, 18.3000, 18.3000, 17.9000, 17.9000, 17.9000, 17.9000, 19.9500, 17.4400, 16.1318, 14.4528, 14.2935, 14.6621, 13.1475, 11.9976, 12.9295, 11.9526, 11.1434, 10.0284, 11.3064,... ## $ wdi_gdp &lt;dbl&gt; 552151219031, 552151219031, 552151219031, 552151219031, 527807756979, 527807756979, 527807756979, 527807756979, 470305820970, 470305820970, 470305820970, 470305820970, 511866938234, 511866938234, 511866938234, 511866938234, ... ## $ wdi_pop &lt;dbl&gt; 37057452, 37057452, 37057452, 37057452, 37471509, 37471509, 37471509, 37471509, 37889370, 37889370, 37889370, 37889370, 38309379, 38309379, 38309379, 38309379, 38728696, 38728696, 38728696, 38728696, 39145488, 39145488, 3914... Hagamos una operación de resumen en esta nueva base: summarize(df_aprob_por_pais, prom_desemp = mean(unemp), prom_crec = mean(gdp_growth), prom_aprob = mean(net_approval)) ## `summarise()` ungrouping output (override with `.groups` argument) ## # A tibble: 17 x 4 ## country prom_desemp prom_crec prom_aprob ## &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Argentina 11.0 2.72 16.7 ## 2 Bolivia 3.70 4.24 11.3 ## 3 Brazil 8.35 3.4 34.2 ## 4 Chile 8.18 4.33 5.71 ## 5 Colombia 12.5 4.35 27.1 ## 6 Costa Rica 6.73 4.15 14.5 ## 7 Ecuador 6.76 4.31 37.1 ## 8 El Salvador 5.75 1.87 39.1 ## 9 Guatemala 2.80 3.47 5.44 ## 10 Honduras 4.22 4.08 12.7 ## 11 Mexico 3.99 2.10 28.9 ## 12 Nicaragua 6.78 3.73 16.2 ## 13 Panama 8.45 6.31 14.2 ## 14 Paraguay 5.69 3.66 10.9 ## 15 Peru 4.32 5.30 -26.2 ## 16 Uruguay 10.3 3.08 26.9 ## 17 Venezuela 10.3 3.04 -14.8 Hacer cadenas de operaciones con las pipes (%&gt;%) La mayor parte del tiempo queremos hacer más de una operación en una base de datos. Por ejemplo, podríamos querer (1) crear una nueva variable con PIB per capita, y luego (2) filtrar las observaciones con valores iguales o mayores a la media de PIB per capita en toda la base: df_aprob_con_pib_pc &lt;- mutate(df_aprob, pib_pc = wdi_gdp / wdi_pop) filter(df_aprob_con_pib_pc, pib_pc &gt; mean(pib_pc)) ## # A tibble: 492 x 13 ## country year quarter president net_approval pres_sex pres_sex_d exec_corr gdp_growth unemp wdi_gdp wdi_pop pib_pc ## &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Argentina 2000 1 Fernando de la Rúa 40.1 male 0 14.0 -0.8 15 552151219031. 37057452 14900. ## 2 Argentina 2000 2 Fernando de la Rúa 16.4 male 0 14.0 -0.8 15 552151219031. 37057452 14900. ## 3 Argentina 2000 3 Fernando de la Rúa 24.0 male 0 14.0 -0.8 15 552151219031. 37057452 14900. ## 4 Argentina 2000 4 Fernando de la Rúa -18.3 male 0 14.0 -0.8 15 552151219031. 37057452 14900. ## 5 Argentina 2001 1 Fernando de la Rúa -6.97 male 0 14.0 -4.4 18.3 527807756979. 37471509 14086. ## 6 Argentina 2001 2 Fernando de la Rúa -20.1 male 0 14.0 -4.4 18.3 527807756979. 37471509 14086. ## 7 Argentina 2001 3 Fernando de la Rúa -19.4 male 0 14.0 -4.4 18.3 527807756979. 37471509 14086. ## 8 Argentina 2001 4 Fernando de la Rúa -23.2 male 0 14.0 -4.4 18.3 527807756979. 37471509 14086. ## 9 Argentina 2002 1 Eduardo Alberto Duhalde -2.01 male 0 25.0 -10.9 17.9 470305820970. 37889370 12413. ## 10 Argentina 2002 2 Eduardo Alberto Duhalde -20.1 male 0 25.0 -10.9 17.9 470305820970. 37889370 12413. ## # ... with 482 more rows Esta misma cadena de operaciones se puede escribir de la siguiente forma: df_aprob %&gt;% mutate(pib_pc = wdi_gdp / wdi_pop) %&gt;% filter(pib_pc &gt; mean(pib_pc)) ## # A tibble: 492 x 13 ## country year quarter president net_approval pres_sex pres_sex_d exec_corr gdp_growth unemp wdi_gdp wdi_pop pib_pc ## &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Argentina 2000 1 Fernando de la Rúa 40.1 male 0 14.0 -0.8 15 552151219031. 37057452 14900. ## 2 Argentina 2000 2 Fernando de la Rúa 16.4 male 0 14.0 -0.8 15 552151219031. 37057452 14900. ## 3 Argentina 2000 3 Fernando de la Rúa 24.0 male 0 14.0 -0.8 15 552151219031. 37057452 14900. ## 4 Argentina 2000 4 Fernando de la Rúa -18.3 male 0 14.0 -0.8 15 552151219031. 37057452 14900. ## 5 Argentina 2001 1 Fernando de la Rúa -6.97 male 0 14.0 -4.4 18.3 527807756979. 37471509 14086. ## 6 Argentina 2001 2 Fernando de la Rúa -20.1 male 0 14.0 -4.4 18.3 527807756979. 37471509 14086. ## 7 Argentina 2001 3 Fernando de la Rúa -19.4 male 0 14.0 -4.4 18.3 527807756979. 37471509 14086. ## 8 Argentina 2001 4 Fernando de la Rúa -23.2 male 0 14.0 -4.4 18.3 527807756979. 37471509 14086. ## 9 Argentina 2002 1 Eduardo Alberto Duhalde -2.01 male 0 25.0 -10.9 17.9 470305820970. 37889370 12413. ## 10 Argentina 2002 2 Eduardo Alberto Duhalde -20.1 male 0 25.0 -10.9 17.9 470305820970. 37889370 12413. ## # ... with 482 more rows ¡Este código es sorprendemente legible! Las pipes (%&gt;%) se leen como luego (o pero luego) y se insertan con Ctrl/Cmd + Shift + M en RStudio. Pueden ver todos los atajos de teclado en Help &gt; Keyboard Shortcuts Help. Uno de los usos más comunes de las pipes es el combo group_by() + summarize(). Repitamos nuestras operaciones de antes para hacer un resumen agrupado: df_aprob %&gt;% group_by(country) %&gt;% summarize(prom_desemp = mean(unemp), prom_crec = mean(gdp_growth), prom_aprob = mean(net_approval)) ## `summarise()` ungrouping output (override with `.groups` argument) ## # A tibble: 17 x 4 ## country prom_desemp prom_crec prom_aprob ## &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Argentina 11.0 2.72 16.7 ## 2 Bolivia 3.70 4.24 11.3 ## 3 Brazil 8.35 3.4 34.2 ## 4 Chile 8.18 4.33 5.71 ## 5 Colombia 12.5 4.35 27.1 ## 6 Costa Rica 6.73 4.15 14.5 ## 7 Ecuador 6.76 4.31 37.1 ## 8 El Salvador 5.75 1.87 39.1 ## 9 Guatemala 2.80 3.47 5.44 ## 10 Honduras 4.22 4.08 12.7 ## 11 Mexico 3.99 2.10 28.9 ## 12 Nicaragua 6.78 3.73 16.2 ## 13 Panama 8.45 6.31 14.2 ## 14 Paraguay 5.69 3.66 10.9 ## 15 Peru 4.32 5.30 -26.2 ## 16 Uruguay 10.3 3.08 26.9 ## 17 Venezuela 10.3 3.04 -14.8 (Ejercicios E-G) E. Calcula, ayudándote de las pipes, la mediana por país de corrupción ejecutiva y PIB. Recuerda que puedes insertar chunks con Ctrl/Cmd + Alt + i y pipes con Ctrl/Cmd + Shift + M. Tu código: F. De nuevo usando pipes, ordena los países en la base desde el que tuvo el mayor PIB per cápita promedio en el período 2010-2014 hasta el que tuvo el menor. Tu código: G. ¿Qué país-año-trimestre, entre los gobernados por mujeres, tuvo la corrupción ejecutiva más alta? ¿Y la aprobación neta más alta? "],["manejo-2b.html", "02B - Manejo de datos (ejercicio) Contexto A. B. C. D. E. F.", " 02B - Manejo de datos (ejercicio) Si quieres correr este script localmente, debe haber descargado el proyecto, como se explica en el script 2A. Recomiendo reiniciar R antes de comenzar: Session &gt; Restart R y click en la escoba del panel de Environment (superior derecho). Contexto La base de datos de este ejercicio guarda relación con la política monetaria ante la Gran Depresión. En especial, trata sobre la crisis en Mississippi, donde la administración central de los bancos estaba en manos de Bancos Centrales con distintas políticas: el Banco Central de Atlanta, encargado del Distrito 6, estuvo a favor de prestarle dinero a los bancos en problemas. En cambio, el Banco Central de St. Louis se encargó del Distrito 8 de acuerdo a la Doctrica de las Letras Reales, que sostiene que los Bancos Centrales deben restringir el crédito durante una recesión económica (Angrist &amp; Pischke, 2014, cap. 5) ¿Qué política monetaria fue más efectiva para combatir la crisis desde la perspectiva financiera? Podemos analizar cuántos bancos quebraron a cada lado de la política para entender mejor esto. A. Comienza cargando el tidyverse y la base de datos, que se encuentra en la carpeta datos (recuerda ponerle un buen nombre). El nombre del archivo es banks2.csv. Tu código: B. Analiza la base. ¿Qué información tiene? ¿Cuál es la unidad de análisis? Considera que bib significa banks in business. Tu respuesta: C. Obtén solo las observaciones del primero de julio de cada año. Esto nos permitirá analizar patrones anuales. Crea una nueva base de datos con esta nueva unidad de análisis. Tu código: D. Revisa el archivo de ayuda de la función diff(). Para cada zona de Banco Central, ¿cuál es la diferencia de bancos en operación al comparar 1929 con 1934? Tu código: E. Repite el ejercicio anterior, pero calculando la diferencia en términos proporcionales. Tu código: F. ¿En qué mes del año (enero, febrero, etc.) fueron más pronunciados los cierres de bancos, en promedio? "],["manejo-2c.html", "02C - Manejo de datos (extras) Cargar y guardar bases de datos Versiones iterativas de summarize() y mutate()", " 02C - Manejo de datos (extras) Si quieres correr este script localmente, debe haber descargado el proyecto, como se explica en el script 2A. Como al principio de todo script, recomiendo reiniciar R. Esto lo conseguimos con Session &gt; Restart R y clickeando en la escoba del panel de Environment (superior derecho). Ahora carguemos los paquetes que usaremos: library(tidyverse) library(readxl) # leer datos de Excel # install.packages(c(&quot;janitor&quot;, &quot;writexl&quot;)) library(janitor) # limpiar bases library(writexl) # guardar bases de Excel Cargar y guardar bases de datos Cargar desde múltiples formatos Hay múltiples formatos en los podemos encontrar bases de datos tabulares. Por suerte, la consistencia del tidyverse nos permite usar funciones muy similares para trabajar con ellas en R (Araya y Cruz, 2019). Extensión Descripción Función .csv Archivo delimitado por comas read_csv() .dta Stata (suele incluir etiquetas) haven::read_stata() .Rdata R (puede tener múltiples objetos) load() .rds R (un solo objeto) read_rds() .sav SPSS (suele incluir etiquetas) haven::read_spss() .xlsx Excel 2007- writexl::read_excel() Limpiar nombres de columnas En esta ocasión cargaremos unos datos en formato Excel. Es muy común encontrar datos que tienen este tipo de extensión, y en general no vienen demasiado limpios (el trabajo con planillas no necesariamente se hace pensando en el procesamiento con código). Inspeccionémoslos visualmente. Son datos de casos policiales en 2016 para 340 comunas de Chile, recolectados desde la Subsecretaría de Prevención del Delito (2017). Habiendo cargando el paquete readxl antes, la sintaxis para cargar los datos será familiar: df_casos_policiales &lt;- read_excel(&quot;datos/casos_delitos_por_comuna.xlsx&quot;) glimpse(df_casos_policiales) ## Rows: 340 ## Columns: 17 ## $ Comuna &lt;chr&gt; &quot;Algarrobo&quot;, &quot;Alhué&quot;, &quot;Alto-Biobío&quot;, &quot;Alto-del-Carmen&quot;, &quot;Alto-Hospicio&quot;, &quot;Ancud&quot;, &quot;Andacollo&quot;, &quot;Angol&quot;, &quot;Antártica&quot;, &quot;Antofagasta&quot;, &quot;Antuco&quot;, &quot;Arauco&quot;, &quot;Arica&quot;, &quot;Aysén&quot;, &quot;Buin&quot;, &quot;Bulnes&quot;, &quot;Cab... ## $ `Comuna ID` &lt;dbl&gt; 5602, 13502, 8314, 3302, 1107, 10202, 4103, 9201, 12202, 2101, 8302, 8202, 15101, 11201, 13402, 8402, 5402, 12201, 8303, 2201, 10102, 3102, 13403, 5302, 15102, 1402, 4202, 8203, 9102, 5603, 51... ## $ `Región ID` &lt;dbl&gt; 5, 13, 8, 3, 1, 10, 4, 9, 12, 2, 8, 8, 15, 11, 13, 16, 5, 12, 8, 2, 10, 3, 13, 5, 15, 1, 4, 8, 9, 5, 5, 10, 5, 7, 13, 13, 10, 3, 6, 8, 11, 16, 16, 6, 9, 10, 11, 16, 10, 11, 6, 16, 16, 6, 7, 1,... ## $ `Población (INE 2017)` &lt;dbl&gt; 10700, 5916, 5957, 6519, 124872, 44249, 11555, 55845, 202, 389812, 3906, 38431, 243701, 28283, 86079, 22042, 20135, 2906, 29563, 181897, 35282, 18101, 25528, 15021, 783, 1277, 9911, 34277, 264... ## $ `Robos con violencia o intimidación` &lt;dbl&gt; 23, 5, 1, 1, 396, 23, 11, 93, 0, 1150, 3, 40, 618, 18, 213, 17, 13, 0, 29, 652, 11, 67, 79, 16, 0, 0, 6, 53, 15, 121, 40, 57, 19, 34, 601, 587, 0, 29, 3, 204, 0, 30, 353, 30, 3, 8, 0, 1, 1, 0,... ## $ `Robos por sorpresa` &lt;dbl&gt; 11, 2, 1, 0, 222, 13, 6, 119, 0, 646, 0, 32, 451, 1, 154, 8, 10, 0, 4, 458, 4, 21, 15, 5, 0, 0, 0, 87, 10, 35, 19, 62, 13, 19, 227, 181, 0, 1, 2, 101, 0, 20, 426, 18, 1, 4, 0, 0, 0, 0, 1, 2, 4... ## $ `Robos de vehículo motorizado` &lt;dbl&gt; 9, 2, 0, 0, 461, 2, 0, 41, 0, 987, 1, 5, 578, 0, 97, 10, 2, 0, 10, 686, 4, 23, 31, 6, 0, 0, 0, 18, 13, 34, 25, 9, 2, 13, 240, 144, 0, 5, 1, 61, 0, 14, 198, 5, 4, 0, 0, 0, 0, 0, 9, 4, 10, 4, 1,... ## $ `Robos de objeto de o desde vehículo` &lt;dbl&gt; 56, 1, 3, 1, 338, 30, 8, 58, 0, 1010, 3, 24, 546, 11, 195, 22, 20, 0, 30, 840, 9, 24, 68, 18, 1, 0, 15, 32, 11, 105, 73, 79, 5, 10, 530, 93, 1, 14, 2, 116, 0, 45, 441, 34, 2, 3, 0, 2, 1, 1, 12... ## $ `Robos en lugar habitado` &lt;dbl&gt; 384, 18, 1, 6, 565, 111, 37, 261, 0, 1024, 3, 161, 524, 41, 399, 60, 51, 0, 102, 965, 44, 124, 119, 48, 5, 1, 28, 144, 35, 392, 132, 157, 30, 93, 206, 278, 1, 97, 7, 263, 4, 112, 737, 89, 19, ... ## $ `Robos en lugar no habitado` &lt;dbl&gt; 80, 16, 7, 7, 193, 130, 20, 181, 0, 778, 6, 159, 382, 44, 271, 45, 42, 4, 106, 577, 62, 125, 79, 34, 3, 1, 16, 105, 34, 88, 108, 136, 40, 74, 295, 191, 6, 83, 19, 109, 17, 92, 505, 90, 12, 31,... ## $ `Otros robos con fuerza` &lt;dbl&gt; 5, 1, 0, 0, 23, 6, 3, 35, 0, 43, 1, 4, 105, 5, 17, 4, 1, 0, 28, 40, 3, 14, 6, 0, 0, 1, 17, 5, 0, 10, 4, 6, 0, 11, 39, 7, 0, 6, 0, 3, 0, 7, 80, 4, 2, 1, 0, 0, 0, 0, 3, 6, 6, 1, 2, 2, 23, 25, 0,... ## $ Hurtos &lt;dbl&gt; 184, 15, 18, 11, 791, 253, 39, 549, 0, 5445, 10, 312, 1735, 230, 513, 106, 48, 3, 170, 2156, 121, 206, 93, 57, 7, 1, 12, 252, 121, 236, 234, 702, 58, 243, 1201, 335, 17, 134, 49, 391, 38, 102,... ## $ `Lesiones menos graves, graves o gravísimas` &lt;dbl&gt; 22, 3, 16, 2, 130, 31, 9, 55, 0, 295, 1, 30, 343, 37, 63, 17, 19, 1, 29, 231, 37, 32, 28, 8, 1, 1, 3, 44, 20, 40, 34, 46, 24, 32, 78, 159, 3, 22, 6, 65, 5, 18, 156, 24, 8, 11, 7, 5, 2, 9, 17, ... ## $ `Lesiones leves` &lt;dbl&gt; 52, 26, 24, 8, 523, 132, 77, 244, 0, 1528, 8, 106, 720, 143, 257, 66, 55, 5, 81, 1047, 114, 136, 66, 29, 6, 7, 18, 145, 64, 161, 127, 176, 43, 96, 358, 307, 10, 70, 37, 239, 28, 58, 453, 78, 4... ## $ Homicidios &lt;dbl&gt; 0, 1, 0, 0, 1, 0, 0, 2, 0, 13, 0, 1, 6, 0, 3, 0, 0, 0, 0, 8, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, 0, 0, 0, 2, 0, 8, 0, 1, 0, 0, 0, 1, 2, 1, 0, 0, 0, 0, 0, 1, 0, 1, 2, 0, 0, 0, 10, 2, 0, 0, 11, 5, 0, ... ## $ Violaciones &lt;dbl&gt; 1, 0, 3, 0, 20, 10, 1, 7, 0, 50, 0, 8, 47, 2, 12, 0, 1, 0, 3, 28, 13, 3, 3, 0, 2, 0, 1, 7, 4, 9, 7, 13, 1, 7, 6, 21, 1, 1, 0, 7, 0, 5, 32, 0, 0, 2, 0, 1, 0, 0, 4, 3, 0, 2, 3, 0, 26, 6, 3, 0, 6... ## $ VIF &lt;dbl&gt; 129, 29, 62, 26, 1226, 330, 67, 508, 0, 2384, 34, 264, 1973, 314, 547, 177, 143, 13, 180, 1146, 369, 153, 120, 67, 3, 4, 31, 224, 123, 230, 219, 378, 119, 263, 521, 831, 22, 126, 77, 628, 19, ... Los nombres de las columnas en la base tienen mayúsculas, espacios y tildes, lo que nos puede generar problemas en el análisis. La convención en el tidyverse es nombrar utilizando snake_case (nombre_de_mi_objeto), sin mayúsculas, espacios ni tildes. Esto nos ahorrará muchos problemas. Si ya tenemos una base de datos y queremos estandarizar sus variables, el paquete janitor provee la función clean_names() para esto: df_casos_policiales_l &lt;- df_casos_policiales %&gt;% clean_names() glimpse(df_casos_policiales_l) ## Rows: 340 ## Columns: 17 ## $ comuna &lt;chr&gt; &quot;Algarrobo&quot;, &quot;Alhué&quot;, &quot;Alto-Biobío&quot;, &quot;Alto-del-Carmen&quot;, &quot;Alto-Hospicio&quot;, &quot;Ancud&quot;, &quot;Andacollo&quot;, &quot;Angol&quot;, &quot;Antártica&quot;, &quot;Antofagasta&quot;, &quot;Antuco&quot;, &quot;Arauco&quot;, &quot;Arica&quot;, &quot;Aysén&quot;, &quot;Buin&quot;, &quot;Bulnes&quot;, &quot;Cabild... ## $ comuna_id &lt;dbl&gt; 5602, 13502, 8314, 3302, 1107, 10202, 4103, 9201, 12202, 2101, 8302, 8202, 15101, 11201, 13402, 8402, 5402, 12201, 8303, 2201, 10102, 3102, 13403, 5302, 15102, 1402, 4202, 8203, 9102, 5603, 5102,... ## $ region_id &lt;dbl&gt; 5, 13, 8, 3, 1, 10, 4, 9, 12, 2, 8, 8, 15, 11, 13, 16, 5, 12, 8, 2, 10, 3, 13, 5, 15, 1, 4, 8, 9, 5, 5, 10, 5, 7, 13, 13, 10, 3, 6, 8, 11, 16, 16, 6, 9, 10, 11, 16, 10, 11, 6, 16, 16, 6, 7, 1, 13... ## $ poblacion_ine_2017 &lt;dbl&gt; 10700, 5916, 5957, 6519, 124872, 44249, 11555, 55845, 202, 389812, 3906, 38431, 243701, 28283, 86079, 22042, 20135, 2906, 29563, 181897, 35282, 18101, 25528, 15021, 783, 1277, 9911, 34277, 26467,... ## $ robos_con_violencia_o_intimidacion &lt;dbl&gt; 23, 5, 1, 1, 396, 23, 11, 93, 0, 1150, 3, 40, 618, 18, 213, 17, 13, 0, 29, 652, 11, 67, 79, 16, 0, 0, 6, 53, 15, 121, 40, 57, 19, 34, 601, 587, 0, 29, 3, 204, 0, 30, 353, 30, 3, 8, 0, 1, 1, 0, 18... ## $ robos_por_sorpresa &lt;dbl&gt; 11, 2, 1, 0, 222, 13, 6, 119, 0, 646, 0, 32, 451, 1, 154, 8, 10, 0, 4, 458, 4, 21, 15, 5, 0, 0, 0, 87, 10, 35, 19, 62, 13, 19, 227, 181, 0, 1, 2, 101, 0, 20, 426, 18, 1, 4, 0, 0, 0, 0, 1, 2, 4, 0... ## $ robos_de_vehiculo_motorizado &lt;dbl&gt; 9, 2, 0, 0, 461, 2, 0, 41, 0, 987, 1, 5, 578, 0, 97, 10, 2, 0, 10, 686, 4, 23, 31, 6, 0, 0, 0, 18, 13, 34, 25, 9, 2, 13, 240, 144, 0, 5, 1, 61, 0, 14, 198, 5, 4, 0, 0, 0, 0, 0, 9, 4, 10, 4, 1, 4,... ## $ robos_de_objeto_de_o_desde_vehiculo &lt;dbl&gt; 56, 1, 3, 1, 338, 30, 8, 58, 0, 1010, 3, 24, 546, 11, 195, 22, 20, 0, 30, 840, 9, 24, 68, 18, 1, 0, 15, 32, 11, 105, 73, 79, 5, 10, 530, 93, 1, 14, 2, 116, 0, 45, 441, 34, 2, 3, 0, 2, 1, 1, 12, 1... ## $ robos_en_lugar_habitado &lt;dbl&gt; 384, 18, 1, 6, 565, 111, 37, 261, 0, 1024, 3, 161, 524, 41, 399, 60, 51, 0, 102, 965, 44, 124, 119, 48, 5, 1, 28, 144, 35, 392, 132, 157, 30, 93, 206, 278, 1, 97, 7, 263, 4, 112, 737, 89, 19, 25,... ## $ robos_en_lugar_no_habitado &lt;dbl&gt; 80, 16, 7, 7, 193, 130, 20, 181, 0, 778, 6, 159, 382, 44, 271, 45, 42, 4, 106, 577, 62, 125, 79, 34, 3, 1, 16, 105, 34, 88, 108, 136, 40, 74, 295, 191, 6, 83, 19, 109, 17, 92, 505, 90, 12, 31, 15... ## $ otros_robos_con_fuerza &lt;dbl&gt; 5, 1, 0, 0, 23, 6, 3, 35, 0, 43, 1, 4, 105, 5, 17, 4, 1, 0, 28, 40, 3, 14, 6, 0, 0, 1, 17, 5, 0, 10, 4, 6, 0, 11, 39, 7, 0, 6, 0, 3, 0, 7, 80, 4, 2, 1, 0, 0, 0, 0, 3, 6, 6, 1, 2, 2, 23, 25, 0, 0,... ## $ hurtos &lt;dbl&gt; 184, 15, 18, 11, 791, 253, 39, 549, 0, 5445, 10, 312, 1735, 230, 513, 106, 48, 3, 170, 2156, 121, 206, 93, 57, 7, 1, 12, 252, 121, 236, 234, 702, 58, 243, 1201, 335, 17, 134, 49, 391, 38, 102, 23... ## $ lesiones_menos_graves_graves_o_gravisimas &lt;dbl&gt; 22, 3, 16, 2, 130, 31, 9, 55, 0, 295, 1, 30, 343, 37, 63, 17, 19, 1, 29, 231, 37, 32, 28, 8, 1, 1, 3, 44, 20, 40, 34, 46, 24, 32, 78, 159, 3, 22, 6, 65, 5, 18, 156, 24, 8, 11, 7, 5, 2, 9, 17, 14,... ## $ lesiones_leves &lt;dbl&gt; 52, 26, 24, 8, 523, 132, 77, 244, 0, 1528, 8, 106, 720, 143, 257, 66, 55, 5, 81, 1047, 114, 136, 66, 29, 6, 7, 18, 145, 64, 161, 127, 176, 43, 96, 358, 307, 10, 70, 37, 239, 28, 58, 453, 78, 40, ... ## $ homicidios &lt;dbl&gt; 0, 1, 0, 0, 1, 0, 0, 2, 0, 13, 0, 1, 6, 0, 3, 0, 0, 0, 0, 8, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, 0, 0, 0, 2, 0, 8, 0, 1, 0, 0, 0, 1, 2, 1, 0, 0, 0, 0, 0, 1, 0, 1, 2, 0, 0, 0, 10, 2, 0, 0, 11, 5, 0, 2, ... ## $ violaciones &lt;dbl&gt; 1, 0, 3, 0, 20, 10, 1, 7, 0, 50, 0, 8, 47, 2, 12, 0, 1, 0, 3, 28, 13, 3, 3, 0, 2, 0, 1, 7, 4, 9, 7, 13, 1, 7, 6, 21, 1, 1, 0, 7, 0, 5, 32, 0, 0, 2, 0, 1, 0, 0, 4, 3, 0, 2, 3, 0, 26, 6, 3, 0, 61, ... ## $ vif &lt;dbl&gt; 129, 29, 62, 26, 1226, 330, 67, 508, 0, 2384, 34, 264, 1973, 314, 547, 177, 143, 13, 180, 1146, 369, 153, 120, 67, 3, 4, 31, 224, 123, 230, 219, 378, 119, 263, 521, 831, 22, 126, 77, 628, 19, 188... (Ejercicios A-B) A. ¿Cuál fue la comuna con más homicidios en Chile en el año 2016? Tu código: B. ¿Cuál fue la comuna con más casos de violencia intrafamiliar por cada 1000 habitantes? Tu código: Crear bases de datos a mano A veces queremos crear un data frame arbitrariamente a partir de vectores. Para esto, la funcióm tibble() es simple y útil: df_ejemplo &lt;- tibble( x = c(1:10), y = c(9, 10, 1:8) ) df_ejemplo ## # A tibble: 10 x 2 ## x y ## &lt;int&gt; &lt;dbl&gt; ## 1 1 9 ## 2 2 10 ## 3 3 1 ## 4 4 2 ## 5 5 3 ## 6 6 4 ## 7 7 5 ## 8 8 6 ## 9 9 7 ## 10 10 8 Guardar bases de datos Guardar una base de datos es necesario para compartirla con colegas o usarla en otros proyectos. La mayoría de las funciones que vimos, que comienzan con read_, tienen su versión write_ para este propósito. Por ejemplo, read_csv() -&gt; write_csv(). El único par de comandos en los que hay algo distinto es readxl::read_excel() -&gt; writexl::write_xlsx(). En general, los mejores formatos para guardar bases son .csv (muy universal) y .rds (nos aseguramos de que cualquier cosa extraña en nuestros datos pueda volver bien a R). Guardemos los datos en formatos .csv, .rds y .xlsx (Excel). Recuerda que ya cargamos antes el paquete writexl, que nos permite hacer esto último. write_csv(df_ejemplo, &quot;df_ejemplo.csv&quot;) write_csv(df_ejemplo, &quot;df_ejemplo.rds&quot;) write_xlsx(df_ejemplo, &quot;df_ejemplo.xlsx&quot;) Podríamos volver a cargarlo con read_excel(): df_ejemplo_comprob &lt;- read_excel(&quot;df_ejemplo.xlsx&quot;) df_ejemplo_comprob ## # A tibble: 10 x 2 ## x y ## &lt;dbl&gt; &lt;dbl&gt; ## 1 1 9 ## 2 2 10 ## 3 3 1 ## 4 4 2 ## 5 5 3 ## 6 6 4 ## 7 7 5 ## 8 8 6 ## 9 9 7 ## 10 10 8 (Ejercicio) Guarda una versión de la base de datos de delitos, en formato csv. Utiliza la versión con los nombres de columnas limpios y excluye la variable de región. Tu código: Versiones iterativas de summarize() y mutate() Es común necesitar hacer una misma operación en múltiples columnas de una base. Por ejemplo, podríamos querer los totales de delitos específicos por región, como muestra el siguiente chunk. df_casos_policiales_l %&gt;% group_by(region_id) %&gt;% summarize(lesiones_leves_total = sum(lesiones_leves), hurtos_total = sum(hurtos)) ## `summarise()` ungrouping output (override with `.groups` argument) ## # A tibble: 16 x 3 ## region_id lesiones_leves_total hurtos_total ## &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 1 1523 3935 ## 2 2 3014 8257 ## 3 3 1253 2953 ## 4 4 2830 6613 ## 5 5 6955 19537 ## 6 6 3347 8553 ## 7 7 2368 7371 ## 8 8 4549 13698 ## 9 9 3227 9808 ## 10 10 2824 9575 ## 11 11 486 1169 ## 12 12 525 1568 ## 13 13 22796 65621 ## 14 14 1269 3783 ## 15 15 733 1762 ## 16 16 1250 3644 Sin embargo, hacer este código para los 13 tipos de delito es una pérdida de tiempo: generaría código particularmente difícil de leer. Podemos aplicar la función summarize_at() para usar la función de suma en múltiples variables. Noten cómo en el código siguiente . reemplazará a la variable en la definición de la operación (gracias al operador ~). df_casos_policiales_l %&gt;% group_by(region_id) %&gt;% summarize_at(.vars = vars(robos_con_violencia_o_intimidacion:vif), .funs = ~sum(.)) ## # A tibble: 16 x 14 ## region_id robos_con_violencia_o_int~ robos_por_sorpresa robos_de_vehiculo_moto~ robos_de_objeto_de_o_des~ robos_en_lugar_hab~ robos_en_lugar_no_ha~ otros_robos_con_fu~ hurtos lesiones_menos_graves_grave~ lesiones_leves homicidios violaciones vif ## &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 1 1554 1499 1339 1773 1287 822 159 3935 346 1523 9 51 3321 ## 2 2 1930 1173 1754 1999 2348 1702 143 8257 599 3014 25 97 4192 ## 3 3 832 379 355 792 1299 1346 138 2953 345 1253 7 40 2266 ## 4 4 1667 1106 848 2355 4000 2450 272 6613 608 2830 13 116 4801 ## 5 5 5777 4537 2994 6062 9657 5580 402 19537 1652 6955 44 263 11639 ## 6 6 1629 1011 836 1842 3842 3246 330 8553 844 3347 15 116 6590 ## 7 7 1108 852 411 1050 2886 2277 311 7371 621 2368 19 95 5342 ## 8 8 4646 2664 2191 3057 4972 4283 360 13698 1342 4549 53 218 9362 ## 9 9 1547 1331 1518 1574 3902 2609 304 9808 873 3227 27 194 7781 ## 10 10 1025 728 399 1683 2698 2543 151 9575 761 2824 20 170 7253 ## 11 11 71 26 50 60 175 210 15 1169 204 486 4 15 1085 ## 12 12 112 29 274 162 279 262 25 1568 159 525 5 25 959 ## 13 13 41541 19168 15364 36183 19585 18223 2811 65621 5554 22796 215 976 41674 ## 14 14 424 339 244 711 1681 1074 137 3783 337 1269 14 82 3148 ## 15 15 618 451 579 549 532 389 105 1762 346 733 6 50 1989 ## 16 16 605 513 315 701 1685 1191 158 3644 383 1250 11 71 3315 Incluso podemos editar un poco los nombres de los resúmenes, asignándolos como elementos en una lista. Noten cómo van a cambiar dichos nombres, terminando ahora en \"_total\": df_casos_policiales_l %&gt;% group_by(region_id) %&gt;% summarize_at(.vars = vars(robos_con_violencia_o_intimidacion:vif), .funs = list(total = ~sum(.))) ## # A tibble: 16 x 14 ## region_id robos_con_violencia_~ robos_por_sorpres~ robos_de_vehiculo_m~ robos_de_objeto_de_o~ robos_en_lugar_hab~ robos_en_lugar_no~ otros_robos_con_f~ hurtos_total lesiones_menos_grave~ lesiones_leves_~ homicidios_total violaciones_tot~ vif_total ## &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 1 1554 1499 1339 1773 1287 822 159 3935 346 1523 9 51 3321 ## 2 2 1930 1173 1754 1999 2348 1702 143 8257 599 3014 25 97 4192 ## 3 3 832 379 355 792 1299 1346 138 2953 345 1253 7 40 2266 ## 4 4 1667 1106 848 2355 4000 2450 272 6613 608 2830 13 116 4801 ## 5 5 5777 4537 2994 6062 9657 5580 402 19537 1652 6955 44 263 11639 ## 6 6 1629 1011 836 1842 3842 3246 330 8553 844 3347 15 116 6590 ## 7 7 1108 852 411 1050 2886 2277 311 7371 621 2368 19 95 5342 ## 8 8 4646 2664 2191 3057 4972 4283 360 13698 1342 4549 53 218 9362 ## 9 9 1547 1331 1518 1574 3902 2609 304 9808 873 3227 27 194 7781 ## 10 10 1025 728 399 1683 2698 2543 151 9575 761 2824 20 170 7253 ## 11 11 71 26 50 60 175 210 15 1169 204 486 4 15 1085 ## 12 12 112 29 274 162 279 262 25 1568 159 525 5 25 959 ## 13 13 41541 19168 15364 36183 19585 18223 2811 65621 5554 22796 215 976 41674 ## 14 14 424 339 244 711 1681 1074 137 3783 337 1269 14 82 3148 ## 15 15 618 451 579 549 532 389 105 1762 346 733 6 50 1989 ## 16 16 605 513 315 701 1685 1191 158 3644 383 1250 11 71 3315 También podemos utilizar más de una función de resumen a la vez en nuestros datos: df_casos_policiales_l %&gt;% group_by(region_id) %&gt;% summarize_at(.vars = vars(robos_con_violencia_o_intimidacion:vif), .funs = list(total = ~sum(.), max = ~max(.))) ## # A tibble: 16 x 27 ## region_id robos_con_viole~ robos_por_sorpr~ robos_de_vehicu~ robos_de_objeto~ robos_en_lugar_~ robos_en_lugar_~ otros_robos_con~ hurtos_total lesiones_menos_~ lesiones_leves_~ homicidios_total violaciones_tot~ vif_total robos_con_viole~ ## &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 1 1554 1499 1339 1773 1287 822 159 3935 346 1523 9 51 3321 1132 ## 2 2 1930 1173 1754 1999 2348 1702 143 8257 599 3014 25 97 4192 1150 ## 3 3 832 379 355 792 1299 1346 138 2953 345 1253 7 40 2266 615 ## 4 4 1667 1106 848 2355 4000 2450 272 6613 608 2830 13 116 4801 723 ## 5 5 5777 4537 2994 6062 9657 5580 402 19537 1652 6955 44 263 11639 1924 ## 6 6 1629 1011 836 1842 3842 3246 330 8553 844 3347 15 116 6590 825 ## 7 7 1108 852 411 1050 2886 2277 311 7371 621 2368 19 95 5342 627 ## 8 8 4646 2664 2191 3057 4972 4283 360 13698 1342 4549 53 218 9362 1708 ## 9 9 1547 1331 1518 1574 3902 2609 304 9808 873 3227 27 194 7781 876 ## 10 10 1025 728 399 1683 2698 2543 151 9575 761 2824 20 170 7253 512 ## 11 11 71 26 50 60 175 210 15 1169 204 486 4 15 1085 52 ## 12 12 112 29 274 162 279 262 25 1568 159 525 5 25 959 99 ## 13 13 41541 19168 15364 36183 19585 18223 2811 65621 5554 22796 215 976 41674 4302 ## 14 14 424 339 244 711 1681 1074 137 3783 337 1269 14 82 3148 304 ## 15 15 618 451 579 549 532 389 105 1762 346 733 6 50 1989 618 ## 16 16 605 513 315 701 1685 1191 158 3644 383 1250 11 71 3315 353 ## # ... with 12 more variables: robos_por_sorpresa_max &lt;dbl&gt;, robos_de_vehiculo_motorizado_max &lt;dbl&gt;, robos_de_objeto_de_o_desde_vehiculo_max &lt;dbl&gt;, robos_en_lugar_habitado_max &lt;dbl&gt;, robos_en_lugar_no_habitado_max &lt;dbl&gt;, ## # otros_robos_con_fuerza_max &lt;dbl&gt;, hurtos_max &lt;dbl&gt;, lesiones_menos_graves_graves_o_gravisimas_max &lt;dbl&gt;, lesiones_leves_max &lt;dbl&gt;, homicidios_max &lt;dbl&gt;, violaciones_max &lt;dbl&gt;, vif_max &lt;dbl&gt; Aparte de hacer resúmenes, crear múltiples variables según una misma operación es bastante común. Supongamos que queremos las cifras relativas (tasas) para cada tipo de delito, como en el siguiente ejemplo: df_casos_policiales_l %&gt;% mutate(lesiones_leves_c1000 = lesiones_leves * 1000 / poblacion_ine_2017) %&gt;% select(comuna, poblacion_ine_2017, lesiones_leves, lesiones_leves_c1000) # solo para legibilidad ## # A tibble: 340 x 4 ## comuna poblacion_ine_2017 lesiones_leves lesiones_leves_c1000 ## &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Algarrobo 10700 52 4.86 ## 2 Alhué 5916 26 4.39 ## 3 Alto-Biobío 5957 24 4.03 ## 4 Alto-del-Carmen 6519 8 1.23 ## 5 Alto-Hospicio 124872 523 4.19 ## 6 Ancud 44249 132 2.98 ## 7 Andacollo 11555 77 6.66 ## 8 Angol 55845 244 4.37 ## 9 Antártica 202 0 0 ## 10 Antofagasta 389812 1528 3.92 ## # ... with 330 more rows Podemos utilizar mutate_at() para repetir esta operación en todas nuestras variables de interés. df_casos_policiales_l %&gt;% mutate_at(.vars = vars(robos_con_violencia_o_intimidacion:vif), .funs = list(c1000 = ~ . * 1000 / poblacion_ine_2017)) ## # A tibble: 340 x 30 ## comuna comuna_id region_id poblacion_ine_2~ robos_con_viole~ robos_por_sorpr~ robos_de_vehicu~ robos_de_objeto~ robos_en_lugar_~ robos_en_lugar_~ otros_robos_con~ hurtos lesiones_menos_~ lesiones_leves homicidios violaciones vif robos_con_viole~ ## &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Algar~ 5602 5 10700 23 11 9 56 384 80 5 184 22 52 0 1 129 2.15 ## 2 Alhué 13502 13 5916 5 2 2 1 18 16 1 15 3 26 1 0 29 0.845 ## 3 Alto-~ 8314 8 5957 1 1 0 3 1 7 0 18 16 24 0 3 62 0.168 ## 4 Alto-~ 3302 3 6519 1 0 0 1 6 7 0 11 2 8 0 0 26 0.153 ## 5 Alto-~ 1107 1 124872 396 222 461 338 565 193 23 791 130 523 1 20 1226 3.17 ## 6 Ancud 10202 10 44249 23 13 2 30 111 130 6 253 31 132 0 10 330 0.520 ## 7 Andac~ 4103 4 11555 11 6 0 8 37 20 3 39 9 77 0 1 67 0.952 ## 8 Angol 9201 9 55845 93 119 41 58 261 181 35 549 55 244 2 7 508 1.67 ## 9 Antár~ 12202 12 202 0 0 0 0 0 0 0 0 0 0 0 0 0 0 ## 10 Antof~ 2101 2 389812 1150 646 987 1010 1024 778 43 5445 295 1528 13 50 2384 2.95 ## # ... with 330 more rows, and 12 more variables: robos_por_sorpresa_c1000 &lt;dbl&gt;, robos_de_vehiculo_motorizado_c1000 &lt;dbl&gt;, robos_de_objeto_de_o_desde_vehiculo_c1000 &lt;dbl&gt;, robos_en_lugar_habitado_c1000 &lt;dbl&gt;, robos_en_lugar_no_habitado_c1000 &lt;dbl&gt;, ## # otros_robos_con_fuerza_c1000 &lt;dbl&gt;, hurtos_c1000 &lt;dbl&gt;, lesiones_menos_graves_graves_o_gravisimas_c1000 &lt;dbl&gt;, lesiones_leves_c1000 &lt;dbl&gt;, homicidios_c1000 &lt;dbl&gt;, violaciones_c1000 &lt;dbl&gt;, vif_c1000 &lt;dbl&gt; (Ejercicio C) Si queremos obtener un promedio por región en datos como estos, debemos calcular un promedio ponderado: si es que no hacemos esto, comunas con pocos habitantes estarán sobrerrepresentadas en los promedios. Un ejemplo a continuación: df_casos_policiales_l %&gt;% group_by(region_id) %&gt;% summarize(prom_hurtos = weighted.mean(hurtos, w = poblacion_ine_2017)) ## `summarise()` ungrouping output (override with `.groups` argument) ## # A tibble: 16 x 2 ## region_id prom_hurtos ## &lt;dbl&gt; &lt;dbl&gt; ## 1 1 1968. ## 2 2 3941. ## 3 3 1216. ## 4 4 1543. ## 5 5 2039. ## 6 6 1139. ## 7 7 1305. ## 8 8 1304. ## 9 9 1608. ## 10 10 1826. ## 11 11 513. ## 12 12 990. ## 13 13 2329. ## 14 14 1064. ## 15 15 1711. ## 16 16 938. Para cada tipo de delito, obtén el promedio ponderado por región. Tu código: "],["manejo-2d.html", "02D - Manejo de datos (ejercicio int.)", " 02D - Manejo de datos (ejercicio int.) (este ejercicio interactivo solo se puede ejecutar en RStudio Cloud) "],["visualizacion-preceptos.html", "03 - Visualización de datos (preceptos)", " 03 - Visualización de datos (preceptos) Esta clase asincrónica esta disponible en la carpeta de grabaciones del curso (acceso con cuenta UC). Link a las diapositivas. Link al ejercicio con décimas (acceso con cuenta UC) "],["visualizacion-intro.html", "03A - Visualización de datos (intro) Inicio: cargar paquetes, base de datos Gráficos univariados Gráficos bivariados Un poco de personalización: etiquetas", " 03A - Visualización de datos (intro) Si quieres correr estos scripts localmente, acá puedes descargar el proyecto comprimido en .zip. Paquetes que necesitas tener instalados antes de comenzar con el proyecto (3A, 3B, 3C): tidyverse, ggrepel. Ilustración de Allison Horst. Inicio: cargar paquetes, base de datos library(tidyverse) Carga de base en formato rds Hoy tenemos una base de datos con información de los municipios, construida a partir de dos fuentes: la encuesta Casen 2017 y los resultados de las elecciones municipales del año 2016. df_municipios &lt;- read_rds(&quot;datos/datos_municipios.rds&quot;) ¿Te queda claro la información que registra cada variable? Si es que no, haz tus apuntes aquí: Gráficos univariados Gráfico univariado para variable categórica (barras) Veamos la distribución de las coaliciones de los alcaldes en las comunas: ggplot(data = df_municipios, mapping = aes(x = alcalde_coalicion)) + geom_bar() Si queremos invertir los ejes, podemos usar el mapeo estético y = en vez de x =: ggplot(data = df_municipios, mapping = aes(y = alcalde_coalicion)) + geom_bar() Gráfico univariado para variable continua (histograma) Veamos la distribución del % de población rural en las comunas: ggplot(data = df_municipios, mapping = aes(x = porc_rural)) + geom_histogram() ## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. Podemos controlar cómo se arma el histograma en los argumentos de geom_histogram(): bindwidth = 5 hace que nuestros bins tengan un ancho de 5. boundary = 0 asegura que los bins partan en 0, en vez de intentar centrarse en los números enteros (el defecto). closed = \"left\" ayuda a ggplot2 a decidir qué hacer con los valores que caen exactamente en los límites del bin. El valor left determina que los bins están cerrados a la izquierda, es decir, un valor intermedio caerá en la barra de la derecha. El valor right, el defecto, dirá que los bins están cerrados a la derecha, es decir, un valor intermedio caerá en la barra de la izquierda. ggplot(data = df_municipios, mapping = aes(x = porc_rural)) + geom_histogram(binwidth = 5, boundary = 0, closed = &quot;left&quot;) (Ejercicio A) Genera un gráfico univariado para alguna de la variables de la base de datos. ¿Hay algún patrón interesante? Tu código (recuerda, los chunks se insertan con Ctrl/Cmd+Shift+i): Gráficos bivariados Gráfico bivariado para dos variables continuas (dispersión) Observemos la relación entre la variable de población mapuche en la comuna y su índice de pobreza multidimensional: ggplot(data = df_municipios, mapping = aes(x = porc_mapuche, y = porc_pobres_md4)) + geom_point(size = 2) Podemos añadir color y forma a los puntos según las coaliciones de los alcaldes: ggplot(data = df_municipios, mapping = aes(x = porc_mapuche, y = porc_pobres_md4, color = alcalde_coalicion, shape = alcalde_coalicion)) + geom_point(size = 2) Gráfico bivariado para x discreta + y continua: boxplot/violin Veamos la relación entre la coalición del edil y la pobreza de la comuna: ggplot(data = df_municipios, mapping = aes(x = alcalde_coalicion, y = porc_pobres_md4)) + geom_boxplot() ggplot(data = df_municipios, mapping = aes(x = alcalde_coalicion, y = porc_pobres_md4)) + geom_violin() Gráfico bivariado para x discreta + y continua: columnas (ránking) ggplot(data = df_municipios %&gt;% group_by(alcalde_coalicion) %&gt;% summarize(porc_alcaldes_reelectos = sum(alcalde_reelecto) / n()), mapping = aes(x = alcalde_coalicion, y = porc_alcaldes_reelectos)) + geom_col() ## `summarise()` ungrouping output (override with `.groups` argument) A veces queremos hacer estos gráficos de forma horizontal (gráfico de ránking). Podemos hacer un cambio similar al anterior, con los mapeos estéticos invertidos. Luego aprenderemos a ordenar las barras, para hacer ránkings. ggplot(data = df_municipios %&gt;% group_by(alcalde_coalicion) %&gt;% summarize(porc_alcaldes_reelectos = sum(alcalde_reelecto) / n()), mapping = aes(x = porc_alcaldes_reelectos, y = alcalde_coalicion)) + geom_col() ## `summarise()` ungrouping output (override with `.groups` argument) Un poco de personalización: etiquetas Volvamos a uno de los gráficos que hicimos antes: ggplot(data = df_municipios, mapping = aes(x = porc_mapuche, y = porc_pobres_md4, color = alcalde_coalicion, shape = alcalde_coalicion)) + geom_point(size = 2) Con el comando labs() dentro de la cadena de ggplot2 podemos poner etiquetas que harán al gráfico más legible: ggplot(data = df_municipios, mapping = aes(x = porc_mapuche, y = porc_pobres_md4, color = alcalde_coalicion, shape = alcalde_coalicion)) + geom_point(size = 2) + labs(title = &quot;Relación entre porcentaje de población mapuche y porcentaje de pobreza&quot;, subtitle = &quot;por comunas, año 2017&quot;, caption = &quot;Fuente: Casen (2017).&quot;, # ahora para los mapeos estéticos: x = &quot;% de población mapuche&quot;, y = &quot;% de población pobreza (multidimensional)&quot;, color = &quot;Coalición del(la) edil&quot;, shape = &quot;Coalición del(la) edil&quot;) (Ejercicios B-D) ¡En todos los ejercicios genera buenas etiquetas para tus gráficos, utilizando labs()! Genera un plot de violín para la relación entre una variable x discreta y una variable y continua en la base. Tu código: Genera un gráfico de dispersión entre dos variables continuas de la base. Cambia el color y/o forma de los puntos de acuerdo a una de las variables categóricas de la base (si es que vas a utilizar una variable dummy para esto, ingrésala como as.factor(variable) en el mapeo estético). Ayudándote del torpedo para hoy, genera dos gráficos que incluya geoms que no hayamos visto hasta ahora. d1. Tu código: d2. Tu código: "],["visualizacion-ext.html", "03B - Visualización de datos (extensiones) Cargar paquetes y datos Gráfico de ránking Facetas Gráficos de líneas Más personalización", " 03B - Visualización de datos (extensiones) Si quieres correr este script localmente, debe haber descargado el proyecto, como se explica al comienzo del script 3A. Como al principio de todo script, recomiendo reiniciar R. Esto lo conseguimos con Session &gt; Restart R y clickeando en la escoba del panel de Environment (superior derecho). Cargar paquetes y datos library(tidyverse) df_municipios &lt;- read_rds(&quot;datos/datos_municipios.rds&quot;) Gráfico de ránking Supongamos que queremos rankear a las comunas según su edad promedio. Podríamos hacer un gráfico de columnas: ggplot(data = df_municipios, mapping = aes(x = edad_prom, y = comuna)) + geom_col() (Al menos) dos cosas están mal con el gráfico anterior. Primero, son demasiadas observaciones. Segundo, las barras no están ordenadas. Podemos suplir ambas cosas y crear un gráfico de ránking que se entienda: ggplot(data = df_municipios %&gt;% arrange(-edad_prom) %&gt;% # ordenamos slice(1:10), # seleccionamos las diez primeras mapping = aes(x = edad_prom, y = fct_reorder(comuna, edad_prom))) + # ordenamos geom_col() Ejercicio A Genera un gráfico de ránking para las diez comunas con mayor población de la muestra. Facetas ggplot(data = df_municipios, mapping = aes(x = porc_pobres_md4)) + geom_histogram() ## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. ggplot(data = df_municipios, mapping = aes(x = porc_pobres_md4)) + geom_histogram() + facet_wrap(~alcalde_coalicion) ## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. ggplot(data = df_municipios, mapping = aes(x = porc_pobres_md4)) + geom_histogram() + facet_wrap(~alcalde_coalicion, nrow = 3) ## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. Noten que los gráficos anteriores, por defecto, las facetas comparten escalas para las variables x e y. Podemos cambiar este default con el argumento scales = \"free\", que también puede tomar los valores free_x o free_y. Qué queremos usar aquí dependerá de la naturaleza de nuestros datos, caso a caso ggplot(data = df_municipios, mapping = aes(x = porc_pobres_md4)) + geom_histogram() + facet_wrap(~alcalde_coalicion, scales = &quot;free&quot;) ## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. Ejercicio B Genera un gráfico de dispersión (con geom_point()) para dos variables de la base. Luego divídelo por facetas según la coalición del(la) edil. Gráficos de líneas Vamos a cargar datos desde Gapminder (2010), compilados por Edgar Ruiz, Riva Quiroga y Mauricio Pacha Vargas: gapminder_muestra &lt;- read_csv(&quot;datos/gapminder_muestra_es.csv&quot;) ## Parsed with column specification: ## cols( ## pais = col_character(), ## anio = col_double(), ## esperanza_de_vida = col_double() ## ) Podríamos querer graficar las tendencias en el tiempo para los tres países. Con las herramientas que hemos visto ahora ahora, podríamos hacer algo como lo siguiente: ggplot(data = gapminder_muestra, mapping = aes(x = anio, y = esperanza_de_vida, color = pais)) + geom_point() Esto es difícil de leer, nos vendría bien tener líneas para seguir los patrones en el tiempo. Podemos hacer esto añadiendo geom_line() y el mapeo estético group = (a veces podemos omitir esto, ggplot2 tratará de inferirlo, pero yo recomiendo utilizarlo explícitamente siempre). ggplot(data = gapminder_muestra, mapping = aes(x = anio, y = esperanza_de_vida, color = pais, group = pais)) + geom_point() + geom_line() Más personalización Vamos a ver cómo añadir texto dentro de los gráficos, editar las escalas (ejes y colores), etcétera, el próximo script. "],["visualizacion-personalizacion.html", "03C - Visualización de datos (personalización) Inicio: cargar paquetes, base de datos Gráfico de ejemplo Gráficos como objetos / guardar gráficos en el disco Personalización de gráficos", " 03C - Visualización de datos (personalización) Si quieres correr este script localmente, debe haber descargado el proyecto, como se explica al comienzo del script 3A. Como al principio de todo script, recomiendo reiniciar R. Esto lo conseguimos con Session &gt; Restart R y clickeando en la escoba del panel de Environment (superior derecho). Inicio: cargar paquetes, base de datos library(tidyverse) Cargar de datos: municipios Carguemos nuestra base de datos en formato .rds. Tiene información comunal construida a partir de dos fuentes: la encuesta Casen 2017 y los resultados de las elecciones municipales del año 2016. df_municipios &lt;- read_rds(&quot;datos/datos_municipios.rds&quot;) Gráfico de ejemplo ggplot(data = df_municipios, mapping = aes(x = as.factor(region), y = porc_pobres_md4)) + geom_boxplot() + labs(x = &quot;Región&quot;, y = &quot;% Pobreza multidimensional&quot;, title = &quot;% de pobreza en las comunas de Chile, separadas por región&quot;, caption = &quot;Fuente: Casen (2017)&quot;) Gráficos como objetos / guardar gráficos en el disco Podemos crear los gráficos como objetos en R. Hagamos esto para nuestro gráfico anterior: p_pobreza_sep_region &lt;- ggplot(data = df_municipios, mapping = aes(x = as.factor(region), y = porc_pobres_md4)) + geom_boxplot() + labs(x = &quot;Región&quot;, y = &quot;% Pobreza multidimensional&quot;, title = &quot;% de pobreza en las comunas de Chile, separadas por región&quot;, caption = &quot;Fuente: Casen (2017)&quot;) Para generarlos, los llamamos en la consola: p_pobreza_sep_region Podemos continuar con cadenas de ggplot2 a partir de objetos: p_pobreza_sep_region + geom_violin(alpha = 0.5) También podemos guardar nuestros gráficos en el disco fácilmente, si es que son objetos: ggsave(filename = &quot;p_pobreza_sep_region.png&quot;, plot = p_pobreza_sep_region) ## Saving 7 x 5 in image ¿Cómo conseguir que el gráfico tenga las proporciones que queremos? La mejor forma es modificando un poco algunos argumento de ggsave: scale edita la proporción de tamaños entre el plano y los elementos del gráfico. Valores menores a 1 harán los elementos más grandes. width edita el ancho, en pulgadas. height edita el alto, en pulgadas. Con units = \"cm\" podríamos dar ancho y alto en centímetros. [Aquí hay una guía completa sobre guardar gráficos en disco, escrita por Jenny Bryan (2018)] Casi siempre me funciona bien ocupar scale = 0.8, height = 6 y width = entre 8 y 10 (dependiendo si es un gráfico ancho o no). Hay mucho de ensayo y error aquí! ggsave(filename = &quot;p_pobreza_sep_region.png&quot;, plot = p_pobreza_sep_region, scale = 0.8, height = 6, width = 10) Personalización de gráficos Etiquetas (labs) Esto es algo que ya hemos visto, y se consigue con el comando labs(): ggplot(data = df_municipios, mapping = aes(x = alcalde_coalicion)) + geom_bar() + labs(x = &quot;Coalición del alcalde&quot;, y = &quot;Frecuencia&quot;, title = &quot;Alcaldías por coalición, luego de las elecciones 2016&quot;, caption = &quot;Fuente: Emol (2016)&quot;) Algunos argumentos de labs() funcionan en cualquier gráfico (title, subtitle, caption, etc.), mientras otros dependen de los mapeos estéticos particulares de cada gráfico (x, y, color, shape, etc.). Personalizar escalas numéricas Volvamos a nuestro histograma de antes: ggplot(data = df_municipios, mapping = aes(x = porc_rural)) + geom_histogram(binwidth = 5, boundary = 0, closed = &quot;left&quot;) + labs(x = &quot;% de población rural&quot;, y = &quot;Frecuencia&quot;, title = &quot;Comunas chilenas según su porcentaje de población rural&quot;, caption = &quot;Fuente: Casen (2017)&quot;) Podemos editar arbitrariamente qué se muestra en los ejes continuos con los comandos scale_*_continuous() y el argumento breaks =: ggplot(data = df_municipios, mapping = aes(x = porc_rural)) + geom_histogram(binwidth = 5, boundary = 0, closed = &quot;left&quot;) + labs(x = &quot;% de población rural&quot;, y = &quot;Frecuencia&quot;, title = &quot;Comunas chilenas según su porcentaje de población rural&quot;, caption = &quot;Fuente: Casen (2017)&quot;) + scale_x_continuous(breaks = seq(from = 0, to = 100, by = 10)) + scale_y_continuous(breaks = seq(from = 0, to = 60, by = 10)) (Ejercicio A) A continuación crearemos la pequeña base de datos utilizada para hacer el gráfico mostrado antes por Sebastián Piñera. Utilizando dicha base, genera el gráfico correcto en ggplot2. Este es un caso donde no hay necesidad de editar la escala por defecto. Recuerda utilizar etiquetas (labs) que ayuden a leer mejor el gráfico. df_victimizacion &lt;- tibble( anio = c(2010, 2013, 2016), porc_victimizacion = c(30.7, 22.8, 27.3) ) df_victimizacion ## # A tibble: 3 x 2 ## anio porc_victimizacion ## &lt;dbl&gt; &lt;dbl&gt; ## 1 2010 30.7 ## 2 2013 22.8 ## 3 2016 27.3 Tu código: (Nueva base de datos) Ahora trabajaremos con una base de datos con información de carreras universitarias en Estados Unidos. Su fuente es FiveThirtyEight (2018), aunque estos datos específicos fueron editados para Tidy Tuesday. carreras_eeuu &lt;- read_csv(&quot;datos/carreras_eeuu.csv&quot;) ## Parsed with column specification: ## cols( ## carrera_codigo = col_double(), ## carrera = col_character(), ## carrera_tipo1 = col_character(), ## carrera_tipo2 = col_character(), ## estudiantes_total = col_double(), ## estudiantes_muj = col_double(), ## estudiantes_hom = col_double(), ## salario_mediana = col_double(), ## salario_q1 = col_double(), ## salario_q3 = col_double(), ## en_part_time = col_double(), ## en_trabajos_calificados = col_double(), ## en_trabajos_no_calificados = col_double(), ## en_trabajos_sueldo_min = col_double(), ## desempleados = col_double() ## ) glimpse(carreras_eeuu) ## Rows: 171 ## Columns: 15 ## $ carrera_codigo &lt;dbl&gt; 1100, 1101, 1102, 1103, 1105, 1106, 1199, 1301, 1302, 1303, 1401, 1501, 1901, 1902, 1903, 1904, 2001, 2100, 2101, 2102, 2105, 2106, 2107, 2201, 2300, 2301, 2303, 2304, 2305, 2306, 2307, 2308, 2309, 2310, 2311, ... ## $ carrera &lt;chr&gt; &quot;Agricultura (General)&quot;, &quot;Producción y Manejo Agrícola&quot;, &quot;Economía Agrícola&quot;, &quot;Ciencias Animales&quot;, &quot;Agronomía&quot;, &quot;Ciencias del Suelo&quot;, &quot;Agricultura (Misceláneo)&quot;, &quot;Ciencias Ambientales&quot;, &quot;Ciencias Forestales&quot;, &quot;... ## $ carrera_tipo1 &lt;chr&gt; &quot;STEM&quot;, &quot;STEM&quot;, &quot;STEM&quot;, &quot;STEM&quot;, &quot;STEM&quot;, &quot;STEM&quot;, &quot;STEM&quot;, &quot;STEM&quot;, &quot;STEM&quot;, &quot;STEM&quot;, &quot;STEM&quot;, &quot;Humanidades y Ciencias Sociales&quot;, &quot;Humanidades y Ciencias Sociales&quot;, &quot;Humanidades y Ciencias Sociales&quot;, &quot;Humanidades y Ci... ## $ carrera_tipo2 &lt;chr&gt; &quot;Agricultura y Recursos Naturales&quot;, &quot;Agricultura y Recursos Naturales&quot;, &quot;Agricultura y Recursos Naturales&quot;, &quot;Agricultura y Recursos Naturales&quot;, &quot;Agricultura y Recursos Naturales&quot;, &quot;Agricultura y Recursos Natura... ## $ estudiantes_total &lt;dbl&gt; 10399, 14240, 2439, 21573, 7416, 685, 1488, 25965, 3607, 13773, 46420, 31195, 213996, 72619, 52824, 53162, 18035, 36698, 4168, 128319, 11913, 8066, 7613, 10510, 143718, 804, 818, 170862, 14237, 28213, 37589, 64... ## $ estudiantes_muj &lt;dbl&gt; 6053, 9658, 1749, 5347, 4897, 476, 404, 10787, 3156, 8617, 25463, 8739, 70619, 23736, 24704, 12862, 11431, 27392, 3046, 99743, 9005, 6607, 5291, 4364, 26893, 280, 119, 13029, 3872, 15670, 1167, 2049, 6820, 2682... ## $ estudiantes_hom &lt;dbl&gt; 4346, 4582, 690, 16226, 2519, 209, 1084, 15178, 451, 5156, 20957, 22456, 143377, 48883, 28120, 40300, 6604, 9306, 1122, 28576, 2908, 1459, 2322, 6146, 116825, 524, 699, 157833, 10365, 12543, 36422, 4434, 10305,... ## $ salario_mediana &lt;dbl&gt; 40000, 40000, 40000, 30000, 32000, 35000, 29000, 35600, 35000, 35000, 40000, 35000, 35000, 35000, 33000, 35000, 35000, 45000, 41300, 53000, 45000, 37500, 36400, 29000, 34000, 34000, 41000, 32000, 34000, 31000, ... ## $ salario_q1 &lt;dbl&gt; 30000, 25000, 27000, 22000, 22900, 18500, 23000, 25000, 28600, 25000, 31000, 24500, 27000, 26000, 25000, 27000, 25000, 30000, 20000, 39000, 32500, 25000, 27000, 20000, 26000, 29000, 41000, 23400, 30000, 24000, ... ## $ salario_q3 &lt;dbl&gt; 50000, 50000, 54000, 40000, 40000, 44000, 42100, 40200, 48000, 42000, 50000, 44000, 45000, 42900, 45000, 47000, 45000, 60000, 46000, 70000, 58000, 50000, 49000, 36000, 41000, 35000, 43000, 38000, 40000, 40000, ... ## $ en_part_time &lt;dbl&gt; 2031, 2196, 620, 5353, 1246, 185, 335, 7071, 891, 2613, 10206, 9541, 49889, 15902, 13078, 10948, 4690, 4332, 482, 18726, 1468, 1030, 1447, 2064, 29558, 0, 135, 37965, 2273, 7230, 7001, 1227, 3782, 5153, 5168, 2... ## $ en_trabajos_calificados &lt;dbl&gt; 2418, 1925, 535, 5443, 2089, 355, 483, 8149, 1096, 4333, 16178, 8465, 40763, 23279, 12855, 9659, 4545, 13344, 2024, 68622, 4390, 2354, 2593, 563, 82007, 346, 509, 108085, 10699, 12777, 23515, 4214, 10304, 20185... ## $ en_trabajos_no_calificados &lt;dbl&gt; 4717, 6221, 893, 9571, 3545, 144, 626, 10076, 1692, 5808, 13724, 11818, 97964, 26672, 25297, 23059, 8794, 11783, 1033, 25667, 4102, 3244, 2941, 7384, 31112, 206, 221, 36972, 1977, 9328, 7705, 1106, 3967, 3797, ... ## $ en_trabajos_sueldo_min &lt;dbl&gt; 839, 1362, 94, 2125, 1231, 0, 31, 3175, 327, 1405, 4221, 3677, 27440, 8512, 6429, 7214, 2495, 1672, 263, 5144, 608, 308, 352, 3163, 11443, 111, 0, 11502, 786, 2042, 2868, 591, 1385, 1179, 1806, 722, 2819, 2767,... ## $ desempleados &lt;dbl&gt; 178, 649, 182, 917, 314, 0, 82, 1779, 322, 842, 4366, 1668, 14602, 4535, 4410, 3305, 2006, 2934, 419, 6884, 639, 721, 1100, 510, 7195, 0, 88, 7297, 216, 1920, 1360, 266, 833, 1067, 1012, 496, 1379, 1206, 547, 2... (Ejercicio B) Antes de comenzar a trabajar con los datos, crea una nueva base de datos llamada carreras_eeuu2 que tenga tres nuevas variables: porc_mujeres, porc_desempleo, porc_en_trabajos_calificados (todas calculadas con respecto al total de cada carrera). Tu código: En el resto de la clase utilizaremos esta base modificada. Elegir buenas escalas de colores Escalas de colores categóricas Comencemos dibujando solo el plano de coordenadas, sin geoms. ¿Qué esperan ver en el siguiente gráfico, una vez que añadamos geom_point()? ggplot(data = carreras_eeuu2, mapping = aes(x = porc_desempleo, y = porc_en_trabajos_calificados, color = carrera_tipo1)) Veamos el gráfico: ggplot(data = carreras_eeuu2, mapping = aes(x = porc_desempleo, y = porc_en_trabajos_calificados, color = carrera_tipo1)) + geom_point() La paleta de colores categóricos por defecto de ggplot2, lamentablemente, es difícil de ver para los/as daltónicos/as. Podemos cambiarla por una de ColorBrewer con el comando scale_color_brewer(): ggplot(data = carreras_eeuu2, mapping = aes(x = porc_desempleo, y = porc_en_trabajos_calificados, color = carrera_tipo1)) + geom_point() + scale_color_brewer(palette = &quot;PuOr&quot;) Escalas de colores numéricas Grafiquemos la misma relación de antes, pero esta vez añadamos color a los puntos con una variable continua (porc_mujeres): ggplot(data = carreras_eeuu2, mapping = aes(x = porc_desempleo, y = porc_en_trabajos_calificados, color = porc_mujeres)) + geom_point() De nuevo, la paleta de colores por defecto es subóptima. La mejor paleta para visualizar escalas continuas en color es viridis. Podemos utilizarla con el comando scale_color_viridis_c(): ggplot(data = carreras_eeuu2, mapping = aes(x = porc_desempleo, y = porc_en_trabajos_calificados, color = porc_mujeres)) + geom_point() + scale_color_viridis_c() # de la escala (Ejercicio C) Genera un gráfico de dispersión para dos variables numéricas en la base de datos. Añade color a las observaciones de acuerdo al tipo de carrera (amplio). Utiliza una escala de ColorBrewer distinta a la de antes. Recuerda utilizar buenos labs (etiquetas). Tu código: Texto dentro del gráfico Para el último gráfico que hicimos, nos puede interesar ver la posición de carreras específicas. Podemos generar esto añadiendo texto dentro del gráfico: ggplot(data = carreras_eeuu2, mapping = aes(x = porc_desempleo, y = porc_en_trabajos_calificados, color = porc_mujeres, label = carrera)) + geom_point() + geom_label() + # esto genera los textos, ojo que necesita el mapeo de &quot;label&quot; antes! scale_color_viridis_c() Esto último es inútil, pues no se entiende nada. Podemos destacar solo una carrera si construimos geom_label() usando datos parciales. Coloquemos solo el texto para ciencia política: ggplot(data = carreras_eeuu2, mapping = aes(x = porc_desempleo, y = porc_en_trabajos_calificados, color = porc_mujeres, label = carrera)) + geom_point() + geom_label(data = carreras_eeuu2 %&gt;% filter(carrera == &quot;Ciencia Política&quot;), alpha = 0.7) + scale_color_viridis_c() ¿Cómo ponemos múltiples textos con claridad en un gráfico? Aquí nos será muy útil el paquete ggrepel: #install.packages(&quot;ggrepel&quot;) library(ggrepel) ggplot(data = carreras_eeuu2, mapping = aes(x = porc_desempleo, y = porc_en_trabajos_calificados, color = porc_mujeres, label = carrera)) + geom_point() + # usamos ahora geom_label_repel() geom_label_repel(data = carreras_eeuu2 %&gt;% filter(carrera == &quot;Ciencia Política&quot;), alpha = 0.7, # lo siguiente obliga a ggrepel a dibujar las líneas de guía: min.segment.length = 0) + scale_color_viridis_c() No parece que haya hecho demasiado. ggrepel es particularmente útil para visualizar varios textos dentro de un gráfico. Por ejemplo, ahora veamos todas las carreras de comunicaciones: ggplot(data = carreras_eeuu2, mapping = aes(x = porc_desempleo, y = porc_en_trabajos_calificados, color = porc_mujeres, label = carrera)) + geom_point() + geom_label_repel(data = carreras_eeuu2 %&gt;% filter(carrera_tipo2 == &quot;Comunicaciones&quot;), min.segment.length = 0, alpha = 0.7, size = 4) + scale_color_viridis_c() Texto dentro de gráficos de columna Calculemos la mediana de porcentaje de desempleo por tipo (amplio) de carrera: ggplot(data = carreras_eeuu2 %&gt;% group_by(carrera_tipo1) %&gt;% summarize(median_porc_desempleo = median(porc_desempleo)), mapping = aes(x = carrera_tipo1, y = median_porc_desempleo)) + geom_col() ## `summarise()` ungrouping output (override with `.groups` argument) Para añadir cajas de texto con los valores numéricos al gráfico, de nuevo podemos utilizar geom_label(), luego de haber indicado el mapeo estético para label: ggplot(data = carreras_eeuu2 %&gt;% group_by(carrera_tipo1) %&gt;% summarize(median_porc_desempleo = median(porc_desempleo)), mapping = aes(x = carrera_tipo1, y = median_porc_desempleo, label = median_porc_desempleo)) + geom_col() + geom_label() ## `summarise()` ungrouping output (override with `.groups` argument) Un tip: podemos redondear los números utilizando round() en el mapeo de label: ggplot(data = carreras_eeuu2 %&gt;% group_by(carrera_tipo1) %&gt;% summarize(median_porc_desempleo = median(porc_desempleo)), mapping = aes(x = carrera_tipo1, y = median_porc_desempleo, label = round(median_porc_desempleo, 2))) + geom_col() + geom_label() ## `summarise()` ungrouping output (override with `.groups` argument) Por cierto, aparte de geom_label() está geom_text(), que no dibuja una caja alrededor del texto. ggplot(data = carreras_eeuu2 %&gt;% group_by(carrera_tipo1) %&gt;% summarize(mediana_porc_desempleo = median(porc_desempleo)), mapping = aes(x = carrera_tipo1, y = mediana_porc_desempleo, label = round(mediana_porc_desempleo, 2))) + geom_col() + geom_text(vjust = -0.4) # solo esto cambió. vjust cambia ligeramente la posición del texto ## `summarise()` ungrouping output (override with `.groups` argument) (Ejercicio D) Genera un gráfico de tipo ránking con la diez carreras con mayor salario mediano. Registra con texto los valores de salarios medianos. ¡Utiliza buenos labs (etiquetas)! "],["busqueda-ayuda.html", "04 - Guía búsqueda de ayuda Leer archivos de ayuda de R Encontrar funciones en línea Solucionar problemas Pedir ayuda con ejemplos reproducibles (reprex)", " 04 - Guía búsqueda de ayuda En esta guía vamos a revisar algunos tips y recursos para buscar ayuda efectivamente, en el contexto de proyectos de análisis de datos. Leer archivos de ayuda de R Todas las funciones en R tienen un archivo de ayuda asociado. Podemos acceder a estos simplemente antecediendo el nombre de la función con un signo de interrogación: ?mean ?`%&gt;%` # con estos tildes invertidos podemos ingresar funciones que tengan caracteres especiales ?`%in%` Podemos leer un archivo de ayuda de R de la siguiente forma: Figure 1: Traducido de Healy (2018). Encontrar funciones en línea CRAN packages CRAN es el sitio de los repositorios oficiales de R. La página web es un poco confusa, pero usualmente encontramos los paquetes que queremos buscando en Google cran &lt;paquete&gt;. Por ejemplo, este es el sitio para el paquete dplyr. Contiene información útil sobre el paquete. Tres campos muy importantes a mirar son (a) URL, que nos lleva al sitio oficial del paquete, usualmente en la página del autor/a, (B) Vignettes, que son pequeñas guías oficiales de cómo usarlo y (C) Reference manual, un manual con todos los archivos de ayuda de sus funciones. rdocumentation.org En este sitio podemos buscar funciones y mirar sus archivos de ayuda en línea. Prueba a buscar alguna función conocida (por ejemplo, mutate, arrange, select, etc.). En la columna de la derecha aparecerán las funciones, mientras que la de la izquierda mostrará paquetes relacionados con nuestra búsqueda. CRAN Task Views CRAN Task Views son guías muy completas sobre qué paquetes nos pueden ayudar a lidiar con tópicos específicos. Por ejemplo, veamos el CTV de Estadística para las Ciencias Sociales. Solucionar problemas Problemas con paréntesis y comas Vamos a usar una base de ejemplo de ggplot2, llamada midwest. Contiene información demográfica sobre distintos condados en Estados Unidos, parte de la zona geográfica llamada Midwest. midwest ## # A tibble: 437 x 28 ## PID county state area poptotal popdensity popwhite popblack popamerindian popasian popother percwhite percblack percamerindan percasian percother popadults perchsd percollege percprof poppovertyknown percpovertyknown percbelowpoverty ## &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 561 ADAMS IL 0.052 66090 1271. 63917 1702 98 249 124 96.7 2.58 0.148 0.377 0.188 43298 75.1 19.6 4.36 63628 96.3 13.2 ## 2 562 ALEXA~ IL 0.014 10626 759 7054 3496 19 48 9 66.4 32.9 0.179 0.452 0.0847 6724 59.7 11.2 2.87 10529 99.1 32.2 ## 3 563 BOND IL 0.022 14991 681. 14477 429 35 16 34 96.6 2.86 0.233 0.107 0.227 9669 69.3 17.0 4.49 14235 95.0 12.1 ## 4 564 BOONE IL 0.017 30806 1812. 29344 127 46 150 1139 95.3 0.412 0.149 0.487 3.70 19272 75.5 17.3 4.20 30337 98.5 7.21 ## 5 565 BROWN IL 0.018 5836 324. 5264 547 14 5 6 90.2 9.37 0.240 0.0857 0.103 3979 68.9 14.5 3.37 4815 82.5 13.5 ## 6 566 BUREAU IL 0.05 35688 714. 35157 50 65 195 221 98.5 0.140 0.182 0.546 0.619 23444 76.6 18.9 3.28 35107 98.4 10.4 ## 7 567 CALHO~ IL 0.017 5322 313. 5298 1 8 15 0 99.5 0.0188 0.150 0.282 0 3583 62.8 11.9 3.21 5241 98.5 15.1 ## 8 568 CARRO~ IL 0.027 16805 622. 16519 111 30 61 84 98.3 0.661 0.179 0.363 0.500 11323 76.0 16.2 3.06 16455 97.9 11.7 ## 9 569 CASS IL 0.024 13437 560. 13384 16 8 23 6 99.6 0.119 0.0595 0.171 0.0447 8825 72.3 14.1 3.21 13081 97.4 13.9 ## 10 570 CHAMP~ IL 0.058 173025 2983. 146506 16559 331 8033 1596 84.7 9.57 0.191 4.64 0.922 95971 87.5 41.3 17.8 154934 89.5 15.6 ## # ... with 427 more rows, and 5 more variables: percchildbelowpovert &lt;dbl&gt;, percadultpoverty &lt;dbl&gt;, percelderlypoverty &lt;dbl&gt;, inmetro &lt;int&gt;, category &lt;chr&gt; Generemos un gráfico con ella: ggplot(data = midwest, mapping = aes(x = as.factor(inmetro), y = percbelowpoverty)) + geom_boxplot() + labs(title = &quot;Relación entre carácter metropolitano y pobreza en los condados del Midwest&quot;, caption = &quot;Fuente: Wickham (2018)&quot;, x = &quot;Carácter metropolitano&quot;, y = &quot;Porcentaje de pobreza&quot;) La gran mayoría de los errores que se cometen en R tienen que ver con sintaxis. Como hemos visto, R (como cualquier lenguaje de programación) espera instrucciones muy precisas de nuestra parte. Aquí algunos tips para detectar problemas de este tipo: Revisar dónde abren/cierran paréntesis sospechosos. Si ponemos el teclado al lado de uno de ellos, RStudio resaltará el paréntesis par a este: Con respecto a las comas, debemos recordar que se utilizan para separar argumentos de funciones, por lo que siempre deben estar adentro de ellas. Fíjate en los argumentos de la función labs() en el código de arriba. Otro error de sintaxis es dejar cadenas de código (%&gt;% o +) abiertas. Esto es, dejar un pipe o + extra al final. R seguirá esperando la continuación de la cadena! Un truco para ver dónde está fallando nuestro código es ponerle sangría línea a línea. Si tenemos un código desordenado, podemos ir ordenándolo línea a línea con Ctrl + I. Probablemente esto nos dé una mejor perspectiva para encontrar errores de comas, pipes, etc: Leer los mensajes de error de R Veamos el siguiente error, cuando intentamos filtrar solo los condados de Illinois en la base de ejemplo: midwest %&gt;% filter(state = &quot;IL&quot;) ## Error: Problem with `filter()` input `..1`. ## x Input `..1` is named. ## i This usually means that you&#39;ve used `=` instead of `==`. ## i Did you mean `state == &quot;IL&quot;`? ¿Cuál es la solución al problema? En este caso el mensaje de error es muy claro, teníamos que usar el operador lógico ==, en vez de solo =. Buscar en internet La mayoría de la veces, los errores que devuelve R son difíciles de entender, a diferencia del ejemplo anterior. Una buena idea es buscar el error en Google (la mayoría de los errores ya han sido preguntados en línea), acompañado de la función y/o paquete. Para hacer estas búsquedas eficientemente, deberíamos eliminar cualquier información del error que sea específica de nuestra base de datos (generalizándolo). Por ejemplo, una buena búsqueda para el error anterior podría ser la siguiente. También eliminamos símbolos especiales (como ==), que seguramente Google no tomará en cuenta. r dplyr filter must not be named, do you need En Google podemos poner una palabra o frase entre comillas para que los resultados deban necesariamente contenerla tal como está escrita. Podríamos buscar algo como esto: r dplyr filter must not be named, do you need Por lejos, los mejores resultados vienen de StackOverflow, un sitio web de preguntas y respuestas de programación. En Google a menudo querrán clickear en Más resultados de stackoverflow.com, si es que no encuentran la solución en los primeros resultados. Podemos hacer nuestra búsqueda anterior directamente en StackOverflow a través de Google, de la siguiente forma: site:stackoverflow.com dplyr filter must not be named, do you need Pedir ayuda con ejemplos reproducibles (reprex) Cuando tenemos un problema y queremos compartirlo con alguien (colegas, StackOverflow, etc.), lo ideal es que generemos un ejemplo mínimo que reproduzca nuestro problema (reprex). La idea es que la otra persona no tenga que lidiar con todo nuestro código, sino que solo con la parte que nos está dando problemas. Adicionalmente, no queremos que esa otra persona tenga que entender nuestra base de datos en particular, por lo que los reprex usualmente están hechos con bases de datos pequeñas creadas o con bases de datos que vienen por defecto con R o el tidyverse (mtcars, midwest, mpg, diamonds, etc.). Por último, queremos que esa otra persona pueda correr rápidamente nuestro código, sin tener que preocuparse de nada más aparte de nuestro problema. Nuestro problema de antes: midwest %&gt;% filter(state = &quot;IL&quot;) ## Error: Problem with `filter()` input `..1`. ## x Input `..1` is named. ## i This usually means that you&#39;ve used `=` instead of `==`. ## i Did you mean `state == &quot;IL&quot;`? Utilizar la base midwest está bien, pero vamos a generar nuestro reprex con otra de ejemplo en el paquete ggplot2, llamada mpg. Esta base se ve de la siguiente forma. No importa mucho su contenido, pero sí que tenemos variables categóricas por las que querríamos filtrar, como por ejemplo model. ## # A tibble: 234 x 11 ## manufacturer model displ year cyl trans drv cty hwy fl class ## &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; ## 1 audi a4 1.8 1999 4 auto(l5) f 18 29 p compact ## 2 audi a4 1.8 1999 4 manual(m5) f 21 29 p compact ## 3 audi a4 2 2008 4 manual(m6) f 20 31 p compact ## 4 audi a4 2 2008 4 auto(av) f 21 30 p compact ## 5 audi a4 2.8 1999 6 auto(l5) f 16 26 p compact ## 6 audi a4 2.8 1999 6 manual(m5) f 18 26 p compact ## 7 audi a4 3.1 2008 6 auto(av) f 18 27 p compact ## 8 audi a4 quattro 1.8 1999 4 manual(m5) 4 18 26 p compact ## 9 audi a4 quattro 1.8 1999 4 auto(l5) 4 16 25 p compact ## 10 audi a4 quattro 2 2008 4 manual(m6) 4 20 28 p compact ## # ... with 224 more rows Debemos pensar hacer la misma operación con la nueva base, y que nos dé el mismo error. Además, el reprex debe incluir la carga de paquetes: library(tidyverse) # carga filter() y mpg mpg %&gt;% filter(model = &quot;a4&quot;) # Error: `model` (`model = &quot;a4&quot;`) must not be named, do you need `==`? "],["manejo-av.html", "05A - Manejo avanzado de datos Inicio: cargar paquetes, base de datos Pivotear bases de datos (wide &lt;-&gt; long) Recodificar variables Valores perdidos/missing/NA Unir bases de datos", " 05A - Manejo avanzado de datos Si quieres correr estos scripts localmente, acá puedes descargar el proyecto comprimido en .zip. Paquetes que necesitas tener instalados antes de comenzar con el proyecto (05A, 05B): tidyverse, janitor. Inicio: cargar paquetes, base de datos library(tidyverse) df_tasa_robos &lt;- read_csv(&quot;datos/tasa_robos_wide.csv&quot;) ## Parsed with column specification: ## cols( ## comuna = col_character(), ## comuna_id = col_double(), ## `2012` = col_double(), ## `2013` = col_double(), ## `2014` = col_double(), ## `2015` = col_double(), ## `2016` = col_double() ## ) Tenemos una base de datos con los casos policiales de robos cada 1.000 habitantes. Contiene información para 340 comunas de Chile, 2012-2016. Su fuente es la Subsecretaría de Prevención del Delito (2017). Pivotear bases de datos (wide &lt;-&gt; long) ¿Qué pasa si queremos graficar estos datos, por ejemplo viendo la evolución temporal de la variable en una comuna? El formato de los datos no es el ideal. Aquí los valores de una variable (año) se expandieron hacia las columnas, generando una base en formato wide. Podemos alargar esta base usando la función pivot_longer(), de la siguiente manera: df_tasa_robos_long &lt;- df_tasa_robos %&gt;% pivot_longer(cols = -c(comuna, comuna_id), # descartamos vars. que no queremos transformar names_to = &quot;anio&quot;, values_to = &quot;tasa_robos&quot;) df_tasa_robos_long ## # A tibble: 1,700 x 4 ## comuna comuna_id anio tasa_robos ## &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; ## 1 Algarrobo 5602 2012 4031. ## 2 Algarrobo 5602 2013 3612. ## 3 Algarrobo 5602 2014 3734. ## 4 Algarrobo 5602 2015 4231. ## 5 Algarrobo 5602 2016 3665. ## 6 Alhué 13502 2012 796. ## 7 Alhué 13502 2013 950. ## 8 Alhué 13502 2014 1167. ## 9 Alhué 13502 2015 606. ## 10 Alhué 13502 2016 956. ## # ... with 1,690 more rows Esta estructura de datos es mucho más amigable para ggplot2: ggplot(data = df_tasa_robos_long %&gt;% filter(comuna %in% c(&quot;San-Joaquín&quot;, &quot;Macul&quot;)), mapping = aes(x = as.factor(anio), y = tasa_robos, color = comuna, group = comuna)) + geom_line() # podríamos seguir añadiendo escalas, labs, etc... Noten que pivot_longer() tiene una función recíproca, pivot_wider(): df_tasa_robos_long %&gt;% pivot_wider(names_from = &quot;anio&quot;, values_from = &quot;tasa_robos&quot;) ## # A tibble: 340 x 7 ## comuna comuna_id `2012` `2013` `2014` `2015` `2016` ## &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Algarrobo 5602 4031. 3612. 3734. 4231. 3665. ## 2 Alhué 13502 796. 950. 1167. 606. 956. ## 3 Alto-Biobío 8314 225. 305. 245. 139. 103. ## 4 Alto-del-Carmen 3302 208. 209. 397. 293. 315. ## 5 Alto-Hospicio 1107 2589. 2218. 1930. 1962. 1847. ## 6 Ancud 10202 579. 763. 697. 755. 732. ## 7 Andacollo 4103 759. 640. 892. 911. 1075. ## 8 Angol 9201 1400. 1515. 1822. 1939. 1468. ## 9 Antártica 12202 0 0 0 0 0 ## 10 Antofagasta 2101 2178. 1892. 1938. 1671. 1391. ## # ... with 330 more rows Recodificar variables Supongamos que, usando nuestra nueva base long, queremos crear una variable binaria/dummy que indique si la observación es para el gobierno de Piñera I o Bachelet II. Podemos usar if_else() dentro de mutate(): df_tasa_robos_long %&gt;% mutate(d_gob_bachelet = if_else(condition = anio &gt;= 2014, true = 1, false = 0)) ## # A tibble: 1,700 x 5 ## comuna comuna_id anio tasa_robos d_gob_bachelet ## &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Algarrobo 5602 2012 4031. 0 ## 2 Algarrobo 5602 2013 3612. 0 ## 3 Algarrobo 5602 2014 3734. 1 ## 4 Algarrobo 5602 2015 4231. 1 ## 5 Algarrobo 5602 2016 3665. 1 ## 6 Alhué 13502 2012 796. 0 ## 7 Alhué 13502 2013 950. 0 ## 8 Alhué 13502 2014 1167. 1 ## 9 Alhué 13502 2015 606. 1 ## 10 Alhué 13502 2016 956. 1 ## # ... with 1,690 more rows if_else() nos sirve si es que queremos crear variables binarias (numéricas o no). Pero a menudo queremos asignar más categorías. En esos casos podemos usar case_when(): df_tasa_robos_long %&gt;% mutate(gobierno = case_when(anio &lt; 2014 ~ &quot;Piñera I&quot;, # condición ~ valor anio == 2014 ~ &quot;Cambio de mando&quot;, anio &gt; 2014 ~ &quot;Bachelet II&quot;)) ## # A tibble: 1,700 x 5 ## comuna comuna_id anio tasa_robos gobierno ## &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; ## 1 Algarrobo 5602 2012 4031. Piñera I ## 2 Algarrobo 5602 2013 3612. Piñera I ## 3 Algarrobo 5602 2014 3734. Cambio de mando ## 4 Algarrobo 5602 2015 4231. Bachelet II ## 5 Algarrobo 5602 2016 3665. Bachelet II ## 6 Alhué 13502 2012 796. Piñera I ## 7 Alhué 13502 2013 950. Piñera I ## 8 Alhué 13502 2014 1167. Cambio de mando ## 9 Alhué 13502 2015 606. Bachelet II ## 10 Alhué 13502 2016 956. Bachelet II ## # ... with 1,690 more rows Una opción válida al usar case_when() es asignar un valor para cualquier otro caso: df_tasa_robos_long %&gt;% mutate(gobierno = case_when(anio &lt; 2014 ~ &quot;Piñera I&quot;, anio == 2014 ~ &quot;Cambio de mando&quot;, TRUE ~ &quot;Bachelet II&quot;)) # en cualquier otro caso ## # A tibble: 1,700 x 5 ## comuna comuna_id anio tasa_robos gobierno ## &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; ## 1 Algarrobo 5602 2012 4031. Piñera I ## 2 Algarrobo 5602 2013 3612. Piñera I ## 3 Algarrobo 5602 2014 3734. Cambio de mando ## 4 Algarrobo 5602 2015 4231. Bachelet II ## 5 Algarrobo 5602 2016 3665. Bachelet II ## 6 Alhué 13502 2012 796. Piñera I ## 7 Alhué 13502 2013 950. Piñera I ## 8 Alhué 13502 2014 1167. Cambio de mando ## 9 Alhué 13502 2015 606. Bachelet II ## 10 Alhué 13502 2016 956. Bachelet II ## # ... with 1,690 more rows Mini-ejercicio Crea la variable d_gob_bachele de antes, pero esta vez usando case_when(). Tu código: Valores perdidos/missing/NA Para el resto de la clase trabajaremos también con datos de robos, esta vez para los países del Cono Sur (2006-2016). La fuente es la Oficina de las Naciones Unidas contra la Droga y el Delito (UNODC). df_robos_cono_sur &lt;- read_csv(&quot;datos/robos_cono_sur.csv&quot;) ## Parsed with column specification: ## cols( ## pais = col_character(), ## pais_codigo = col_character(), ## anio = col_double(), ## robos_c100k = col_double() ## ) df_robos_cono_sur ## # A tibble: 33 x 4 ## pais pais_codigo anio robos_c100k ## &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Argentina ARG 2006 738. ## 2 Argentina ARG 2007 662. ## 3 Argentina ARG 2008 704. ## 4 Argentina ARG 2009 NA ## 5 Argentina ARG 2010 NA ## 6 Argentina ARG 2011 NA ## 7 Argentina ARG 2012 NA ## 8 Argentina ARG 2013 NA ## 9 Argentina ARG 2014 668. ## 10 Argentina ARG 2015 626. ## # ... with 23 more rows Veamos los datos. ¿Qué pasó con las datos de Argentina, 2009-2013? R registra los valores perdidos como NA. Esto no es un caracter con las letras N y A, sino que un valor especial dentro del vector, sin importar su tipo. Realizar operaciones básicas en vectores con NA Intentemos calcular la media por país para la variable robos_c100k: df_robos_cono_sur %&gt;% group_by(pais) %&gt;% summarize(media_robos_c100k = mean(robos_c100k)) ## `summarise()` ungrouping output (override with `.groups` argument) ## # A tibble: 3 x 2 ## pais media_robos_c100k ## &lt;chr&gt; &lt;dbl&gt; ## 1 Argentina NA ## 2 Chile 1070. ## 3 Uruguay 2984. La mayoría de las operaciones básicas en R (median(), sd(), sum(), etc.) fallarán cuando alguno de los valores en el cálculo sea un NA. Si es que de todas formas queremos utilizar la función, tomando en cuenta solo los valores existentes, prácticamente todas estas operaciones incluyen un argumento na.rm = (NA remove): df_robos_cono_sur %&gt;% group_by(pais) %&gt;% summarize(media_robos_c100k = mean(robos_c100k, na.rm = T)) ## `summarise()` ungrouping output (override with `.groups` argument) ## # A tibble: 3 x 2 ## pais media_robos_c100k ## &lt;chr&gt; &lt;dbl&gt; ## 1 Argentina 669. ## 2 Chile 1070. ## 3 Uruguay 2984. Por defecto, los modelos de regresión hacen algo como esto, omiten las observaciones que tengan NA en alguna de las variables del modelo. Siempre que estemos en la duda sobre cómo se comporta alguna función ante NAs, deberíamos revisar su archivo de ayuda y buscar algún argumento que incluya na: ?lm Filtrar NAs de una base Lo siguiente no funcionará: df_robos_cono_sur %&gt;% filter(robos_c100k == NA) Lo que debemos utilizar en operaciones lógicas para testear la presencia de NAs es la función is.na(): df_robos_cono_sur %&gt;% filter(is.na(robos_c100k)) ## # A tibble: 5 x 4 ## pais pais_codigo anio robos_c100k ## &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Argentina ARG 2009 NA ## 2 Argentina ARG 2010 NA ## 3 Argentina ARG 2011 NA ## 4 Argentina ARG 2012 NA ## 5 Argentina ARG 2013 NA Podemos realizar una negación en una operación lógica antecediéndola de un signo de exclamación. En este caso, obtendremos solo las observaciones que no tienen NA en robos_c100k: df_robos_cono_sur %&gt;% filter(!is.na(robos_c100k)) ## # A tibble: 28 x 4 ## pais pais_codigo anio robos_c100k ## &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Argentina ARG 2006 738. ## 2 Argentina ARG 2007 662. ## 3 Argentina ARG 2008 704. ## 4 Argentina ARG 2014 668. ## 5 Argentina ARG 2015 626. ## 6 Argentina ARG 2016 616. ## 7 Chile CHL 2006 942. ## 8 Chile CHL 2007 1018. ## 9 Chile CHL 2008 1054. ## 10 Chile CHL 2009 1136. ## # ... with 18 more rows Crear valores perdidos df_robos_cono_sur ## # A tibble: 33 x 4 ## pais pais_codigo anio robos_c100k ## &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Argentina ARG 2006 738. ## 2 Argentina ARG 2007 662. ## 3 Argentina ARG 2008 704. ## 4 Argentina ARG 2009 NA ## 5 Argentina ARG 2010 NA ## 6 Argentina ARG 2011 NA ## 7 Argentina ARG 2012 NA ## 8 Argentina ARG 2013 NA ## 9 Argentina ARG 2014 668. ## 10 Argentina ARG 2015 626. ## # ... with 23 more rows Supongamos que no confiamos en los datos más antiguos para Argentina (2006-2008) y también queremos asignarlos como valores perdidos. Una opción podría ser eliminar dichas observaciones con filter(), pero tal vez tenemos información útil en otras variables. Podríamos asignarle el valor de NA a dichas observaciones con if_else() o case_when(): df_robos_cono_sur %&gt;% mutate(robos_c100k = case_when( pais == &quot;Argentina&quot; &amp; anio &lt;= 2008 ~ NA, TRUE ~ robos_c100k )) Lo anterior falla, pese a que la sintaxis de case_when() es correcta! El problema es que cuando creamos valores perdidos debemos decirle explícitamente a R qué tipo de NAs utilizaremos, según el tipo de vector. Los tipos más comunes son NA_character_ (para vectores de caracteres, chr) o NA_real_ (para vectores de números reales, dbl). Veamos cómo ahora funcionará: df_robos_cono_sur %&gt;% mutate(robos_c100k = case_when( pais == &quot;Argentina&quot; &amp; anio &lt;= 2008 ~ NA_real_, TRUE ~ robos_c100k )) ## # A tibble: 33 x 4 ## pais pais_codigo anio robos_c100k ## &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Argentina ARG 2006 NA ## 2 Argentina ARG 2007 NA ## 3 Argentina ARG 2008 NA ## 4 Argentina ARG 2009 NA ## 5 Argentina ARG 2010 NA ## 6 Argentina ARG 2011 NA ## 7 Argentina ARG 2012 NA ## 8 Argentina ARG 2013 NA ## 9 Argentina ARG 2014 668. ## 10 Argentina ARG 2015 626. ## # ... with 23 more rows Unir bases de datos Aquí tenemos una base con muchos datos de los World Development Indicators del Banco Mundial. Están para los tres países del Cono Sur, pero desde 2007 a 2016 (falta 2006, en comparación a los datos anteriores). df_wdi &lt;- read_csv(&quot;datos/wdi_cono_sur.csv&quot;) ## Parsed with column specification: ## cols( ## .default = col_double(), ## pais_codigo = col_character(), ## external_debt_stocks_total_dod_current_us = col_logical(), ## total_debt_service_percent_of_exports_of_goods_services_and_primary_income = col_logical() ## ) ## See spec(...) for full column specifications. df_wdi ## # A tibble: 30 x 57 ## pais_codigo anio population_total population_grow~ surface_area_sq~ population_dens~ poverty_headcou~ poverty_headcou~ gni_atlas_metho~ gni_per_capita_~ gni_ppp_current~ gni_per_capita_~ income_share_he~ life_expectancy~ fertility_rate_~ ## &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 ARG 2007 39684295 0.999 2780400 14.5 NA 2.9 258429317135. 6510 656745628034. 16550 3.9 74.8 2.38 ## 2 CHL 2007 16530195 1.07 756096. 22.2 NA NA 143603828921. 8690 248814945028. 15050 NA 78.1 1.90 ## 3 URY 2007 3331749 0.191 176220 19.0 29.6 0.3 21283077870. 6390 44113794683. 13240 4.8 76.3 2.05 ## 4 ARG 2008 40080160 0.993 2780400 14.6 NA 2.6 307363845739. 7670 697740913973. 17410 4 75.0 2.37 ## 5 CHL 2008 16708258 1.07 756096. 22.5 NA NA 167969056839. 10050 254260262605. 15220 NA 78.3 1.90 ## 6 URY 2008 3340221 0.254 176220 19.1 24.2 0.2 25752230257. 7710 47817999408. 14320 5 76.4 2.03 ## 7 ARG 2009 40482788 1.00 2780400 14.8 NA 2.6 315586430026. 7800 657382734891. 16240 4 75.1 2.36 ## 8 CHL 2009 16886186 1.06 756096. 22.7 25.3 2.6 168009833889. 9950 254255791261. 15060 4.6 78.6 1.89 ## 9 URY 2009 3349676 0.283 176220 19.1 21 0.2 29494248573. 8810 50075569089. 14950 4.8 76.6 2.02 ## 10 ARG 2010 40788453 0.752 2780400 14.9 NA 1.1 378241273936. 9270 729853440301. 17890 4.6 75.3 2.35 ## # ... with 20 more rows, and 42 more variables: adolescent_fertility_rate_births_per_1_000_women_ages_15_19 &lt;dbl&gt;, contraceptive_prevalence_any_methods_percent_of_women_ages_15_49 &lt;dbl&gt;, ## # births_attended_by_skilled_health_staff_percent_of_total &lt;dbl&gt;, mortality_rate_under_5_per_1_000_live_births &lt;dbl&gt;, prevalence_of_underweight_weight_for_age_percent_of_children_under_5 &lt;dbl&gt;, ## # immunization_measles_percent_of_children_ages_12_23_months &lt;dbl&gt;, primary_completion_rate_total_percent_of_relevant_age_group &lt;dbl&gt;, school_enrollment_primary_percent_gross &lt;dbl&gt;, school_enrollment_secondary_percent_gross &lt;dbl&gt;, ## # school_enrollment_primary_and_secondary_gross_gender_parity_index_gpi &lt;dbl&gt;, prevalence_of_hiv_total_percent_of_population_ages_15_49 &lt;dbl&gt;, forest_area_sq_km &lt;dbl&gt;, terrestrial_and_marine_protected_areas_percent_of_total_territorial_area &lt;dbl&gt;, ## # annual_freshwater_withdrawals_total_percent_of_internal_resources &lt;dbl&gt;, urban_population_growth_annual_percent &lt;dbl&gt;, energy_use_kg_of_oil_equivalent_per_capita &lt;dbl&gt;, co2_emissions_metric_tons_per_capita &lt;dbl&gt;, ## # electric_power_consumption_k_wh_per_capita &lt;dbl&gt;, gdp_current_us &lt;dbl&gt;, gdp_growth_annual_percent &lt;dbl&gt;, inflation_gdp_deflator_annual_percent &lt;dbl&gt;, agriculture_forestry_and_fishing_value_added_percent_of_gdp &lt;dbl&gt;, ## # industry_including_construction_value_added_percent_of_gdp &lt;dbl&gt;, exports_of_goods_and_services_percent_of_gdp &lt;dbl&gt;, imports_of_goods_and_services_percent_of_gdp &lt;dbl&gt;, gross_capital_formation_percent_of_gdp &lt;dbl&gt;, ## # revenue_excluding_grants_percent_of_gdp &lt;dbl&gt;, time_required_to_start_a_business_days &lt;dbl&gt;, domestic_credit_provided_by_financial_sector_percent_of_gdp &lt;dbl&gt;, tax_revenue_percent_of_gdp &lt;dbl&gt;, military_expenditure_percent_of_gdp &lt;dbl&gt;, ## # mobile_cellular_subscriptions_per_100_people &lt;dbl&gt;, high_technology_exports_percent_of_manufactured_exports &lt;dbl&gt;, statistical_capacity_score_overall_average &lt;dbl&gt;, merchandise_trade_percent_of_gdp &lt;dbl&gt;, ## # net_barter_terms_of_trade_index_2000_100 &lt;dbl&gt;, external_debt_stocks_total_dod_current_us &lt;lgl&gt;, total_debt_service_percent_of_exports_of_goods_services_and_primary_income &lt;lgl&gt;, net_migration &lt;dbl&gt;, ## # personal_remittances_received_current_us &lt;dbl&gt;, foreign_direct_investment_net_inflows_bo_p_current_us &lt;dbl&gt;, net_official_development_assistance_and_official_aid_received_current_us &lt;dbl&gt; ¿Cómo podemos añadir toda esta nueva información a nuestra base original? No podemos simplemente pegar las columnas unas al lado de otras con bind_cols() (los números de filas son distintos, lo mismo con el orden de las observaciones). Lo mejor es realizar una unión de bases (merge/join). Lejos la más común de estas operaciones es la unión izquierda, en la que queremos añadir información a una base (la izquierda) a partir de otra (la derecha). left_join() nos permitirá hacer esto, mirando las observaciones de ambas bases donde las columnas de identificación toman los mismos valores: df_robos_cono_sur_con_wdi &lt;- left_join( x = df_robos_cono_sur, y = df_wdi, by = c(&quot;pais_codigo&quot;, &quot;anio&quot;) # by dice cuáles son las variables de id. ) df_robos_cono_sur_con_wdi ## # A tibble: 33 x 59 ## pais pais_codigo anio robos_c100k population_total population_grow~ surface_area_sq~ population_dens~ poverty_headcou~ poverty_headcou~ gni_atlas_metho~ gni_per_capita_~ gni_ppp_current~ gni_per_capita_~ income_share_he~ life_expectancy~ ## &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Arge~ ARG 2006 738. NA NA NA NA NA NA NA NA NA NA NA NA ## 2 Arge~ ARG 2007 662. 39684295 0.999 2780400 14.5 NA 2.9 258429317135. 6510 656745628034. 16550 3.9 74.8 ## 3 Arge~ ARG 2008 704. 40080160 0.993 2780400 14.6 NA 2.6 307363845739. 7670 697740913973. 17410 4 75.0 ## 4 Arge~ ARG 2009 NA 40482788 1.00 2780400 14.8 NA 2.6 315586430026. 7800 657382734891. 16240 4 75.1 ## 5 Arge~ ARG 2010 NA 40788453 0.752 2780400 14.9 NA 1.1 378241273936. 9270 729853440301. 17890 4.6 75.3 ## 6 Arge~ ARG 2011 NA 41261490 1.15 2780400 15.1 NA 0.9 442037545216. 10710 794325172722. 19250 4.8 75.4 ## 7 Arge~ ARG 2012 NA 41733271 1.14 2780400 15.2 NA 0.8 496046283910. 11890 805324243205. 19300 4.9 75.6 ## 8 Arge~ ARG 2013 NA 42202935 1.12 2780400 15.4 NA 0.8 543285805981. 12870 841055034261. 19930 5 75.8 ## 9 Arge~ ARG 2014 668. 42669500 1.10 2780400 15.6 NA 0.7 526784533342. 12350 836246704582. 19600 5.1 75.9 ## 10 Arge~ ARG 2015 626. 43131966 1.08 2780400 15.8 NA NA 543279945585. 12600 869846606665. 20170 NA 76.1 ## # ... with 23 more rows, and 43 more variables: fertility_rate_total_births_per_woman &lt;dbl&gt;, adolescent_fertility_rate_births_per_1_000_women_ages_15_19 &lt;dbl&gt;, contraceptive_prevalence_any_methods_percent_of_women_ages_15_49 &lt;dbl&gt;, ## # births_attended_by_skilled_health_staff_percent_of_total &lt;dbl&gt;, mortality_rate_under_5_per_1_000_live_births &lt;dbl&gt;, prevalence_of_underweight_weight_for_age_percent_of_children_under_5 &lt;dbl&gt;, ## # immunization_measles_percent_of_children_ages_12_23_months &lt;dbl&gt;, primary_completion_rate_total_percent_of_relevant_age_group &lt;dbl&gt;, school_enrollment_primary_percent_gross &lt;dbl&gt;, school_enrollment_secondary_percent_gross &lt;dbl&gt;, ## # school_enrollment_primary_and_secondary_gross_gender_parity_index_gpi &lt;dbl&gt;, prevalence_of_hiv_total_percent_of_population_ages_15_49 &lt;dbl&gt;, forest_area_sq_km &lt;dbl&gt;, terrestrial_and_marine_protected_areas_percent_of_total_territorial_area &lt;dbl&gt;, ## # annual_freshwater_withdrawals_total_percent_of_internal_resources &lt;dbl&gt;, urban_population_growth_annual_percent &lt;dbl&gt;, energy_use_kg_of_oil_equivalent_per_capita &lt;dbl&gt;, co2_emissions_metric_tons_per_capita &lt;dbl&gt;, ## # electric_power_consumption_k_wh_per_capita &lt;dbl&gt;, gdp_current_us &lt;dbl&gt;, gdp_growth_annual_percent &lt;dbl&gt;, inflation_gdp_deflator_annual_percent &lt;dbl&gt;, agriculture_forestry_and_fishing_value_added_percent_of_gdp &lt;dbl&gt;, ## # industry_including_construction_value_added_percent_of_gdp &lt;dbl&gt;, exports_of_goods_and_services_percent_of_gdp &lt;dbl&gt;, imports_of_goods_and_services_percent_of_gdp &lt;dbl&gt;, gross_capital_formation_percent_of_gdp &lt;dbl&gt;, ## # revenue_excluding_grants_percent_of_gdp &lt;dbl&gt;, time_required_to_start_a_business_days &lt;dbl&gt;, domestic_credit_provided_by_financial_sector_percent_of_gdp &lt;dbl&gt;, tax_revenue_percent_of_gdp &lt;dbl&gt;, military_expenditure_percent_of_gdp &lt;dbl&gt;, ## # mobile_cellular_subscriptions_per_100_people &lt;dbl&gt;, high_technology_exports_percent_of_manufactured_exports &lt;dbl&gt;, statistical_capacity_score_overall_average &lt;dbl&gt;, merchandise_trade_percent_of_gdp &lt;dbl&gt;, ## # net_barter_terms_of_trade_index_2000_100 &lt;dbl&gt;, external_debt_stocks_total_dod_current_us &lt;lgl&gt;, total_debt_service_percent_of_exports_of_goods_services_and_primary_income &lt;lgl&gt;, net_migration &lt;dbl&gt;, ## # personal_remittances_received_current_us &lt;dbl&gt;, foreign_direct_investment_net_inflows_bo_p_current_us &lt;dbl&gt;, net_official_development_assistance_and_official_aid_received_current_us &lt;dbl&gt; "],["manejo-av-ej.html", "05B - Manejo avanzado de datos (ejercicio)", " 05B - Manejo avanzado de datos (ejercicio) Como al principio de todo script, recomiendo reiniciar R. Esto lo conseguimos en RStudio Cloud con Session &gt; Restart R y clickeando en la escoba del panel de Environment (superior derecho). library(tidyverse) En el ejercicio trabajaremos con un panel de datos de países latinoamericanos en este milenio. Tenemos información sobre gasto en burocracia y pobreza; buscaremos responder a las preguntas (c) y (d). Los siguientes son los datos de gasto en burocracia, 2000-2017, que tienen por fuente el Banco Mundial (2017), compilados por Our World in Data: # (este no es el formato original de OWID, aunque se parece bastante) df_gasto_burocracia &lt;- read_csv(&quot;datos/gasto_burocracia.csv&quot;) ## Parsed with column specification: ## cols( ## PAÍS = col_character(), ## AÑO = col_double(), ## `% DE BUROCRACIA EN GASTO FISCAL` = col_double() ## ) df_gasto_burocracia ## # A tibble: 216 x 3 ## PAÍS AÑO `% DE BUROCRACIA EN GASTO FISCAL` ## &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Argentina 2000 14.7 ## 2 Argentina 2001 14.2 ## 3 Argentina 2002 11.3 ## 4 Argentina 2003 11.7 ## 5 Argentina 2004 11.5 ## 6 Argentina 2005 NA ## 7 Argentina 2006 NA ## 8 Argentina 2007 NA ## 9 Argentina 2008 NA ## 10 Argentina 2009 NA ## # ... with 206 more rows Estos son los datos de (extrema) pobreza, 2001-2017, medida como el porcentaje de la población que vive con menos de USD 1.90 al día (Banco Mundial, 2019): # (este no es el formato original del Banco Mundial, aunque se parece bastante) df_pobreza &lt;- read_csv(&quot;datos/pobreza.csv&quot;) ## Parsed with column specification: ## cols( ## country = col_character(), ## `2001` = col_double(), ## `2002` = col_double(), ## `2003` = col_double(), ## `2004` = col_double(), ## `2005` = col_double(), ## `2006` = col_double(), ## `2007` = col_double(), ## `2008` = col_double(), ## `2009` = col_double(), ## `2010` = col_double(), ## `2011` = col_double(), ## `2012` = col_double(), ## `2013` = col_double(), ## `2014` = col_double(), ## `2015` = col_double(), ## `2016` = col_double(), ## `2017` = col_double() ## ) df_pobreza ## # A tibble: 12 x 18 ## country `2001` `2002` `2003` `2004` `2005` `2006` `2007` `2008` `2009` `2010` `2011` `2012` `2013` `2014` `2015` `2016` `2017` ## &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Argentina 9.4 14 7 5.4 3.9 3.3 2.9 2.6 2.6 1.1 0.9 0.8 0.8 0.7 NA 0.6 0.4 ## 2 Bolivia 22.8 24.7 NA 13.7 19.3 16.4 12.4 11.1 10.5 NA 7.3 8.2 6.9 5.8 6.4 7.1 5.8 ## 3 Brazil 11.6 10.3 11.1 9.7 8.6 7.2 6.8 5.6 5.4 NA 4.7 3.8 3.8 2.8 3.4 4.3 4.8 ## 4 Chile NA NA 4.2 NA NA 2.4 NA NA 2.6 NA 1.6 NA 0.9 NA 1.3 NA 0.7 ## 5 Colombia 19.7 14.3 12 10.9 9.7 NA NA 10.4 8.9 7.7 6.3 6.2 5.7 5 4.5 4.5 3.9 ## 6 Ecuador NA NA 14.5 15 12.1 8.1 8.5 7.5 7.2 5.6 4.7 4.5 3.2 2.6 3.4 3.6 3.2 ## 7 Guyana NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA ## 8 Peru 17.2 15 11.7 13.5 15.3 13.3 11 9 7 5.5 5.2 4.7 4.3 3.7 3.6 3.5 3.4 ## 9 Paraguay 8.9 13.2 8.3 5.7 6.1 7.9 7.8 4.3 5.8 5.5 5 3.3 1.8 2.4 1.9 1.7 1.2 ## 10 Suriname NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA ## 11 Uruguay NA NA NA NA NA 0.5 0.3 0.2 0.2 0.1 0.1 0.1 0.2 0.1 0.1 0.1 0.1 ## 12 Venezuela 11 18.2 22.7 19.8 18.9 10.2 NA NA NA NA NA NA NA NA NA NA NA ¿Qué necesitamos hacer con nuestros datos para poder contestar las preguntas C) y D)? A continuación, enumera las distintas modificaciones que debemos hacer para limpiar los datos, tomando en cuenta los contenidos de esta unidad. Modificación A Modificación B Etc. Ejecuta el plan de modificación/limpieza de A). Para Latinoamérica en su conjunto, ¿cómo ha evolucionado en el tiempo la media del % de gasto fiscal invertido en burocracia? C1) Genera un gráfico con dicha evolución. C2) Encuentra los valores promedios antes y después de la crisis del 2008 (te ayudará crear una variable dummy/binaria a partir de los años). A nivel latinoamericano, ¿existe una relación entre pobreza y % de gasto fiscal invertido en burocracia? Genera un gráfico para responder esta pregunta. Para cada país, utiliza el año más reciente en el que hay datos para ambas variables. "],["part-análisis-de-texto.html", "(PART) Análisis de texto", " (PART) Análisis de texto "],["texto-analisis.html", "06A - Análisis de texto Inicio: cargar paquetes, base de datos Tokens y frecuencias Separar el análisis de frecuencias por secciones Obtener las palabras más distintivas al comparar documentos", " 06A - Análisis de texto Si quieres correr estos scripts localmente, acá puedes descargar el proyecto comprimido en .zip. Paquetes que necesitas tener instalados antes de comenzar con el proyecto (06A, 06B, 06C): tidyverse, tidytext, stopwords, gutenbergr. Inicio: cargar paquetes, base de datos library(tidyverse) # install.packages(&quot;tidytext&quot;) # install.packages(&quot;stopwords&quot;) library(tidytext) ## Warning: package &#39;tidytext&#39; was built under R version 4.0.3 library(SnowballC) # se instala solo con tidytext ## Warning: package &#39;SnowballC&#39; was built under R version 4.0.3 library(stopwords) ## Warning: package &#39;stopwords&#39; was built under R version 4.0.3 Hoy trabajaremos con el texto de tres libros clásicos de teoría política: Leviathan de Hobbes (1651), A Vindication of the Rights of Woman de Mary Wollstonecraft (1792) y On Liberty de John Stuart Mill (1859). Como son libros antiguos, ya son parte del dominio público y se pueden descargar desde Project Gutenberg. Hay un paquete de R que ayuda a hacer esto automáticamente: pueden ver cómo descargué los libros y edité ligeramente las bases en el script 06c de este proyecto. Carguemos las bases: leviathan &lt;- read_csv(&quot;datos/leviathan.csv&quot;) ## Parsed with column specification: ## cols( ## author = col_character(), ## book = col_character(), ## gutenberg_id = col_double(), ## chapter = col_double(), ## line = col_double(), ## text = col_character() ## ) rights &lt;- read_csv(&quot;datos/rights_of_women.csv&quot;) ## Parsed with column specification: ## cols( ## author = col_character(), ## book = col_character(), ## gutenberg_id = col_double(), ## chapter = col_double(), ## line = col_double(), ## text = col_character() ## ) on_liberty &lt;- read_csv(&quot;datos/on_liberty.csv&quot;) ## Parsed with column specification: ## cols( ## author = col_character(), ## book = col_character(), ## gutenberg_id = col_double(), ## chapter = col_double(), ## line = col_double(), ## text = col_character() ## ) Vamos a comenzar trabajando con Leviathan y A Vindication of the Rights of Woman, dejando On Liberty para algunos ejercicios. Tokens y frecuencias La unidad de análisis de estas bases de datos es la línea de texto. Esto es bastante común en los cuerpos de texto que provienen de libros / recursos impresos (la mayoría). Es probable que sea igual en, por ejemplo, programas de candidaturas políticas. Lo más común en análisis de texto, sin embargo, es analizar palabras o n-gramas (conjuntos de palabras). Esto no quita que a veces otras unidades de análisis sean interesantes (líneas, párrafos, capítulos, etc.), dependiendo de nuestras preguntas de investigación. Estas diferentes unidades de análisis de texto se llaman tokens en tidytext, y es posible pasar una base a una unidad de análisis más pequeña con la función unnest_tokens(). Obtengamos las palabras en Leviathan: palabras_leviathan &lt;- leviathan %&gt;% unnest_tokens(output = word, input = text, token = &quot;words&quot;) ¿Cuáles son las palabras más usadas en el libro? palabras_leviathan %&gt;% count(word, sort = TRUE) ## # A tibble: 9,965 x 2 ## word n ## &lt;chr&gt; &lt;int&gt; ## 1 the 14969 ## 2 of 10867 ## 3 and 7336 ## 4 to 7275 ## 5 is 4863 ## 6 that 4810 ## 7 in 4155 ## 8 a 3145 ## 9 by 2635 ## 10 for 2523 ## # ... with 9,955 more rows Eliminar palabras vacías (stop words) y enraizar (stem) Que este tipo de palabras sean las más comunes es lógico. Sin embargo, no suelen darnos mucha información sobre los textos. Por suerte existen diccionarios de palabras vacías (stop words), que nos permitirán eliminarlas de nuestra base: stop_words_en &lt;- stopwords(language = &quot;en&quot;, source = &quot;smart&quot;) # si es que fuera en español... # stop_words_es &lt;- stopwords(language = &quot;es&quot;, source = &quot;snowball&quot;) stop_words_en ## [1] &quot;a&quot; &quot;a&#39;s&quot; &quot;able&quot; &quot;about&quot; &quot;above&quot; &quot;according&quot; &quot;accordingly&quot; &quot;across&quot; &quot;actually&quot; &quot;after&quot; &quot;afterwards&quot; &quot;again&quot; &quot;against&quot; &quot;ain&#39;t&quot; &quot;all&quot; ## [16] &quot;allow&quot; &quot;allows&quot; &quot;almost&quot; &quot;alone&quot; &quot;along&quot; &quot;already&quot; &quot;also&quot; &quot;although&quot; &quot;always&quot; &quot;am&quot; &quot;among&quot; &quot;amongst&quot; &quot;an&quot; &quot;and&quot; &quot;another&quot; ## [31] &quot;any&quot; &quot;anybody&quot; &quot;anyhow&quot; &quot;anyone&quot; &quot;anything&quot; &quot;anyway&quot; &quot;anyways&quot; &quot;anywhere&quot; &quot;apart&quot; &quot;appear&quot; &quot;appreciate&quot; &quot;appropriate&quot; &quot;are&quot; &quot;aren&#39;t&quot; &quot;around&quot; ## [46] &quot;as&quot; &quot;aside&quot; &quot;ask&quot; &quot;asking&quot; &quot;associated&quot; &quot;at&quot; &quot;available&quot; &quot;away&quot; &quot;awfully&quot; &quot;b&quot; &quot;be&quot; &quot;became&quot; &quot;because&quot; &quot;become&quot; &quot;becomes&quot; ## [61] &quot;becoming&quot; &quot;been&quot; &quot;before&quot; &quot;beforehand&quot; &quot;behind&quot; &quot;being&quot; &quot;believe&quot; &quot;below&quot; &quot;beside&quot; &quot;besides&quot; &quot;best&quot; &quot;better&quot; &quot;between&quot; &quot;beyond&quot; &quot;both&quot; ## [76] &quot;brief&quot; &quot;but&quot; &quot;by&quot; &quot;c&quot; &quot;c&#39;mon&quot; &quot;c&#39;s&quot; &quot;came&quot; &quot;can&quot; &quot;can&#39;t&quot; &quot;cannot&quot; &quot;cant&quot; &quot;cause&quot; &quot;causes&quot; &quot;certain&quot; &quot;certainly&quot; ## [91] &quot;changes&quot; &quot;clearly&quot; &quot;co&quot; &quot;com&quot; &quot;come&quot; &quot;comes&quot; &quot;concerning&quot; &quot;consequently&quot; &quot;consider&quot; &quot;considering&quot; &quot;contain&quot; &quot;containing&quot; &quot;contains&quot; &quot;corresponding&quot; &quot;could&quot; ## [106] &quot;couldn&#39;t&quot; &quot;course&quot; &quot;currently&quot; &quot;d&quot; &quot;definitely&quot; &quot;described&quot; &quot;despite&quot; &quot;did&quot; &quot;didn&#39;t&quot; &quot;different&quot; &quot;do&quot; &quot;does&quot; &quot;doesn&#39;t&quot; &quot;doing&quot; &quot;don&#39;t&quot; ## [121] &quot;done&quot; &quot;down&quot; &quot;downwards&quot; &quot;during&quot; &quot;e&quot; &quot;each&quot; &quot;edu&quot; &quot;eg&quot; &quot;eight&quot; &quot;either&quot; &quot;else&quot; &quot;elsewhere&quot; &quot;enough&quot; &quot;entirely&quot; &quot;especially&quot; ## [136] &quot;et&quot; &quot;etc&quot; &quot;even&quot; &quot;ever&quot; &quot;every&quot; &quot;everybody&quot; &quot;everyone&quot; &quot;everything&quot; &quot;everywhere&quot; &quot;ex&quot; &quot;exactly&quot; &quot;example&quot; &quot;except&quot; &quot;f&quot; &quot;far&quot; ## [151] &quot;few&quot; &quot;fifth&quot; &quot;first&quot; &quot;five&quot; &quot;followed&quot; &quot;following&quot; &quot;follows&quot; &quot;for&quot; &quot;former&quot; &quot;formerly&quot; &quot;forth&quot; &quot;four&quot; &quot;from&quot; &quot;further&quot; &quot;furthermore&quot; ## [166] &quot;g&quot; &quot;get&quot; &quot;gets&quot; &quot;getting&quot; &quot;given&quot; &quot;gives&quot; &quot;go&quot; &quot;goes&quot; &quot;going&quot; &quot;gone&quot; &quot;got&quot; &quot;gotten&quot; &quot;greetings&quot; &quot;h&quot; &quot;had&quot; ## [181] &quot;hadn&#39;t&quot; &quot;happens&quot; &quot;hardly&quot; &quot;has&quot; &quot;hasn&#39;t&quot; &quot;have&quot; &quot;haven&#39;t&quot; &quot;having&quot; &quot;he&quot; &quot;he&#39;s&quot; &quot;hello&quot; &quot;help&quot; &quot;hence&quot; &quot;her&quot; &quot;here&quot; ## [196] &quot;here&#39;s&quot; &quot;hereafter&quot; &quot;hereby&quot; &quot;herein&quot; &quot;hereupon&quot; &quot;hers&quot; &quot;herself&quot; &quot;hi&quot; &quot;him&quot; &quot;himself&quot; &quot;his&quot; &quot;hither&quot; &quot;hopefully&quot; &quot;how&quot; &quot;howbeit&quot; ## [211] &quot;however&quot; &quot;i&quot; &quot;i&#39;d&quot; &quot;i&#39;ll&quot; &quot;i&#39;m&quot; &quot;i&#39;ve&quot; &quot;ie&quot; &quot;if&quot; &quot;ignored&quot; &quot;immediate&quot; &quot;in&quot; &quot;inasmuch&quot; &quot;inc&quot; &quot;indeed&quot; &quot;indicate&quot; ## [226] &quot;indicated&quot; &quot;indicates&quot; &quot;inner&quot; &quot;insofar&quot; &quot;instead&quot; &quot;into&quot; &quot;inward&quot; &quot;is&quot; &quot;isn&#39;t&quot; &quot;it&quot; &quot;it&#39;d&quot; &quot;it&#39;ll&quot; &quot;it&#39;s&quot; &quot;its&quot; &quot;itself&quot; ## [241] &quot;j&quot; &quot;just&quot; &quot;k&quot; &quot;keep&quot; &quot;keeps&quot; &quot;kept&quot; &quot;know&quot; &quot;knows&quot; &quot;known&quot; &quot;l&quot; &quot;last&quot; &quot;lately&quot; &quot;later&quot; &quot;latter&quot; &quot;latterly&quot; ## [256] &quot;least&quot; &quot;less&quot; &quot;lest&quot; &quot;let&quot; &quot;let&#39;s&quot; &quot;like&quot; &quot;liked&quot; &quot;likely&quot; &quot;little&quot; &quot;look&quot; &quot;looking&quot; &quot;looks&quot; &quot;ltd&quot; &quot;m&quot; &quot;mainly&quot; ## [271] &quot;many&quot; &quot;may&quot; &quot;maybe&quot; &quot;me&quot; &quot;mean&quot; &quot;meanwhile&quot; &quot;merely&quot; &quot;might&quot; &quot;more&quot; &quot;moreover&quot; &quot;most&quot; &quot;mostly&quot; &quot;much&quot; &quot;must&quot; &quot;my&quot; ## [286] &quot;myself&quot; &quot;n&quot; &quot;name&quot; &quot;namely&quot; &quot;nd&quot; &quot;near&quot; &quot;nearly&quot; &quot;necessary&quot; &quot;need&quot; &quot;needs&quot; &quot;neither&quot; &quot;never&quot; &quot;nevertheless&quot; &quot;new&quot; &quot;next&quot; ## [301] &quot;nine&quot; &quot;no&quot; &quot;nobody&quot; &quot;non&quot; &quot;none&quot; &quot;noone&quot; &quot;nor&quot; &quot;normally&quot; &quot;not&quot; &quot;nothing&quot; &quot;novel&quot; &quot;now&quot; &quot;nowhere&quot; &quot;o&quot; &quot;obviously&quot; ## [316] &quot;of&quot; &quot;off&quot; &quot;often&quot; &quot;oh&quot; &quot;ok&quot; &quot;okay&quot; &quot;old&quot; &quot;on&quot; &quot;once&quot; &quot;one&quot; &quot;ones&quot; &quot;only&quot; &quot;onto&quot; &quot;or&quot; &quot;other&quot; ## [331] &quot;others&quot; &quot;otherwise&quot; &quot;ought&quot; &quot;our&quot; &quot;ours&quot; &quot;ourselves&quot; &quot;out&quot; &quot;outside&quot; &quot;over&quot; &quot;overall&quot; &quot;own&quot; &quot;p&quot; &quot;particular&quot; &quot;particularly&quot; &quot;per&quot; ## [346] &quot;perhaps&quot; &quot;placed&quot; &quot;please&quot; &quot;plus&quot; &quot;possible&quot; &quot;presumably&quot; &quot;probably&quot; &quot;provides&quot; &quot;q&quot; &quot;que&quot; &quot;quite&quot; &quot;qv&quot; &quot;r&quot; &quot;rather&quot; &quot;rd&quot; ## [361] &quot;re&quot; &quot;really&quot; &quot;reasonably&quot; &quot;regarding&quot; &quot;regardless&quot; &quot;regards&quot; &quot;relatively&quot; &quot;respectively&quot; &quot;right&quot; &quot;s&quot; &quot;said&quot; &quot;same&quot; &quot;saw&quot; &quot;say&quot; &quot;saying&quot; ## [376] &quot;says&quot; &quot;second&quot; &quot;secondly&quot; &quot;see&quot; &quot;seeing&quot; &quot;seem&quot; &quot;seemed&quot; &quot;seeming&quot; &quot;seems&quot; &quot;seen&quot; &quot;self&quot; &quot;selves&quot; &quot;sensible&quot; &quot;sent&quot; &quot;serious&quot; ## [391] &quot;seriously&quot; &quot;seven&quot; &quot;several&quot; &quot;shall&quot; &quot;she&quot; &quot;should&quot; &quot;shouldn&#39;t&quot; &quot;since&quot; &quot;six&quot; &quot;so&quot; &quot;some&quot; &quot;somebody&quot; &quot;somehow&quot; &quot;someone&quot; &quot;something&quot; ## [406] &quot;sometime&quot; &quot;sometimes&quot; &quot;somewhat&quot; &quot;somewhere&quot; &quot;soon&quot; &quot;sorry&quot; &quot;specified&quot; &quot;specify&quot; &quot;specifying&quot; &quot;still&quot; &quot;sub&quot; &quot;such&quot; &quot;sup&quot; &quot;sure&quot; &quot;t&quot; ## [421] &quot;t&#39;s&quot; &quot;take&quot; &quot;taken&quot; &quot;tell&quot; &quot;tends&quot; &quot;th&quot; &quot;than&quot; &quot;thank&quot; &quot;thanks&quot; &quot;thanx&quot; &quot;that&quot; &quot;that&#39;s&quot; &quot;thats&quot; &quot;the&quot; &quot;their&quot; ## [436] &quot;theirs&quot; &quot;them&quot; &quot;themselves&quot; &quot;then&quot; &quot;thence&quot; &quot;there&quot; &quot;there&#39;s&quot; &quot;thereafter&quot; &quot;thereby&quot; &quot;therefore&quot; &quot;therein&quot; &quot;theres&quot; &quot;thereupon&quot; &quot;these&quot; &quot;they&quot; ## [451] &quot;they&#39;d&quot; &quot;they&#39;ll&quot; &quot;they&#39;re&quot; &quot;they&#39;ve&quot; &quot;think&quot; &quot;third&quot; &quot;this&quot; &quot;thorough&quot; &quot;thoroughly&quot; &quot;those&quot; &quot;though&quot; &quot;three&quot; &quot;through&quot; &quot;throughout&quot; &quot;thru&quot; ## [466] &quot;thus&quot; &quot;to&quot; &quot;together&quot; &quot;too&quot; &quot;took&quot; &quot;toward&quot; &quot;towards&quot; &quot;tried&quot; &quot;tries&quot; &quot;truly&quot; &quot;try&quot; &quot;trying&quot; &quot;twice&quot; &quot;two&quot; &quot;u&quot; ## [481] &quot;un&quot; &quot;under&quot; &quot;unfortunately&quot; &quot;unless&quot; &quot;unlikely&quot; &quot;until&quot; &quot;unto&quot; &quot;up&quot; &quot;upon&quot; &quot;us&quot; &quot;use&quot; &quot;used&quot; &quot;useful&quot; &quot;uses&quot; &quot;using&quot; ## [496] &quot;usually&quot; &quot;uucp&quot; &quot;v&quot; &quot;value&quot; &quot;various&quot; &quot;very&quot; &quot;via&quot; &quot;viz&quot; &quot;vs&quot; &quot;w&quot; &quot;want&quot; &quot;wants&quot; &quot;was&quot; &quot;wasn&#39;t&quot; &quot;way&quot; ## [511] &quot;we&quot; &quot;we&#39;d&quot; &quot;we&#39;ll&quot; &quot;we&#39;re&quot; &quot;we&#39;ve&quot; &quot;welcome&quot; &quot;well&quot; &quot;went&quot; &quot;were&quot; &quot;weren&#39;t&quot; &quot;what&quot; &quot;what&#39;s&quot; &quot;whatever&quot; &quot;when&quot; &quot;whence&quot; ## [526] &quot;whenever&quot; &quot;where&quot; &quot;where&#39;s&quot; &quot;whereafter&quot; &quot;whereas&quot; &quot;whereby&quot; &quot;wherein&quot; &quot;whereupon&quot; &quot;wherever&quot; &quot;whether&quot; &quot;which&quot; &quot;while&quot; &quot;whither&quot; &quot;who&quot; &quot;who&#39;s&quot; ## [541] &quot;whoever&quot; &quot;whole&quot; &quot;whom&quot; &quot;whose&quot; &quot;why&quot; &quot;will&quot; &quot;willing&quot; &quot;wish&quot; &quot;with&quot; &quot;within&quot; &quot;without&quot; &quot;won&#39;t&quot; &quot;wonder&quot; &quot;would&quot; &quot;would&quot; ## [556] &quot;wouldn&#39;t&quot; &quot;x&quot; &quot;y&quot; &quot;yes&quot; &quot;yet&quot; &quot;you&quot; &quot;you&#39;d&quot; &quot;you&#39;ll&quot; &quot;you&#39;re&quot; &quot;you&#39;ve&quot; &quot;your&quot; &quot;yours&quot; &quot;yourself&quot; &quot;yourselves&quot; &quot;z&quot; ## [571] &quot;zero&quot; palabras_leviathan_limpio &lt;- leviathan %&gt;% unnest_tokens(output = word, input = text, token = &quot;words&quot;) %&gt;% # filtrar stop words! filter(!(word %in% stop_words_en)) palabras_leviathan_limpio ## # A tibble: 79,118 x 6 ## author book gutenberg_id chapter line word ## &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; ## 1 Thomas Hobbes Leviathan 3207 0 1 leviathan ## 2 Thomas Hobbes Leviathan 3207 0 2 thomas ## 3 Thomas Hobbes Leviathan 3207 0 2 hobbes ## 4 Thomas Hobbes Leviathan 3207 0 3 1651 ## 5 Thomas Hobbes Leviathan 3207 0 4 leviathan ## 6 Thomas Hobbes Leviathan 3207 0 4 matter ## 7 Thomas Hobbes Leviathan 3207 0 4 forme ## 8 Thomas Hobbes Leviathan 3207 0 4 power ## 9 Thomas Hobbes Leviathan 3207 0 4 common ## 10 Thomas Hobbes Leviathan 3207 0 4 wealth ## # ... with 79,108 more rows Ahora calculemos las frecuencias: palabras_leviathan_limpio %&gt;% count(word, sort = T) ## # A tibble: 9,559 x 2 ## word n ## &lt;chr&gt; &lt;int&gt; ## 1 man 1071 ## 2 god 1068 ## 3 men 998 ## 4 power 745 ## 5 law 662 ## 6 common 632 ## 7 soveraign 497 ## 8 hath 446 ## 9 wealth 438 ## 10 nature 420 ## # ... with 9,549 more rows Por cierto, otra herramienta útil para limpiar el análisis posterior es el stemming, el ejercicio de llevar las palabras a su raíz. Por ejemplo: SnowballC::wordStem(c(&quot;caminaba&quot;, &quot;caminó&quot;), language = &quot;es&quot;) ## [1] &quot;camin&quot; &quot;camin&quot; Podríamos realizar esto para las palabras de nuestra base: palabras_leviathan_limpio_ej_stemming &lt;- palabras_leviathan_limpio %&gt;% mutate(word = SnowballC::wordStem(word, language = &quot;en&quot;)) length(unique(palabras_leviathan_limpio$word)) ## [1] 9559 length(unique(palabras_leviathan_limpio_ej_stemming$word)) ## [1] 6351 (Ejercicio a) ¿Cuáles son las palabras más comunes en A Vindication of the Rights of Woman de Mary Wollstonecraft, eliminando stop words? Incluye una columna con la proporción de aparición de cada palabra en el libro. Crea una base palabras_rights_limpio, similar a la que hicimos antes, en el proceso. Tu código: palabras_rights_limpio &lt;- rights %&gt;% unnest_tokens(output = word, input = text, token = &quot;words&quot;) %&gt;% # filtrar stop words! filter(!(word %in% stop_words_en)) Hacer un ránking de las palabras más comunes Hagamos un gráfico de ránking para las diez palabras más comunes en el libro de Wollstonecraft: rank_rights &lt;- palabras_rights_limpio %&gt;% count(word, sort = T) %&gt;% slice(1:10) ggplot(data = rank_rights, mapping = aes(x = n, y = fct_reorder(as.factor(word), n), label = n)) + geom_col() + geom_label() + labs(title = &quot;Palabras más comunes en el libro&quot;, subtitle = &quot;&#39;A Vindication of the Rights of Woman&#39; (1792)&quot;, x = &quot;Frecuencia&quot;, y = &quot;&quot;, caption = &quot;Fuente: Elaboración propia en base a Wollstonecraft (1792)&quot;) (Ejercicio b) Genera un gráfico con las palabras más comunes en On Liberty de John Stuart Mill. Tu código: Separar el análisis de frecuencias por secciones Obtengamos las diez palabras más comunes de cada capítulo, con un combo de count(), group_by() y slice(): rank_rights_caps &lt;- palabras_rights_limpio %&gt;% count(word, chapter, sort = T) %&gt;% group_by(chapter) %&gt;% slice(1:10) %&gt;% ungroup() Ahora podemos graficarlas con las facetas de ggplot2: ggplot(data = rank_rights_caps %&gt;% filter(chapter != 0), mapping = aes(x = n, # permite ordenar las barras dentro de cada faceta: y = reorder_within(as.factor(word), n, chapter))) + geom_col() + facet_wrap(~chapter, scales = &quot;free_y&quot;) + # permite ordenar las barras dentro de cada faceta: scale_y_reordered() + labs(x = &quot;Frecuencia&quot;, y = &quot;&quot;, title = &quot;Palabras más comunes en cada capítulo&quot;, subtitle = &quot;&#39;A Vindication of the Rights of Woman&#39; (1792)&quot;, caption = &quot;Elaboración propia en base a Wollstonecraft (1792)&quot;) Por cierto, cuando se separa el análisis decimos que este se realiza por documentos. Estos documentos pueden ser capítulos/secciones, como vimos ahora, o simplemente distintos textos/libros. Obtener las palabras más distintivas al comparar documentos Tal vez nuestro objetivo al comparar documentos es encontrar las palabras más distintivas de cada uno (¿por qué mirar las frecuencias puede no ser la mejor forma de hacer esto?). Un cálculo relativamente sencillo de esto es el llamado tf-idf (term frequency - inverse document frequency; Silge &amp; Robinson (2019, cap. 3)). El tf-idf busca medir la frecuencia relativa de un término en un documento (tf) ponderada por qué tan raro es ese término a lo largo de todos los documentos (idf). Tiene dos partes: tf: La frecuencia del término \\(i\\) en el documento \\(d\\) (\\(\\textit{tf}_{i,d}\\)) es simplemente el número de veces que este aparece en el documento divido el total de palabras en el documento. Esto espera ser una medida de qué tanto se repite la palabra en el documento: \\[ tf_{i,d} = \\frac{n_{\\ i\\;en\\;d}}{n_{\\ total\\ términos\\ en\\ d}} \\] idf: Mientras tanto, la frecuencia inversa del término \\(i\\) en los documentos (\\(\\textit{idf}_{i}\\)) es un poco más complicada. Busca ser una medida de qué tan poco común es el uso de una palabra a lo largo de varios documentos. Es el logaritmo natural de la división entre el número de documentos totales y el número de documentos que contienen el término \\(i\\): \\[ idf_i = ln(\\frac{n_{\\ docs}}{n_{\\ docs\\ que\\ contienen\\ i}}) \\] La tf-idf (term frequency - inverse document frequency) es simplemente la multiplicación de ambos números. \\[ \\textit{tf-idf}_{i,d} = \\textit{tf}_{i,d} \\cdot \\textit{idf}_i \\] Por ejemplo: (10 / 100) * # término que aparece en un 10% de los términos del doc. log(8 / 8) # está presente en todos los documentos ## [1] 0 (10 / 100) * # término que aparece en un 10% de los términos del doc. log(8 / 4) # está presente en la mitad de los documentos ## [1] 0.06931472 (10 / 100) * # término que aparece en un 10% de los términos del doc. log(8 / 1) # está presente en un solo documento ## [1] 0.2079442 La función bind_tf_idf() nos permite calcular rápidamente el tf_idf para un conteo de palabras. Obtengamos las diez palabras más distintivas de cada capítulo del libro de Wollstonecraft: tf_idf_rights &lt;- palabras_rights_limpio %&gt;% filter(chapter != 0) %&gt;% count(word, chapter, sort = T) %&gt;% # fíjense en los argumentos: bind_tf_idf(term = word, document = chapter, n = n) tf_idf_rights ## # A tibble: 18,020 x 6 ## word chapter n tf idf tf_idf ## &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 women 4 86 0.0183 0 0 ## 2 reason 5 68 0.0104 0 0 ## 3 man 5 61 0.00934 0 0 ## 4 women 12 51 0.0124 0 0 ## 5 women 13 51 0.0171 0 0 ## 6 women 2 48 0.0140 0 0 ## 7 men 4 47 0.0100 0.0800 0.000803 ## 8 woman 5 45 0.00689 0.167 0.00115 ## 9 man 2 43 0.0126 0 0 ## 10 man 4 43 0.00917 0 0 ## # ... with 18,010 more rows # ahora vamos a quedarnos solo con los diez tf-idf más altos por documento (capítulo): rank_tf_idf_rights &lt;- tf_idf_rights %&gt;% group_by(chapter) %&gt;% arrange(-tf_idf) %&gt;% slice(1:10) %&gt;% ungroup() rank_tf_idf_rights ## # A tibble: 130 x 6 ## word chapter n tf idf tf_idf ## &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 profession 1 5 0.00382 1.47 0.00560 ## 2 barbarism 1 3 0.00229 1.87 0.00429 ## 3 thousands 1 3 0.00229 1.87 0.00429 ## 4 curate 1 2 0.00153 2.56 0.00392 ## 5 deformity 1 2 0.00153 2.56 0.00392 ## 6 monarchy 1 2 0.00153 2.56 0.00392 ## 7 pushes 1 2 0.00153 2.56 0.00392 ## 8 unsound 1 2 0.00153 2.56 0.00392 ## 9 perfection 1 5 0.00382 0.956 0.00365 ## 10 civilization 1 6 0.00458 0.773 0.00354 ## # ... with 120 more rows Ahora podemos graficarlas: ggplot(data = rank_tf_idf_rights, mapping = aes(x = tf_idf, # permite ordenar las barras dentro de cada faceta: y = reorder_within(as.factor(word), tf_idf, chapter))) + geom_col() + # permite ordenar las barras dentro de cada faceta: scale_y_reordered() + theme(axis.text.x = element_text(angle = 90, hjust = 1)) + facet_wrap(~chapter, scales = &quot;free_y&quot;) + labs(x = &quot;tf-idf&quot;, y = &quot;&quot;, title = &quot;Palabras más distintivas de cada capítulo&quot;, subtitle = &quot;&#39;A Vindication of the Rights of Woman&#39; (1792)&quot;, caption = &quot;Elaboración propia en base a Wollstonecraft (1792)&quot;) (Ejercicio c) Grafica las palabras más distintivas al comparar los tres libros. Tip: un paso debería ser unir las tres bases. Hay varias formas de hacer esto, pero te recomiendo experimentar con bind_rows(). Tu código: "],["texto-cadenas.html", "06B - Cadenas de texto Inicio: cargar paquetes, base de datos Cadenas de texto Algunas operaciones simples con texto Funciones para trabajar con patrones Patrones más complejos con expresiones regulares (regex) (Ejercicio f)", " 06B - Cadenas de texto Como al principio de todo script, recomiendo reiniciar R. Esto lo conseguimos en RStudio Cloud con Session &gt; Restart R y clickeando en la escoba del panel de Environment (superior derecho). Inicio: cargar paquetes, base de datos library(tidyverse) df_legisladores_cargos &lt;- read_csv(&quot;datos/df_legisladores_cargos.csv&quot;) ## Parsed with column specification: ## cols( ## nombre_comp = col_character(), ## id = col_double(), ## caja_trayectoria = col_character() ## ) Esta base de datos contiene información de las reseñas parlamentarias de la BCN, para legisladores con cargos entre 1990-presente (ejemplo). La unidad de análisis de esta base es legislador-cargo. Cadenas de texto Los elementos en un vector de caracteres se pueden denominar strings o cadenas de texto. Veamos los primeros elementos del vector caja_trayectoria: head(df_legisladores_cargos$caja_trayectoria) ## [1] &quot;\\nSenador institucional \\n1998- 2006\\n&quot; &quot;\\nDiputado \\n2010- 2014\\nDistrito N° 24Partido por la DemocraciaSucedido por: Jaime Hernán Gonzalo Pilowsky Greene&quot; ## [3] &quot;\\nDiputado \\n2006- 2010\\nDistrito N° 24Partido por la Democracia&quot; &quot;\\nDiputado \\n2002- 2006\\nDistrito N° 24Partido por la DemocraciaPrecedido por: Tomás Jocelyn Holt Letelier&quot; ## [5] &quot;\\nDiputado \\n1998- 2002\\nDistrito N° 52Partido Demócrata CristianoSucedido por: Fernando Meza Moncada&quot; &quot;\\nDiputado \\n1994- 1998\\nDistrito N° 52Partido Demócrata Cristiano&quot; Cada una de estas cadenas de texto contiene información que podría distribuirse en al menos cinco variables: cargo (diputado, senador*), año de inicio del período, año de término del período, distrito, partido. Nuestro objetivo será poder trabajar con dicha información, que por ahora está perdida en las cadenas (y es inútil). Para esto utilizaremos el paquete stringr, que se carga con el tidyverse. Por cierto, los \\n que se leen en las cadenas de texto significan salto de párrafo, como podemos ver en la caja de la reseña parlamentaria de ejemplo. Algunas operaciones simples con texto Cambiar mayúsculas df_legisladores_cargos %&gt;% mutate(caja_trayectoria_edit = str_to_lower(caja_trayectoria)) %&gt;% select(caja_trayectoria, caja_trayectoria_edit) # solo para ver mejor el resultado ## # A tibble: 1,191 x 2 ## caja_trayectoria caja_trayectoria_edit ## &lt;chr&gt; &lt;chr&gt; ## 1 &quot;\\nSenador institucional \\n1998- 2006\\n&quot; &quot;\\nsenador institucional \\n1998- 2006\\n&quot; ## 2 &quot;\\nDiputado \\n2010- 2014\\nDistrito N° 24Partido por la DemocraciaSucedido por: Jaime Hernán Gonzalo Pilowsky Greene&quot; &quot;\\ndiputado \\n2010- 2014\\ndistrito n° 24partido por la democraciasucedido por: jaime hernán gonzalo pilowsky greene&quot; ## 3 &quot;\\nDiputado \\n2006- 2010\\nDistrito N° 24Partido por la Democracia&quot; &quot;\\ndiputado \\n2006- 2010\\ndistrito n° 24partido por la democracia&quot; ## 4 &quot;\\nDiputado \\n2002- 2006\\nDistrito N° 24Partido por la DemocraciaPrecedido por: Tomás Jocelyn Holt Letelier&quot; &quot;\\ndiputado \\n2002- 2006\\ndistrito n° 24partido por la democraciaprecedido por: tomás jocelyn holt letelier&quot; ## 5 &quot;\\nDiputado \\n1998- 2002\\nDistrito N° 52Partido Demócrata CristianoSucedido por: Fernando Meza Moncada&quot; &quot;\\ndiputado \\n1998- 2002\\ndistrito n° 52partido demócrata cristianosucedido por: fernando meza moncada&quot; ## 6 &quot;\\nDiputado \\n1994- 1998\\nDistrito N° 52Partido Demócrata Cristiano&quot; &quot;\\ndiputado \\n1994- 1998\\ndistrito n° 52partido demócrata cristiano&quot; ## 7 &quot;\\nDiputado \\n1990- 1994\\nDistrito N° 52Partido Demócrata Cristiano&quot; &quot;\\ndiputado \\n1990- 1994\\ndistrito n° 52partido demócrata cristiano&quot; ## 8 &quot;\\nDiputado \\n2006- 2010\\nDistrito N° 5Partido Renovación NacionalPrecedido por: Carlos Vilches GuzmánSucedido por: Carlos~ &quot;\\ndiputado \\n2006- 2010\\ndistrito n° 5partido renovación nacionalprecedido por: carlos vilches guzmánsucedido por: carlos~ ## 9 &quot;\\nDiputado \\n2014- 2018\\nDistrito N° 37 Independiente&quot; &quot;\\ndiputado \\n2014- 2018\\ndistrito n° 37 independiente&quot; ## 10 &quot;\\nDiputado \\n2010- 2014\\nDistrito N° 37 Izquierda Ciudadana&quot; &quot;\\ndiputado \\n2010- 2014\\ndistrito n° 37 izquierda ciudadana&quot; ## # ... with 1,181 more rows (Ejercicio a) Mira el archivo de ayuda de str_to_lower(). ¿Qué otras operaciones podemos hacer con las mayúsculas? Pruébalas con el ejemplo anterior. Tu código: Eliminar espacios innecesarios df_legisladores_cargos %&gt;% mutate(caja_trayectoria_edit = str_squish(caja_trayectoria)) %&gt;% select(caja_trayectoria, caja_trayectoria_edit) # solo para ver mejor el resultado ## # A tibble: 1,191 x 2 ## caja_trayectoria caja_trayectoria_edit ## &lt;chr&gt; &lt;chr&gt; ## 1 &quot;\\nSenador institucional \\n1998- 2006\\n&quot; Senador institucional 1998- 2006 ## 2 &quot;\\nDiputado \\n2010- 2014\\nDistrito N° 24Partido por la DemocraciaSucedido por: Jaime Hernán Gonzalo Pilowsky Greene&quot; Diputado 2010- 2014 Distrito N° 24Partido por la DemocraciaSucedido por: Jaime Hernán Gonzalo Pilowsky Greene ## 3 &quot;\\nDiputado \\n2006- 2010\\nDistrito N° 24Partido por la Democracia&quot; Diputado 2006- 2010 Distrito N° 24Partido por la Democracia ## 4 &quot;\\nDiputado \\n2002- 2006\\nDistrito N° 24Partido por la DemocraciaPrecedido por: Tomás Jocelyn Holt Letelier&quot; Diputado 2002- 2006 Distrito N° 24Partido por la DemocraciaPrecedido por: Tomás Jocelyn Holt Letelier ## 5 &quot;\\nDiputado \\n1998- 2002\\nDistrito N° 52Partido Demócrata CristianoSucedido por: Fernando Meza Moncada&quot; Diputado 1998- 2002 Distrito N° 52Partido Demócrata CristianoSucedido por: Fernando Meza Moncada ## 6 &quot;\\nDiputado \\n1994- 1998\\nDistrito N° 52Partido Demócrata Cristiano&quot; Diputado 1994- 1998 Distrito N° 52Partido Demócrata Cristiano ## 7 &quot;\\nDiputado \\n1990- 1994\\nDistrito N° 52Partido Demócrata Cristiano&quot; Diputado 1990- 1994 Distrito N° 52Partido Demócrata Cristiano ## 8 &quot;\\nDiputado \\n2006- 2010\\nDistrito N° 5Partido Renovación NacionalPrecedido por: Carlos Vilches GuzmánSucedido por: Carlos Vil~ Diputado 2006- 2010 Distrito N° 5Partido Renovación NacionalPrecedido por: Carlos Vilches GuzmánSucedido por: Carlos V~ ## 9 &quot;\\nDiputado \\n2014- 2018\\nDistrito N° 37 Independiente&quot; Diputado 2014- 2018 Distrito N° 37 Independiente ## 10 &quot;\\nDiputado \\n2010- 2014\\nDistrito N° 37 Izquierda Ciudadana&quot; Diputado 2010- 2014 Distrito N° 37 Izquierda Ciudadana ## # ... with 1,181 more rows Obtener número de caracteres df_legisladores_cargos %&gt;% mutate(caja_trayectoria_edit = str_length(caja_trayectoria)) %&gt;% select(caja_trayectoria, caja_trayectoria_edit) # solo para ver mejor el resultado ## # A tibble: 1,191 x 2 ## caja_trayectoria caja_trayectoria_edit ## &lt;chr&gt; &lt;int&gt; ## 1 &quot;\\nSenador institucional \\n1998- 2006\\n&quot; 35 ## 2 &quot;\\nDiputado \\n2010- 2014\\nDistrito N° 24Partido por la DemocraciaSucedido por: Jaime Hernán Gonzalo Pilowsky Greene&quot; 111 ## 3 &quot;\\nDiputado \\n2006- 2010\\nDistrito N° 24Partido por la Democracia&quot; 61 ## 4 &quot;\\nDiputado \\n2002- 2006\\nDistrito N° 24Partido por la DemocraciaPrecedido por: Tomás Jocelyn Holt Letelier&quot; 103 ## 5 &quot;\\nDiputado \\n1998- 2002\\nDistrito N° 52Partido Demócrata CristianoSucedido por: Fernando Meza Moncada&quot; 98 ## 6 &quot;\\nDiputado \\n1994- 1998\\nDistrito N° 52Partido Demócrata Cristiano&quot; 63 ## 7 &quot;\\nDiputado \\n1990- 1994\\nDistrito N° 52Partido Demócrata Cristiano&quot; 63 ## 8 &quot;\\nDiputado \\n2006- 2010\\nDistrito N° 5Partido Renovación NacionalPrecedido por: Carlos Vilches GuzmánSucedido por: Carlos Vilches Guzmán&quot; 133 ## 9 &quot;\\nDiputado \\n2014- 2018\\nDistrito N° 37 Independiente&quot; 50 ## 10 &quot;\\nDiputado \\n2010- 2014\\nDistrito N° 37 Izquierda Ciudadana&quot; 56 ## # ... with 1,181 more rows Funciones para trabajar con patrones En general, podemos encontrar patrones en las cadenas que nos permitirán interpretar la información que contienen. Como los datos de texto suelen ser desestructurados, tendremos que idear estos patrones ad hoc, caso a caso. El patrón más sencillo es simplemente una serie textual de caracteres. Por ejemplo, podemos ocupar la función lógica str_detect() para marcar todas las observaciones que incluyen la serie de caracteres Diputad en la variable caja_trayectoria: df_legisladores_cargos %&gt;% mutate(caja_trayectoria_edit = str_detect(caja_trayectoria, pattern = &quot;Diputad&quot;)) %&gt;% select(caja_trayectoria, caja_trayectoria_edit) # solo para ver mejor el resultado ## # A tibble: 1,191 x 2 ## caja_trayectoria caja_trayectoria_edit ## &lt;chr&gt; &lt;lgl&gt; ## 1 &quot;\\nSenador institucional \\n1998- 2006\\n&quot; FALSE ## 2 &quot;\\nDiputado \\n2010- 2014\\nDistrito N° 24Partido por la DemocraciaSucedido por: Jaime Hernán Gonzalo Pilowsky Greene&quot; TRUE ## 3 &quot;\\nDiputado \\n2006- 2010\\nDistrito N° 24Partido por la Democracia&quot; TRUE ## 4 &quot;\\nDiputado \\n2002- 2006\\nDistrito N° 24Partido por la DemocraciaPrecedido por: Tomás Jocelyn Holt Letelier&quot; TRUE ## 5 &quot;\\nDiputado \\n1998- 2002\\nDistrito N° 52Partido Demócrata CristianoSucedido por: Fernando Meza Moncada&quot; TRUE ## 6 &quot;\\nDiputado \\n1994- 1998\\nDistrito N° 52Partido Demócrata Cristiano&quot; TRUE ## 7 &quot;\\nDiputado \\n1990- 1994\\nDistrito N° 52Partido Demócrata Cristiano&quot; TRUE ## 8 &quot;\\nDiputado \\n2006- 2010\\nDistrito N° 5Partido Renovación NacionalPrecedido por: Carlos Vilches GuzmánSucedido por: Carlos Vilches Guzmán&quot; TRUE ## 9 &quot;\\nDiputado \\n2014- 2018\\nDistrito N° 37 Independiente&quot; TRUE ## 10 &quot;\\nDiputado \\n2010- 2014\\nDistrito N° 37 Izquierda Ciudadana&quot; TRUE ## # ... with 1,181 more rows Como sabemos, las funciones lógicas nos permiten filtrar bases: df_legisladores_cargos %&gt;% filter(str_detect(caja_trayectoria, pattern = &quot;Diputad&quot;)) %&gt;% select(caja_trayectoria) # solo para ver mejor el resultado ## # A tibble: 985 x 1 ## caja_trayectoria ## &lt;chr&gt; ## 1 &quot;\\nDiputado \\n2010- 2014\\nDistrito N° 24Partido por la DemocraciaSucedido por: Jaime Hernán Gonzalo Pilowsky Greene&quot; ## 2 &quot;\\nDiputado \\n2006- 2010\\nDistrito N° 24Partido por la Democracia&quot; ## 3 &quot;\\nDiputado \\n2002- 2006\\nDistrito N° 24Partido por la DemocraciaPrecedido por: Tomás Jocelyn Holt Letelier&quot; ## 4 &quot;\\nDiputado \\n1998- 2002\\nDistrito N° 52Partido Demócrata CristianoSucedido por: Fernando Meza Moncada&quot; ## 5 &quot;\\nDiputado \\n1994- 1998\\nDistrito N° 52Partido Demócrata Cristiano&quot; ## 6 &quot;\\nDiputado \\n1990- 1994\\nDistrito N° 52Partido Demócrata Cristiano&quot; ## 7 &quot;\\nDiputado \\n2006- 2010\\nDistrito N° 5Partido Renovación NacionalPrecedido por: Carlos Vilches GuzmánSucedido por: Carlos Vilches Guzmán&quot; ## 8 &quot;\\nDiputado \\n2014- 2018\\nDistrito N° 37 Independiente&quot; ## 9 &quot;\\nDiputado \\n2010- 2014\\nDistrito N° 37 Izquierda Ciudadana&quot; ## 10 &quot;\\nDiputado \\n2006- 2010\\nDistrito N° 37Partido Socialista de Chile&quot; ## # ... with 975 more rows También podemos ocupar una negación para obtener las observaciones de senadores: df_legisladores_cargos %&gt;% filter(!str_detect(caja_trayectoria, pattern = &quot;Diputad&quot;)) %&gt;% select(caja_trayectoria) # solo para ver mejor el resultado ## # A tibble: 206 x 1 ## caja_trayectoria ## &lt;chr&gt; ## 1 &quot;\\nSenador institucional \\n1998- 2006\\n&quot; ## 2 &quot;\\nSenador \\n2014- 2022\\n7ª Circunscripción (2018-2022)Partido Renovación Nacional&quot; ## 3 &quot;\\nSenador \\n2014- 2022\\n8ª Circunscripción (2014-2018)Partido Renovación NacionalPrecedido por: Jovino Novoa Vásquez&quot; ## 4 &quot;\\nSenador \\n2006- 2014\\nTérmino de periodo: 16 de enero de 201116ª CircunscripciónPartido Renovación NacionalPrecedido por: Marco Antonio Cariola BarroilhetSucedido por: Carlos Larraín Peña&quot; ## 5 &quot;\\nSenadora \\n2018- 2026\\n6ª CircunscripciónPartido Socialista de Chile&quot; ## 6 &quot;\\nSenadora \\n2010- 2018\\n3ª CircunscripciónPartido Socialista de ChilePrecedido por: Ricardo Núñez Muñoz&quot; ## 7 &quot;\\nSenadora \\n2006- 2014\\n8ª Circunscripción Santiago OrientePartido Demócrata CristianoSucedido por: Carlos Montes Cisternas&quot; ## 8 &quot;\\nSenador \\n2002- 2010\\n6ª Circunscripción CostaPartido Unión Demócrata IndependientePrecedido por: Beltrán Urenda ZegersSucedido por: Francisco Chahuán Chahuán&quot; ## 9 &quot;\\nSenadora \\n2018- 2026\\n11ª Circunscripción Independiente&quot; ## 10 &quot;\\nSenador \\n2014- 2022\\nCircunscripción N° 3 (2018-2022) Independiente&quot; ## # ... with 196 more rows Ahora introduciremos tres funciones que utilizan patrones, str_extract(), str_replace() y str_remove(). ¿Qué hace cada una? Tus notas: df_legisladores_cargos %&gt;% mutate(caja_trayectoria_edit = str_extract(caja_trayectoria, pattern = &quot;Diputad&quot;)) %&gt;% select(caja_trayectoria, caja_trayectoria_edit) # solo para ver mejor el resultado ## # A tibble: 1,191 x 2 ## caja_trayectoria caja_trayectoria_edit ## &lt;chr&gt; &lt;chr&gt; ## 1 &quot;\\nSenador institucional \\n1998- 2006\\n&quot; &lt;NA&gt; ## 2 &quot;\\nDiputado \\n2010- 2014\\nDistrito N° 24Partido por la DemocraciaSucedido por: Jaime Hernán Gonzalo Pilowsky Greene&quot; Diputad ## 3 &quot;\\nDiputado \\n2006- 2010\\nDistrito N° 24Partido por la Democracia&quot; Diputad ## 4 &quot;\\nDiputado \\n2002- 2006\\nDistrito N° 24Partido por la DemocraciaPrecedido por: Tomás Jocelyn Holt Letelier&quot; Diputad ## 5 &quot;\\nDiputado \\n1998- 2002\\nDistrito N° 52Partido Demócrata CristianoSucedido por: Fernando Meza Moncada&quot; Diputad ## 6 &quot;\\nDiputado \\n1994- 1998\\nDistrito N° 52Partido Demócrata Cristiano&quot; Diputad ## 7 &quot;\\nDiputado \\n1990- 1994\\nDistrito N° 52Partido Demócrata Cristiano&quot; Diputad ## 8 &quot;\\nDiputado \\n2006- 2010\\nDistrito N° 5Partido Renovación NacionalPrecedido por: Carlos Vilches GuzmánSucedido por: Carlos Vilches Guzmán&quot; Diputad ## 9 &quot;\\nDiputado \\n2014- 2018\\nDistrito N° 37 Independiente&quot; Diputad ## 10 &quot;\\nDiputado \\n2010- 2014\\nDistrito N° 37 Izquierda Ciudadana&quot; Diputad ## # ... with 1,181 more rows df_legisladores_cargos %&gt;% mutate(caja_trayectoria_edit = str_replace(caja_trayectoria, pattern = &quot;institucional&quot;, replacement = &quot;designado&quot;)) %&gt;% select(caja_trayectoria, caja_trayectoria_edit) # solo para ver mejor el resultado ## # A tibble: 1,191 x 2 ## caja_trayectoria caja_trayectoria_edit ## &lt;chr&gt; &lt;chr&gt; ## 1 &quot;\\nSenador institucional \\n1998- 2006\\n&quot; &quot;\\nSenador designado \\n1998- 2006\\n&quot; ## 2 &quot;\\nDiputado \\n2010- 2014\\nDistrito N° 24Partido por la DemocraciaSucedido por: Jaime Hernán Gonzalo Pilowsky Greene&quot; &quot;\\nDiputado \\n2010- 2014\\nDistrito N° 24Partido por la DemocraciaSucedido por: Jaime Hernán Gonzalo Pilowsky Greene&quot; ## 3 &quot;\\nDiputado \\n2006- 2010\\nDistrito N° 24Partido por la Democracia&quot; &quot;\\nDiputado \\n2006- 2010\\nDistrito N° 24Partido por la Democracia&quot; ## 4 &quot;\\nDiputado \\n2002- 2006\\nDistrito N° 24Partido por la DemocraciaPrecedido por: Tomás Jocelyn Holt Letelier&quot; &quot;\\nDiputado \\n2002- 2006\\nDistrito N° 24Partido por la DemocraciaPrecedido por: Tomás Jocelyn Holt Letelier&quot; ## 5 &quot;\\nDiputado \\n1998- 2002\\nDistrito N° 52Partido Demócrata CristianoSucedido por: Fernando Meza Moncada&quot; &quot;\\nDiputado \\n1998- 2002\\nDistrito N° 52Partido Demócrata CristianoSucedido por: Fernando Meza Moncada&quot; ## 6 &quot;\\nDiputado \\n1994- 1998\\nDistrito N° 52Partido Demócrata Cristiano&quot; &quot;\\nDiputado \\n1994- 1998\\nDistrito N° 52Partido Demócrata Cristiano&quot; ## 7 &quot;\\nDiputado \\n1990- 1994\\nDistrito N° 52Partido Demócrata Cristiano&quot; &quot;\\nDiputado \\n1990- 1994\\nDistrito N° 52Partido Demócrata Cristiano&quot; ## 8 &quot;\\nDiputado \\n2006- 2010\\nDistrito N° 5Partido Renovación NacionalPrecedido por: Carlos Vilches GuzmánSucedido por: Carlos~ &quot;\\nDiputado \\n2006- 2010\\nDistrito N° 5Partido Renovación NacionalPrecedido por: Carlos Vilches GuzmánSucedido por: Carlos~ ## 9 &quot;\\nDiputado \\n2014- 2018\\nDistrito N° 37 Independiente&quot; &quot;\\nDiputado \\n2014- 2018\\nDistrito N° 37 Independiente&quot; ## 10 &quot;\\nDiputado \\n2010- 2014\\nDistrito N° 37 Izquierda Ciudadana&quot; &quot;\\nDiputado \\n2010- 2014\\nDistrito N° 37 Izquierda Ciudadana&quot; ## # ... with 1,181 more rows df_legisladores_cargos %&gt;% mutate(caja_trayectoria_edit = str_remove(caja_trayectoria, pattern = &quot;N° &quot;)) %&gt;% select(caja_trayectoria, caja_trayectoria_edit) %&gt;% select(caja_trayectoria, caja_trayectoria_edit) # solo para ver mejor el resultado ## # A tibble: 1,191 x 2 ## caja_trayectoria caja_trayectoria_edit ## &lt;chr&gt; &lt;chr&gt; ## 1 &quot;\\nSenador institucional \\n1998- 2006\\n&quot; &quot;\\nSenador institucional \\n1998- 2006\\n&quot; ## 2 &quot;\\nDiputado \\n2010- 2014\\nDistrito N° 24Partido por la DemocraciaSucedido por: Jaime Hernán Gonzalo Pilowsky Greene&quot; &quot;\\nDiputado \\n2010- 2014\\nDistrito 24Partido por la DemocraciaSucedido por: Jaime Hernán Gonzalo Pilowsky Greene&quot; ## 3 &quot;\\nDiputado \\n2006- 2010\\nDistrito N° 24Partido por la Democracia&quot; &quot;\\nDiputado \\n2006- 2010\\nDistrito 24Partido por la Democracia&quot; ## 4 &quot;\\nDiputado \\n2002- 2006\\nDistrito N° 24Partido por la DemocraciaPrecedido por: Tomás Jocelyn Holt Letelier&quot; &quot;\\nDiputado \\n2002- 2006\\nDistrito 24Partido por la DemocraciaPrecedido por: Tomás Jocelyn Holt Letelier&quot; ## 5 &quot;\\nDiputado \\n1998- 2002\\nDistrito N° 52Partido Demócrata CristianoSucedido por: Fernando Meza Moncada&quot; &quot;\\nDiputado \\n1998- 2002\\nDistrito 52Partido Demócrata CristianoSucedido por: Fernando Meza Moncada&quot; ## 6 &quot;\\nDiputado \\n1994- 1998\\nDistrito N° 52Partido Demócrata Cristiano&quot; &quot;\\nDiputado \\n1994- 1998\\nDistrito 52Partido Demócrata Cristiano&quot; ## 7 &quot;\\nDiputado \\n1990- 1994\\nDistrito N° 52Partido Demócrata Cristiano&quot; &quot;\\nDiputado \\n1990- 1994\\nDistrito 52Partido Demócrata Cristiano&quot; ## 8 &quot;\\nDiputado \\n2006- 2010\\nDistrito N° 5Partido Renovación NacionalPrecedido por: Carlos Vilches GuzmánSucedido por: Carlos V~ &quot;\\nDiputado \\n2006- 2010\\nDistrito 5Partido Renovación NacionalPrecedido por: Carlos Vilches GuzmánSucedido por: Carlos ~ ## 9 &quot;\\nDiputado \\n2014- 2018\\nDistrito N° 37 Independiente&quot; &quot;\\nDiputado \\n2014- 2018\\nDistrito 37 Independiente&quot; ## 10 &quot;\\nDiputado \\n2010- 2014\\nDistrito N° 37 Izquierda Ciudadana&quot; &quot;\\nDiputado \\n2010- 2014\\nDistrito 37 Izquierda Ciudadana&quot; ## # ... with 1,181 more rows Patrones más complejos con expresiones regulares (regex) Fuentes: Kelly Vaughn, Programmer Humor y Towards Data Science. Hasta aquí hemos utilizado patrones muy simples y específicos, por medio de series textuales de caracteres. Pero a menudo la información de nuestras cadenas de texto sigue patrones más generales. Por ejemplo, ¿cómo podemos obtener el año de inicio de cada período? Sabemos que todos tienen cuatro dígitos, y siempre son los primeros cuatro dígitos que aparecen. Conociendo esto, podemos extraerlos de nuestras cadenas: df_legisladores_cargos %&gt;% mutate(inicio_per = str_extract(caja_trayectoria, pattern = &quot;\\\\d{4}&quot;)) %&gt;% select(caja_trayectoria, inicio_per) # solo para ver mejor el resultado ## # A tibble: 1,191 x 2 ## caja_trayectoria inicio_per ## &lt;chr&gt; &lt;chr&gt; ## 1 &quot;\\nSenador institucional \\n1998- 2006\\n&quot; 1998 ## 2 &quot;\\nDiputado \\n2010- 2014\\nDistrito N° 24Partido por la DemocraciaSucedido por: Jaime Hernán Gonzalo Pilowsky Greene&quot; 2010 ## 3 &quot;\\nDiputado \\n2006- 2010\\nDistrito N° 24Partido por la Democracia&quot; 2006 ## 4 &quot;\\nDiputado \\n2002- 2006\\nDistrito N° 24Partido por la DemocraciaPrecedido por: Tomás Jocelyn Holt Letelier&quot; 2002 ## 5 &quot;\\nDiputado \\n1998- 2002\\nDistrito N° 52Partido Demócrata CristianoSucedido por: Fernando Meza Moncada&quot; 1998 ## 6 &quot;\\nDiputado \\n1994- 1998\\nDistrito N° 52Partido Demócrata Cristiano&quot; 1994 ## 7 &quot;\\nDiputado \\n1990- 1994\\nDistrito N° 52Partido Demócrata Cristiano&quot; 1990 ## 8 &quot;\\nDiputado \\n2006- 2010\\nDistrito N° 5Partido Renovación NacionalPrecedido por: Carlos Vilches GuzmánSucedido por: Carlos Vilches Guzmán&quot; 2006 ## 9 &quot;\\nDiputado \\n2014- 2018\\nDistrito N° 37 Independiente&quot; 2014 ## 10 &quot;\\nDiputado \\n2010- 2014\\nDistrito N° 37 Izquierda Ciudadana&quot; 2010 ## # ... with 1,181 more rows Nuestro patrón esta escrito en el lenguaje de las expresiones regulares, que permite crear patrones generales en vez de específicos. Así, \\\\d significa un dígito y {4} significa cuatro veces. Puedes consultar una guía sobre las expresiones regulares en la segunda página del torpedo de esta unidad. Por cierto, podemos obtener el año de fin del período haciendo un combo de extracción + remoción. A continuación tenemos una cadena de pipes dentro de otra! Tomamos caja_trayectoria, extraemos - cuatro dígitos, removemos - y pasamos a número, todo en una operación. df_legisladores_cargos %&gt;% mutate(fin_per = caja_trayectoria %&gt;% str_extract(pattern = &quot;- \\\\d{4}&quot;) %&gt;% str_remove(&quot;- &quot;) %&gt;% as.numeric()) %&gt;% select(caja_trayectoria, fin_per) # solo para ver mejor el resultado ## # A tibble: 1,191 x 2 ## caja_trayectoria fin_per ## &lt;chr&gt; &lt;dbl&gt; ## 1 &quot;\\nSenador institucional \\n1998- 2006\\n&quot; 2006 ## 2 &quot;\\nDiputado \\n2010- 2014\\nDistrito N° 24Partido por la DemocraciaSucedido por: Jaime Hernán Gonzalo Pilowsky Greene&quot; 2014 ## 3 &quot;\\nDiputado \\n2006- 2010\\nDistrito N° 24Partido por la Democracia&quot; 2010 ## 4 &quot;\\nDiputado \\n2002- 2006\\nDistrito N° 24Partido por la DemocraciaPrecedido por: Tomás Jocelyn Holt Letelier&quot; 2006 ## 5 &quot;\\nDiputado \\n1998- 2002\\nDistrito N° 52Partido Demócrata CristianoSucedido por: Fernando Meza Moncada&quot; 2002 ## 6 &quot;\\nDiputado \\n1994- 1998\\nDistrito N° 52Partido Demócrata Cristiano&quot; 1998 ## 7 &quot;\\nDiputado \\n1990- 1994\\nDistrito N° 52Partido Demócrata Cristiano&quot; 1994 ## 8 &quot;\\nDiputado \\n2006- 2010\\nDistrito N° 5Partido Renovación NacionalPrecedido por: Carlos Vilches GuzmánSucedido por: Carlos Vilches Guzmán&quot; 2010 ## 9 &quot;\\nDiputado \\n2014- 2018\\nDistrito N° 37 Independiente&quot; 2018 ## 10 &quot;\\nDiputado \\n2010- 2014\\nDistrito N° 37 Izquierda Ciudadana&quot; 2014 ## # ... with 1,181 more rows Hay tres tipos de constructos básicos en las expresiones regulares: pronombres o clases de caracteres (como \\\\d), cuantificadores (como {4}) y anclas. Pronombres o clases de caracteres Ya vimos \\\\d, que es equivalente a un dígito. Otros pronombres comunes son: [:alpha:] (una letra), \\\\w (un caracter de palabra: letra o dígito), \\\\s (un caracter de espacio) y . (cualquier cosa). Por cierto, ¿qué pasa si queremos buscar por algún caracter especial en expresiones regulares, como .? vector_prueba &lt;- c(&quot;Ley 20.000.&quot;, &quot;Reglamento 201&quot;) str_extract(vector_prueba, pattern = &quot;\\\\d{2}.&quot;) # esto no es lo que queremos! ## [1] &quot;20.&quot; &quot;201&quot; Debemos escapar el caracter, antecediéndolo de \\: str_extract(vector_prueba, pattern = &quot;\\\\d{2}\\\\.&quot;) ## [1] &quot;20.&quot; NA (Ejercicio b) Genera una nueva variable en la base, que tenga solo la primera letra del nombre del(la) legislador(a). Tu código: Cuantificadores Vimos que {4} busca exactamente cuatro repeticiones de un caracter en específico. También podemos pedir rangos: {2, 4} (entre dos y cuatro), {2, } (dos o más). Muy utilizados son los cuantificadores * (cero o más) y + (uno o más), que pueden pensarse como abreviaciones para los rangos anteriores. Por ejemplo, obtengamos la primera palabra de caja_trayectoria, utilizando el patrón una o más letras: df_legisladores_cargos %&gt;% mutate(primera_pal_trayectoria = str_extract(caja_trayectoria, pattern = &quot;[:alpha:]+&quot;)) %&gt;% select(caja_trayectoria, primera_pal_trayectoria) # solo para ver mejor el resultado ## # A tibble: 1,191 x 2 ## caja_trayectoria primera_pal_trayectoria ## &lt;chr&gt; &lt;chr&gt; ## 1 &quot;\\nSenador institucional \\n1998- 2006\\n&quot; Senador ## 2 &quot;\\nDiputado \\n2010- 2014\\nDistrito N° 24Partido por la DemocraciaSucedido por: Jaime Hernán Gonzalo Pilowsky Greene&quot; Diputado ## 3 &quot;\\nDiputado \\n2006- 2010\\nDistrito N° 24Partido por la Democracia&quot; Diputado ## 4 &quot;\\nDiputado \\n2002- 2006\\nDistrito N° 24Partido por la DemocraciaPrecedido por: Tomás Jocelyn Holt Letelier&quot; Diputado ## 5 &quot;\\nDiputado \\n1998- 2002\\nDistrito N° 52Partido Demócrata CristianoSucedido por: Fernando Meza Moncada&quot; Diputado ## 6 &quot;\\nDiputado \\n1994- 1998\\nDistrito N° 52Partido Demócrata Cristiano&quot; Diputado ## 7 &quot;\\nDiputado \\n1990- 1994\\nDistrito N° 52Partido Demócrata Cristiano&quot; Diputado ## 8 &quot;\\nDiputado \\n2006- 2010\\nDistrito N° 5Partido Renovación NacionalPrecedido por: Carlos Vilches GuzmánSucedido por: Carlos Vilches Guzmán&quot; Diputado ## 9 &quot;\\nDiputado \\n2014- 2018\\nDistrito N° 37 Independiente&quot; Diputado ## 10 &quot;\\nDiputado \\n2010- 2014\\nDistrito N° 37 Izquierda Ciudadana&quot; Diputado ## # ... with 1,181 more rows (Ejercicio c) Genera una nueva variable en la base, que tenga el distrito que aparece en caja_trayectoria. Aparte de cuantificadores, aquí vale la pena utilizar un combo de extracción + remoción. Tu código: Anclas Podemos utilizar anclas para solo capturar las partes iniciales o finales de la cadena. Ancla final ($): df_legisladores_cargos %&gt;% mutate(ult_apellido = str_extract(nombre_comp, pattern = &quot;\\\\w+$&quot;)) %&gt;% select(nombre_comp, ult_apellido) # solo para ver mejor el resultado ## # A tibble: 1,191 x 2 ## nombre_comp ult_apellido ## &lt;chr&gt; &lt;chr&gt; ## 1 Marcos Aurelio Aburto Ochoa Ochoa ## 2 Enrique Accorsi Opazo Opazo ## 3 Enrique Accorsi Opazo Opazo ## 4 Enrique Accorsi Opazo Opazo ## 5 Mario Alberto Acuña Cisternas Cisternas ## 6 Mario Alberto Acuña Cisternas Cisternas ## 7 Mario Alberto Acuña Cisternas Cisternas ## 8 René Aedo Ormeño Ormeño ## 9 Sergio Aguiló Melo Melo ## 10 Sergio Aguiló Melo Melo ## # ... with 1,181 more rows Ancla inicial (^): df_legisladores_cargos %&gt;% mutate(primer_nombre = str_extract(nombre_comp, pattern = &quot;^\\\\w+&quot;)) %&gt;% select(nombre_comp, primer_nombre) # solo para ver mejor el resultado ## # A tibble: 1,191 x 2 ## nombre_comp primer_nombre ## &lt;chr&gt; &lt;chr&gt; ## 1 Marcos Aurelio Aburto Ochoa Marcos ## 2 Enrique Accorsi Opazo Enrique ## 3 Enrique Accorsi Opazo Enrique ## 4 Enrique Accorsi Opazo Enrique ## 5 Mario Alberto Acuña Cisternas Mario ## 6 Mario Alberto Acuña Cisternas Mario ## 7 Mario Alberto Acuña Cisternas Mario ## 8 René Aedo Ormeño René ## 9 Sergio Aguiló Melo Sergio ## 10 Sergio Aguiló Melo Sergio ## # ... with 1,181 more rows En este caso, el ancla inicial no es necesaria, pero a veces es útil para tomar en cuenta ambigüedades. (Ejercicio d) Genera una nueva base de datos, que tenga variables con el cargo, año de inicio (ya lo hicimos), año de término (ya lo hicimos), distrito (ya lo hicimos) y partido. Con esto listo, habremos conseguido nuestro objetivo inicial. Asegúrate de que las variables tengan los tipos correctos de vectores utiliza as.numeric() cuando corresponda. Tu código: Combinar pronombres en expresiones regulares ¿Qué pasa si queremos extraer la cadena Diputado o Diputada, según corresponda? Podríamos hacer algo como esto, por ejemplo: df_legisladores_cargos %&gt;% mutate(cadena = str_extract(caja_trayectoria, &quot;Diputad\\\\w&quot;)) %&gt;% select(cadena) ## # A tibble: 1,191 x 1 ## cadena ## &lt;chr&gt; ## 1 &lt;NA&gt; ## 2 Diputado ## 3 Diputado ## 4 Diputado ## 5 Diputado ## 6 Diputado ## 7 Diputado ## 8 Diputado ## 9 Diputado ## 10 Diputado ## # ... with 1,181 more rows Funciona bien, pero tal vez es demasiado general. A veces queremos ser más específicos/as y decir, con expresiones regulares, la cadena que comience con Diputad y siga con a u o. Podemos hacer esto de la siguiente forma: df_legisladores_cargos %&gt;% mutate(cadena = str_extract(caja_trayectoria, &quot;Diputad[ao]&quot;)) %&gt;% # caracteres permitidos select(cadena) ## # A tibble: 1,191 x 1 ## cadena ## &lt;chr&gt; ## 1 &lt;NA&gt; ## 2 Diputado ## 3 Diputado ## 4 Diputado ## 5 Diputado ## 6 Diputado ## 7 Diputado ## 8 Diputado ## 9 Diputado ## 10 Diputado ## # ... with 1,181 more rows Fíjate en el siguiente ejemplo. Estaríamos capturando solo los elementos número 2 y 3. c(&quot;Diputación&quot;, &quot;Diputado&quot;, &quot;Diputada&quot;) %&gt;% str_detect(&quot;Diputad[ao]&quot;) ## [1] FALSE TRUE TRUE (Ejercicio e) Genera una nueva base de datos, que tenga variables con el cargo, año de inicio (ya lo hicimos), año de término (ya lo hicimos), distrito (ya lo hicimos) y partido. Con esto listo, habremos conseguido nuestro objetivo inicial. Asegúrate de que las variables tengan los tipos correctos de vectores utiliza as.numeric() cuando corresponda. Tu código: (Ejercicio f) Carguemos esta nueva base, que tiene la caja de antecedentes para cada legislador (noten cómo cambia la unidad de análisis de la base). df_legisladores &lt;- read_csv(&quot;datos/df_legisladores.csv&quot;) ## Parsed with column specification: ## cols( ## nombre_comp = col_character(), ## id = col_double(), ## caja_antecedentes = col_character() ## ) head(df_legisladores$caja_antecedentes) ## [1] &quot;\\n Nombre: Marcos Aurelio Aburto Ochoa\\n Nacimiento: \\n25 de Mayo de 1916\\n\\nValdivia\\n Profesión: Abogado&quot; ## [2] &quot;\\n Nombre: Enrique Accorsi Opazo\\n Nacimiento: \\n17 de Agosto de 1948\\n\\nSantiago\\n Profesión: Médico&quot; ## [3] &quot;\\n Nombre: Mario Alberto Acuña Cisternas\\n Nacimiento: \\n26 de Septiembre de 1951\\n\\n\\n Profesión: Ingeniero Agrónomo&quot; ## [4] &quot;\\n Nombre: René Aedo Ormeño\\n Nacimiento: \\n4 de Febrero de 1960\\n\\n\\n Profesión: Médico Cirujano&quot; ## [5] &quot;\\n Nombre: Sergio Aguiló Melo\\n Nacimiento: \\n9 de Febrero de 1953\\n\\nSantiago\\n Profesión: Ingeniero Comercial&quot; ## [6] &quot;\\n Nombre: Raúl Florcita Alarcón Rojas\\n Nacimiento: \\n15 de Octubre de 1945\\n\\n\\n Profesión: Profesor normalista y Músico&quot; Genera variables para fecha de nacimiento y profesión. Calcula la edad actual de cada legislador(a). Utiliza una fórmula sencilla, 2019 - año de nacimiento. Obtén la distribución de edad para los/as diputados/as del período actual. Tip: para esto debes juntar las dos bases; puedes utilizar left_join(). (Difícil) Divide la distribución anterior por coalición. "],["texto-libros.html", "06C - Descarga de libros", " 06C - Descarga de libros Como al principio de todo script, recomiendo reiniciar R. Esto lo conseguimos en RStudio Cloud con Session &gt; Restart R y clickeando en la escoba del panel de Environment (superior derecho). El siguiente código se utilizó para descargar los libros del script 06A: # Cargar paquetes ---- library(tidyverse) # install.packages(&quot;tidytext&quot;) library(tidytext) library(stopwords) # install.packages(&quot;gutenbergr&quot;) library(gutenbergr) # descargar libros de dominio público desde Project Gutenberg # Leviathan ---- leviathan &lt;- gutenberg_download(3207, strip = T) leviathan2 &lt;- leviathan %&gt;% # eliminar las lineas sin info (espacios o separadores) filter(!str_detect(text, &quot;^[\\\\s[:punct:]]*$&quot;)) %&gt;% # generar variable con capítulos mutate(chapter = cumsum(str_detect(text, &quot;(CHAPTER )&quot;)), line = 1:nrow(.)) %&gt;% # incluir información sobre el libro mutate(author = &quot;Thomas Hobbes&quot;, book = &quot;Leviathan&quot;) %&gt;% # reordenar columnas select(author, book, gutenberg_id, chapter, line, text) write_csv(leviathan2, &quot;datos/leviathan.csv&quot;) # On Liberty ---- on_liberty &lt;- gutenberg_download(34901, strip = T) on_liberty2 &lt;- on_liberty %&gt;% # eliminar las lineas sin info (espacios o separadores) filter(!str_detect(text, &quot;^[\\\\s[:punct:]]*$&quot;)) %&gt;% # generar variable con caps. (es imposible no contar las del índice usando expr. regulares, por eso las arreglo ex post) mutate(text = str_remove_all(text, &quot;(&lt;i&gt;)|(&lt;/i&gt;)&quot;), chapter = cumsum(str_detect(text, &quot;(CHAPTER )&quot;)), line = 1:nrow(.)) %&gt;% mutate(chapter = chapter - 5) %&gt;% mutate(chapter = if_else(chapter &lt; 0, 0, chapter)) %&gt;% # incluir información sobre el libro mutate(author = &quot;John Stuart Mill&quot;, book = &quot;On Liberty&quot;) %&gt;% # reordenar columnas select(author, book, gutenberg_id, chapter, line, text) write_csv(on_liberty2, &quot;datos/on_liberty.csv&quot;) # A Vindication of the Rights of Women ---- rights_of_women &lt;- gutenberg_download(3420, strip = T) rights_of_women2 &lt;- rights_of_women %&gt;% # eliminar las lineas sin info (espacios o separadores) filter(!str_detect(text, &quot;^[\\\\s[:punct:]]*$&quot;)) %&gt;% # generar variable con caps. (es muy difícil no contar las del índice usando expr. regulares, por eso las arreglo ex post) mutate(text = str_remove_all(text, &quot;(&lt;i&gt;)|(&lt;/i&gt;)&quot;), chapter = cumsum(str_detect(text, &quot;(CHAPTER )&quot;)), line = 1:nrow(.)) %&gt;% mutate(chapter = chapter - 13) %&gt;% mutate(chapter = if_else(chapter &lt; 0, 0, chapter)) %&gt;% # incluir información sobre el libro mutate(author = &quot;Mary Wollstonecraft&quot;, book = &quot;A Vindication of the Rights of Woman&quot;) %&gt;% # reordenar columnas select(author, book, gutenberg_id, chapter, line, text) write_csv(rights_of_women2, &quot;datos/rights_of_women.csv&quot;) "],["part-r-avanzado.html", "(PART) R avanzado", " (PART) R avanzado "],["r-avanzado.html", "07A - R avanzado Inicio: cargar paquetes Funciones personalizadas y control de flujo Iteraciones con purrr Aplicación 1: programas presidenciales Aplicación 2: varios archivos Excel", " 07A - R avanzado Si quieres correr estos scripts localmente, acá puedes descargar el proyecto comprimido en .zip. Paquetes que necesitas tener instalados antes de comenzar con el proyecto: tidyverse, tidytext, tabulizer. Este último paquete puede ser complicado de instalar en Windows, recomiendo ver la documentación. Inicio: cargar paquetes library(tidyverse) library(readxl) #install.packages(&quot;tidytext&quot;) library(tidytext) #install.packages(&quot;tabulizer&quot;) library(tabulizer) ## Warning: package &#39;tabulizer&#39; was built under R version 4.0.3 Funciones personalizadas y control de flujo Supongamos que queremos obtener el rango de un vector numérico (la diferencia entre su valor máximo y su valor mínimo) vector_num_prueba &lt;- c(1, 7, 3, 4, 9, 8) max(vector_num_prueba) - min(vector_num_prueba) ## [1] 8 Podemos generalizar esto creando una receta, en otras palabras, una función. f_rango &lt;- function(x){ valor &lt;- max(x) - min(x) return(valor) } f_rango(vector_num_prueba) ## [1] 8 Lo bueno de esta función que creamos, f_rango() es que es generalizable: f_rango(c(29, 3, 4)) ## [1] 26 midwest &lt;- midwest f_rango(midwest$percadultpoverty) ## [1] 41.37396 ¿Qué pasa si aplicamos nuestra función a un vector de caracteres? vector_car_prueba &lt;- c(&quot;Manzana&quot;, &quot;Pera&quot;, &quot;Uva&quot;, &quot;Naranja&quot;, &quot;Plátano&quot;, &quot;Sandía&quot;) f_rango(vector_car_prueba) # devuelve un error Tal vez queremos contar los caracteres de cada elemento y calcular el rango considerando esas longitudes. Podemos generalizar más nuestra función ocupando control de flujo (if/else) f_rango_gen &lt;- function(x){ if (is.character(x)) { # si es que es el vector es de caracteres ... valor &lt;- max(nchar(x)) - min(nchar(x)) } else { # en cualquier otro caso... valor &lt;- max(x) - min(x) } return(valor) # lo que queremos que devuelva la función } f_rango_gen(vector_car_prueba) # ahora funciona con el vector de caracteres ## [1] 4 f_rango_gen(vector_num_prueba) # sigue funcionando con el vector numérico ## [1] 8 Iteraciones con purrr Las iteraciones permiten repetir tareas en series de elementos. En el tidyverse, el paquete purrr ofrece iteración funcional, que es lo que aprenderemos aquí. Supongamos que tenemos una lista con múltiples vectores y queremos obtener el rango de cada uno: lista_vectores &lt;- list( v1 = c(89, 3, 4), v2 = c(5, 98, 1), v3 = c(98, 3, 190) ) Podemos hacer algo como esto para el primer vector: f_rango(lista_vectores[[1]]) ## [1] 86 f_rango(lista_vectores[[&quot;v1&quot;]]) # lo mismo ## [1] 86 Entonces, podríamos obtener los rangos así: f_rango(lista_vectores[[1]]) ## [1] 86 f_rango(lista_vectores[[2]]) ## [1] 97 f_rango(lista_vectores[[3]]) ## [1] 187 Si queríamos los resultados en un vector: vector_resultados &lt;- c( f_rango(lista_vectores[[1]]), f_rango(lista_vectores[[2]]), f_rango(lista_vectores[[3]]) ) vector_resultados ## [1] 86 97 187 Bien, ¿pero qué pasa si tenemos 500 elementos en vez de 3? No queremos hacer copy-paste 500 veces. Para esto es que existen las iteraciones: vector_resultados2 &lt;- map_dbl( .x = lista_vectores, # objeto en cuyos elementos queremos iterar .f = ~ f_rango(.x) # en el contexto de la iteración, cada elemento es .x ) map_dbl() significa que el resultado es un vector numérico. También está map_chr(), para tener de resultado un vector de caracteres. Mientras tanto, map_dfr() devolverá un data frame. map() es la función más general, simplemente devolverá una lista. Por otro lado, walk() no devolverá nada, pero sí iterará en los elementos del objeto que le pasemos (esto puede ser útil, lo veremos en las aplicaciones). (Ejercicio a) Genera la iteración anterior con map() en vez de map_dbl(). ¿Qué cambia? Aplicación 1: programas presidenciales Cargar texto desde pdfs y limpiarlo En datos/programas_presidenciales2017/ tenemos los nueve programas presidenciales para la elección del 2017, en pdf. Vamos a obtener todos sus textos y dejarlos en una base tidy para el análisis. Comencemos obteniendo el texto del programa de Guillier, gracias al paquete tabulizer: texto_guillier &lt;- tabulizer::extract_text(&quot;datos/programas_presidenciales_2017/Programa_Alejandro_Guillier_Alvarez.pdf&quot;) texto_guillier ## [1] &quot;\\r\\n\\r\\nINDICE\\r\\nNUESTROS \\r\\nPRINCIPIOS\\r\\nFAMILIAS \\r\\nMULTICULTURALES, \\r\\nESPECIALMENTE, \\r\\nNUESTROS PUEBLOS \\r\\nORIGINARIOS.\\r\\nCHILE EN EL MUNDO\\r\\nTERMINAR CON TODA \\r\\nFORMA DE MACHISMO, \\r\\nDISCRIMINACIÃN Y \\r\\nVIOLENCIA DE GÃNERO\\r\\nUNA NUEVA \\r\\nPOLITICA\\r\\nUNA SÃLIDA AGENDA DE \\r\\nSEGURIDAD PÃBLICA\\r\\nRECUPERANDO EL \\r\\nCRECIMIENTO \\r\\nLAS FAMILIAS \\r\\nPRIMERO\\r\\nHACIA UNA NUEVA \\r\\nPOLÃ\\215TICA\\r\\nDESCENTRALIZACIÃN \\r\\nEFECTIVA Y COMUNAS \\r\\nMÃ\\201S FUERTES \\r\\nUNA NUEVA \\r\\nECONOMIA\\r\\nPENSIONES DIGNAS\\r\\nPROTECCIÃN PARA \\r\\nTODAS Y TODOS LOS \\r\\nHIJOS DE CHILE\\r\\nVIVIENDAS PARA \\r\\nTODOS Y TODAS\\r\\nNO MÃ\\201S ABUSOS\\r\\nPROFUNDIZAREMOS LOS\\r\\n AVANCES HACIA UNA \\r\\nEDUCACIÃN PÃBLICA, GRATUITA Y DE \\r\\nCALIDAD PARA TODAS Y TODOS \\r\\nBUENOS EMPLEOS Y \\r\\nMEJORES SALARIOS\\r\\nFAMILIAS DIVERSAS IG-\\r\\nUALES ANTE LA LEY\\r\\nFORTALECEREMOS EL \\r\\nDERECHO A LA SALUD\\r\\nTRANSPORTE DIGNO \\r\\nPARA LAS \\r\\nPERSONAS \\r\\n6\\r\\n36\\r\\n12\\r\\n46\\r\\n8\\r\\n4238\\r\\n18\\r\\n48\\r\\n50\\r\\n10\\r\\n44\\r\\n20\\r\\n26\\r\\n32\\r\\n22\\r\\n28\\r\\n34\\r\\n24\\r\\n30\\r\\n\\r\\nNUESTRAS IDEAS PARA CHILE\\r\\nPRINCIPALES ACCIONES, INICIATIVAS Y PROYECTOS\\r\\nPROGRAMA DE GOBIERNO ALEJANDRO GUILLIER Ã\\201LVAREZ\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n6\\r\\nDEBATES PROGRAMATICOS\\r\\nCON GUILLIER A LA MONEDA: \\r\\nPOR UN CHILE MODERNO Y SOLIDARIO\\r\\nNUESTROS PRINCIPIOS\\r\\nNos inspira la sed de justicia y libertad. A diferencia de los conservadores, sabemos que las condiciones \\r\\nmateriales de vida limitan drÃ¡sticamente la liberta de elegir de chilenos y chilenas: el imperio del dinero y \\r\\ndel mercado impide que la gran mayorÃ­a de nuestros compatriotas pueda acceder a servicios oportunos \\r\\ny de calidad en salud, educaciÃ³n y previsiÃ³n.\\r\\nLas fuerzas del mercado tambiÃ©n nos han conducido a comunas y barrios segregados, con grandes dif-\\r\\nerencias de policÃ­as, Ã¡reas verdes y espacios de cultura por habitante. Definitivamente en Chile tenemos \\r\\nciudadanos de primera y de segunda clase, dependiendo de la regiÃ³n y del barrio en que vives y de tu \\r\\nposiciÃ³n en la escala de ingresos.\\r\\nPese a avances importantes, gracias a las polÃ­ticas pÃºblicas implementadas en democracia, seguimos \\r\\nviviendo en una sociedad intolerante a la diversidad, con una cultura machista y patriarcal que castiga a \\r\\nla mujer y a las opciones sexuales que cada quien quiera libremente asumir.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n7\\r\\nLa gran diferencia nuestra con los conservadores es que buscamos que las nuevas tecnologÃ­as se \\r\\nusen para emparejar la cancha y mejorar la igualdad de oportunidades, para que nuestra economÃ­a \\r\\nsea simultÃ¡neamente mÃ¡s competitiva, mÃ¡s inclusiva y ambientalmente sostenible.\\r\\nTambiÃ©n pensamos que la seguridad pÃºblica es un derecho ciudadano que el estado debe garan-\\r\\ntizar. Por ello, en nuestro gobierno, trabajaremos con especial energÃ­a en mejorar la eficiencia de \\r\\nlas policÃ­as, la coordinaciÃ³n y especializaciÃ³n entre ellas y reforzando su vÃ­nculo con los municipios \\r\\ny la comunidad organizada. Dotaremos de mÃ¡s recursos a los municipios para que desarrollen \\r\\nprogramas de seguridad municipal, apoyados en la comunidad. Actualizaremos el derecho pe-\\r\\nnal, castigando severamente la reincidencia y ofreciendo una efectiva segunda oportunidad de \\r\\nreinserciÃ³n social a quienes delinquen por primera vez. Y, por cierto, aquel que no aproveche esa \\r\\nsegunda oportunidad enfrentarÃ¡ penas mÃ¡s duras. Fortaleceremos las fiscalÃ­as; pondremos mÃ¡s \\r\\nÃ©nfasis en combatir los delitos menores y crearemos el Defensor de las VÃ­ctimas, quien se esmer-\\r\\narÃ¡ en acompaÃ±ar a las vÃ­ctimas durante todo el proceso, evitando el cierre anticipado del mismo. \\r\\nTambiÃ©n elevaremos las penas a los delitos de cuello y corbata, a la colusiÃ³n, la corrupciÃ³n y el \\r\\ncohecho, asÃ­ como a los delitos ambientales, abandonando el triste espectÃ¡culo de las â\\200clases de \\r\\nÃ©ticaâ\\200\\235 o las multas irrisorias.\\r\\nEso no es moderno. La modernidad debe expresarse no solo en las nuevas tecnologÃ­as o en el consumo. \\r\\nTambiÃ©n debe expresarse en una sociedad mÃ¡s informada, mÃ¡s tolerante y mÃ¡s comprometida con la \\r\\ndiversidad y el respeto a los derechos de todos y todas. Para nosotros, esto significa medios de comu-\\r\\nnicaciÃ³n mÃ¡s plurales, un nuevo trato con nuestros pueblos originarios, valorar la identidad de gÃ©nero \\r\\ny diversidad sexual, respeto a los derechos sexuales y reproductivos y derechos sociales garantizados \\r\\npor el hecho de ser ciudadanos y ciudadanas. Por cierto, la modernidad tambiÃ©n debe expresarse en el \\r\\nuso de las nuevas tecnologÃ­as en nuestra producciÃ³n, nuestras escuelas, liceos y hospitales, en nuestras \\r\\nPymes, de nuestras ciudades, del estado y de nuestros gobiernos locales y regionales.\\r\\nEl derecho a vivir en una ciudad segura debe ser complementado con otro: el derecho a disfrutar \\r\\nde una ciudad amigable y sustentable. Trabajaremos para que nuestras ciudades reduzcan sus \\r\\ngrados de segregaciÃ³n, favoreciendo la gestaciÃ³n de Ã¡reas verdes, centros culturales y recintos \\r\\ndeportivos donde la comunidad pueda encontrarse; mejorando la calidad del transporte pÃºblico y \\r\\nmejorando el acceso a viviendas de calidad para sectores populares y para la clase media.\\r\\nPor eso, proclamamos con energÃ­a que esta candidatura tiene un compromiso definitivo con la \\r\\nautÃ©ntica libertad, con la justicia, la democracia, la solidaridad, la diversidad y la reducciÃ³n de las \\r\\ndesigualdades. Eso es lo que nos mueve a participar en polÃ­tica. \\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n8\\r\\nLa ConcertaciÃ³n primero y la Nueva MayorÃ­a despuÃ©s han conseguido avances importantes en cada \\r\\nuno de estos grandes objetivos. Pero tambiÃ©n es cierto que la dictadura nos hizo retroceder de-\\r\\nmasiado en estos principios civilizatorios. Por tanto, el camino es largo y nos falta mucho por avan-\\r\\nzar. No queremos retroceder y por eso es que no da lo mismo quien gane las prÃ³ximas elecciones. \\r\\nChile no debe permitirse retrocesos en materia de derechos de la mujer, diversidad sexual, fortaleza \\r\\nde los sindicatos, respeto al medio ambiente, educaciÃ³n gratuita y otros importantes logros.\\r\\nNuestra candidatura te invita a sumarte a esta cruzada Ã©pica por impedir los retrocesos sociales y \\r\\nculturales y por seguir avanzando hacia una sociedad mÃ¡s justa, mÃ¡s tolerante, mÃ¡s diversa, mÃ¡s \\r\\nsolidaria y mÃ¡s libre.\\r\\nTenemos plena conciencia de la brecha que se ha ido gestando entre ciudadanÃ­a y polÃ­tica: incumplimien-\\r\\nto de promesas, vÃ­nculos perversos entre polÃ­tica y dinero, desatenciÃ³n a temas fundamentales para \\r\\nnuestros compatriotas mÃ¡s desvalidos, todo eso explica la persistencia de esa brecha. Este es un tema \\r\\nque nos golpea profundamente pues el abstencionismo electoral es bÃ¡sicamente de nuestro sector. Se \\r\\nubica bÃ¡sicamente en los sectores de menores ingresos. Ellos se ven enfrentados a un escenario de \\r\\ncodicia desatada, donde todo vale para tener mÃ¡s, donde el Ã©xito se mide en proporciÃ³n al dinero que se \\r\\nobtenga, sin importar la forma en que se lo consigue. Por eso, de repente sienten que estÃ¡n de mÃ¡s en \\r\\neste paÃ­s, que nadie los considera y que todos los polÃ­ticos son lo mismo.\\r\\nUNA NUEVA POLÃ\\215TICA\\r\\nNo todos los polÃ­ticos son lo mismo. De hecho, los tremendos progresos en reducciÃ³n de la pobreza, me-\\r\\njorÃ­a en calidad de vida, ampliaciÃ³n de los sectores medios, acceso masivo a educaciÃ³n superior, todos \\r\\nellos son logros conseguidos gracias a la coaliciÃ³n de centroizquierda que ha gobernado mayoritaria-\\r\\nmente desde la reconquista de la democracia. Que es posible que hubiÃ©semos hecho mÃ¡s, es posible. \\r\\nPero lo que no hay que perder de vista es esos logros jamÃ¡s se hubiesen conseguido con la derecha en \\r\\nel gobierno. \\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n9\\r\\nNuestra polÃ­tica, la del progresismo, concibe que hay derechos ciudadanos a los que se debe acceder por \\r\\nel solo hecho de vivir en Chile. Para nosotros, el acceso oportuno y de calidad a la salud, la educaciÃ³n y \\r\\nla previsiÃ³n no puede depender Ãºnicamente del grosor de tu billetera. Tampoco el derecho a la vivienda, \\r\\na los espacios verdes, a la cultura y a un medio ambiente sano. \\r\\nTodos esos temas, en nuestra propuesta, son derechos ciudadanos que una Nueva ConstituciÃ³n debe \\r\\npreocuparse por garantizar. Por cierto, en la medida que los recursos lo permitan, pero con una clara \\r\\nhoja de ruta ascendente y que no admite retrocesos. Por eso es que no da lo mismo quien llegue a la \\r\\npresidencia. Aspiramos a continuar el camino que, con coraje, abriÃ³ la Presidenta Bachelet, dando pa-\\r\\nsos significativos hacia un estado que garantice derechos sociales, principio civilizatorio que debe estar \\r\\nestampado en la Nueva ConstituciÃ³n.\\r\\nNo se nos escapa que estÃ¡ pendiente la reforma del estado. El estado que necesitamos es uno mÃ¡s \\r\\neficiente, mÃ¡s descentralizado y mÃ¡s participativo. Ese estado por construir debe resistir la corrupciÃ³n, \\r\\nresistor a ser cooptado por el dinero o los partidos polÃ­ticos, buscando una permanente modernizaciÃ³n, \\r\\nbasada en la calificaciÃ³n permanente, la probidad y el buen desempeÃ±o de sus funcionarios. Ese estado, \\r\\nuno que dialoga mÃ¡s entre sus diversos componentes, es el que necesitamos para activar la descentral-\\r\\nizaciÃ³n, la participaciÃ³n ciudadana y el diÃ¡logo pÃºblico-privado con visiÃ³n prospectiva. TambiÃ©n avanza-\\r\\nremos en este gran desafÃ­o. \\r\\nTambiÃ©n sabemos que sin partidos polÃ­ticos no hay democracia, ya que sin ellos gobierna directamente el \\r\\ndinero o lo hace a travÃ©s de dictaduras. Tenemos claro que para recuperar la confianza de la ciudadanÃ­a \\r\\ny particularmente de aquellos que nos votaban, necesitamos una profunda renovaciÃ³n de la polÃ­tica. Ese \\r\\nes uno de los ejes de nuestra propuesta: mÃ¡s transparencia, cercanÃ­a con la ciudadanÃ­a, rendiciÃ³n de \\r\\ncuentas, fin al vÃ­nculo incestuoso entre dinero y polÃ­tica.\\r\\nNo es casual que Alejandro Guillier, un candidato independiente, encabece este movimiento. Nuestra \\r\\ncandidatura cree profundamente en la necesidad de la polÃ­tica, sÃ­, pero de una polÃ­tica renovada, mÃ¡s \\r\\ncerca de la ciudadanÃ­a, estimulando las mÃ¡s diversas formas de participaciÃ³n ciudadana, apoyando a \\r\\nlas organizaciones sociales e incorporÃ¡ndolas en el diseÃ±o, gestiÃ³n y evaluaciÃ³n de las polÃ­ticas pÃºblicas. \\r\\nEse es nuestro principal compromiso y pedimos que por este compromiso nos midan, cuando lleguemos \\r\\na La Moneda.\\r\\nAspiramos a ser un gobierno que se apoye decididamente en las organizaciones sociales y en la partici-\\r\\npaciÃ³n ciudadana, aprovechando para ello todas las oportunidades tecnolÃ³gicas que nos permite el siglo \\r\\n21. \\r\\nPor lo mismo, nuestro proyecto polÃ­tico estÃ¡ profundamente comprometido con la descentralizaciÃ³n, \\r\\ntarea en la que iremos transfiriendo gradualmente facultades y recursos a los gobiernos locales y regio-\\r\\nnales. Vamos a nivelar la cancha entre los chilenos y chilenas de todas nuestras regiones. Vamos a otor-\\r\\ngar nuevas y mejores oportunidades a los Pablo Neruda, Claudio Arrau, RamÃ³n Vinay, Gustavo Sabella \\r\\ny a las Violeta Parra, Gabriela Mistral y Marta Colvin que no han tenido la oportunidad de desplegar sus \\r\\ntalentos por el sÃ³lo hecho de vivir en provincias.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n10\\r\\nUNA NUEVA ECONOMÃ\\215A\\r\\nLa base material de estos avances no puede ser una economÃ­a altamente concentrada, apoyada exce-\\r\\nsivamente en un grupo reducido de recursos naturales, con indiferencia al deterioro del medio ambiente \\r\\ny con relaciones laborales que no dan cuenta de los desafÃ­os de innovaciÃ³n, productividad y cambio \\r\\ntecnolÃ³gico que predominan en este siglo 21. \\r\\nPor ello, nos comprometemos a dar pasos decisivos hacia una matriz productiva y exportadora mÃ¡s \\r\\ndiversificada, retomando iniciativas de reindustrializaciÃ³n, incorporando mÃ¡s tecnologÃ­a y conocimiento \\r\\nal trabajo de chilenos y chilenas. Buscaremos tambiÃ©n reducir los elevados grados de concentraciÃ³n \\r\\neconÃ³mica que caracterizan a nuestra economÃ­a. \\r\\nTan elevada concentraciÃ³n en la distribuciÃ³n del ingreso y en las oportunidades de progreso reduce la \\r\\nrelevancia de los indicadores econÃ³micos tradicionales. Los datos de Impuestos Internos indican que \\r\\nlas ventas anuales de las grandes empresas crecieron entre 1995 y 2005 desde el 73% al 82% del \\r\\ntotal nacional de las ventas totales, siendo que en el 2005 sÃ³lo representaron el 1.2% de las unidades \\r\\nproductivas. Vale decir, las MIPYMES vienen perdiendo participaciÃ³n y ese desajuste entre la velocidad \\r\\nde crecimiento de las grandes empresas y el resto, termina siendo un freno al propio crecimiento, junto \\r\\ncon acentuar la concentraciÃ³n del ingreso. Si mÃ¡s del 80% del gasto en productos nacionales se dirige a \\r\\npoco mÃ¡s del 1% de las empresas, es claro que no basta con crecer. Por cierto, necesitamos crecer a tasas \\r\\nmayores, pero tambiÃ©n necesitamos que ese crecimiento se distribuya mejor.\\r\\nSabemos que avanzar en este crucial tema no serÃ¡ fÃ¡cil, dados los vÃ­nculos poderosos entre economÃ­a, \\r\\npolÃ­tica, dinero y los principales medios de comunicaciÃ³n. Pero no importa, estamos dispuestos a abordar \\r\\nel desafÃ­o y la velocidad y profundidad de nuestro avance dependerÃ¡ justamente de tu apoyo. Nuestra \\r\\nvoluntad existe. Te necesitamos para avanzar juntos hacia un Chile mÃ¡s justo y solidario. \\r\\nUna economÃ­a menos concentrada significa fortalecerlos mecanismos que controlan la colusiÃ³n y las \\r\\nprÃ¡cticas anti-competitivas; apoyar las organizaciones de consumidores y mÃ¡s importante, significa \\r\\notorgar a las Pymes y las cooperativas el espacio y el apoyo que lamentablemente no han tenido desde \\r\\nel inicio de la transiciÃ³n democrÃ¡tica. Este es tambiÃ©n otro de nuestros compromisos fundamentales.\\r\\nPretendemos tambiÃ©n avanzar hacia una economÃ­a mÃ¡s inteligente, es decir, con mÃ¡s innovaciÃ³n y mÃ¡s \\r\\napoyo a nuestra ciencia y tecnologÃ­a. Ya cerca de concluir la segunda dÃ©cada del siglo 21, nadie bien in-\\r\\nformado podrÃ­a ignorarÃ­a ignorar las notables repercusiones del cambio tecnolÃ³gico sobre la economÃ­a, \\r\\nla sociedad y la cultura. Y aquÃ­ hay sÃ³lo dos caminos: permitimos que las nuevas tecnologÃ­as se incor-\\r\\nporen en Chile sÃ³lo por las seÃ±ales del mercado o establecemos un nuevo pacto social para apropiarnos \\r\\nde esas nuevas tecnologÃ­as para construir una competitividad que no estÃ© divorciada de la igualdad de \\r\\noportunidades.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n11\\r\\nLa incorporaciÃ³n de las nuevas tecnologÃ­as segÃºn las orientaciones del mercado sÃ³lo agudizarÃ¡ las \\r\\nbrechas sociales, afectando la gobernabilidad, obligÃ¡ndonos a convivir con altas tasas de desempleo \\r\\njuvenil y haciendo cada vez mÃ¡s difÃ­cil que la polÃ­tica pÃºblica pueda compensar la desigualdad en las \\r\\noportunidades.\\r\\nPor eso es que, para nosotros, para los progresistas, el cambio tecnolÃ³gico y la innovaciÃ³n son instru-\\r\\nmentos decisivos para la construcciÃ³n de una sociedad mÃ¡s justa, mÃ¡s integrada y mÃ¡s solidaria. La \\r\\nexperiencia internacional nos indica tambiÃ©n que la innovaciÃ³n florece mejor en entornos de cooperaciÃ³n, \\r\\ncreatividad y compromiso compartido con una misiÃ³n colectiva. \\r\\nPara ello, necesitamos entonces mÃ¡s diÃ¡logo social y empresas menos verticalistas. \\r\\nNo es posible generar sociedades innovadoras con estructuras sociales segmentadas, con relaciones \\r\\nlaborales aÃ±ejas, con empleos precarios o donde el â\\200pitutoâ\\200\\235 y el apellido valen mÃ¡s que el esfuerzo \\r\\npersonal y el buen desempeÃ±o. Tampoco es posible pensar en un Chile mÃ¡s innovador sin educaciÃ³n \\r\\npÃºblica de calidad, sin empleo decente, sin sindicatos fuertes y comprometidos con la productividad y \\r\\nsin barrios y comunas socialmente mÃ¡s integrados. \\r\\nEs mÃ¡s que evidente cuanto daÃ±o nos hizo la dictadura y el neoliberalismo en cada uno de estos Ã¡m-\\r\\nbitos, Ã¡mbitos en los cuales nos resta mucho por avanzar. Por eso es que los avances tendrÃ¡n que \\r\\nser necesariamente graduales. Pero, de nuevo, lo mÃ¡s importante es mantener el timÃ³n firme y en la \\r\\ndirecciÃ³n correcta. \\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n12\\r\\nCHILE EN EL MUNDO\\r\\nNuestra propuesta tiene una opciÃ³n clara sobre la inserciÃ³n de Chile en el escenario global. Nos interesa \\r\\nincidir, en alianza con otras naciones y organizaciones, en una globalizaciÃ³n cada vez mÃ¡s humanizada \\r\\nque combate la guerra, el terrorismo, la pobreza, el hambre y las discriminaciones. \\r\\nEstamos comprometido con el multilateralismo, la democracia y la defensa de los derechos humanos. \\r\\nEntendemos tambiÃ©n que, para potenciar nuestra voz, debemos reforzar nuestro compromiso con la \\r\\nintegraciÃ³n regional. Seguiremos trabajando con Ã­mpetu en ello, sÃ­ como en estimular mayor convergen-\\r\\ncia entre la Alianza del PacÃ­fico y Mercosur y en generar mayores espacios de cooperaciÃ³n con nuestros \\r\\nvecinos. Lo anterior, mÃ¡s relaciones cada vez mÃ¡s profundas con Argentina y con Brasil no sÃ³lo nos \\r\\nayudarÃ¡n a avanzar en mÃ¡s integraciÃ³n regional, en exportaciones manufactureras y de servicios, en \\r\\ncadenas de valor subregionales, sino que tambiÃ©n mejorarÃ¡n las posibilidades de un vÃ­nculo mÃ¡s diver-\\r\\nsificado y anclado en iniciativas de mayor escala en nuestras relaciones con Asia PacÃ­fico. \\r\\nCreemos en la necesidad de una economÃ­a abierta, con polÃ­ticas que ayuden a mejorar la calidad de \\r\\nnuestra inserciÃ³n econÃ³mica, aprovechando nuestra vasta red de acuerdos comerciales, buscando di-\\r\\nversificar mercados, pero tambiÃ©n productos y servicios exportados y elevando el nÃºmero de empresas \\r\\nexportadoras. Nuestras polÃ­ticas velarÃ¡n porque las Pymes tengan mayor presencia como exportado-\\r\\nras directas o indirectas y en las cadenas de valor que se vaya gestando. \\r\\nReforzaremos tambiÃ©n el compromiso asumido por Chile con el desarrollo sostenible, expresado en la \\r\\nAgenda 2030 para el Desarrollo Sostenible y los 17 ODS (Objetivos de Desarrollo Sostenible), aproba-\\r\\ndos en septiembre de 2015 en la Asamblea General de las Naciones Unidas. No sÃ³lo nos esforzaremos \\r\\npor cumplir dichos compromisos, sino que ademÃ¡s buscaremos liderar a la regiÃ³n en dicho cumplimien-\\r\\nto, proponiendo fÃ³rmulas que ademÃ¡s colaboren a reforzar la integraciÃ³n regional en torno de dichos \\r\\nobjetivos. \\r\\nManifestamos tambiÃ©n nuestro compromiso con el acuerdo firmado en la Conferencia de ParÃ­s sobre \\r\\nel Clima (CPO21), en que 195 paÃ­ses firmaron el primer acuerdo vinculante mundial orientado a reducir \\r\\nlas emisiones, en el marco de planes nacionales de acciÃ³n para combatir el cambio climÃ¡tico, incluyendo \\r\\ntareas mitigaciÃ³n, adaptaciÃ³n y transparencia. \\r\\nLa preservaciÃ³n del medio ambiente y el combate al cambio climÃ¡tico son dos ejes transversales que \\r\\nestarÃ¡n presentes en todas nuestras polÃ­ticas pÃºblicas, partiendo por la educaciÃ³n. \\r\\nTe invitamos a ser parte de esta propuesta que busca proyectar un mejor ingreso de Chile al siglo 21, \\r\\nmodernizando nuestra polÃ­tica, el estado y nuestra institucionalidad para construir no sÃ³lo un paÃ­s mÃ¡s \\r\\nsolidario y mÃ¡s integrado sino tambiÃ©n un Chile donde la competitividad y la innovaciÃ³n apoyen la may-\\r\\nor inclusiÃ³n social y un desarrollo mÃ¡s sustentable al servicio de las mayorÃ­as.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n13\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n14\\r\\nUNA VISIÃN INTEGRADA \\r\\nDEL CAMBIO QUE QUEREMOS.\\r\\nEmpezaremos a debatir sobre una amplia diversidad de temas ya incorporados en nues-\\r\\ntras Bases ProgramÃ¡ticas, perseverando en una mirada integrada del cambio social, \\r\\neconÃ³mico y polÃ­tico que deseamos abordar. Por ejemplo, por supuesto que nos interesa \\r\\ncrecer a tasas mÃ¡s elevadas pero ese crecimiento debe ser sostenible, no puede ser al \\r\\ncosto de contaminar el agua, el aire, el suelo agrÃ­cola, nuestro mar y nuestros pueblos y \\r\\nciudades; no puede ser a base de un empleo precario, con remuneraciones que apenas \\r\\npermiten sobrepasar la lÃ­nea de pobreza y con sindicatos dÃ©biles, sin capacidad efectiva \\r\\nde negociaciÃ³n colectiva. Tampoco puede ser un tipo de crecimiento donde el acceso a \\r\\nlos servicios sociales bÃ¡sicos â\\200 educaciÃ³n, salud y previsiÃ³n- queda limitado al grosor \\r\\nde tu billetera.\\r\\nPor eso es que, en economÃ­a, nuestra trilogÃ­a es \\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n15\\r\\nCRECIMIENTO SOSTENIBLE+EMPLEO \\r\\nDECENTE+PROTECCIÃN SOCIAL.\\r\\nEl segundo Ã©nfasis de nuestra campaÃ±a se relaciona con una mayor cercanÃ­a de las polÃ­ticas pÃºbli-\\r\\ncas con las familias chilenas, con su barrio, con su entorno y con un contexto polÃ­tico-institucional \\r\\nen que el estado y los gobiernos regionales, locales y municipios se acercan a las necesidades e \\r\\ninquietudes de chilenos y chilenas. Por eso es que hemos colocado en el centro de la agenda la \\r\\ndescentralizaciÃ³n y la participaciÃ³n ciudadana. \\r\\nLas familias chilenas buscan un nuevo trato, que ponga fin tanto a los abusos del mercado como a \\r\\nla indolencia o la burocracia del estado; un nuevo trato que le garantice los servicios sociales bÃ¡si-\\r\\ncos, que le asegure una educaciÃ³n gratuita y de calidad para sus hijos; que la apoye en situaciones \\r\\nde vulnerabilidad, que le dÃ© una mano cuando incursione en la tercera edad, con pensiones dignas, \\r\\nque proteja a la niÃ±ez generÃ¡ndole espacios de acogida, de juego, esparcimiento y felicidad. \\r\\nEl territorio, el barrio es la unidad bÃ¡sica donde estas familias organizan su vida. Por eso es que \\r\\nen nuestro gobierno nos esforzaremos porque la salud, la educaciÃ³n y el deporte se acerquen al \\r\\nbarrio. Pondremos el Ã©nfasis en la salud primaria; en educaciÃ³n, trabaremos para que el proyecto \\r\\neducacional se construya en diÃ¡logo entre el colegio, el profesorado y las organizaciones sociales \\r\\ny comunitarias. La propia escuela serÃ¡ un espacio de diÃ¡logo y participaciÃ³n y no sÃ³lo en los temas \\r\\neducativos ya que se utilizarÃ¡ tambiÃ©n para que padres, apoderados y jÃ³venes hagan deporte, \\r\\npara que reciban capacitaciÃ³n en temas de salud, de sexualidad, de manejo de las finanzas famil-\\r\\niares y de medio ambiente, todo ello aterrizado a las necesidades locales.\\r\\nLa salud es un buen ejemplo de esta mirada integral. Las enfermedades que mÃ¡s nos amenazan \\r\\ntienen que ver con la falta de ejercicio, con la dieta y con el stress de la ciudad. La mejor vÃ­a para \\r\\nabordarlas es un esfuerzo integrado entre salud, educaciÃ³n y deportes. Si llevamos estos temas \\r\\nal aula, si los padres participan en esas actividades, si la escuela y el municipio facilitan espacios \\r\\npara que jÃ³venes y sus padres puedan realizar deporte, estaremos haciendo la mejor inversiÃ³n \\r\\nen salud, achicÃ¡ndole el espacio a la droga y abriendo mejores perspectivas para nuestros hijos.\\r\\nEl barrio, el territorio, el municipio y los gobiernos locales serÃ¡n centrales en nuestro trabajo. Por \\r\\neso es que iremos transfiriendo gradualmente recursos y atribuciones a estos gobiernos, acer-\\r\\ncando la toma de decisiones al barrio. Y por eso es que tambiÃ©n queremos potenciar la partici-\\r\\npaciÃ³n ciudadana en programas diversos junto al municipio: esa participaciÃ³n la estimularemos en \\r\\nprogramas de salud, educaciÃ³n, deportes, capacitaciÃ³n para jÃ³venes e incluso incluyendo mayor \\r\\ncercanÃ­a entre la policÃ­a, el municipio y las organizaciones sociales para coordinarse mejor en la \\r\\nseguridad pÃºblica. Barrios mÃ¡s seguros, mÃ¡s integrados, con mÃ¡s espacios verdes, con mejores \\r\\nluminarias permitirÃ¡n que sea la vida de barrio la que se vaya imponiendo y construyendo comu-\\r\\nnidad. Pero esto no sÃ³lo requiere la voluntad del gobierno, debe ir acompaÃ±ada de municipios \\r\\ncomprometidos con esta tarea y de chilenos y chilenas que estÃ©n dispuestos a volver a creer en \\r\\nla participaciÃ³n, haciÃ©ndola viva, controlando a sus autoridades. Sabemos que la partida no serÃ¡ \\r\\nfÃ¡cil pero confiamos en que, cuando vean en la prÃ¡ctica que se van generando esos espacios de \\r\\nparticipaciÃ³n, entonces primarÃ¡ la voluntad de integrarse a esta hermosa tarea.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n16\\r\\nLo mismo acontecerÃ¡ con las polÃ­ticas sectoriales: la energÃ­a, las telecomunicaciones y la infrae-\\r\\nstructura deberÃ¡n aportar al crecimiento verde, con empleo decente y con protecciÃ³n social. De-\\r\\nberÃ¡n apoyar el fortalecimiento de las Pymes y de las cooperativas, ayudando, por ejemplo, a \\r\\nsu digitalizaciÃ³n para que puedan aprovechar las oportunidades de la nueva economÃ­a. Avances \\r\\nen modernidad tecnolÃ³gica sÃ­ pero orientados a emparejar la cancha, a mejorar el impacto de \\r\\nlas polÃ­ticas sociales, a fortalecer la capacidad tÃ©cnica de los municipios menos favorecidos, de \\r\\nnuestras escuelas y centros de salud. Nuestra propuesta combina el crecimiento con la preser-\\r\\nvaciÃ³n ambiental, empleo decente y protecciÃ³n social, apoyados en la innovaciÃ³n y en las nuevas \\r\\ntecnologÃ­as. En definitiva, es una invitaciÃ³n a que chilenos y chilenas se incorporen a las tareas del \\r\\ndesarrollo, considerando las oportunidades y desafÃ­os que se nos plantean en esta ya segunda \\r\\ndÃ©cada del siglo 21. \\r\\nA continuaciÃ³n, enumeramos nuestros 7 principales ejes, en torno de los cuales articularemos \\r\\nnuestra acciÃ³n de gobierno.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n17\\r\\nLAS FAMILIAS PRIMERO\\r\\nRECUPERANDO EL CRECIMIENTO\\r\\nUNA SÃLIDA AGENDA DE SEGURIDAD PUBLICA\\r\\nPENSIONES DIGNAS\\r\\nTERMINAR CON EL MACHISMO, LA DISCRIMINACIÃN Y LA VIOLENCIA \\r\\nCONTRA LA MUJER\\r\\nHACIA UNA NUEVA POLÃ\\215TICA: POR UN PACTO ÃTICO QUE ASEGURE \\r\\nMEJORES PRÃ\\201CTICAS PARA RESTAURAR LA CONFIANZA Y \\r\\nFORTALECER LA DEMOCRACIA. \\r\\nDESCENTRALIZACIÃN EFECTIVA Y COMUNAS MÃ\\201S FUERTES\\r\\n1\\r\\n2\\r\\n3\\r\\n4\\r\\n5\\r\\n6\\r\\n7\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n18\\r\\nCOMPROMISO 1: \\r\\nLAS FAMILIAS PRIMERO\\r\\nNuestro gobierno serÃ¡ el gobierno de las familias. Pero no de una sola familia, sino de todas las \\r\\nfamilias que hoy existen en nuestro paÃ­s. \\r\\nUna familia no es padre, un hijo y una esposa unidos por siempre. Una familia estÃ¡ unida por el \\r\\namor, la protecciÃ³n de unos a otros. \\r\\nSabemos que por muchos aÃ±os las familias chilenas no han esperado al gobierno para resolver \\r\\nsus problemas. Sabemos que pase lo que pase en el paÃ­s, las familias tendrÃ¡n que trabajar duro \\r\\npara salir adelante y se sacrificaran todos los dÃ­as para dar un mejor pasar a sus hijos e hijas. Tam-\\r\\nbiÃ©n sabemos que han perdido su fe en lo que el gobierno puede hacer para ayudarles.\\r\\nNo estÃ¡n solos, nosotros hemos escuchado su mensaje. Es hora de hacer realidad el principio de \\r\\nque â\\200la familia es el nÃºcleo fundamental de la sociedadâ\\200\\235. \\r\\nEn nuestro gobierno, implementaremos un profundo plan de protecciÃ³n que otorgue a todos los \\r\\ntipos de familias un alivio econÃ³mico y social.\\r\\nEl Plan â\\200Las Familias Primeroâ\\200\\235 consiste en los siguientes compromisos:\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n19\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n20\\r\\n1. PROTECCIÃN PARA TODAS Y TODOS \\r\\nLOS HIJOS DE CHILE:\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n21\\r\\nNingÃºn niÃ±o o niÃ±a se quedarÃ¡ atrÃ¡s. Nuestro compromiso es que todo niÃ±o o niÃ±a, \\r\\nsin importar su origen, la condiciÃ³n de sus padres, o situaciÃ³n, serÃ¡ responsabilidad \\r\\nde toda la sociedad. Este es un cambio Ã©tico y de enfoque que implementaremos bajo \\r\\nnuestro gobierno. \\r\\nEn los primeros 100 dÃ­as de nuestro gobierno, presentaremos una profunda reforma \\r\\nal Sename. La actual estructura dejarÃ¡ de existir, creando, en su reemplazo, el Servicio \\r\\nde ProtecciÃ³n Especial y el Servicio de ReinserciÃ³n Social Juvenil. \\r\\nPondremos el foco en la aprobaciÃ³n e implementaciÃ³n de los siguientes proyectos de \\r\\nley: Ley de GarantÃ­a de Derechos, Ley de AdopciÃ³n, Defensor de la NiÃ±ez, Subsecretaria \\r\\nde la NiÃ±ez.\\r\\nA.\\r\\nB.\\r\\nC.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n22\\r\\n2. PROFUNDIZAREMOS LOS AVANCES HACIA \\r\\nUNA EDUCACIÃN PÃBLICA, GRATUITA Y DE \\r\\nCALIDAD PARA TODAS Y TODOS\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n23\\r\\nA.\\r\\nB.\\r\\nC.\\r\\nD.\\r\\nE.\\r\\nF.\\r\\nPara nosotros â\\200la educaciÃ³n es un derecho y no un bien de consumoâ\\200\\235. Es un derecho que \\r\\npermite a los ciudadanos y ciudadanas ejercer sus otros derechos. Sin educaciÃ³n no se \\r\\ntiene libertad. Ese es el centro de nuestro compromiso. \\r\\nEstableceremos una reforma educacional 2.0. Continuaremos con los objetivos trazados \\r\\npor las reformas implementadas bajo el gobierno de Michelle Bachelet, abiertos a corregir \\r\\nlo que la prÃ¡ctica sugiera corregir, pero impulsando una profunda revoluciÃ³n del trabajo \\r\\ndentro del aula. Las reformas ahora serÃ¡n dentro de las salas de clases. Vamos a desmunic-\\r\\nipalizar la educaciÃ³n. Modificaremos el sistema de financiamiento de la educaciÃ³n, pasando \\r\\ndel subsidio a la demanda basado en la subvenciÃ³n por asistencia media a un modelo que \\r\\nconsidere la multiplicidad de factores que condicionan el quehacer de la escuela. \\r\\nLa revoluciÃ³n del aula debe comenzar por la primera infancia y avanzar gradualmente \\r\\nen los otros niveles. Queremos que el 100% de los niÃ±os/as tengan acceso de cobertura. \\r\\nPor ello, estudiaremos un plan nacional de cobertura que garantice a cada niÃ±a y niÃ±o la \\r\\natenciÃ³n educativa en este nivel parvulario. Al mismo tiempo, elevaremos la calidad en el \\r\\naula pre-bÃ¡sica. \\r\\nLa RevoluciÃ³n del Aula la centraremos en los profesores. Debemos priorizar la mÃ¡xima \\r\\ncalidad en su educaciÃ³n y al mismo tiempo en las exigencias. EstÃ¡ demostrado que la \\r\\nevaluaciÃ³n docente apoyada en pruebas estandarizadas no es efectiva y que las exigen-\\r\\ncias burocrÃ¡ticas de extremos papeleos demanda mucho tiempo al profesor en lugar de \\r\\ndedicÃ¡rselo a los alumnos. Haremos una revisiÃ³n exhaustiva para que los profesores se \\r\\ndediquen a nuestros hijas e hijos y no a llenar papeles. Vamos a estudiar la posibilidad de \\r\\nreducir los alumnos por sala, acercÃ¡ndose al estÃ¡ndar OCDE de 21 alumnos (hoy son 30), \\r\\nconsiderando apoyo docente en cada aula. En el primer aÃ±o de nuestro gobierno vamos \\r\\na presentar una revisiÃ³n de la malla curricular, la que buscaremos sea objeto de un gran \\r\\nacuerdo nacional.\\r\\nDaremos un impulso a la EducaciÃ³n TÃ©cnica. Nos haremos cargo del dÃ©ficit en infraestruc-\\r\\ntura y tecnologÃ­a, asÃ­ como crear una Red de Estatal de EducaciÃ³n TÃ©cnica Profesional, \\r\\nque permita terminar con los callejones sin salida de estos estudiantes (baja matricula \\r\\nsector terciario e ingreso al mundo laboral) y refuerce su empleabilidad. \\r\\nRevisaremos el sistema de financiamiento de la EducaciÃ³n superior, avanzando hacia \\r\\nel financiamiento basal a las instituciones pÃºblicas, considerando diversos factores que \\r\\npermitan un financiamiento acorde a la realidad de cada instituciÃ³n. Seguiremos con la \\r\\npolÃ­tica de gratuidad en educaciÃ³n superior, continuando con la transiciÃ³n gradual para \\r\\nalcanzar el 100% de cobertura, cuando las condiciones econÃ³micas lo permitan. Termin-\\r\\naremos con el CAE. El actual gobierno ha manifestado su disposiciÃ³n a poner fin a este in-\\r\\nstrumento. Evaluaremos el proyecto respectivo y buscaremos las fÃ³rmulas que permitan \\r\\nsu implementaciÃ³n, sujeto a las restricciones fiscales existentes.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n24\\r\\n3. FORTALECEREMOS\\r\\n EL DERECHO A LA SALUD\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n25\\r\\nA.\\r\\nB.\\r\\nC.\\r\\nD.\\r\\nE.\\r\\nF.\\r\\nContinuaremos la construcciÃ³n de nuevos hospitales, Centros de Salud Familiar, Centros \\r\\nComunitarios de Salud Familiar y Servicios de AtenciÃ³n Primaria de Urgencia de Alta Res-\\r\\noluciÃ³n. Crearemos en el Ministerio de Salud la unidad de GestiÃ³n de Proyectos de Infrae-\\r\\nstructura. Fortaleceremos la formaciÃ³n del personal de salud, en particular, formando mÃ¡s \\r\\nmÃ©dicos de familia y preparando a los mÃ©dicos generalistas para que se hagan expertos en \\r\\nciertas Ã¡reas de patologÃ­as mÃ¡s preeminentes en sus respectivas regiones o localidades. \\r\\nAl mismo tiempo, trabajaremos para reducir las fuertes asimetrÃ­as en dotaciÃ³n de mÃ©dicos \\r\\ny especialistas por habitante entre Santiago y el resto del paÃ­s.\\r\\nAvanzaremos hacia la AtenciÃ³n Primaria Universal. Pondremos en marcha un sistema de \\r\\natenciÃ³n primaria y de salud preventiva para todas y todos los chilenos, en todo el terri-\\r\\ntorio nacional. Ello implicarÃ¡ fortalecer el Modelo de AtenciÃ³n Integral de salud familiar y \\r\\ncomunitaria.\\r\\nFortaleceremos la estructura de Fonasa, dotÃ¡ndolo de mayores recursos y atribuciones. \\r\\nEn nuestro gobierno toda persona que tenga riesgo serÃ¡ atendida de urgencia y sin costo \\r\\nhasta la estabilizaciÃ³n del paciente, independiente donde sea atendido. Al mismo tiem-\\r\\npo, vamos a aumentar las prestaciones asociadas a diagnÃ³sticos(PAD). Implementaremos \\r\\nun Plan de Contingencia destinado a terminar las listas de espera, Ges y otras. Al mismo \\r\\ntiempo, buscaremos descentralizar y aumentar la autonomÃ­a de los hospitales, fortaleci-\\r\\nendo el liderazgo interno y asociando mejoras y beneficios a aquellos que tengan mejor \\r\\ndesempeÃ±o.\\r\\nLey de Salud Mental. Ampliaremos y mejoraremos la cobertura dental del sistema pÃºblico \\r\\nde salud, aumentando el acceso de las personas a la atenciÃ³n dental en consultorios, es-\\r\\npecialmente de mujeres y adulto mayor. Crearemos una ficha clÃ­nica electrÃ³nica universal \\r\\npara todas y todos los chilenos, independiente se atiendan en el sector pÃºblico o privado. \\r\\nVamos a avanzar hacia una cobertura universal de salud, reformando los seguros de salud \\r\\nque hoy existen(Fonasa e Isapres), para que las personas aporten segÃºn su capacidad de \\r\\npago y lo utilicen dependiendo de su necesidad. Alguno de los objetivos que nos hemos \\r\\ntrazado con esta importante reforma son: Introducir solidaridad inter-sistemas; establecer \\r\\nacceso a la salud universal e igualitario y no dependa mÃ¡s del bolsillo de cada uno; generar \\r\\nmovilidad de los cotizantes entre ISAPRE y FONASA, ya que, al disminuir la asimetrÃ­a de \\r\\nla informaciÃ³n, las personas podrÃ­an comparar mejor los planes de salud, aumentarÃ­a la \\r\\ncompetencia y los precios de los planes serÃ­an menores. \\r\\nCrearemos una Sistema de Farmacias PÃºblicas para evitar los abusos del mercado, la \\r\\ncolusiÃ³n de precios y, finalmente, beneficiar a los ciudadanos y ciudadanas. Este sistema \\r\\nconsistirÃ¡ en 3 medidas concretas: a) Fortalecer una red de farmacias de barrio, permitien-\\r\\ndo que CENABAST les venda remedios a precios mÃ³dicos, lo que facilitarÃ­a la competen-\\r\\ncia contra las grandes cadenas farmacÃ©uticas; b) Instalar botiquines mÃ©dicos en todos los \\r\\nservicios pÃºblicos; c) Promover farmacias PÃºblicas en aquellos lugares donde se necesite \\r\\nmayor competencia.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n26\\r\\n4. VIVIENDAS PARA TODOS Y TODAS\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n27\\r\\nA.\\r\\nB.\\r\\nC.\\r\\nD.\\r\\nHaremos un ajuste tributario para eximir a la clase media del IVA a la vivienda. Este IVA lo \\r\\nque hace es encarecer entre un 12% y un 15% el valor de la vivienda, afectando a quienes \\r\\ncompran viviendas a partir de 3.000, 4.000, 5.000 UF.\\r\\nImpulsaremos una polÃ­tica de fomento a la primera vivienda desde el Banco de Estado, \\r\\nfavoreciendo principalmente a jÃ³venes y mujeres. \\r\\nReforzaremos el plan de construcciÃ³n de viviendas sociales, con viviendas ampliables, \\r\\ndignas, seguras y con Ã¡reas verdes, dotadas de servicios bÃ¡sicos y transporte cercano. \\r\\nTrabajaremos en programas especiales para apoyar la vivienda de sectores medios o la \\r\\nampliaciÃ³n de sus viviendas. Nuestro plan de renovaciÃ³n de viviendas estarÃ¡ basado en la \\r\\nregeneraciÃ³n de los planes existentes y la coordinaciÃ³n con las agencias regionales para \\r\\nfocalizar subsidios. Crearemos un sistema de garantÃ­a estatal para que los nuevos barrios \\r\\ncuenten con servicios bÃ¡sicos, emplazamiento seguro y sin contaminaciÃ³n, comercio local \\r\\ny adecuada conectividad;\\r\\nBuscaremos erradicar los campamentos. Chile no puede avanzar si tenemos estos temas \\r\\npendientes. En nuestro territorio quedan mÃ¡s de 35 mil familias que siguen viviendo en la \\r\\npobreza mÃ¡s dura, hogares sin las condiciones mÃ­nimas y servicios bÃ¡sicos. \\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n28\\r\\n5. BUENOS EMPLEOS \\r\\nY MEJORES SALARIOS\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n29\\r\\nA.\\r\\nB.\\r\\nC.\\r\\nD.\\r\\nReformaremos las Transferencias Pro-Empleo con el objetivo de fortalecer la empleabili-\\r\\ndad, formalidad e ingreso laboral de madres solteras y jÃ³venes. Reformaremos la norma-\\r\\ntiva asociada a la exigencia de contar con sala cuna en las empresas que tengan mÃ¡s de \\r\\n25 empleadas mujeres, terminando con la discriminaciÃ³n hacia las mujeres, haciÃ©ndolo \\r\\nextensivo a todos los trabajadores. Impulsaremos una Ley de Teletrabajo.\\r\\nCÃ³digo Laboral pro-familia: Reformaremos el CÃ³digo del Trabajo con el objetivo de esta-\\r\\nblecer mecanismos de adaptabilidad horaria y bancos de hora, para dar que los traba-\\r\\njadores y trabajadoras puedan adecuar los tiempos laborales con los familiares. A partir \\r\\nde un dialogo tripartito(Gobierno-Empresas-Trabajadores) buscaremos generar acuerdos \\r\\nlaborales que permitan mejorar la distribuciÃ³n de las utilidades, cuando ellas hayan sido \\r\\ngracias a la productividad de los trabajadores y trabajadoras. \\r\\nTrabajo para tod@s. SegÃºn Senadis, un 70% de las personas mayores de 15 aÃ±os en situ-\\r\\naciÃ³n de discapacidad no tiene trabajo remunerado. Vamos a revisar la ley de inclusiÃ³n, \\r\\ncon el objeto de hacer que esta norma se cumpla y aplique, partiendo por el sector pÃºblico.\\r\\nConvertir al Estado en un buen empleador: Llego la hora de cumplir con la promesa histÃ³ri-\\r\\nca de pasar a los trabajadores y trabajadoras a honorarios a un estatus laboral decente. \\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n30\\r\\n6. TRANSPORTE DIGNO PARA LAS \\r\\nPERSONAS\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n31\\r\\nA.\\r\\nB.\\r\\nNuevo sistema de transporte pÃºblico en regiones, creando sistemas integrados en todas \\r\\nlas Ã¡reas metropolitanas. Generaremos un gran pacto Pro-movilidad en todas las Ã¡reas \\r\\nmetropolitana del paÃ­s que signifique un nuevo contrato de las ciudades, para su desarrollo \\r\\nurbano, integrando la movilidad como un factor decisivo en su construcciÃ³n y que sirva de \\r\\nbase para la conformaciÃ³n de las autoridades metropolitanas del transporte (AMT).\\r\\nFin del Transantiago como hoy lo conocemos. Estableceremos una importante ampliaciÃ³n \\r\\nde la red Metro, terminando las lÃ­neas 3 y 6, para continuar con las lÃ­neas 7 y 8. Daremos un \\r\\nsalto en la calidad de los servicios de buses, para lo cual se debe contar con una red de ter-\\r\\nminales del sistema, mayor cobertura de la integraciÃ³n tarifaria hacia las comunas perifÃ©ri-\\r\\ncas de la regiÃ³n metropolitana (tales como Pirque, Lampa, Buin, entre otras) y transformar \\r\\nlos siete corredores -que estarÃ¡n terminados durante los prÃ³ximos meses- en verdaderos \\r\\nBRT (Bus Rapid Transit). Crear una empresa o filial de Metro para la coordinaciÃ³n del trans-\\r\\nporte pÃºblico mediante buses.\\r\\n. \\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n32\\r\\n7. NO MÃ\\201S ABUSOS\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n33\\r\\nA.\\r\\nB.\\r\\nC.\\r\\nD.\\r\\nFortalecer a las organizaciones de consumidores, dando soporte econÃ³mico a las organi-\\r\\nzaciones nacionales y regionales. Establecimiento de multas equivalentes, como mÃ­nimo, \\r\\nal monto total defraudado y a las eventuales ganancias que haya supuesto el abuso com-\\r\\netido. \\r\\nFin a la impunidad en los delitos de cuello y corbata. ProhibiciÃ³n a la negociaciÃ³n de penas \\r\\nalternativas, Introduciremos una modificaciÃ³n en el CÃ³digo Procesal Penal para impedir \\r\\nque los delitos relacionados con la protecciÃ³n al consumidor, protecciÃ³n a la libre compe-\\r\\ntencia, ley general de marcado de valores, ley general de bancos, fraude, cohecho y delito \\r\\nmedioambiental permitan la negociaciÃ³n de un juicio abreviado y el establecimiento de \\r\\npenas alternativas.\\r\\nDespolitizaciÃ³n de los entes fiscalizadores, traspasando a la Alta DirecciÃ³n PÃºblica la des-\\r\\nignaciÃ³n de las mÃ¡ximas autoridades. Esto podrÃ­a incluir gradualmente a las diversas Su-\\r\\nperintendencias, al SERNAC, SII y Servicio Nacional de Aduanas.\\r\\nRevisaremos todas las normas que signifiquen abusos, por ejemplo que las autopistas \\r\\nsean gratis cuando hayan atrasos en los tiempos comprometidos o la calidad del servi-\\r\\ncio de las compaÃ±Ã­as elÃ©ctricas sea ineficiente. El Sello Sernac Financiero fue una burda \\r\\napuesta publicitaria, ya que al ser voluntario ha sido prÃ¡cticamente inutilizado por las insti-\\r\\ntuciones financieras. Vamos a modificar la ley para que sea obligatorio y de esta forma dar \\r\\ncumplimiento efectivo de esa ley.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n34\\r\\n8. FAMILIAS DIVERSAS \\r\\nIGUALES ANTE LA LEY\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n35\\r\\nA.\\r\\nB.\\r\\nC.\\r\\nNos comprometemos a impulsar un Proyecto de Matrimonio Igualitario con derecho a la \\r\\nfiliaciÃ³n. Legislaremos para que la orientaciÃ³n sexual o la identidad y expresiÃ³n de gÃ©nero \\r\\nno constituya un obstÃ¡culo para la adopciÃ³n de niÃ±os o niÃ±as. \\r\\nImpulsaremos mejoras al proyecto de Ley de Identidad de GÃ©nero que permitan y faciliten \\r\\nel trÃ¡mite de las personas para cambiar de nombre y sexo legalmente, de una manera \\r\\nrÃ¡pida y digna.\\r\\nDado que la desigualdad de gÃ©nero tambiÃ©n afecta a los hombres, propiciaremos medidas \\r\\nque apoyen el ejercicio de paternidades presentes, igualitarias, no estereotipadas o heter-\\r\\nonormativas.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n36\\r\\n9. FAMILIAS MULTICULTURALES, \\r\\nESPECIALMENTE, NUESTROS \\r\\nPUEBLOS ORIGINARIOS.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n37\\r\\nA.\\r\\nB.\\r\\nC.\\r\\nD.\\r\\nE.\\r\\nEstableceremos un Nuevo Trato con los pueblos originarios, entregÃ¡ndoles reconocimiento \\r\\nconstitucional.\\r\\nAvanzaremos en una ley que asegure representaciÃ³n especial en todos aquellos cargos de \\r\\nelecciÃ³n popular, en particular, los que busquen acceder al Congreso Nacional. \\r\\nIncorporaremos decididamente en el curriculum nacional las costumbres, su historia, su \\r\\nmodo de vida, su cultura para que sea asumida, respetada y reconocida por todos los niÃ±os \\r\\ny niÃ±as del paÃ­s pilares de nuestra sociedad del futuro. \\r\\nAvanzaremos en un diÃ¡logo plural e inclusivo que escuche de forma permanente las in-\\r\\nquietudes, propuestas, problemas y oportunidades que los pueblos originarios hacen pre-\\r\\nsente al Estado chileno. \\r\\nApoyaremos y perfeccionaremos las iniciativas que ha propuesto el actual gobierno tales \\r\\ncomo El Plan AraucanÃ­a, asÃ­ como el estudio e implementaciÃ³n de otras formas de ayuda \\r\\ndirecta a las comunidades en materia productiva, fomento y desarrollo integral.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n38\\r\\nCOMPROMISO 2: \\r\\nRECUPERANDO EL \\r\\nCRECIMIENTO\\r\\nEstamos comprometidos con el crecimiento econÃ³mico, la estabilidad macroeconÃ³mica y la se-\\r\\nriedad en la gestiÃ³n fiscal. Entendemos tambiÃ©n que no cualquier crecimiento es el que ayuda a la \\r\\nconstrucciÃ³n de una economÃ­a mÃ¡s competitiva, sustentable y socialmente inclusiva. \\r\\nAspiramos a ir construyendo una economÃ­a inteligente, cada vez mÃ¡s apoyada en innovaciÃ³n, \\r\\nciencia y tecnologÃ­a. Velaremos por diversificar nuestra matriz productiva y exportadora, alentan-\\r\\ndo la gestaciÃ³n de cadenas de valor en torno a nuestros recursos naturales y apoyando activi-\\r\\ndades emergentes intensivas en conocimiento y con potencial competitivo. Ampliaremos los es-\\r\\npacios de las Pymes en dicha matriz y trabajaremos para que una matriz energÃ©tica basada en \\r\\nenergÃ­as renovables no convencionales, favorezca nuestra competitividad y mejore la calidad de \\r\\nvida de chilenos y chilenas. Velaremos por limitar los excesivos grados de concentraciÃ³n econÃ³mi-\\r\\nca, defenderemos la libre competencia y apoyaremos las organizaciones de consumidores. Pro-\\r\\nmoveremos un nuevo pacto laboral enmarcado en el diÃ¡logo social, buscando adecuar empresas \\r\\ny relaciones laborales a los desafÃ­os de protecciÃ³n social, trabajo decente, cambio tecnolÃ³gico, \\r\\ninnovaciÃ³n, productividad y flexibilidad. Estimularemos el empleo juvenil y femenino, lo que ele-\\r\\nvarÃ¡ nuestro producto potencial. \\r\\nTrabajaremos tambiÃ©n por digitalizar nuestra economÃ­a, el estado, las pymes y llevar una banda \\r\\nancha potente a los hogares, empresas, escuelas, hospitales y gobiernos regionales, locales y \\r\\nmunicipios. Para eso, proponemos una Estrategia de TransformaciÃ³n Digital, apoyada en una \\r\\nmirada de largo plazo, a partir de tres pilares estratÃ©gicos: Conectividad Digital y EconomÃ­a Digital; \\r\\nDesarrollo de Habilidades Digitales y CreaciÃ³n de una Institucionalidad Digital.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n39\\r\\nCrearemos una Oficina de GestiÃ³n de Grandes Proyectos de inversiÃ³n que permita reducir drÃ¡sti-\\r\\ncamente los hoy excesivos tiempos asociados a la aprobaciÃ³n o rechazo de estas inversiones. Sus \\r\\nfunciones serÃ¡n:\\r\\nCoordinar los diferentes servicios pÃºblicos que intervienen en la evaluaciÃ³n \\r\\ny obtenciÃ³n de permisos de los grandes proyectos de inversiÃ³n;\\r\\nOperar como ventanilla Ãºnica para ingreso de esos proyectos. \\r\\nGenerar un mapa de los trÃ¡mites y permisos a obtener; acompaÃ±e, apoye \\r\\ny coordine a los servicios pÃºblicos involucrados en todo el proceso, realice \\r\\nun seguimiento en lÃ­nea de los trÃ¡mites y plazos comprometidos, agilizÃ¡n-\\r\\ndolos. \\r\\nInforme y asesore a las autoridades locales en el diÃ¡logo con la comunidad \\r\\ny la participaciÃ³n ciudadana en este proceso. \\r\\nFocalizaremos la atenciÃ³n del sistema en los grandes proyectos de in-\\r\\nversiÃ³n, limitando la excesiva carga que hoy reciben los funcionarios de los \\r\\norganismos sectoriales.\\r\\nReduciremos los tiempos en las evaluaciones ambientales, simplificando \\r\\nprocedimientos, reduciendo instancias y acotando los plazos de resoluciÃ³n \\r\\nen las instancias pÃºblicas, regionales y centrales, en los tribunales am-\\r\\nbientales y en la propia Corte Suprema. Hay paÃ­ses mÃ¡s exigentes que el \\r\\nnuestro en materia ambiental y estos procesos de evaluaciÃ³n o rechazo \\r\\nson mÃ¡s Ã¡giles. Hacia allÃ¡ tenemos que marchar. \\r\\nPerfeccionaremos el Sistema de EvaluaciÃ³n de Impacto Ambiental. Reforzaremos la coordi-\\r\\nnaciÃ³n online entre el Ministerio de Medio Ambiente, el Sistema de EvaluaciÃ³n de Impacto Ambi-\\r\\nental y la Superintendencia de Medio Ambiente.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n40\\r\\nImplementaremos un Plan Nacional de Infraestructura, en diÃ¡logo con las cÃ¡maras empresar-\\r\\niales respectivas. Agilizaremos las concesiones y promoveremos la puesta en marcha del Fondo \\r\\nde Infraestructura. Algunos ejes de este Plan serÃ¡n la expansiÃ³n del Metro en Santiago; ampli-\\r\\naciÃ³n de la red de Metro en Santiago, ValparaÃ­so y ConcepciÃ³n; conectividad entre las rutas 68 y \\r\\n78 en la zona central.\\r\\nAvanzaremos en mejorar la conectividad con Argentina, apurando el tranco en las \\r\\ndecisiones respecto del tÃºnel de Aguas Negras y mejorando los accesos fronterizos.\\r\\nDecidiremos la mejor ubicaciÃ³n para el Mega Puerto en la zona central y viabilizare-\\r\\nmos su rÃ¡pida concreciÃ³n.\\r\\nAseguraremos la construcciÃ³n de red de fibra Ã³ptica que conectarÃ¡ AysÃ©n con Ma-\\r\\ngallanes.\\r\\nCulminaremos las negociaciones con China para construir una red de fibra Ã³ptica que \\r\\nconecte a AmÃ©rica del Sur con China, a travÃ©s de Chile. Ello estimularÃ¡ el comercio y \\r\\nlas inversiones con Asia PacÃ­fico y nos podrÃ­a transformar en el hub digital de AmÃ©rica \\r\\ndel Sur, estimulando el comercio electrÃ³nico y la exportaciÃ³n de servicios globales.\\r\\nGeneraciÃ³n de energÃ­a en base a radiaciÃ³n solar. Promoveremos el distrito tecnolÃ³gi-\\r\\nco solar en el norte: paneles solares, almacenamiento de energÃ­a y cluster ligado a \\r\\nmanufacturas, tecnologÃ­as, ingenierÃ­a y servicios.\\r\\nCluster minero en torno a Codelco; desarrollo de proveedores de clase mundial; ex-\\r\\nportando servicios, ingenierÃ­a y tecnologÃ­as.\\r\\nCadena de valor en torno al litio; asociaciones tecnolÃ³gicas y convenios con Ues y \\r\\ncentros tecnolÃ³gicos de talla mundial.\\r\\nIndustria alimentaria: ingredientes funcionales, colorantes naturales; turismo de â\\200in-\\r\\ntereses especialesâ\\200\\235. Exportaciones de servicios Chile, potencia alimentaria\\r\\nUn esfuerzo especial en innovaciÃ³n y desarrollo cientÃ­fico, agregando conocimiento y \\r\\ntecnologÃ­a a nuestro trabajo, producciÃ³n y exportaciones.\\r\\nHubs tecnolÃ³gicos regionales, vinculados a Pymes innovadoras en cada regiÃ³n.\\r\\nMÃ¡s apoyo y recursos para InvestChile en atracciÃ³n de IED en minerÃ­a (equipamien-\\r\\ntos, tecnologÃ­as), energÃ­a, infraestructura, alimentos funcionales y servicios globales.\\r\\nAlentaremos la emergencia de nuevas industrias y nuevos sectores competitivos para diversi-\\r\\nficar la matriz productiva y exportadora del paÃ­s. \\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n41\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n42\\r\\nCOMPROMISO 3: \\r\\nUNA SÃLIDA AGENDA \\r\\nDE SEGURIDAD PÃBLICA\\r\\nNecesitamos complementar la reacciÃ³n frente al delito con una efectiva polÃ­tica de prevenciÃ³n, \\r\\nsumando acciones concretas para la reinserciÃ³n social y el apoyo a las vÃ­ctimas de delito.\\r\\nNo podemos seguir pensando que la delincuencia se enfrenta sÃ³lo con mÃ¡s policÃ­as en las calles y \\r\\naumentando el nÃºmero de presos en las cÃ¡rceles. Estas medidas son necesarias y muchos chile-\\r\\nnos las demandan, pero tambiÃ©n es imprescindible abocarnos a los factores que facilitan los del-\\r\\nitos. \\r\\nLos sitios eriazos, el consumo de alcohol en la vÃ­a pÃºblica, los abusos de los espacios comunitari-\\r\\nos, las balaceras, el trÃ¡fico de drogas, las bandas que operan violentamente, son todos elementos \\r\\nque provocan inseguridad y que necesitamos abordar para que los vecinos puedan vivir con una \\r\\nmejor calidad de vida. Necesitamos construir ciudades amables, con una cultura de resoluciÃ³n \\r\\npacÃ­fica de conflictos, con la responsabilidad y el compromiso de todos. Muchos de los conflictos \\r\\ncomunitarios que a diario viven los vecinos tienen que ver con la falta de preocupaciÃ³n y respeto \\r\\npor nuestras normas bÃ¡sicas de convivencia. Los microbasurales, los destrozos en plazas y mul-\\r\\nticanchas, los ruidos molestos, los grafittis, son seÃ±ales de que nuestro comportamiento cÃ­vico se \\r\\nha debilitado. Y en comunidades donde esto ocurre, es muy probable que el delito aparezca con \\r\\nmayor fuerza.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n43\\r\\nPor lo anterior, en nuestro futuro gobierno vamos a trabajar en diversos Ã¡mbitos para abordar la \\r\\ntemÃ¡tica de seguridad pÃºblica desde una perspectiva integrada, con participaciÃ³n social y ade-\\r\\ncuaciÃ³n local, para que chilenos y chilenas se sientan mÃ¡s seguros en sus barrios.\\r\\nA.\\r\\nB.\\r\\nD.\\r\\nE.\\r\\nC.\\r\\nPrimero, el paÃ­s demanda una autoridad con dedicaciÃ³n exclusiva la seguridad pÃºblica y al \\r\\ncombate de la delincuencia y el narcotrÃ¡fico. En nuestro gobierno, crearemos el Ministerio \\r\\nde Seguridad PÃºblica quien tenga a cargo la estructura global del sistema. Lo anterior pues \\r\\nla actual estructura a cargo del Ministerio del Interior no ha dado los resultados esperados.\\r\\nNuestra preocupaciÃ³n especial serÃ¡n las vÃ­ctimas de delitos, para ello generaremos el ser-\\r\\nvicio nacional de vÃ­ctimas que permita defender a los ciudadanos que vele con exclusividad \\r\\npor sus intereses ante un hecho delictual. No puede ser que los delincuentes tengan dere-\\r\\ncho a la defensa a travÃ©s de la DefensorÃ­a Penal y las vÃ­ctimas no tengan a alguien no las \\r\\noriente y se preocupe de su caso concreto.\\r\\nVelaremos porque el Ministerio PÃºblico se preocupe de exhaustivamente de la persecuciÃ³n \\r\\nde los delitos que afectan directamente a la poblaciÃ³n, promoviendo una mejor investi-\\r\\ngaciÃ³n y mayor nÃºmero de condenas. Para ello realizaremos los ajustes que sean necesa-\\r\\nrios para que los fiscales trabajen arduamente en perseguir a los delincuentes. Al mismo \\r\\ntiempo velaremos por el cumplimiento efectivo de las penas impuestas por los tribunales \\r\\nde justicia. Daremos todas las posibilidades de reinserciÃ³n a quienes delinquen por primera \\r\\nvez, pero seremos severos con los reincidentes. En estos casos aumentaremos las penas \\r\\ny no tendrÃ¡n beneficios. \\r\\nCon la misma fuerza vamos a trabajar en fortalecer la prevenciÃ³n y gestiÃ³n local en segu-\\r\\nridad. Ampliaremos el trabajo de acompaÃ±amiento tÃ©cnico-financiero a todos los municip-\\r\\nios de Chile, para que en cada territorio local puedan llevarse a cabo medidas y proyectos \\r\\nadaptados a las problemÃ¡ticas especÃ­ficas de seguridad de cada territorio. Fortaleceremos \\r\\nel Fondo Nacional de Seguridad PÃºblica, dando mÃ¡s oportunidades de financiamiento a \\r\\nlas organizaciones comunitarias, universidades y otras de la sociedad civil. Propondremos \\r\\nPlan Nacional de Barrios CrÃ­ticos, con una visiÃ³n intersectorial, que no sÃ³lo aborde temas \\r\\nde seguridad, sino que tambiÃ©n trabaje en mejorar acceso a la salud, educaciÃ³n, vivienda \\r\\ny otros servicios. Este Plan abordarÃ¡ al menos 10 barrios crÃ­ticos a nivel nacional, consid-\\r\\nerando tambiÃ©n la situaciÃ³n de las regiones donde existan sectores con altos niveles de \\r\\nvulnerabilidad, inseguridad grave y violencia.\\r\\nPropondremos la creaciÃ³n de un sistema de reinserciÃ³n social integrado a nivel nacional, \\r\\ncon programas segmentados por edad y gravedad del delito cometido, y con objetivos e \\r\\nindicadores claros, medibles en el mediano plazo. \\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n44\\r\\nCOMPROMISO 4: \\r\\nPENSIONES DIGNAS\\r\\nEl sistema de pensiones basado en las AFP se agotÃ³. Dicho sistema opera bajo una lÃ³gica indi-\\r\\nvidualista, donde cada persona recibe una jubilaciÃ³n que depende de su ingreso, de su ahorro \\r\\nindividual y de la regularidad de su cotizaciÃ³n. El sistema carece de solidaridad intra e intergener-\\r\\nacional, contrariando la esencia de la seguridad social. Con un mercado laboral con una alta cuota \\r\\nde empleos precarios e informales, con alrededor de un 40% de la fuerza de trabajo que no cotiza \\r\\ny con bajos salarios, no es posible generar pensiones mÃ¡s dignas, sin introducir solidaridad entre \\r\\nlos que mÃ¡s tienen y los que tienen menos y entre las actuales y las futuras generaciones. \\r\\nEl primer gobierno de la Presidenta Bachelet le introdujo un pilar solidario al sistema, apoyando a \\r\\nlos sectores de menores recursos. Gracias a ello, hoy tenemos un sistema integrado pÃºblico-priva-\\r\\ndo que paga 1.300.000 pensiones bÃ¡sicas solidarias y aportes previsionales solidarios. Esa pen-\\r\\nsiÃ³n solidaria ha ido aumentando en el tiempo y constituye un cambio de vida fundamental para \\r\\nmuchos de nuestros pensionados. Las actuales pensiones, pese al aporte solidario, siguen sien-\\r\\ndo muy bajas. Hay tambiÃ©n un desafÃ­o importante para cubrir a las clases medias. Incluidos los \\r\\nsubsidios, actualmente el sistema reformado entrega al 79 % de los beneficiarios, beneficios por \\r\\ndebajo del salario mÃ­nimo de $ 270.000. Este valor estÃ¡ muy por debajo de la mediana del ingreso \\r\\nimponible mensual con que cotizan las mujeres ($ 450.000, aprox.); y en particular los hombres ($ \\r\\n644.000, aprox.)). El 44% de las pensiones que entrega el sistema es inferior al lÃ­mite de pobreza. \\r\\nLa tasa de reemplazo actual es del orden de 35% y su proyecciÃ³n es que en los prÃ³ximos aÃ±os baje \\r\\na 15%, muy lejos del 70% que ofreciÃ³ la eforma de JosÃ© PiÃ±era.\\r\\nEn nuestra propuesta, y avanzando hacia una lÃ³gica de mayor solidaridad, instauraremos un 5% de \\r\\ncontribuciÃ³n adicional, que aportarÃ¡ el empleador y buscaremos darle el mejor destino, a partir de \\r\\nun esquema tripartito y solidario que apoye las pensiones de los grupos medios y los de menores \\r\\ningresos, elevando las pensiones actuales y futuras. Este 5% adicional se administrarÃ¡ fuera del \\r\\nsistema de AFPs, directamente por el estado, con garantÃ­as mÃ­nimas de rentabilidad. A este efec-\\r\\nto, se asegurarÃ¡ una institucionalidad pÃºblica robusta, que asegure plena independencia y calidad \\r\\ntÃ©cnica en la administraciÃ³n de ese 5% adicional de cotizaciÃ³n.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n45\\r\\nEn nuestra propuesta, buscaremos los siguientes objetivos:\\r\\nIremos hacia un sistema mixto.\\r\\nSolidario, es decir, que los que mÃ¡s tienen, ayuden a los que tienen menos y donde las gen-\\r\\neraciones jÃ³venes ayudan a quienes les dieron vida.\\r\\nDonde ademÃ¡s del trabajador, aporten el empleador y el estado. \\r\\nEl empleador agregarÃ¡ una cotizaciÃ³n de 5% sobre la masa salarial.\\r\\nEse 5% adicional serÃ¡ administrado por una agencia estatal, tecnificada, de alta solvencia \\r\\ntÃ©cnica que velarÃ¡ por asegurar una alta rentabilidad a los ahorros. \\r\\nEste sistema mejorarÃ¡ las pensiones actuales y futuras.\\r\\nEliminarÃ¡ el sesgo previsional contra las mujeres.\\r\\nIncorporarÃ¡ seguros contra las lagunas previsionales.\\r\\nFortalecerÃ¡ la PensiÃ³n BÃ¡sica Solidaria y el Aporte Previsional Solidario en montos y cobertura.\\r\\nTranscurrido un tiempo prudencial de funcionamiento del nuevo sistema, y de acuerdo al \\r\\nprincipio de la libre elecciÃ³n, los trabajadores tendrÃ¡n la opciÃ³n de destinar tambiÃ©n su 10% \\r\\nde cotizaciÃ³n personal a su cuenta en la agencia estatal, si estiman que allÃ­ la rentabilidad \\r\\nde sus pensiones ha sido mayor y mejor la atenciÃ³n que allÃ­ han recibido.\\r\\nIncorporaremos cambios regulatorios al sistema de AFPs, introduciÃ©ndole mÃ¡s competen-\\r\\ncia, mÃ¡s transparencia, reduciendo las comisiones, mejorando los servicios a los cotizantes, \\r\\nincorporando representantes elegidos de los cotizantes en la administraciÃ³n de los fondos \\r\\npara introducir transparencia y evitar conflictos de interÃ©s. \\r\\nCrearemos una institucionalidad pÃºblica que administre los aportes del empleador y parte \\r\\nde los aportes del trabajador.\\r\\nNi un peso mÃ¡s irÃ¡ a las AFPs. El sistema de capitalizaciÃ³n individual ya tocÃ³ techo. MÃ¡s aÃºn, si ese \\r\\n5% adicional fuese Ã­ntegramente a cuentas individuales, el beneficio para las pensiones actuales \\r\\nserÃ­a cero y para el largo plazo, el beneficio serÃ­a insignificante. En efecto, si el 5% va a cuentas \\r\\nindividuales, habrÃ­a que esperar 20 aÃ±os para que la pensiÃ³n aumente sÃ³lo en $10.000. \\r\\nMÃ¡s recursos a las AFPs no resuelven la pensiÃ³n de quienes no cotizan o lo hacen con alta irreg-\\r\\nularidad; no otorga ningÃºn apoyo a los mÃ¡s vulnerables y no elimina el sesgo previsional contra \\r\\nla mujer. \\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n46\\r\\nCOMPROMISO 5: \\r\\nTERMINAR CON TODA FORMA DE \\r\\nMACHISMO, DISCRIMINACIÃN Y \\r\\nVIOLENCIA DE GÃNERO.\\r\\nChile se juega en una agenda por la igualdad de las mujeres su propio proyecto de paÃ­s, sus posibi-\\r\\nlidades de desarrollo. Son mÃ¡s de la mitad de la poblaciÃ³n, pero donde se mire, sea en el mundo de \\r\\nla economÃ­a, de las finanzas, del trabajo y de las relaciones laborales, las resistencias a la inclusiÃ³n \\r\\nde las mujeres con plena igualdad de derechos siguen siendo muy altas. Y eso, ademÃ¡s de ser \\r\\ninjusto y violentar los derechos de las mujeres, afecta a toda la sociedad. \\r\\nEsta no es una frase bonita ni retÃ³rica; si para acercarnos a los niveles de los paÃ­ses con los que \\r\\nnos gusta compararnos en la OCDE, se incorporaran 900 mil mujeres que estÃ¡n fuera del mercado \\r\\nlaboral, habrÃ­a un incremento del 6% del PIB nacional. Lo que implica generar ingresos fiscales \\r\\nequivalentes al valor de la gratuidad en la educaciÃ³n superior o al doble de lo que se estima nece-\\r\\nsario para aumentar el pilar solidario que mejore las bajas pensiones en nuestro paÃ­s.\\r\\nEstÃ¡ en nosotros, en todos nosotros, crear una cultura donde la violencia no es tolerada, donde \\r\\nlas mujeres tienen los mismos derechos que los hombres y donde todas y todos podemos cumplir \\r\\nnuestros sueÃ±os. El feminismo no es sÃ³lo cosas de mujeres.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n47\\r\\nEn nuestro gobierno vamos a terminar con toda forma de machismo, discriminaciÃ³n y violencia \\r\\nde gÃ©nero:\\r\\nA.\\r\\nB.\\r\\nD.\\r\\nE.\\r\\nC.\\r\\nEstableceremos un plan de combate contra la violencia hacia las mujeres. En este plan \\r\\nvamos a consagrar como delito la violencia intrafamiliar, de tal forma que pueda ser de-\\r\\nnunciada por cualquier testigo y no sÃ³lo por la vÃ­ctima. Proporcionaremos una licencia \\r\\nlaboral para vÃ­ctimas de violencia domÃ©stica que sean trabajadoras dependientes, aplica-\\r\\nble al periodo inmediato a la agresiÃ³n. Se prohibirÃ¡n los acuerdos y se establecerÃ¡ la rep-\\r\\naraciÃ³n econÃ³mica de parte del atacante a la vÃ­ctima. Crearemos un programa nacional de \\r\\nreinserciÃ³n laboral que permita a la vÃ­ctima de violencia encontrar un empleo en la misma \\r\\nciudad donde reside o en otra, con el objetivo de cortar la dependencia econÃ³mica con el \\r\\nvictimario. Regularemos la violencia en el pololeo. 6 de cada 10 pensiones alimenticias no \\r\\nse pagan, vamos a modificar la normativa para que se cumpla efectivamente este derecho. \\r\\nPromoveremos garantÃ­as constitucionales para aumentar la autonomÃ­a econÃ³mica de la \\r\\nmujer, lograr una participaciÃ³n igualitaria en la vida pÃºblica y privada, construir equidad de \\r\\ngÃ©nero en los mercados de trabajo, contar con una educaciÃ³n pÃºblica, gratuita y de calidad, \\r\\nlaica, no sexista e inclusiva y un sistema de salud con perspectiva de gÃ©nero e intercultural. \\r\\nAceleraremos la inclusiÃ³n laboral de las mujeres eliminando las barreras que hoy les im-\\r\\npide trabajar, sea por los prejuicios, o por la insuficiente cobertura de atenciÃ³n preescolar y \\r\\nde cuidados de adultos mayores que dependen de ellas. \\r\\nEliminaremos las injustas brechas salariales cuestiÃ³n que, no sÃ³lo supone calidad de los \\r\\nempleos, capacitaciÃ³n y formaciÃ³n continua, aumentar el acceso a estudios tÃ©cnicos y \\r\\ncientÃ­ficos que pongan fin a la distinciÃ³n de carreras y empleos â\\200masculinosâ\\200\\235 y â\\200femeninosâ\\200\\235, \\r\\nsino ademÃ¡s equidad en la distribuciÃ³n de la jornada domÃ©stica no remunerada entre hom-\\r\\nbres y mujeres, promoviendo una polÃ­tica de corresponsabilidad al interior de los hogares. \\r\\nPero lo anterior es insuficiente por el peso cultural de la discriminaciÃ³n, por lo que se hace \\r\\nnecesaria una agenda compulsiva por la equidad de ingresos, a travÃ©s de legislaciones que \\r\\nnormen la igualdad de remuneraciones de trabajos del mismo valor entre hombres y mu-\\r\\njeres y que impidan las discriminaciones en los accesos al trabajo (la vigencia del currÃ­culo \\r\\nciego es un buen ejemplo de lo que se puede hacer). \\r\\nEs necesario reconocer y valorar el trabajo no remunerado que realizan las mujeres en los \\r\\nhogares como un trabajo que aporta a la riqueza nacional, avanzando en contabilizarlo para \\r\\nefectos previsionales. Esto implica el trabajo domÃ©stico, de reproducciÃ³n, crianza de niÃ±os \\r\\ny niÃ±as, y de cuidado de personas con discapacidad, enfermos y adultos mayores.\\r\\nBuscaremos elevar la participaciÃ³n de las mujeres y reducir la brecha con los hombres \\r\\nen roles gerenciales, en las direcciones ejecutivas y directorios de empresas de todos los \\r\\ntamaÃ±os, asÃ­ como en las organizaciones de representaciÃ³n econÃ³mica, tanto empresaria-\\r\\nles como sindicales, como parte de una polÃ­tica de justicia laboral de gÃ©nero. Pero tambiÃ©n \\r\\nes una condiciÃ³n para que las dimensiones socioeconÃ³micas de la agenda de gÃ©nero sean \\r\\nvisibilizadas, priorizadas e implementadas al interior de la economÃ­a, en las distintas Ã¡reas \\r\\nde la actividad econÃ³mica. Esa ha sido la experiencia con la participaciÃ³n de mujeres en \\r\\nlos directorios de empresas pÃºblicas, que este gobierno ha impulsado y que llega al 40% \\r\\nde mujeres participando en sus directorios. AsÃ­ como habrÃ¡ incentivos para alianzas pÃºbli-\\r\\nco-privadas, se impulsarÃ¡ una legislaciÃ³n para que tambiÃ©n la paridad de gÃ©neros llegue a \\r\\nlos directorios de las empresas privadas\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n48\\r\\nCOMPROMISO 6: \\r\\nHACIA UNA NUEVA POLÃ\\215TICA: \\r\\nPOR UN PACTO ÃTICO QUE ASEGURE \\r\\nMEJORES PRÃ\\201CTICAS PARA RESTAURAR LA \\r\\nCONFIANZA Y FORTALECER LA DEMOCRACIA.\\r\\nEl descrÃ©dito de la actividad polÃ­tica, los bajos niveles de adhesiÃ³n que exhiben nuestras princi-\\r\\npales instituciones y la baja evaluaciÃ³n y confianza hacia las autoridades, se han visto agudizado \\r\\nen el Ãºltimo tiempo por una serie de hechos que han equivocado la necesaria separaciÃ³n que debe \\r\\nexistir en Democracia entre negocios y polÃ­tica. \\r\\nPero no sÃ³lo la funciÃ³n pÃºblica ha estado en cuestionamiento: la esfera privada, especialmente \\r\\naquellas reglas mÃ­nimas de funcionamiento del mercado, se han visto expuesta a un manto de \\r\\ndudas producto de prÃ¡cticas inaceptables ejemplificadas en casos de colusiÃ³n, negociaciones in-\\r\\ncompatibles o acciones reÃ±idas con el nuevo estÃ¡ndar exigido por el escrutinio pÃºblico. \\r\\nDe este modo, los problemas que reclama hoy nuestra sociedad son, al mismo tiempo, los desafÃ­os \\r\\nque enfrenta nuestro sistema polÃ­tico. Y este reto sÃ³lo puede resolverse con mÃ¡s democracia. Ese \\r\\nserÃ¡ el desafÃ­o que estamos dispuestos a asumir: reconquistar a los cientos de miles de chilenas y \\r\\nchilenos que hoy observan con sospecha a sus polÃ­ticos, a sus partidos, a sus empresarios, dudan \\r\\nde sus intenciones y recriminan sus cuestionadas actuaciones. Necesitamos efectuar -de cara a \\r\\nla ciudadanÃ­a- un pacto de renovaciÃ³n con la democracia a travÃ©s de mÃ¡s transparencia, probidad \\r\\ny participaciÃ³n, suscribiendo un nuevo estÃ¡ndar Ã©tico que zanje, por ejemplo, la irrestricta divisiÃ³n \\r\\nentre la captaciÃ³n y uso inapropiado de recursos y el ejercicio de funciones en la actividad pÃºblica.\\r\\nHemos vivido eventos duros al respecto; sin embargo, la reacciÃ³n del paÃ­s y del gobierno a travÃ©s \\r\\nde una baterÃ­a de leyes y medidas nos permiten tener la certeza que estamos en condiciones \\r\\nde asumir el 2018 un compromiso superior al que existÃ­a, comprometiÃ©ndonos en avanzar en la \\r\\ndirecciÃ³n de una nueva polÃ­tica. Todos los desafÃ­os que enfrenta nuestro desarrollo como paÃ­s de \\r\\ncara al siglo XXI requieren de una buena polÃ­tica y mejores servidores pÃºblicos. Sin partidos, no hay \\r\\npolÃ­tica democrÃ¡tica y sin ella, o gobierna el poder econÃ³mico sin contrapesos o entramos en go-\\r\\nbiernos dictatoriales y/o populistas que amenazarÃ¡n nuestros derechos y libertades mÃ¡s bÃ¡sicas. \\r\\nFrente a detractores de los derechos como educaciÃ³n gratuita o un sistema previsional solidar-\\r\\nio, los demÃ³cratas y progresistas los concebimos y defenderemos como derechos sociales y no \\r\\ncomo bienes de consumo. \\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n49\\r\\nLamentablemente, la conquista de estos derechos sociales ha tomado demasiado tiempo por la \\r\\nserie de obstÃ¡culos que la dictadura nos heredÃ³. Reponer estos derechos serÃ¡ un proceso largo \\r\\nporque no serÃ¡ posible garantizar la efectiva titularidad de derechos que otorga la sola condiciÃ³n \\r\\nde ciudadanÃ­a de no mediar su reconocimiento como un compromiso irrenunciable en la Nueva \\r\\nConstituciÃ³n. A modo de ejemplo, la existencia del actual Tribunal Constitucional en ocasiones se \\r\\ntransforma en una amenaza constante a los avances en derechos sociales, ya que, de manera \\r\\narbitraria, puede torcer la voz mayoritaria y la deliberaciÃ³n democrÃ¡tica del Congreso. De allÃ­ la im-\\r\\nportancia de consagrar en la ConstituciÃ³n un Estado social y democrÃ¡tico de derechos efectivos.\\r\\nDe este modo, nuestro compromiso como gobierno asegurarÃ¡ un nuevo marco constitucional \\r\\nque garantice los derechos sociales mÃ¡s fundamentales, ademÃ¡s de combatir la corrupciÃ³n, la \\r\\ncolusiÃ³n y los abusos a travÃ©s de las siguientes medidas: \\r\\nConsagraremos una Nueva ConstituciÃ³n que asegure efectivamente derechos sociales esencia-\\r\\nles, que refuercen el rol social indelegable e insustituible del Estado y que, valorando el aporte del \\r\\nmercado, lo separe de la polÃ­tica y de la provisiÃ³n casi exclusiva de servicios sociales.\\r\\nProfundizaremos y daremos continuidad a todas las propuestas formuladas por el Consejo Ase-\\r\\nsor Presidencial contra los Conflictos de InterÃ©s, el TrÃ¡fico de Influencias y la CorrupciÃ³n. Para ello \\r\\nproponemos que futuras medidas y acciones que se desprendieron de esta materia recaigan en \\r\\nun responsable institucional Ãºnico permanente. Ello significarÃ¡ dotar de mÃ¡s atribuciones al Con-\\r\\nsejo para la Transparencia transformÃ¡ndolo en un Consejo Nacional para la Probidad, Transparen-\\r\\ncia y Fortalecimiento de la Democracia que perfeccione la Agenda presente en este gobierno, asÃ­ \\r\\ncomo otras materias que puedan ayudar al robustecimiento de la actividad pÃºblica y al sistema \\r\\npolÃ­tico en general. \\r\\nAmpliaremos la protecciÃ³n de los funcionarios pÃºblicos que denuncien irregularidades en el Esta-\\r\\ndo para que hechos deleznables no queden en la impunidad. \\r\\nProfundizaremos la ley de lobby en todo cuanto corresponda y dotaremos a la legislaciÃ³n vigen-\\r\\nte de las herramientas y penas de cÃ¡rcel ejemplificadoras en todo tipo de abusos y colusiones, \\r\\nespecialmente, delitos de corrupciÃ³n, cohecho y negociaciones incompatibles en aquellas Ã¡reas \\r\\nmÃ¡s sensibles de la gestiÃ³n pÃºblica donde la relaciÃ³n dinero-polÃ­tica es mÃ¡s intensa, como por \\r\\nejemplo, grandes inversiones, proyectos y obras de infraestructura. \\r\\nRenovaremos la polÃ­tica y el funcionamiento de los partidos invirtiendo medidas para asegurar \\r\\nmÃ¡s transparencia en el funcionamiento de Ã©stos; garantizando declaraciÃ³n de intereses y pa-\\r\\ntrimonio para todos sus dirigentes; asegurando una efectiva incorporaciÃ³n de mujeres, jÃ³venes \\r\\ny minorÃ­as en cargos de representaciÃ³n dirigencial y popular; creando la obligatoriedad de una \\r\\ncuenta pÃºblica que sea fiel reflejo del financiamiento que realiza el Estado a las colectividades en \\r\\nel paÃ­s. \\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n50\\r\\nCOMPROMISO 7: \\r\\nDESCENTRALIZACIÃN EFECTIVA \\r\\nY COMUNAS MÃ\\201S FUERTES.\\r\\nAvanzaremos en el proceso de regionalizaciÃ³n y en una efectiva descentralizaciÃ³n, como condi-\\r\\nciÃ³n necesaria para superar la pobreza y reducir las desigualdades. El fortalecimiento tÃ©cnico y \\r\\nadministrativo de los municipios es clave para facilitar el acceso al sistema de protecciÃ³n social \\r\\nen cada comuna. Por medio de capacitaciones a los profesionales, buscaremos crear mayores \\r\\ncapacidades y conocimiento de al interior de los Gobiernos Locales.\\r\\n1. DescentralizaciÃ³n administrativa\\r\\n2. DescentralizaciÃ³n PolÃ­tica\\r\\n3. DescentralizaciÃ³n Fiscal\\r\\n4. Planes regionales y locales\\r\\n5. Fortalecimiento institucional de los municipios\\r\\n6. ParticipaciÃ³n Ciudadana\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n51\\r\\nDESCENTRALIZACIÃN ADMINISTRATIVA\\r\\nLa descentralizaciÃ³n necesita nuevas fuentes de ingreso y de recursos. Un proceso de transfor-\\r\\nmaciÃ³n del sistema de administraciÃ³n interior del Estado imperativamente necesita estudiar im-\\r\\npuestos territoriales regionales que graven algunas actividades productivas locales que puedan \\r\\nafectar condiciones excepcionales en cada uno de los territorios (por ejemplo: glaciares en AysÃ©n, \\r\\ngeiser en San Pedro de Atacama o las Torres del Paine en Magallanes).\\r\\nHemos sido impulsores junto con el gobierno de la presidenta Michelle Bachelet en creer que las \\r\\nregiones son capaces de decidir sobre las polÃ­ticas pÃºblicas que crean que sea mÃ¡s pertinente \\r\\npara ellos. Por eso, esta medida va en aras de dotar de mÃ¡s funciones y atribuciones a los Gobier-\\r\\nnos Regionales y Municipios, para abordar las soluciones desde niveles cercanos a los problemas \\r\\ny oportunidades. \\r\\nPor eso, en nuestro gobierno:\\r\\nInstalar la nueva la estructura administrativa de los gobiernos regionales\\r\\nVelar por la debida instalaciÃ³n de las nuevas funciones que tendrÃ¡n los Gobiernos Regio-\\r\\nnales y que habrÃ¡n sido traspasados desde el gobierno central. \\r\\nTrabajaremos para que cada RegiÃ³n cuente con estrategias de desarrollo regional y polÃ­ti-\\r\\ncas regionales de internacionalizaciÃ³n, donde confluya el trabajo de los gobiernos locales \\r\\ny regionales, las universidades, agrupaciones empresariales y laborales y organizaciones \\r\\nsociales.\\r\\nTransitaremos desde un Estado gobernado por la decisiÃ³n de polÃ­ticas por cada ministerio a \\r\\notro que pone el Ã©nfasis en la gestiÃ³n territorial, con una institucionalidad regional y comu-\\r\\nnal empoderadas. \\r\\nAcompaÃ±aremos con recursos y capacidades suficientes el proceso de instalaciÃ³n de la nue-\\r\\nva regiÃ³n de Ãuble.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n52\\r\\nDESCENTRALIZACIÃN POLÃ\\215TICA\\r\\nLa descentralizaciÃ³n necesita nuevas fuentes de ingreso y de recursos. Un proceso de transfor-\\r\\nmaciÃ³n del sistema de administraciÃ³n interior del Estado imperativamente necesita estudiar im-\\r\\npuestos territoriales regionales que graven algunas actividades productivas locales que puedan \\r\\nafectar condiciones excepcionales en cada uno de los territorios (por ejemplo: glaciares en AysÃ©n, \\r\\ngeiser en San Pedro de Atacama o las Torres del Paine en Magallanes).\\r\\nHemos sido impulsores junto con el gobierno de la presidenta Michelle Bachelet en creer que las \\r\\nregiones son capaces de decidir sobre las polÃ­ticas pÃºblicas que crean que sea mÃ¡s pertinente \\r\\npara ellos. Por eso, esta medida va en aras de dotar de mÃ¡s funciones y atribuciones a los Gobier-\\r\\nnos Regionales y Municipios, para abordar las soluciones desde niveles cercanos a los problemas \\r\\ny oportunidades. \\r\\nPor eso, en nuestro gobierno:\\r\\nEste proceso debe estar liderado por una autoridad de carÃ¡cter regional y que sea legitimado por \\r\\nla ciudadanÃ­a. Hemos apoyado que exista mediante la democratizaciÃ³n de los Gobiernos Regio-\\r\\nnales, con elecciones directa de los Intendentes. Ellos serÃ¡n acompaÃ±ados por los consejeros \\r\\nregionales, que ya son electos y por los alcaldes que aportaran su visiÃ³n local a las problemÃ¡ticas \\r\\nque se requieran resolver de manera territorial.\\r\\nPor eso, en nuestro gobierno:\\r\\nVelaremos por una elecciÃ³n del gobernador regional que dinamice el proceso de empoderamiento \\r\\nde nuestras regiones.\\r\\nImpulsaremos una reforma de ley para fortalecer el rol de los concejales, ampliando sus faculta-\\r\\ndes en la tarea de fiscalizar la gestiÃ³n de las autoridades comunales, cumplimiento de planes y \\r\\nprogramas asÃ­ como la correcta ejecuciÃ³n del presupuesto.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n53\\r\\nDESCENTRALIZACIÃN FISCAL\\r\\nUn Gobernador Regional no va a tener poder sino cuenta con autonomÃ­a fiscal. Por ello, se bus-\\r\\nca dotar a las regiones y municipios de mayores recursos econÃ³micos, ya sea aumentando sus \\r\\ningresos propios, como asÃ­ tambiÃ©n, aumentando las transferencias (desde el nivel central a los \\r\\nGORES y Municipios), para financiar con autonomÃ­a la soluciÃ³n de sus problemas o puesta en \\r\\nvalor de sus oportunidades.\\r\\nPor eso, en nuestro gobierno:\\r\\nEstableceremos rentas regionales, impuestos regionales y abordaremos la considerable brecha \\r\\nen los recursos per cÃ¡pita entre municipios.\\r\\nCoordinaciÃ³n y disciplina fiscal. TratÃ¡ndose de una absoluta innovaciÃ³n en nuestras polÃ­ticas \\r\\npÃºblicas, este proceso de gradual traspaso de competencias y recursos a las regiones serÃ¡ \\r\\nacompaÃ±ado de un esfuerzo particular por robustecer la coordinaciÃ³n entre diferentes niveles \\r\\nde gobierno y por asegurar la disciplina fiscal.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n54\\r\\nPLANES REGIONALES Y LOCALES\\r\\nPara que exista una mirada regional con focalizando en lo local, creemos fundamental que las \\r\\nautoridades puedan contar con estrategias de desarrollo regional y polÃ­ticas regionales de inter-\\r\\nnacionalizaciÃ³n, donde confluya el trabajo de los gobiernos locales y regionales, las universidades, \\r\\nagrupaciones empresariales y laborales y organizaciones sociales.\\r\\nEs claro, que la nueva estructura va a requerir de capacitaciones a los nuevos profesionales y a \\r\\nlos funcionarios que estaban en el Gobierno Regional. Ellos serÃ¡n vitales para poder asesorar e \\r\\nimplementar las nuevas funciones, y asÃ­ tambiÃ©n la elaboraciÃ³n de instrumentos de planificaciÃ³n \\r\\ncon mirada territorial.\\r\\nPor eso, en nuestro gobierno:\\r\\nFortaleceremos el capital humano regional y local, en cuanto a cantidad (masa crÃ­tica) y calidad (for-\\r\\nmaciÃ³n y calificaciÃ³n), para asumir el desafÃ­o de implementaciÃ³n de la agenda descentralizadora.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n55\\r\\nFORTALECIMIENTO INSTITUCIONAL DE LOS MUNICIPIOS\\r\\nNuestra propuesta pone como horizonte de la descentralizaciÃ³n el desarrollo integral de regiones \\r\\ny muy especialmente las comunas, niveles donde se materializa la desigualdad. Esto implica un \\r\\nrediseÃ±o de la institucionalidad pÃºblica a nivel nacional y en cada una de sus escalas, pues se trata \\r\\nde construir desde abajo hacia arriba, respetando los grandes desafÃ­os nacionales con un foco \\r\\ndiferenciador de acuerdo a las distintas realidades socio-territoriales.\\r\\nImpulsaremos que los municipios sean un ente articulador y promotor del desarrollo local, con \\r\\napoyo, asistencia y ecuanimidad territorial en su relaciÃ³n con el nivel central.\\r\\nPromoveremos la gobernanza territorial a travÃ©s de instancias de participaciÃ³n vinculante en los \\r\\nterritorios, de tipo â\\200multiactoralâ\\200\\235, para la formulaciÃ³n y control de los procesos de desarrollo so-\\r\\ncio-territorial.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n56\\r\\n PARTICIPACIÃN CIUDADANA\\r\\nLa descentralizaciÃ³n debe reconocer la pluralidad y diversidad territorial equiparÃ¡ndose con el \\r\\nprincipio unificador de la homogeneidad propia de un estado centralizado. Las polÃ­ticas, pro-\\r\\ngramas e instrumentos deben propender a reflejar estas particularidades, permitiendo a las in-\\r\\nstituciones y autoridades regionales avanzar en mayores grados de libertad a la hora de diseÃ±ar, \\r\\nformular y ejecutar proyectos especÃ­ficos en sus respectivos territorios.\\r\\nLa descentralizaciÃ³n necesita accountability. No es un proceso que garantice sÃ³lo transferencia \\r\\nde poder y recursos, sino que debe ir acompaÃ±ada de la institucionalidad necesaria para contrar-\\r\\nrestar principios de captura y evitar manejos discrecionales. La propuesta del gobierno de insta-\\r\\nlar unidades de AuditorÃ­a y generar obligatoriedad en los Convenios de ProgramaciÃ³n a travÃ©s \\r\\ndel Contrato-RegiÃ³n, debe ir acompaÃ±ada de agencias y mecanismos que garanticen la entrega \\r\\noportuna de informaciÃ³n a la ciudadanÃ­a, reportes periÃ³dicos asociados a la ejecuciÃ³n del gasto y \\r\\nde los principales proyectos ejecutables/ejecuciÃ³n en los territorios.\\r\\nPor eso, en nuestro gobierno:\\r\\nEstableceremos la iniciativa ciudadana de ley, donde la discusiÃ³n y propuestas de soluciÃ³n de los \\r\\ntemas que localmente mÃ¡s impactan a los ciudadanos tendrÃ¡n un decidido apoyo de la autoridad \\r\\npara su impulso y promociÃ³n.\\r\\nFortalecemos los Consejos Comunales de Organizaciones de la Sociedad Civil (COSOC) y propondre-\\r\\nmos una instancia que coordine su participaciÃ³n en la Asamblea Ciudadana por el Bienestar.\\r\\n\\r\\n\\r\\n&quot; Si miramos el pdf o el texto que nos devuelve, veremos que hay un tema con los guiones que separan palabras en los saltos de línea. Esto pasa en varios de los programas, por ejemplo con el de José Antonio Kast. Podemos corregir esto con relativa facilidad: texto_guillier2 &lt;- texto_guillier %&gt;% str_remove_all(&quot;-\\\\n&quot;) texto_guillier2 ## [1] &quot;\\r\\n\\r\\nINDICE\\r\\nNUESTROS \\r\\nPRINCIPIOS\\r\\nFAMILIAS \\r\\nMULTICULTURALES, \\r\\nESPECIALMENTE, \\r\\nNUESTROS PUEBLOS \\r\\nORIGINARIOS.\\r\\nCHILE EN EL MUNDO\\r\\nTERMINAR CON TODA \\r\\nFORMA DE MACHISMO, \\r\\nDISCRIMINACIÃN Y \\r\\nVIOLENCIA DE GÃNERO\\r\\nUNA NUEVA \\r\\nPOLITICA\\r\\nUNA SÃLIDA AGENDA DE \\r\\nSEGURIDAD PÃBLICA\\r\\nRECUPERANDO EL \\r\\nCRECIMIENTO \\r\\nLAS FAMILIAS \\r\\nPRIMERO\\r\\nHACIA UNA NUEVA \\r\\nPOLÃ\\215TICA\\r\\nDESCENTRALIZACIÃN \\r\\nEFECTIVA Y COMUNAS \\r\\nMÃ\\201S FUERTES \\r\\nUNA NUEVA \\r\\nECONOMIA\\r\\nPENSIONES DIGNAS\\r\\nPROTECCIÃN PARA \\r\\nTODAS Y TODOS LOS \\r\\nHIJOS DE CHILE\\r\\nVIVIENDAS PARA \\r\\nTODOS Y TODAS\\r\\nNO MÃ\\201S ABUSOS\\r\\nPROFUNDIZAREMOS LOS\\r\\n AVANCES HACIA UNA \\r\\nEDUCACIÃN PÃBLICA, GRATUITA Y DE \\r\\nCALIDAD PARA TODAS Y TODOS \\r\\nBUENOS EMPLEOS Y \\r\\nMEJORES SALARIOS\\r\\nFAMILIAS DIVERSAS IG-\\r\\nUALES ANTE LA LEY\\r\\nFORTALECEREMOS EL \\r\\nDERECHO A LA SALUD\\r\\nTRANSPORTE DIGNO \\r\\nPARA LAS \\r\\nPERSONAS \\r\\n6\\r\\n36\\r\\n12\\r\\n46\\r\\n8\\r\\n4238\\r\\n18\\r\\n48\\r\\n50\\r\\n10\\r\\n44\\r\\n20\\r\\n26\\r\\n32\\r\\n22\\r\\n28\\r\\n34\\r\\n24\\r\\n30\\r\\n\\r\\nNUESTRAS IDEAS PARA CHILE\\r\\nPRINCIPALES ACCIONES, INICIATIVAS Y PROYECTOS\\r\\nPROGRAMA DE GOBIERNO ALEJANDRO GUILLIER Ã\\201LVAREZ\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n6\\r\\nDEBATES PROGRAMATICOS\\r\\nCON GUILLIER A LA MONEDA: \\r\\nPOR UN CHILE MODERNO Y SOLIDARIO\\r\\nNUESTROS PRINCIPIOS\\r\\nNos inspira la sed de justicia y libertad. A diferencia de los conservadores, sabemos que las condiciones \\r\\nmateriales de vida limitan drÃ¡sticamente la liberta de elegir de chilenos y chilenas: el imperio del dinero y \\r\\ndel mercado impide que la gran mayorÃ­a de nuestros compatriotas pueda acceder a servicios oportunos \\r\\ny de calidad en salud, educaciÃ³n y previsiÃ³n.\\r\\nLas fuerzas del mercado tambiÃ©n nos han conducido a comunas y barrios segregados, con grandes dif-\\r\\nerencias de policÃ­as, Ã¡reas verdes y espacios de cultura por habitante. Definitivamente en Chile tenemos \\r\\nciudadanos de primera y de segunda clase, dependiendo de la regiÃ³n y del barrio en que vives y de tu \\r\\nposiciÃ³n en la escala de ingresos.\\r\\nPese a avances importantes, gracias a las polÃ­ticas pÃºblicas implementadas en democracia, seguimos \\r\\nviviendo en una sociedad intolerante a la diversidad, con una cultura machista y patriarcal que castiga a \\r\\nla mujer y a las opciones sexuales que cada quien quiera libremente asumir.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n7\\r\\nLa gran diferencia nuestra con los conservadores es que buscamos que las nuevas tecnologÃ­as se \\r\\nusen para emparejar la cancha y mejorar la igualdad de oportunidades, para que nuestra economÃ­a \\r\\nsea simultÃ¡neamente mÃ¡s competitiva, mÃ¡s inclusiva y ambientalmente sostenible.\\r\\nTambiÃ©n pensamos que la seguridad pÃºblica es un derecho ciudadano que el estado debe garan-\\r\\ntizar. Por ello, en nuestro gobierno, trabajaremos con especial energÃ­a en mejorar la eficiencia de \\r\\nlas policÃ­as, la coordinaciÃ³n y especializaciÃ³n entre ellas y reforzando su vÃ­nculo con los municipios \\r\\ny la comunidad organizada. Dotaremos de mÃ¡s recursos a los municipios para que desarrollen \\r\\nprogramas de seguridad municipal, apoyados en la comunidad. Actualizaremos el derecho pe-\\r\\nnal, castigando severamente la reincidencia y ofreciendo una efectiva segunda oportunidad de \\r\\nreinserciÃ³n social a quienes delinquen por primera vez. Y, por cierto, aquel que no aproveche esa \\r\\nsegunda oportunidad enfrentarÃ¡ penas mÃ¡s duras. Fortaleceremos las fiscalÃ­as; pondremos mÃ¡s \\r\\nÃ©nfasis en combatir los delitos menores y crearemos el Defensor de las VÃ­ctimas, quien se esmer-\\r\\narÃ¡ en acompaÃ±ar a las vÃ­ctimas durante todo el proceso, evitando el cierre anticipado del mismo. \\r\\nTambiÃ©n elevaremos las penas a los delitos de cuello y corbata, a la colusiÃ³n, la corrupciÃ³n y el \\r\\ncohecho, asÃ­ como a los delitos ambientales, abandonando el triste espectÃ¡culo de las â\\200clases de \\r\\nÃ©ticaâ\\200\\235 o las multas irrisorias.\\r\\nEso no es moderno. La modernidad debe expresarse no solo en las nuevas tecnologÃ­as o en el consumo. \\r\\nTambiÃ©n debe expresarse en una sociedad mÃ¡s informada, mÃ¡s tolerante y mÃ¡s comprometida con la \\r\\ndiversidad y el respeto a los derechos de todos y todas. Para nosotros, esto significa medios de comu-\\r\\nnicaciÃ³n mÃ¡s plurales, un nuevo trato con nuestros pueblos originarios, valorar la identidad de gÃ©nero \\r\\ny diversidad sexual, respeto a los derechos sexuales y reproductivos y derechos sociales garantizados \\r\\npor el hecho de ser ciudadanos y ciudadanas. Por cierto, la modernidad tambiÃ©n debe expresarse en el \\r\\nuso de las nuevas tecnologÃ­as en nuestra producciÃ³n, nuestras escuelas, liceos y hospitales, en nuestras \\r\\nPymes, de nuestras ciudades, del estado y de nuestros gobiernos locales y regionales.\\r\\nEl derecho a vivir en una ciudad segura debe ser complementado con otro: el derecho a disfrutar \\r\\nde una ciudad amigable y sustentable. Trabajaremos para que nuestras ciudades reduzcan sus \\r\\ngrados de segregaciÃ³n, favoreciendo la gestaciÃ³n de Ã¡reas verdes, centros culturales y recintos \\r\\ndeportivos donde la comunidad pueda encontrarse; mejorando la calidad del transporte pÃºblico y \\r\\nmejorando el acceso a viviendas de calidad para sectores populares y para la clase media.\\r\\nPor eso, proclamamos con energÃ­a que esta candidatura tiene un compromiso definitivo con la \\r\\nautÃ©ntica libertad, con la justicia, la democracia, la solidaridad, la diversidad y la reducciÃ³n de las \\r\\ndesigualdades. Eso es lo que nos mueve a participar en polÃ­tica. \\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n8\\r\\nLa ConcertaciÃ³n primero y la Nueva MayorÃ­a despuÃ©s han conseguido avances importantes en cada \\r\\nuno de estos grandes objetivos. Pero tambiÃ©n es cierto que la dictadura nos hizo retroceder de-\\r\\nmasiado en estos principios civilizatorios. Por tanto, el camino es largo y nos falta mucho por avan-\\r\\nzar. No queremos retroceder y por eso es que no da lo mismo quien gane las prÃ³ximas elecciones. \\r\\nChile no debe permitirse retrocesos en materia de derechos de la mujer, diversidad sexual, fortaleza \\r\\nde los sindicatos, respeto al medio ambiente, educaciÃ³n gratuita y otros importantes logros.\\r\\nNuestra candidatura te invita a sumarte a esta cruzada Ã©pica por impedir los retrocesos sociales y \\r\\nculturales y por seguir avanzando hacia una sociedad mÃ¡s justa, mÃ¡s tolerante, mÃ¡s diversa, mÃ¡s \\r\\nsolidaria y mÃ¡s libre.\\r\\nTenemos plena conciencia de la brecha que se ha ido gestando entre ciudadanÃ­a y polÃ­tica: incumplimien-\\r\\nto de promesas, vÃ­nculos perversos entre polÃ­tica y dinero, desatenciÃ³n a temas fundamentales para \\r\\nnuestros compatriotas mÃ¡s desvalidos, todo eso explica la persistencia de esa brecha. Este es un tema \\r\\nque nos golpea profundamente pues el abstencionismo electoral es bÃ¡sicamente de nuestro sector. Se \\r\\nubica bÃ¡sicamente en los sectores de menores ingresos. Ellos se ven enfrentados a un escenario de \\r\\ncodicia desatada, donde todo vale para tener mÃ¡s, donde el Ã©xito se mide en proporciÃ³n al dinero que se \\r\\nobtenga, sin importar la forma en que se lo consigue. Por eso, de repente sienten que estÃ¡n de mÃ¡s en \\r\\neste paÃ­s, que nadie los considera y que todos los polÃ­ticos son lo mismo.\\r\\nUNA NUEVA POLÃ\\215TICA\\r\\nNo todos los polÃ­ticos son lo mismo. De hecho, los tremendos progresos en reducciÃ³n de la pobreza, me-\\r\\njorÃ­a en calidad de vida, ampliaciÃ³n de los sectores medios, acceso masivo a educaciÃ³n superior, todos \\r\\nellos son logros conseguidos gracias a la coaliciÃ³n de centroizquierda que ha gobernado mayoritaria-\\r\\nmente desde la reconquista de la democracia. Que es posible que hubiÃ©semos hecho mÃ¡s, es posible. \\r\\nPero lo que no hay que perder de vista es esos logros jamÃ¡s se hubiesen conseguido con la derecha en \\r\\nel gobierno. \\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n9\\r\\nNuestra polÃ­tica, la del progresismo, concibe que hay derechos ciudadanos a los que se debe acceder por \\r\\nel solo hecho de vivir en Chile. Para nosotros, el acceso oportuno y de calidad a la salud, la educaciÃ³n y \\r\\nla previsiÃ³n no puede depender Ãºnicamente del grosor de tu billetera. Tampoco el derecho a la vivienda, \\r\\na los espacios verdes, a la cultura y a un medio ambiente sano. \\r\\nTodos esos temas, en nuestra propuesta, son derechos ciudadanos que una Nueva ConstituciÃ³n debe \\r\\npreocuparse por garantizar. Por cierto, en la medida que los recursos lo permitan, pero con una clara \\r\\nhoja de ruta ascendente y que no admite retrocesos. Por eso es que no da lo mismo quien llegue a la \\r\\npresidencia. Aspiramos a continuar el camino que, con coraje, abriÃ³ la Presidenta Bachelet, dando pa-\\r\\nsos significativos hacia un estado que garantice derechos sociales, principio civilizatorio que debe estar \\r\\nestampado en la Nueva ConstituciÃ³n.\\r\\nNo se nos escapa que estÃ¡ pendiente la reforma del estado. El estado que necesitamos es uno mÃ¡s \\r\\neficiente, mÃ¡s descentralizado y mÃ¡s participativo. Ese estado por construir debe resistir la corrupciÃ³n, \\r\\nresistor a ser cooptado por el dinero o los partidos polÃ­ticos, buscando una permanente modernizaciÃ³n, \\r\\nbasada en la calificaciÃ³n permanente, la probidad y el buen desempeÃ±o de sus funcionarios. Ese estado, \\r\\nuno que dialoga mÃ¡s entre sus diversos componentes, es el que necesitamos para activar la descentral-\\r\\nizaciÃ³n, la participaciÃ³n ciudadana y el diÃ¡logo pÃºblico-privado con visiÃ³n prospectiva. TambiÃ©n avanza-\\r\\nremos en este gran desafÃ­o. \\r\\nTambiÃ©n sabemos que sin partidos polÃ­ticos no hay democracia, ya que sin ellos gobierna directamente el \\r\\ndinero o lo hace a travÃ©s de dictaduras. Tenemos claro que para recuperar la confianza de la ciudadanÃ­a \\r\\ny particularmente de aquellos que nos votaban, necesitamos una profunda renovaciÃ³n de la polÃ­tica. Ese \\r\\nes uno de los ejes de nuestra propuesta: mÃ¡s transparencia, cercanÃ­a con la ciudadanÃ­a, rendiciÃ³n de \\r\\ncuentas, fin al vÃ­nculo incestuoso entre dinero y polÃ­tica.\\r\\nNo es casual que Alejandro Guillier, un candidato independiente, encabece este movimiento. Nuestra \\r\\ncandidatura cree profundamente en la necesidad de la polÃ­tica, sÃ­, pero de una polÃ­tica renovada, mÃ¡s \\r\\ncerca de la ciudadanÃ­a, estimulando las mÃ¡s diversas formas de participaciÃ³n ciudadana, apoyando a \\r\\nlas organizaciones sociales e incorporÃ¡ndolas en el diseÃ±o, gestiÃ³n y evaluaciÃ³n de las polÃ­ticas pÃºblicas. \\r\\nEse es nuestro principal compromiso y pedimos que por este compromiso nos midan, cuando lleguemos \\r\\na La Moneda.\\r\\nAspiramos a ser un gobierno que se apoye decididamente en las organizaciones sociales y en la partici-\\r\\npaciÃ³n ciudadana, aprovechando para ello todas las oportunidades tecnolÃ³gicas que nos permite el siglo \\r\\n21. \\r\\nPor lo mismo, nuestro proyecto polÃ­tico estÃ¡ profundamente comprometido con la descentralizaciÃ³n, \\r\\ntarea en la que iremos transfiriendo gradualmente facultades y recursos a los gobiernos locales y regio-\\r\\nnales. Vamos a nivelar la cancha entre los chilenos y chilenas de todas nuestras regiones. Vamos a otor-\\r\\ngar nuevas y mejores oportunidades a los Pablo Neruda, Claudio Arrau, RamÃ³n Vinay, Gustavo Sabella \\r\\ny a las Violeta Parra, Gabriela Mistral y Marta Colvin que no han tenido la oportunidad de desplegar sus \\r\\ntalentos por el sÃ³lo hecho de vivir en provincias.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n10\\r\\nUNA NUEVA ECONOMÃ\\215A\\r\\nLa base material de estos avances no puede ser una economÃ­a altamente concentrada, apoyada exce-\\r\\nsivamente en un grupo reducido de recursos naturales, con indiferencia al deterioro del medio ambiente \\r\\ny con relaciones laborales que no dan cuenta de los desafÃ­os de innovaciÃ³n, productividad y cambio \\r\\ntecnolÃ³gico que predominan en este siglo 21. \\r\\nPor ello, nos comprometemos a dar pasos decisivos hacia una matriz productiva y exportadora mÃ¡s \\r\\ndiversificada, retomando iniciativas de reindustrializaciÃ³n, incorporando mÃ¡s tecnologÃ­a y conocimiento \\r\\nal trabajo de chilenos y chilenas. Buscaremos tambiÃ©n reducir los elevados grados de concentraciÃ³n \\r\\neconÃ³mica que caracterizan a nuestra economÃ­a. \\r\\nTan elevada concentraciÃ³n en la distribuciÃ³n del ingreso y en las oportunidades de progreso reduce la \\r\\nrelevancia de los indicadores econÃ³micos tradicionales. Los datos de Impuestos Internos indican que \\r\\nlas ventas anuales de las grandes empresas crecieron entre 1995 y 2005 desde el 73% al 82% del \\r\\ntotal nacional de las ventas totales, siendo que en el 2005 sÃ³lo representaron el 1.2% de las unidades \\r\\nproductivas. Vale decir, las MIPYMES vienen perdiendo participaciÃ³n y ese desajuste entre la velocidad \\r\\nde crecimiento de las grandes empresas y el resto, termina siendo un freno al propio crecimiento, junto \\r\\ncon acentuar la concentraciÃ³n del ingreso. Si mÃ¡s del 80% del gasto en productos nacionales se dirige a \\r\\npoco mÃ¡s del 1% de las empresas, es claro que no basta con crecer. Por cierto, necesitamos crecer a tasas \\r\\nmayores, pero tambiÃ©n necesitamos que ese crecimiento se distribuya mejor.\\r\\nSabemos que avanzar en este crucial tema no serÃ¡ fÃ¡cil, dados los vÃ­nculos poderosos entre economÃ­a, \\r\\npolÃ­tica, dinero y los principales medios de comunicaciÃ³n. Pero no importa, estamos dispuestos a abordar \\r\\nel desafÃ­o y la velocidad y profundidad de nuestro avance dependerÃ¡ justamente de tu apoyo. Nuestra \\r\\nvoluntad existe. Te necesitamos para avanzar juntos hacia un Chile mÃ¡s justo y solidario. \\r\\nUna economÃ­a menos concentrada significa fortalecerlos mecanismos que controlan la colusiÃ³n y las \\r\\nprÃ¡cticas anti-competitivas; apoyar las organizaciones de consumidores y mÃ¡s importante, significa \\r\\notorgar a las Pymes y las cooperativas el espacio y el apoyo que lamentablemente no han tenido desde \\r\\nel inicio de la transiciÃ³n democrÃ¡tica. Este es tambiÃ©n otro de nuestros compromisos fundamentales.\\r\\nPretendemos tambiÃ©n avanzar hacia una economÃ­a mÃ¡s inteligente, es decir, con mÃ¡s innovaciÃ³n y mÃ¡s \\r\\napoyo a nuestra ciencia y tecnologÃ­a. Ya cerca de concluir la segunda dÃ©cada del siglo 21, nadie bien in-\\r\\nformado podrÃ­a ignorarÃ­a ignorar las notables repercusiones del cambio tecnolÃ³gico sobre la economÃ­a, \\r\\nla sociedad y la cultura. Y aquÃ­ hay sÃ³lo dos caminos: permitimos que las nuevas tecnologÃ­as se incor-\\r\\nporen en Chile sÃ³lo por las seÃ±ales del mercado o establecemos un nuevo pacto social para apropiarnos \\r\\nde esas nuevas tecnologÃ­as para construir una competitividad que no estÃ© divorciada de la igualdad de \\r\\noportunidades.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n11\\r\\nLa incorporaciÃ³n de las nuevas tecnologÃ­as segÃºn las orientaciones del mercado sÃ³lo agudizarÃ¡ las \\r\\nbrechas sociales, afectando la gobernabilidad, obligÃ¡ndonos a convivir con altas tasas de desempleo \\r\\njuvenil y haciendo cada vez mÃ¡s difÃ­cil que la polÃ­tica pÃºblica pueda compensar la desigualdad en las \\r\\noportunidades.\\r\\nPor eso es que, para nosotros, para los progresistas, el cambio tecnolÃ³gico y la innovaciÃ³n son instru-\\r\\nmentos decisivos para la construcciÃ³n de una sociedad mÃ¡s justa, mÃ¡s integrada y mÃ¡s solidaria. La \\r\\nexperiencia internacional nos indica tambiÃ©n que la innovaciÃ³n florece mejor en entornos de cooperaciÃ³n, \\r\\ncreatividad y compromiso compartido con una misiÃ³n colectiva. \\r\\nPara ello, necesitamos entonces mÃ¡s diÃ¡logo social y empresas menos verticalistas. \\r\\nNo es posible generar sociedades innovadoras con estructuras sociales segmentadas, con relaciones \\r\\nlaborales aÃ±ejas, con empleos precarios o donde el â\\200pitutoâ\\200\\235 y el apellido valen mÃ¡s que el esfuerzo \\r\\npersonal y el buen desempeÃ±o. Tampoco es posible pensar en un Chile mÃ¡s innovador sin educaciÃ³n \\r\\npÃºblica de calidad, sin empleo decente, sin sindicatos fuertes y comprometidos con la productividad y \\r\\nsin barrios y comunas socialmente mÃ¡s integrados. \\r\\nEs mÃ¡s que evidente cuanto daÃ±o nos hizo la dictadura y el neoliberalismo en cada uno de estos Ã¡m-\\r\\nbitos, Ã¡mbitos en los cuales nos resta mucho por avanzar. Por eso es que los avances tendrÃ¡n que \\r\\nser necesariamente graduales. Pero, de nuevo, lo mÃ¡s importante es mantener el timÃ³n firme y en la \\r\\ndirecciÃ³n correcta. \\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n12\\r\\nCHILE EN EL MUNDO\\r\\nNuestra propuesta tiene una opciÃ³n clara sobre la inserciÃ³n de Chile en el escenario global. Nos interesa \\r\\nincidir, en alianza con otras naciones y organizaciones, en una globalizaciÃ³n cada vez mÃ¡s humanizada \\r\\nque combate la guerra, el terrorismo, la pobreza, el hambre y las discriminaciones. \\r\\nEstamos comprometido con el multilateralismo, la democracia y la defensa de los derechos humanos. \\r\\nEntendemos tambiÃ©n que, para potenciar nuestra voz, debemos reforzar nuestro compromiso con la \\r\\nintegraciÃ³n regional. Seguiremos trabajando con Ã­mpetu en ello, sÃ­ como en estimular mayor convergen-\\r\\ncia entre la Alianza del PacÃ­fico y Mercosur y en generar mayores espacios de cooperaciÃ³n con nuestros \\r\\nvecinos. Lo anterior, mÃ¡s relaciones cada vez mÃ¡s profundas con Argentina y con Brasil no sÃ³lo nos \\r\\nayudarÃ¡n a avanzar en mÃ¡s integraciÃ³n regional, en exportaciones manufactureras y de servicios, en \\r\\ncadenas de valor subregionales, sino que tambiÃ©n mejorarÃ¡n las posibilidades de un vÃ­nculo mÃ¡s diver-\\r\\nsificado y anclado en iniciativas de mayor escala en nuestras relaciones con Asia PacÃ­fico. \\r\\nCreemos en la necesidad de una economÃ­a abierta, con polÃ­ticas que ayuden a mejorar la calidad de \\r\\nnuestra inserciÃ³n econÃ³mica, aprovechando nuestra vasta red de acuerdos comerciales, buscando di-\\r\\nversificar mercados, pero tambiÃ©n productos y servicios exportados y elevando el nÃºmero de empresas \\r\\nexportadoras. Nuestras polÃ­ticas velarÃ¡n porque las Pymes tengan mayor presencia como exportado-\\r\\nras directas o indirectas y en las cadenas de valor que se vaya gestando. \\r\\nReforzaremos tambiÃ©n el compromiso asumido por Chile con el desarrollo sostenible, expresado en la \\r\\nAgenda 2030 para el Desarrollo Sostenible y los 17 ODS (Objetivos de Desarrollo Sostenible), aproba-\\r\\ndos en septiembre de 2015 en la Asamblea General de las Naciones Unidas. No sÃ³lo nos esforzaremos \\r\\npor cumplir dichos compromisos, sino que ademÃ¡s buscaremos liderar a la regiÃ³n en dicho cumplimien-\\r\\nto, proponiendo fÃ³rmulas que ademÃ¡s colaboren a reforzar la integraciÃ³n regional en torno de dichos \\r\\nobjetivos. \\r\\nManifestamos tambiÃ©n nuestro compromiso con el acuerdo firmado en la Conferencia de ParÃ­s sobre \\r\\nel Clima (CPO21), en que 195 paÃ­ses firmaron el primer acuerdo vinculante mundial orientado a reducir \\r\\nlas emisiones, en el marco de planes nacionales de acciÃ³n para combatir el cambio climÃ¡tico, incluyendo \\r\\ntareas mitigaciÃ³n, adaptaciÃ³n y transparencia. \\r\\nLa preservaciÃ³n del medio ambiente y el combate al cambio climÃ¡tico son dos ejes transversales que \\r\\nestarÃ¡n presentes en todas nuestras polÃ­ticas pÃºblicas, partiendo por la educaciÃ³n. \\r\\nTe invitamos a ser parte de esta propuesta que busca proyectar un mejor ingreso de Chile al siglo 21, \\r\\nmodernizando nuestra polÃ­tica, el estado y nuestra institucionalidad para construir no sÃ³lo un paÃ­s mÃ¡s \\r\\nsolidario y mÃ¡s integrado sino tambiÃ©n un Chile donde la competitividad y la innovaciÃ³n apoyen la may-\\r\\nor inclusiÃ³n social y un desarrollo mÃ¡s sustentable al servicio de las mayorÃ­as.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n13\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n14\\r\\nUNA VISIÃN INTEGRADA \\r\\nDEL CAMBIO QUE QUEREMOS.\\r\\nEmpezaremos a debatir sobre una amplia diversidad de temas ya incorporados en nues-\\r\\ntras Bases ProgramÃ¡ticas, perseverando en una mirada integrada del cambio social, \\r\\neconÃ³mico y polÃ­tico que deseamos abordar. Por ejemplo, por supuesto que nos interesa \\r\\ncrecer a tasas mÃ¡s elevadas pero ese crecimiento debe ser sostenible, no puede ser al \\r\\ncosto de contaminar el agua, el aire, el suelo agrÃ­cola, nuestro mar y nuestros pueblos y \\r\\nciudades; no puede ser a base de un empleo precario, con remuneraciones que apenas \\r\\npermiten sobrepasar la lÃ­nea de pobreza y con sindicatos dÃ©biles, sin capacidad efectiva \\r\\nde negociaciÃ³n colectiva. Tampoco puede ser un tipo de crecimiento donde el acceso a \\r\\nlos servicios sociales bÃ¡sicos â\\200 educaciÃ³n, salud y previsiÃ³n- queda limitado al grosor \\r\\nde tu billetera.\\r\\nPor eso es que, en economÃ­a, nuestra trilogÃ­a es \\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n15\\r\\nCRECIMIENTO SOSTENIBLE+EMPLEO \\r\\nDECENTE+PROTECCIÃN SOCIAL.\\r\\nEl segundo Ã©nfasis de nuestra campaÃ±a se relaciona con una mayor cercanÃ­a de las polÃ­ticas pÃºbli-\\r\\ncas con las familias chilenas, con su barrio, con su entorno y con un contexto polÃ­tico-institucional \\r\\nen que el estado y los gobiernos regionales, locales y municipios se acercan a las necesidades e \\r\\ninquietudes de chilenos y chilenas. Por eso es que hemos colocado en el centro de la agenda la \\r\\ndescentralizaciÃ³n y la participaciÃ³n ciudadana. \\r\\nLas familias chilenas buscan un nuevo trato, que ponga fin tanto a los abusos del mercado como a \\r\\nla indolencia o la burocracia del estado; un nuevo trato que le garantice los servicios sociales bÃ¡si-\\r\\ncos, que le asegure una educaciÃ³n gratuita y de calidad para sus hijos; que la apoye en situaciones \\r\\nde vulnerabilidad, que le dÃ© una mano cuando incursione en la tercera edad, con pensiones dignas, \\r\\nque proteja a la niÃ±ez generÃ¡ndole espacios de acogida, de juego, esparcimiento y felicidad. \\r\\nEl territorio, el barrio es la unidad bÃ¡sica donde estas familias organizan su vida. Por eso es que \\r\\nen nuestro gobierno nos esforzaremos porque la salud, la educaciÃ³n y el deporte se acerquen al \\r\\nbarrio. Pondremos el Ã©nfasis en la salud primaria; en educaciÃ³n, trabaremos para que el proyecto \\r\\neducacional se construya en diÃ¡logo entre el colegio, el profesorado y las organizaciones sociales \\r\\ny comunitarias. La propia escuela serÃ¡ un espacio de diÃ¡logo y participaciÃ³n y no sÃ³lo en los temas \\r\\neducativos ya que se utilizarÃ¡ tambiÃ©n para que padres, apoderados y jÃ³venes hagan deporte, \\r\\npara que reciban capacitaciÃ³n en temas de salud, de sexualidad, de manejo de las finanzas famil-\\r\\niares y de medio ambiente, todo ello aterrizado a las necesidades locales.\\r\\nLa salud es un buen ejemplo de esta mirada integral. Las enfermedades que mÃ¡s nos amenazan \\r\\ntienen que ver con la falta de ejercicio, con la dieta y con el stress de la ciudad. La mejor vÃ­a para \\r\\nabordarlas es un esfuerzo integrado entre salud, educaciÃ³n y deportes. Si llevamos estos temas \\r\\nal aula, si los padres participan en esas actividades, si la escuela y el municipio facilitan espacios \\r\\npara que jÃ³venes y sus padres puedan realizar deporte, estaremos haciendo la mejor inversiÃ³n \\r\\nen salud, achicÃ¡ndole el espacio a la droga y abriendo mejores perspectivas para nuestros hijos.\\r\\nEl barrio, el territorio, el municipio y los gobiernos locales serÃ¡n centrales en nuestro trabajo. Por \\r\\neso es que iremos transfiriendo gradualmente recursos y atribuciones a estos gobiernos, acer-\\r\\ncando la toma de decisiones al barrio. Y por eso es que tambiÃ©n queremos potenciar la partici-\\r\\npaciÃ³n ciudadana en programas diversos junto al municipio: esa participaciÃ³n la estimularemos en \\r\\nprogramas de salud, educaciÃ³n, deportes, capacitaciÃ³n para jÃ³venes e incluso incluyendo mayor \\r\\ncercanÃ­a entre la policÃ­a, el municipio y las organizaciones sociales para coordinarse mejor en la \\r\\nseguridad pÃºblica. Barrios mÃ¡s seguros, mÃ¡s integrados, con mÃ¡s espacios verdes, con mejores \\r\\nluminarias permitirÃ¡n que sea la vida de barrio la que se vaya imponiendo y construyendo comu-\\r\\nnidad. Pero esto no sÃ³lo requiere la voluntad del gobierno, debe ir acompaÃ±ada de municipios \\r\\ncomprometidos con esta tarea y de chilenos y chilenas que estÃ©n dispuestos a volver a creer en \\r\\nla participaciÃ³n, haciÃ©ndola viva, controlando a sus autoridades. Sabemos que la partida no serÃ¡ \\r\\nfÃ¡cil pero confiamos en que, cuando vean en la prÃ¡ctica que se van generando esos espacios de \\r\\nparticipaciÃ³n, entonces primarÃ¡ la voluntad de integrarse a esta hermosa tarea.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n16\\r\\nLo mismo acontecerÃ¡ con las polÃ­ticas sectoriales: la energÃ­a, las telecomunicaciones y la infrae-\\r\\nstructura deberÃ¡n aportar al crecimiento verde, con empleo decente y con protecciÃ³n social. De-\\r\\nberÃ¡n apoyar el fortalecimiento de las Pymes y de las cooperativas, ayudando, por ejemplo, a \\r\\nsu digitalizaciÃ³n para que puedan aprovechar las oportunidades de la nueva economÃ­a. Avances \\r\\nen modernidad tecnolÃ³gica sÃ­ pero orientados a emparejar la cancha, a mejorar el impacto de \\r\\nlas polÃ­ticas sociales, a fortalecer la capacidad tÃ©cnica de los municipios menos favorecidos, de \\r\\nnuestras escuelas y centros de salud. Nuestra propuesta combina el crecimiento con la preser-\\r\\nvaciÃ³n ambiental, empleo decente y protecciÃ³n social, apoyados en la innovaciÃ³n y en las nuevas \\r\\ntecnologÃ­as. En definitiva, es una invitaciÃ³n a que chilenos y chilenas se incorporen a las tareas del \\r\\ndesarrollo, considerando las oportunidades y desafÃ­os que se nos plantean en esta ya segunda \\r\\ndÃ©cada del siglo 21. \\r\\nA continuaciÃ³n, enumeramos nuestros 7 principales ejes, en torno de los cuales articularemos \\r\\nnuestra acciÃ³n de gobierno.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n17\\r\\nLAS FAMILIAS PRIMERO\\r\\nRECUPERANDO EL CRECIMIENTO\\r\\nUNA SÃLIDA AGENDA DE SEGURIDAD PUBLICA\\r\\nPENSIONES DIGNAS\\r\\nTERMINAR CON EL MACHISMO, LA DISCRIMINACIÃN Y LA VIOLENCIA \\r\\nCONTRA LA MUJER\\r\\nHACIA UNA NUEVA POLÃ\\215TICA: POR UN PACTO ÃTICO QUE ASEGURE \\r\\nMEJORES PRÃ\\201CTICAS PARA RESTAURAR LA CONFIANZA Y \\r\\nFORTALECER LA DEMOCRACIA. \\r\\nDESCENTRALIZACIÃN EFECTIVA Y COMUNAS MÃ\\201S FUERTES\\r\\n1\\r\\n2\\r\\n3\\r\\n4\\r\\n5\\r\\n6\\r\\n7\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n18\\r\\nCOMPROMISO 1: \\r\\nLAS FAMILIAS PRIMERO\\r\\nNuestro gobierno serÃ¡ el gobierno de las familias. Pero no de una sola familia, sino de todas las \\r\\nfamilias que hoy existen en nuestro paÃ­s. \\r\\nUna familia no es padre, un hijo y una esposa unidos por siempre. Una familia estÃ¡ unida por el \\r\\namor, la protecciÃ³n de unos a otros. \\r\\nSabemos que por muchos aÃ±os las familias chilenas no han esperado al gobierno para resolver \\r\\nsus problemas. Sabemos que pase lo que pase en el paÃ­s, las familias tendrÃ¡n que trabajar duro \\r\\npara salir adelante y se sacrificaran todos los dÃ­as para dar un mejor pasar a sus hijos e hijas. Tam-\\r\\nbiÃ©n sabemos que han perdido su fe en lo que el gobierno puede hacer para ayudarles.\\r\\nNo estÃ¡n solos, nosotros hemos escuchado su mensaje. Es hora de hacer realidad el principio de \\r\\nque â\\200la familia es el nÃºcleo fundamental de la sociedadâ\\200\\235. \\r\\nEn nuestro gobierno, implementaremos un profundo plan de protecciÃ³n que otorgue a todos los \\r\\ntipos de familias un alivio econÃ³mico y social.\\r\\nEl Plan â\\200Las Familias Primeroâ\\200\\235 consiste en los siguientes compromisos:\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n19\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n20\\r\\n1. PROTECCIÃN PARA TODAS Y TODOS \\r\\nLOS HIJOS DE CHILE:\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n21\\r\\nNingÃºn niÃ±o o niÃ±a se quedarÃ¡ atrÃ¡s. Nuestro compromiso es que todo niÃ±o o niÃ±a, \\r\\nsin importar su origen, la condiciÃ³n de sus padres, o situaciÃ³n, serÃ¡ responsabilidad \\r\\nde toda la sociedad. Este es un cambio Ã©tico y de enfoque que implementaremos bajo \\r\\nnuestro gobierno. \\r\\nEn los primeros 100 dÃ­as de nuestro gobierno, presentaremos una profunda reforma \\r\\nal Sename. La actual estructura dejarÃ¡ de existir, creando, en su reemplazo, el Servicio \\r\\nde ProtecciÃ³n Especial y el Servicio de ReinserciÃ³n Social Juvenil. \\r\\nPondremos el foco en la aprobaciÃ³n e implementaciÃ³n de los siguientes proyectos de \\r\\nley: Ley de GarantÃ­a de Derechos, Ley de AdopciÃ³n, Defensor de la NiÃ±ez, Subsecretaria \\r\\nde la NiÃ±ez.\\r\\nA.\\r\\nB.\\r\\nC.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n22\\r\\n2. PROFUNDIZAREMOS LOS AVANCES HACIA \\r\\nUNA EDUCACIÃN PÃBLICA, GRATUITA Y DE \\r\\nCALIDAD PARA TODAS Y TODOS\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n23\\r\\nA.\\r\\nB.\\r\\nC.\\r\\nD.\\r\\nE.\\r\\nF.\\r\\nPara nosotros â\\200la educaciÃ³n es un derecho y no un bien de consumoâ\\200\\235. Es un derecho que \\r\\npermite a los ciudadanos y ciudadanas ejercer sus otros derechos. Sin educaciÃ³n no se \\r\\ntiene libertad. Ese es el centro de nuestro compromiso. \\r\\nEstableceremos una reforma educacional 2.0. Continuaremos con los objetivos trazados \\r\\npor las reformas implementadas bajo el gobierno de Michelle Bachelet, abiertos a corregir \\r\\nlo que la prÃ¡ctica sugiera corregir, pero impulsando una profunda revoluciÃ³n del trabajo \\r\\ndentro del aula. Las reformas ahora serÃ¡n dentro de las salas de clases. Vamos a desmunic-\\r\\nipalizar la educaciÃ³n. Modificaremos el sistema de financiamiento de la educaciÃ³n, pasando \\r\\ndel subsidio a la demanda basado en la subvenciÃ³n por asistencia media a un modelo que \\r\\nconsidere la multiplicidad de factores que condicionan el quehacer de la escuela. \\r\\nLa revoluciÃ³n del aula debe comenzar por la primera infancia y avanzar gradualmente \\r\\nen los otros niveles. Queremos que el 100% de los niÃ±os/as tengan acceso de cobertura. \\r\\nPor ello, estudiaremos un plan nacional de cobertura que garantice a cada niÃ±a y niÃ±o la \\r\\natenciÃ³n educativa en este nivel parvulario. Al mismo tiempo, elevaremos la calidad en el \\r\\naula pre-bÃ¡sica. \\r\\nLa RevoluciÃ³n del Aula la centraremos en los profesores. Debemos priorizar la mÃ¡xima \\r\\ncalidad en su educaciÃ³n y al mismo tiempo en las exigencias. EstÃ¡ demostrado que la \\r\\nevaluaciÃ³n docente apoyada en pruebas estandarizadas no es efectiva y que las exigen-\\r\\ncias burocrÃ¡ticas de extremos papeleos demanda mucho tiempo al profesor en lugar de \\r\\ndedicÃ¡rselo a los alumnos. Haremos una revisiÃ³n exhaustiva para que los profesores se \\r\\ndediquen a nuestros hijas e hijos y no a llenar papeles. Vamos a estudiar la posibilidad de \\r\\nreducir los alumnos por sala, acercÃ¡ndose al estÃ¡ndar OCDE de 21 alumnos (hoy son 30), \\r\\nconsiderando apoyo docente en cada aula. En el primer aÃ±o de nuestro gobierno vamos \\r\\na presentar una revisiÃ³n de la malla curricular, la que buscaremos sea objeto de un gran \\r\\nacuerdo nacional.\\r\\nDaremos un impulso a la EducaciÃ³n TÃ©cnica. Nos haremos cargo del dÃ©ficit en infraestruc-\\r\\ntura y tecnologÃ­a, asÃ­ como crear una Red de Estatal de EducaciÃ³n TÃ©cnica Profesional, \\r\\nque permita terminar con los callejones sin salida de estos estudiantes (baja matricula \\r\\nsector terciario e ingreso al mundo laboral) y refuerce su empleabilidad. \\r\\nRevisaremos el sistema de financiamiento de la EducaciÃ³n superior, avanzando hacia \\r\\nel financiamiento basal a las instituciones pÃºblicas, considerando diversos factores que \\r\\npermitan un financiamiento acorde a la realidad de cada instituciÃ³n. Seguiremos con la \\r\\npolÃ­tica de gratuidad en educaciÃ³n superior, continuando con la transiciÃ³n gradual para \\r\\nalcanzar el 100% de cobertura, cuando las condiciones econÃ³micas lo permitan. Termin-\\r\\naremos con el CAE. El actual gobierno ha manifestado su disposiciÃ³n a poner fin a este in-\\r\\nstrumento. Evaluaremos el proyecto respectivo y buscaremos las fÃ³rmulas que permitan \\r\\nsu implementaciÃ³n, sujeto a las restricciones fiscales existentes.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n24\\r\\n3. FORTALECEREMOS\\r\\n EL DERECHO A LA SALUD\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n25\\r\\nA.\\r\\nB.\\r\\nC.\\r\\nD.\\r\\nE.\\r\\nF.\\r\\nContinuaremos la construcciÃ³n de nuevos hospitales, Centros de Salud Familiar, Centros \\r\\nComunitarios de Salud Familiar y Servicios de AtenciÃ³n Primaria de Urgencia de Alta Res-\\r\\noluciÃ³n. Crearemos en el Ministerio de Salud la unidad de GestiÃ³n de Proyectos de Infrae-\\r\\nstructura. Fortaleceremos la formaciÃ³n del personal de salud, en particular, formando mÃ¡s \\r\\nmÃ©dicos de familia y preparando a los mÃ©dicos generalistas para que se hagan expertos en \\r\\nciertas Ã¡reas de patologÃ­as mÃ¡s preeminentes en sus respectivas regiones o localidades. \\r\\nAl mismo tiempo, trabajaremos para reducir las fuertes asimetrÃ­as en dotaciÃ³n de mÃ©dicos \\r\\ny especialistas por habitante entre Santiago y el resto del paÃ­s.\\r\\nAvanzaremos hacia la AtenciÃ³n Primaria Universal. Pondremos en marcha un sistema de \\r\\natenciÃ³n primaria y de salud preventiva para todas y todos los chilenos, en todo el terri-\\r\\ntorio nacional. Ello implicarÃ¡ fortalecer el Modelo de AtenciÃ³n Integral de salud familiar y \\r\\ncomunitaria.\\r\\nFortaleceremos la estructura de Fonasa, dotÃ¡ndolo de mayores recursos y atribuciones. \\r\\nEn nuestro gobierno toda persona que tenga riesgo serÃ¡ atendida de urgencia y sin costo \\r\\nhasta la estabilizaciÃ³n del paciente, independiente donde sea atendido. Al mismo tiem-\\r\\npo, vamos a aumentar las prestaciones asociadas a diagnÃ³sticos(PAD). Implementaremos \\r\\nun Plan de Contingencia destinado a terminar las listas de espera, Ges y otras. Al mismo \\r\\ntiempo, buscaremos descentralizar y aumentar la autonomÃ­a de los hospitales, fortaleci-\\r\\nendo el liderazgo interno y asociando mejoras y beneficios a aquellos que tengan mejor \\r\\ndesempeÃ±o.\\r\\nLey de Salud Mental. Ampliaremos y mejoraremos la cobertura dental del sistema pÃºblico \\r\\nde salud, aumentando el acceso de las personas a la atenciÃ³n dental en consultorios, es-\\r\\npecialmente de mujeres y adulto mayor. Crearemos una ficha clÃ­nica electrÃ³nica universal \\r\\npara todas y todos los chilenos, independiente se atiendan en el sector pÃºblico o privado. \\r\\nVamos a avanzar hacia una cobertura universal de salud, reformando los seguros de salud \\r\\nque hoy existen(Fonasa e Isapres), para que las personas aporten segÃºn su capacidad de \\r\\npago y lo utilicen dependiendo de su necesidad. Alguno de los objetivos que nos hemos \\r\\ntrazado con esta importante reforma son: Introducir solidaridad inter-sistemas; establecer \\r\\nacceso a la salud universal e igualitario y no dependa mÃ¡s del bolsillo de cada uno; generar \\r\\nmovilidad de los cotizantes entre ISAPRE y FONASA, ya que, al disminuir la asimetrÃ­a de \\r\\nla informaciÃ³n, las personas podrÃ­an comparar mejor los planes de salud, aumentarÃ­a la \\r\\ncompetencia y los precios de los planes serÃ­an menores. \\r\\nCrearemos una Sistema de Farmacias PÃºblicas para evitar los abusos del mercado, la \\r\\ncolusiÃ³n de precios y, finalmente, beneficiar a los ciudadanos y ciudadanas. Este sistema \\r\\nconsistirÃ¡ en 3 medidas concretas: a) Fortalecer una red de farmacias de barrio, permitien-\\r\\ndo que CENABAST les venda remedios a precios mÃ³dicos, lo que facilitarÃ­a la competen-\\r\\ncia contra las grandes cadenas farmacÃ©uticas; b) Instalar botiquines mÃ©dicos en todos los \\r\\nservicios pÃºblicos; c) Promover farmacias PÃºblicas en aquellos lugares donde se necesite \\r\\nmayor competencia.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n26\\r\\n4. VIVIENDAS PARA TODOS Y TODAS\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n27\\r\\nA.\\r\\nB.\\r\\nC.\\r\\nD.\\r\\nHaremos un ajuste tributario para eximir a la clase media del IVA a la vivienda. Este IVA lo \\r\\nque hace es encarecer entre un 12% y un 15% el valor de la vivienda, afectando a quienes \\r\\ncompran viviendas a partir de 3.000, 4.000, 5.000 UF.\\r\\nImpulsaremos una polÃ­tica de fomento a la primera vivienda desde el Banco de Estado, \\r\\nfavoreciendo principalmente a jÃ³venes y mujeres. \\r\\nReforzaremos el plan de construcciÃ³n de viviendas sociales, con viviendas ampliables, \\r\\ndignas, seguras y con Ã¡reas verdes, dotadas de servicios bÃ¡sicos y transporte cercano. \\r\\nTrabajaremos en programas especiales para apoyar la vivienda de sectores medios o la \\r\\nampliaciÃ³n de sus viviendas. Nuestro plan de renovaciÃ³n de viviendas estarÃ¡ basado en la \\r\\nregeneraciÃ³n de los planes existentes y la coordinaciÃ³n con las agencias regionales para \\r\\nfocalizar subsidios. Crearemos un sistema de garantÃ­a estatal para que los nuevos barrios \\r\\ncuenten con servicios bÃ¡sicos, emplazamiento seguro y sin contaminaciÃ³n, comercio local \\r\\ny adecuada conectividad;\\r\\nBuscaremos erradicar los campamentos. Chile no puede avanzar si tenemos estos temas \\r\\npendientes. En nuestro territorio quedan mÃ¡s de 35 mil familias que siguen viviendo en la \\r\\npobreza mÃ¡s dura, hogares sin las condiciones mÃ­nimas y servicios bÃ¡sicos. \\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n28\\r\\n5. BUENOS EMPLEOS \\r\\nY MEJORES SALARIOS\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n29\\r\\nA.\\r\\nB.\\r\\nC.\\r\\nD.\\r\\nReformaremos las Transferencias Pro-Empleo con el objetivo de fortalecer la empleabili-\\r\\ndad, formalidad e ingreso laboral de madres solteras y jÃ³venes. Reformaremos la norma-\\r\\ntiva asociada a la exigencia de contar con sala cuna en las empresas que tengan mÃ¡s de \\r\\n25 empleadas mujeres, terminando con la discriminaciÃ³n hacia las mujeres, haciÃ©ndolo \\r\\nextensivo a todos los trabajadores. Impulsaremos una Ley de Teletrabajo.\\r\\nCÃ³digo Laboral pro-familia: Reformaremos el CÃ³digo del Trabajo con el objetivo de esta-\\r\\nblecer mecanismos de adaptabilidad horaria y bancos de hora, para dar que los traba-\\r\\njadores y trabajadoras puedan adecuar los tiempos laborales con los familiares. A partir \\r\\nde un dialogo tripartito(Gobierno-Empresas-Trabajadores) buscaremos generar acuerdos \\r\\nlaborales que permitan mejorar la distribuciÃ³n de las utilidades, cuando ellas hayan sido \\r\\ngracias a la productividad de los trabajadores y trabajadoras. \\r\\nTrabajo para tod@s. SegÃºn Senadis, un 70% de las personas mayores de 15 aÃ±os en situ-\\r\\naciÃ³n de discapacidad no tiene trabajo remunerado. Vamos a revisar la ley de inclusiÃ³n, \\r\\ncon el objeto de hacer que esta norma se cumpla y aplique, partiendo por el sector pÃºblico.\\r\\nConvertir al Estado en un buen empleador: Llego la hora de cumplir con la promesa histÃ³ri-\\r\\nca de pasar a los trabajadores y trabajadoras a honorarios a un estatus laboral decente. \\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n30\\r\\n6. TRANSPORTE DIGNO PARA LAS \\r\\nPERSONAS\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n31\\r\\nA.\\r\\nB.\\r\\nNuevo sistema de transporte pÃºblico en regiones, creando sistemas integrados en todas \\r\\nlas Ã¡reas metropolitanas. Generaremos un gran pacto Pro-movilidad en todas las Ã¡reas \\r\\nmetropolitana del paÃ­s que signifique un nuevo contrato de las ciudades, para su desarrollo \\r\\nurbano, integrando la movilidad como un factor decisivo en su construcciÃ³n y que sirva de \\r\\nbase para la conformaciÃ³n de las autoridades metropolitanas del transporte (AMT).\\r\\nFin del Transantiago como hoy lo conocemos. Estableceremos una importante ampliaciÃ³n \\r\\nde la red Metro, terminando las lÃ­neas 3 y 6, para continuar con las lÃ­neas 7 y 8. Daremos un \\r\\nsalto en la calidad de los servicios de buses, para lo cual se debe contar con una red de ter-\\r\\nminales del sistema, mayor cobertura de la integraciÃ³n tarifaria hacia las comunas perifÃ©ri-\\r\\ncas de la regiÃ³n metropolitana (tales como Pirque, Lampa, Buin, entre otras) y transformar \\r\\nlos siete corredores -que estarÃ¡n terminados durante los prÃ³ximos meses- en verdaderos \\r\\nBRT (Bus Rapid Transit). Crear una empresa o filial de Metro para la coordinaciÃ³n del trans-\\r\\nporte pÃºblico mediante buses.\\r\\n. \\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n32\\r\\n7. NO MÃ\\201S ABUSOS\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n33\\r\\nA.\\r\\nB.\\r\\nC.\\r\\nD.\\r\\nFortalecer a las organizaciones de consumidores, dando soporte econÃ³mico a las organi-\\r\\nzaciones nacionales y regionales. Establecimiento de multas equivalentes, como mÃ­nimo, \\r\\nal monto total defraudado y a las eventuales ganancias que haya supuesto el abuso com-\\r\\netido. \\r\\nFin a la impunidad en los delitos de cuello y corbata. ProhibiciÃ³n a la negociaciÃ³n de penas \\r\\nalternativas, Introduciremos una modificaciÃ³n en el CÃ³digo Procesal Penal para impedir \\r\\nque los delitos relacionados con la protecciÃ³n al consumidor, protecciÃ³n a la libre compe-\\r\\ntencia, ley general de marcado de valores, ley general de bancos, fraude, cohecho y delito \\r\\nmedioambiental permitan la negociaciÃ³n de un juicio abreviado y el establecimiento de \\r\\npenas alternativas.\\r\\nDespolitizaciÃ³n de los entes fiscalizadores, traspasando a la Alta DirecciÃ³n PÃºblica la des-\\r\\nignaciÃ³n de las mÃ¡ximas autoridades. Esto podrÃ­a incluir gradualmente a las diversas Su-\\r\\nperintendencias, al SERNAC, SII y Servicio Nacional de Aduanas.\\r\\nRevisaremos todas las normas que signifiquen abusos, por ejemplo que las autopistas \\r\\nsean gratis cuando hayan atrasos en los tiempos comprometidos o la calidad del servi-\\r\\ncio de las compaÃ±Ã­as elÃ©ctricas sea ineficiente. El Sello Sernac Financiero fue una burda \\r\\napuesta publicitaria, ya que al ser voluntario ha sido prÃ¡cticamente inutilizado por las insti-\\r\\ntuciones financieras. Vamos a modificar la ley para que sea obligatorio y de esta forma dar \\r\\ncumplimiento efectivo de esa ley.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n34\\r\\n8. FAMILIAS DIVERSAS \\r\\nIGUALES ANTE LA LEY\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n35\\r\\nA.\\r\\nB.\\r\\nC.\\r\\nNos comprometemos a impulsar un Proyecto de Matrimonio Igualitario con derecho a la \\r\\nfiliaciÃ³n. Legislaremos para que la orientaciÃ³n sexual o la identidad y expresiÃ³n de gÃ©nero \\r\\nno constituya un obstÃ¡culo para la adopciÃ³n de niÃ±os o niÃ±as. \\r\\nImpulsaremos mejoras al proyecto de Ley de Identidad de GÃ©nero que permitan y faciliten \\r\\nel trÃ¡mite de las personas para cambiar de nombre y sexo legalmente, de una manera \\r\\nrÃ¡pida y digna.\\r\\nDado que la desigualdad de gÃ©nero tambiÃ©n afecta a los hombres, propiciaremos medidas \\r\\nque apoyen el ejercicio de paternidades presentes, igualitarias, no estereotipadas o heter-\\r\\nonormativas.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n36\\r\\n9. FAMILIAS MULTICULTURALES, \\r\\nESPECIALMENTE, NUESTROS \\r\\nPUEBLOS ORIGINARIOS.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n37\\r\\nA.\\r\\nB.\\r\\nC.\\r\\nD.\\r\\nE.\\r\\nEstableceremos un Nuevo Trato con los pueblos originarios, entregÃ¡ndoles reconocimiento \\r\\nconstitucional.\\r\\nAvanzaremos en una ley que asegure representaciÃ³n especial en todos aquellos cargos de \\r\\nelecciÃ³n popular, en particular, los que busquen acceder al Congreso Nacional. \\r\\nIncorporaremos decididamente en el curriculum nacional las costumbres, su historia, su \\r\\nmodo de vida, su cultura para que sea asumida, respetada y reconocida por todos los niÃ±os \\r\\ny niÃ±as del paÃ­s pilares de nuestra sociedad del futuro. \\r\\nAvanzaremos en un diÃ¡logo plural e inclusivo que escuche de forma permanente las in-\\r\\nquietudes, propuestas, problemas y oportunidades que los pueblos originarios hacen pre-\\r\\nsente al Estado chileno. \\r\\nApoyaremos y perfeccionaremos las iniciativas que ha propuesto el actual gobierno tales \\r\\ncomo El Plan AraucanÃ­a, asÃ­ como el estudio e implementaciÃ³n de otras formas de ayuda \\r\\ndirecta a las comunidades en materia productiva, fomento y desarrollo integral.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n38\\r\\nCOMPROMISO 2: \\r\\nRECUPERANDO EL \\r\\nCRECIMIENTO\\r\\nEstamos comprometidos con el crecimiento econÃ³mico, la estabilidad macroeconÃ³mica y la se-\\r\\nriedad en la gestiÃ³n fiscal. Entendemos tambiÃ©n que no cualquier crecimiento es el que ayuda a la \\r\\nconstrucciÃ³n de una economÃ­a mÃ¡s competitiva, sustentable y socialmente inclusiva. \\r\\nAspiramos a ir construyendo una economÃ­a inteligente, cada vez mÃ¡s apoyada en innovaciÃ³n, \\r\\nciencia y tecnologÃ­a. Velaremos por diversificar nuestra matriz productiva y exportadora, alentan-\\r\\ndo la gestaciÃ³n de cadenas de valor en torno a nuestros recursos naturales y apoyando activi-\\r\\ndades emergentes intensivas en conocimiento y con potencial competitivo. Ampliaremos los es-\\r\\npacios de las Pymes en dicha matriz y trabajaremos para que una matriz energÃ©tica basada en \\r\\nenergÃ­as renovables no convencionales, favorezca nuestra competitividad y mejore la calidad de \\r\\nvida de chilenos y chilenas. Velaremos por limitar los excesivos grados de concentraciÃ³n econÃ³mi-\\r\\nca, defenderemos la libre competencia y apoyaremos las organizaciones de consumidores. Pro-\\r\\nmoveremos un nuevo pacto laboral enmarcado en el diÃ¡logo social, buscando adecuar empresas \\r\\ny relaciones laborales a los desafÃ­os de protecciÃ³n social, trabajo decente, cambio tecnolÃ³gico, \\r\\ninnovaciÃ³n, productividad y flexibilidad. Estimularemos el empleo juvenil y femenino, lo que ele-\\r\\nvarÃ¡ nuestro producto potencial. \\r\\nTrabajaremos tambiÃ©n por digitalizar nuestra economÃ­a, el estado, las pymes y llevar una banda \\r\\nancha potente a los hogares, empresas, escuelas, hospitales y gobiernos regionales, locales y \\r\\nmunicipios. Para eso, proponemos una Estrategia de TransformaciÃ³n Digital, apoyada en una \\r\\nmirada de largo plazo, a partir de tres pilares estratÃ©gicos: Conectividad Digital y EconomÃ­a Digital; \\r\\nDesarrollo de Habilidades Digitales y CreaciÃ³n de una Institucionalidad Digital.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n39\\r\\nCrearemos una Oficina de GestiÃ³n de Grandes Proyectos de inversiÃ³n que permita reducir drÃ¡sti-\\r\\ncamente los hoy excesivos tiempos asociados a la aprobaciÃ³n o rechazo de estas inversiones. Sus \\r\\nfunciones serÃ¡n:\\r\\nCoordinar los diferentes servicios pÃºblicos que intervienen en la evaluaciÃ³n \\r\\ny obtenciÃ³n de permisos de los grandes proyectos de inversiÃ³n;\\r\\nOperar como ventanilla Ãºnica para ingreso de esos proyectos. \\r\\nGenerar un mapa de los trÃ¡mites y permisos a obtener; acompaÃ±e, apoye \\r\\ny coordine a los servicios pÃºblicos involucrados en todo el proceso, realice \\r\\nun seguimiento en lÃ­nea de los trÃ¡mites y plazos comprometidos, agilizÃ¡n-\\r\\ndolos. \\r\\nInforme y asesore a las autoridades locales en el diÃ¡logo con la comunidad \\r\\ny la participaciÃ³n ciudadana en este proceso. \\r\\nFocalizaremos la atenciÃ³n del sistema en los grandes proyectos de in-\\r\\nversiÃ³n, limitando la excesiva carga que hoy reciben los funcionarios de los \\r\\norganismos sectoriales.\\r\\nReduciremos los tiempos en las evaluaciones ambientales, simplificando \\r\\nprocedimientos, reduciendo instancias y acotando los plazos de resoluciÃ³n \\r\\nen las instancias pÃºblicas, regionales y centrales, en los tribunales am-\\r\\nbientales y en la propia Corte Suprema. Hay paÃ­ses mÃ¡s exigentes que el \\r\\nnuestro en materia ambiental y estos procesos de evaluaciÃ³n o rechazo \\r\\nson mÃ¡s Ã¡giles. Hacia allÃ¡ tenemos que marchar. \\r\\nPerfeccionaremos el Sistema de EvaluaciÃ³n de Impacto Ambiental. Reforzaremos la coordi-\\r\\nnaciÃ³n online entre el Ministerio de Medio Ambiente, el Sistema de EvaluaciÃ³n de Impacto Ambi-\\r\\nental y la Superintendencia de Medio Ambiente.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n40\\r\\nImplementaremos un Plan Nacional de Infraestructura, en diÃ¡logo con las cÃ¡maras empresar-\\r\\niales respectivas. Agilizaremos las concesiones y promoveremos la puesta en marcha del Fondo \\r\\nde Infraestructura. Algunos ejes de este Plan serÃ¡n la expansiÃ³n del Metro en Santiago; ampli-\\r\\naciÃ³n de la red de Metro en Santiago, ValparaÃ­so y ConcepciÃ³n; conectividad entre las rutas 68 y \\r\\n78 en la zona central.\\r\\nAvanzaremos en mejorar la conectividad con Argentina, apurando el tranco en las \\r\\ndecisiones respecto del tÃºnel de Aguas Negras y mejorando los accesos fronterizos.\\r\\nDecidiremos la mejor ubicaciÃ³n para el Mega Puerto en la zona central y viabilizare-\\r\\nmos su rÃ¡pida concreciÃ³n.\\r\\nAseguraremos la construcciÃ³n de red de fibra Ã³ptica que conectarÃ¡ AysÃ©n con Ma-\\r\\ngallanes.\\r\\nCulminaremos las negociaciones con China para construir una red de fibra Ã³ptica que \\r\\nconecte a AmÃ©rica del Sur con China, a travÃ©s de Chile. Ello estimularÃ¡ el comercio y \\r\\nlas inversiones con Asia PacÃ­fico y nos podrÃ­a transformar en el hub digital de AmÃ©rica \\r\\ndel Sur, estimulando el comercio electrÃ³nico y la exportaciÃ³n de servicios globales.\\r\\nGeneraciÃ³n de energÃ­a en base a radiaciÃ³n solar. Promoveremos el distrito tecnolÃ³gi-\\r\\nco solar en el norte: paneles solares, almacenamiento de energÃ­a y cluster ligado a \\r\\nmanufacturas, tecnologÃ­as, ingenierÃ­a y servicios.\\r\\nCluster minero en torno a Codelco; desarrollo de proveedores de clase mundial; ex-\\r\\nportando servicios, ingenierÃ­a y tecnologÃ­as.\\r\\nCadena de valor en torno al litio; asociaciones tecnolÃ³gicas y convenios con Ues y \\r\\ncentros tecnolÃ³gicos de talla mundial.\\r\\nIndustria alimentaria: ingredientes funcionales, colorantes naturales; turismo de â\\200in-\\r\\ntereses especialesâ\\200\\235. Exportaciones de servicios Chile, potencia alimentaria\\r\\nUn esfuerzo especial en innovaciÃ³n y desarrollo cientÃ­fico, agregando conocimiento y \\r\\ntecnologÃ­a a nuestro trabajo, producciÃ³n y exportaciones.\\r\\nHubs tecnolÃ³gicos regionales, vinculados a Pymes innovadoras en cada regiÃ³n.\\r\\nMÃ¡s apoyo y recursos para InvestChile en atracciÃ³n de IED en minerÃ­a (equipamien-\\r\\ntos, tecnologÃ­as), energÃ­a, infraestructura, alimentos funcionales y servicios globales.\\r\\nAlentaremos la emergencia de nuevas industrias y nuevos sectores competitivos para diversi-\\r\\nficar la matriz productiva y exportadora del paÃ­s. \\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n41\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n42\\r\\nCOMPROMISO 3: \\r\\nUNA SÃLIDA AGENDA \\r\\nDE SEGURIDAD PÃBLICA\\r\\nNecesitamos complementar la reacciÃ³n frente al delito con una efectiva polÃ­tica de prevenciÃ³n, \\r\\nsumando acciones concretas para la reinserciÃ³n social y el apoyo a las vÃ­ctimas de delito.\\r\\nNo podemos seguir pensando que la delincuencia se enfrenta sÃ³lo con mÃ¡s policÃ­as en las calles y \\r\\naumentando el nÃºmero de presos en las cÃ¡rceles. Estas medidas son necesarias y muchos chile-\\r\\nnos las demandan, pero tambiÃ©n es imprescindible abocarnos a los factores que facilitan los del-\\r\\nitos. \\r\\nLos sitios eriazos, el consumo de alcohol en la vÃ­a pÃºblica, los abusos de los espacios comunitari-\\r\\nos, las balaceras, el trÃ¡fico de drogas, las bandas que operan violentamente, son todos elementos \\r\\nque provocan inseguridad y que necesitamos abordar para que los vecinos puedan vivir con una \\r\\nmejor calidad de vida. Necesitamos construir ciudades amables, con una cultura de resoluciÃ³n \\r\\npacÃ­fica de conflictos, con la responsabilidad y el compromiso de todos. Muchos de los conflictos \\r\\ncomunitarios que a diario viven los vecinos tienen que ver con la falta de preocupaciÃ³n y respeto \\r\\npor nuestras normas bÃ¡sicas de convivencia. Los microbasurales, los destrozos en plazas y mul-\\r\\nticanchas, los ruidos molestos, los grafittis, son seÃ±ales de que nuestro comportamiento cÃ­vico se \\r\\nha debilitado. Y en comunidades donde esto ocurre, es muy probable que el delito aparezca con \\r\\nmayor fuerza.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n43\\r\\nPor lo anterior, en nuestro futuro gobierno vamos a trabajar en diversos Ã¡mbitos para abordar la \\r\\ntemÃ¡tica de seguridad pÃºblica desde una perspectiva integrada, con participaciÃ³n social y ade-\\r\\ncuaciÃ³n local, para que chilenos y chilenas se sientan mÃ¡s seguros en sus barrios.\\r\\nA.\\r\\nB.\\r\\nD.\\r\\nE.\\r\\nC.\\r\\nPrimero, el paÃ­s demanda una autoridad con dedicaciÃ³n exclusiva la seguridad pÃºblica y al \\r\\ncombate de la delincuencia y el narcotrÃ¡fico. En nuestro gobierno, crearemos el Ministerio \\r\\nde Seguridad PÃºblica quien tenga a cargo la estructura global del sistema. Lo anterior pues \\r\\nla actual estructura a cargo del Ministerio del Interior no ha dado los resultados esperados.\\r\\nNuestra preocupaciÃ³n especial serÃ¡n las vÃ­ctimas de delitos, para ello generaremos el ser-\\r\\nvicio nacional de vÃ­ctimas que permita defender a los ciudadanos que vele con exclusividad \\r\\npor sus intereses ante un hecho delictual. No puede ser que los delincuentes tengan dere-\\r\\ncho a la defensa a travÃ©s de la DefensorÃ­a Penal y las vÃ­ctimas no tengan a alguien no las \\r\\noriente y se preocupe de su caso concreto.\\r\\nVelaremos porque el Ministerio PÃºblico se preocupe de exhaustivamente de la persecuciÃ³n \\r\\nde los delitos que afectan directamente a la poblaciÃ³n, promoviendo una mejor investi-\\r\\ngaciÃ³n y mayor nÃºmero de condenas. Para ello realizaremos los ajustes que sean necesa-\\r\\nrios para que los fiscales trabajen arduamente en perseguir a los delincuentes. Al mismo \\r\\ntiempo velaremos por el cumplimiento efectivo de las penas impuestas por los tribunales \\r\\nde justicia. Daremos todas las posibilidades de reinserciÃ³n a quienes delinquen por primera \\r\\nvez, pero seremos severos con los reincidentes. En estos casos aumentaremos las penas \\r\\ny no tendrÃ¡n beneficios. \\r\\nCon la misma fuerza vamos a trabajar en fortalecer la prevenciÃ³n y gestiÃ³n local en segu-\\r\\nridad. Ampliaremos el trabajo de acompaÃ±amiento tÃ©cnico-financiero a todos los municip-\\r\\nios de Chile, para que en cada territorio local puedan llevarse a cabo medidas y proyectos \\r\\nadaptados a las problemÃ¡ticas especÃ­ficas de seguridad de cada territorio. Fortaleceremos \\r\\nel Fondo Nacional de Seguridad PÃºblica, dando mÃ¡s oportunidades de financiamiento a \\r\\nlas organizaciones comunitarias, universidades y otras de la sociedad civil. Propondremos \\r\\nPlan Nacional de Barrios CrÃ­ticos, con una visiÃ³n intersectorial, que no sÃ³lo aborde temas \\r\\nde seguridad, sino que tambiÃ©n trabaje en mejorar acceso a la salud, educaciÃ³n, vivienda \\r\\ny otros servicios. Este Plan abordarÃ¡ al menos 10 barrios crÃ­ticos a nivel nacional, consid-\\r\\nerando tambiÃ©n la situaciÃ³n de las regiones donde existan sectores con altos niveles de \\r\\nvulnerabilidad, inseguridad grave y violencia.\\r\\nPropondremos la creaciÃ³n de un sistema de reinserciÃ³n social integrado a nivel nacional, \\r\\ncon programas segmentados por edad y gravedad del delito cometido, y con objetivos e \\r\\nindicadores claros, medibles en el mediano plazo. \\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n44\\r\\nCOMPROMISO 4: \\r\\nPENSIONES DIGNAS\\r\\nEl sistema de pensiones basado en las AFP se agotÃ³. Dicho sistema opera bajo una lÃ³gica indi-\\r\\nvidualista, donde cada persona recibe una jubilaciÃ³n que depende de su ingreso, de su ahorro \\r\\nindividual y de la regularidad de su cotizaciÃ³n. El sistema carece de solidaridad intra e intergener-\\r\\nacional, contrariando la esencia de la seguridad social. Con un mercado laboral con una alta cuota \\r\\nde empleos precarios e informales, con alrededor de un 40% de la fuerza de trabajo que no cotiza \\r\\ny con bajos salarios, no es posible generar pensiones mÃ¡s dignas, sin introducir solidaridad entre \\r\\nlos que mÃ¡s tienen y los que tienen menos y entre las actuales y las futuras generaciones. \\r\\nEl primer gobierno de la Presidenta Bachelet le introdujo un pilar solidario al sistema, apoyando a \\r\\nlos sectores de menores recursos. Gracias a ello, hoy tenemos un sistema integrado pÃºblico-priva-\\r\\ndo que paga 1.300.000 pensiones bÃ¡sicas solidarias y aportes previsionales solidarios. Esa pen-\\r\\nsiÃ³n solidaria ha ido aumentando en el tiempo y constituye un cambio de vida fundamental para \\r\\nmuchos de nuestros pensionados. Las actuales pensiones, pese al aporte solidario, siguen sien-\\r\\ndo muy bajas. Hay tambiÃ©n un desafÃ­o importante para cubrir a las clases medias. Incluidos los \\r\\nsubsidios, actualmente el sistema reformado entrega al 79 % de los beneficiarios, beneficios por \\r\\ndebajo del salario mÃ­nimo de $ 270.000. Este valor estÃ¡ muy por debajo de la mediana del ingreso \\r\\nimponible mensual con que cotizan las mujeres ($ 450.000, aprox.); y en particular los hombres ($ \\r\\n644.000, aprox.)). El 44% de las pensiones que entrega el sistema es inferior al lÃ­mite de pobreza. \\r\\nLa tasa de reemplazo actual es del orden de 35% y su proyecciÃ³n es que en los prÃ³ximos aÃ±os baje \\r\\na 15%, muy lejos del 70% que ofreciÃ³ la eforma de JosÃ© PiÃ±era.\\r\\nEn nuestra propuesta, y avanzando hacia una lÃ³gica de mayor solidaridad, instauraremos un 5% de \\r\\ncontribuciÃ³n adicional, que aportarÃ¡ el empleador y buscaremos darle el mejor destino, a partir de \\r\\nun esquema tripartito y solidario que apoye las pensiones de los grupos medios y los de menores \\r\\ningresos, elevando las pensiones actuales y futuras. Este 5% adicional se administrarÃ¡ fuera del \\r\\nsistema de AFPs, directamente por el estado, con garantÃ­as mÃ­nimas de rentabilidad. A este efec-\\r\\nto, se asegurarÃ¡ una institucionalidad pÃºblica robusta, que asegure plena independencia y calidad \\r\\ntÃ©cnica en la administraciÃ³n de ese 5% adicional de cotizaciÃ³n.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n45\\r\\nEn nuestra propuesta, buscaremos los siguientes objetivos:\\r\\nIremos hacia un sistema mixto.\\r\\nSolidario, es decir, que los que mÃ¡s tienen, ayuden a los que tienen menos y donde las gen-\\r\\neraciones jÃ³venes ayudan a quienes les dieron vida.\\r\\nDonde ademÃ¡s del trabajador, aporten el empleador y el estado. \\r\\nEl empleador agregarÃ¡ una cotizaciÃ³n de 5% sobre la masa salarial.\\r\\nEse 5% adicional serÃ¡ administrado por una agencia estatal, tecnificada, de alta solvencia \\r\\ntÃ©cnica que velarÃ¡ por asegurar una alta rentabilidad a los ahorros. \\r\\nEste sistema mejorarÃ¡ las pensiones actuales y futuras.\\r\\nEliminarÃ¡ el sesgo previsional contra las mujeres.\\r\\nIncorporarÃ¡ seguros contra las lagunas previsionales.\\r\\nFortalecerÃ¡ la PensiÃ³n BÃ¡sica Solidaria y el Aporte Previsional Solidario en montos y cobertura.\\r\\nTranscurrido un tiempo prudencial de funcionamiento del nuevo sistema, y de acuerdo al \\r\\nprincipio de la libre elecciÃ³n, los trabajadores tendrÃ¡n la opciÃ³n de destinar tambiÃ©n su 10% \\r\\nde cotizaciÃ³n personal a su cuenta en la agencia estatal, si estiman que allÃ­ la rentabilidad \\r\\nde sus pensiones ha sido mayor y mejor la atenciÃ³n que allÃ­ han recibido.\\r\\nIncorporaremos cambios regulatorios al sistema de AFPs, introduciÃ©ndole mÃ¡s competen-\\r\\ncia, mÃ¡s transparencia, reduciendo las comisiones, mejorando los servicios a los cotizantes, \\r\\nincorporando representantes elegidos de los cotizantes en la administraciÃ³n de los fondos \\r\\npara introducir transparencia y evitar conflictos de interÃ©s. \\r\\nCrearemos una institucionalidad pÃºblica que administre los aportes del empleador y parte \\r\\nde los aportes del trabajador.\\r\\nNi un peso mÃ¡s irÃ¡ a las AFPs. El sistema de capitalizaciÃ³n individual ya tocÃ³ techo. MÃ¡s aÃºn, si ese \\r\\n5% adicional fuese Ã­ntegramente a cuentas individuales, el beneficio para las pensiones actuales \\r\\nserÃ­a cero y para el largo plazo, el beneficio serÃ­a insignificante. En efecto, si el 5% va a cuentas \\r\\nindividuales, habrÃ­a que esperar 20 aÃ±os para que la pensiÃ³n aumente sÃ³lo en $10.000. \\r\\nMÃ¡s recursos a las AFPs no resuelven la pensiÃ³n de quienes no cotizan o lo hacen con alta irreg-\\r\\nularidad; no otorga ningÃºn apoyo a los mÃ¡s vulnerables y no elimina el sesgo previsional contra \\r\\nla mujer. \\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n46\\r\\nCOMPROMISO 5: \\r\\nTERMINAR CON TODA FORMA DE \\r\\nMACHISMO, DISCRIMINACIÃN Y \\r\\nVIOLENCIA DE GÃNERO.\\r\\nChile se juega en una agenda por la igualdad de las mujeres su propio proyecto de paÃ­s, sus posibi-\\r\\nlidades de desarrollo. Son mÃ¡s de la mitad de la poblaciÃ³n, pero donde se mire, sea en el mundo de \\r\\nla economÃ­a, de las finanzas, del trabajo y de las relaciones laborales, las resistencias a la inclusiÃ³n \\r\\nde las mujeres con plena igualdad de derechos siguen siendo muy altas. Y eso, ademÃ¡s de ser \\r\\ninjusto y violentar los derechos de las mujeres, afecta a toda la sociedad. \\r\\nEsta no es una frase bonita ni retÃ³rica; si para acercarnos a los niveles de los paÃ­ses con los que \\r\\nnos gusta compararnos en la OCDE, se incorporaran 900 mil mujeres que estÃ¡n fuera del mercado \\r\\nlaboral, habrÃ­a un incremento del 6% del PIB nacional. Lo que implica generar ingresos fiscales \\r\\nequivalentes al valor de la gratuidad en la educaciÃ³n superior o al doble de lo que se estima nece-\\r\\nsario para aumentar el pilar solidario que mejore las bajas pensiones en nuestro paÃ­s.\\r\\nEstÃ¡ en nosotros, en todos nosotros, crear una cultura donde la violencia no es tolerada, donde \\r\\nlas mujeres tienen los mismos derechos que los hombres y donde todas y todos podemos cumplir \\r\\nnuestros sueÃ±os. El feminismo no es sÃ³lo cosas de mujeres.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n47\\r\\nEn nuestro gobierno vamos a terminar con toda forma de machismo, discriminaciÃ³n y violencia \\r\\nde gÃ©nero:\\r\\nA.\\r\\nB.\\r\\nD.\\r\\nE.\\r\\nC.\\r\\nEstableceremos un plan de combate contra la violencia hacia las mujeres. En este plan \\r\\nvamos a consagrar como delito la violencia intrafamiliar, de tal forma que pueda ser de-\\r\\nnunciada por cualquier testigo y no sÃ³lo por la vÃ­ctima. Proporcionaremos una licencia \\r\\nlaboral para vÃ­ctimas de violencia domÃ©stica que sean trabajadoras dependientes, aplica-\\r\\nble al periodo inmediato a la agresiÃ³n. Se prohibirÃ¡n los acuerdos y se establecerÃ¡ la rep-\\r\\naraciÃ³n econÃ³mica de parte del atacante a la vÃ­ctima. Crearemos un programa nacional de \\r\\nreinserciÃ³n laboral que permita a la vÃ­ctima de violencia encontrar un empleo en la misma \\r\\nciudad donde reside o en otra, con el objetivo de cortar la dependencia econÃ³mica con el \\r\\nvictimario. Regularemos la violencia en el pololeo. 6 de cada 10 pensiones alimenticias no \\r\\nse pagan, vamos a modificar la normativa para que se cumpla efectivamente este derecho. \\r\\nPromoveremos garantÃ­as constitucionales para aumentar la autonomÃ­a econÃ³mica de la \\r\\nmujer, lograr una participaciÃ³n igualitaria en la vida pÃºblica y privada, construir equidad de \\r\\ngÃ©nero en los mercados de trabajo, contar con una educaciÃ³n pÃºblica, gratuita y de calidad, \\r\\nlaica, no sexista e inclusiva y un sistema de salud con perspectiva de gÃ©nero e intercultural. \\r\\nAceleraremos la inclusiÃ³n laboral de las mujeres eliminando las barreras que hoy les im-\\r\\npide trabajar, sea por los prejuicios, o por la insuficiente cobertura de atenciÃ³n preescolar y \\r\\nde cuidados de adultos mayores que dependen de ellas. \\r\\nEliminaremos las injustas brechas salariales cuestiÃ³n que, no sÃ³lo supone calidad de los \\r\\nempleos, capacitaciÃ³n y formaciÃ³n continua, aumentar el acceso a estudios tÃ©cnicos y \\r\\ncientÃ­ficos que pongan fin a la distinciÃ³n de carreras y empleos â\\200masculinosâ\\200\\235 y â\\200femeninosâ\\200\\235, \\r\\nsino ademÃ¡s equidad en la distribuciÃ³n de la jornada domÃ©stica no remunerada entre hom-\\r\\nbres y mujeres, promoviendo una polÃ­tica de corresponsabilidad al interior de los hogares. \\r\\nPero lo anterior es insuficiente por el peso cultural de la discriminaciÃ³n, por lo que se hace \\r\\nnecesaria una agenda compulsiva por la equidad de ingresos, a travÃ©s de legislaciones que \\r\\nnormen la igualdad de remuneraciones de trabajos del mismo valor entre hombres y mu-\\r\\njeres y que impidan las discriminaciones en los accesos al trabajo (la vigencia del currÃ­culo \\r\\nciego es un buen ejemplo de lo que se puede hacer). \\r\\nEs necesario reconocer y valorar el trabajo no remunerado que realizan las mujeres en los \\r\\nhogares como un trabajo que aporta a la riqueza nacional, avanzando en contabilizarlo para \\r\\nefectos previsionales. Esto implica el trabajo domÃ©stico, de reproducciÃ³n, crianza de niÃ±os \\r\\ny niÃ±as, y de cuidado de personas con discapacidad, enfermos y adultos mayores.\\r\\nBuscaremos elevar la participaciÃ³n de las mujeres y reducir la brecha con los hombres \\r\\nen roles gerenciales, en las direcciones ejecutivas y directorios de empresas de todos los \\r\\ntamaÃ±os, asÃ­ como en las organizaciones de representaciÃ³n econÃ³mica, tanto empresaria-\\r\\nles como sindicales, como parte de una polÃ­tica de justicia laboral de gÃ©nero. Pero tambiÃ©n \\r\\nes una condiciÃ³n para que las dimensiones socioeconÃ³micas de la agenda de gÃ©nero sean \\r\\nvisibilizadas, priorizadas e implementadas al interior de la economÃ­a, en las distintas Ã¡reas \\r\\nde la actividad econÃ³mica. Esa ha sido la experiencia con la participaciÃ³n de mujeres en \\r\\nlos directorios de empresas pÃºblicas, que este gobierno ha impulsado y que llega al 40% \\r\\nde mujeres participando en sus directorios. AsÃ­ como habrÃ¡ incentivos para alianzas pÃºbli-\\r\\nco-privadas, se impulsarÃ¡ una legislaciÃ³n para que tambiÃ©n la paridad de gÃ©neros llegue a \\r\\nlos directorios de las empresas privadas\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n48\\r\\nCOMPROMISO 6: \\r\\nHACIA UNA NUEVA POLÃ\\215TICA: \\r\\nPOR UN PACTO ÃTICO QUE ASEGURE \\r\\nMEJORES PRÃ\\201CTICAS PARA RESTAURAR LA \\r\\nCONFIANZA Y FORTALECER LA DEMOCRACIA.\\r\\nEl descrÃ©dito de la actividad polÃ­tica, los bajos niveles de adhesiÃ³n que exhiben nuestras princi-\\r\\npales instituciones y la baja evaluaciÃ³n y confianza hacia las autoridades, se han visto agudizado \\r\\nen el Ãºltimo tiempo por una serie de hechos que han equivocado la necesaria separaciÃ³n que debe \\r\\nexistir en Democracia entre negocios y polÃ­tica. \\r\\nPero no sÃ³lo la funciÃ³n pÃºblica ha estado en cuestionamiento: la esfera privada, especialmente \\r\\naquellas reglas mÃ­nimas de funcionamiento del mercado, se han visto expuesta a un manto de \\r\\ndudas producto de prÃ¡cticas inaceptables ejemplificadas en casos de colusiÃ³n, negociaciones in-\\r\\ncompatibles o acciones reÃ±idas con el nuevo estÃ¡ndar exigido por el escrutinio pÃºblico. \\r\\nDe este modo, los problemas que reclama hoy nuestra sociedad son, al mismo tiempo, los desafÃ­os \\r\\nque enfrenta nuestro sistema polÃ­tico. Y este reto sÃ³lo puede resolverse con mÃ¡s democracia. Ese \\r\\nserÃ¡ el desafÃ­o que estamos dispuestos a asumir: reconquistar a los cientos de miles de chilenas y \\r\\nchilenos que hoy observan con sospecha a sus polÃ­ticos, a sus partidos, a sus empresarios, dudan \\r\\nde sus intenciones y recriminan sus cuestionadas actuaciones. Necesitamos efectuar -de cara a \\r\\nla ciudadanÃ­a- un pacto de renovaciÃ³n con la democracia a travÃ©s de mÃ¡s transparencia, probidad \\r\\ny participaciÃ³n, suscribiendo un nuevo estÃ¡ndar Ã©tico que zanje, por ejemplo, la irrestricta divisiÃ³n \\r\\nentre la captaciÃ³n y uso inapropiado de recursos y el ejercicio de funciones en la actividad pÃºblica.\\r\\nHemos vivido eventos duros al respecto; sin embargo, la reacciÃ³n del paÃ­s y del gobierno a travÃ©s \\r\\nde una baterÃ­a de leyes y medidas nos permiten tener la certeza que estamos en condiciones \\r\\nde asumir el 2018 un compromiso superior al que existÃ­a, comprometiÃ©ndonos en avanzar en la \\r\\ndirecciÃ³n de una nueva polÃ­tica. Todos los desafÃ­os que enfrenta nuestro desarrollo como paÃ­s de \\r\\ncara al siglo XXI requieren de una buena polÃ­tica y mejores servidores pÃºblicos. Sin partidos, no hay \\r\\npolÃ­tica democrÃ¡tica y sin ella, o gobierna el poder econÃ³mico sin contrapesos o entramos en go-\\r\\nbiernos dictatoriales y/o populistas que amenazarÃ¡n nuestros derechos y libertades mÃ¡s bÃ¡sicas. \\r\\nFrente a detractores de los derechos como educaciÃ³n gratuita o un sistema previsional solidar-\\r\\nio, los demÃ³cratas y progresistas los concebimos y defenderemos como derechos sociales y no \\r\\ncomo bienes de consumo. \\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n49\\r\\nLamentablemente, la conquista de estos derechos sociales ha tomado demasiado tiempo por la \\r\\nserie de obstÃ¡culos que la dictadura nos heredÃ³. Reponer estos derechos serÃ¡ un proceso largo \\r\\nporque no serÃ¡ posible garantizar la efectiva titularidad de derechos que otorga la sola condiciÃ³n \\r\\nde ciudadanÃ­a de no mediar su reconocimiento como un compromiso irrenunciable en la Nueva \\r\\nConstituciÃ³n. A modo de ejemplo, la existencia del actual Tribunal Constitucional en ocasiones se \\r\\ntransforma en una amenaza constante a los avances en derechos sociales, ya que, de manera \\r\\narbitraria, puede torcer la voz mayoritaria y la deliberaciÃ³n democrÃ¡tica del Congreso. De allÃ­ la im-\\r\\nportancia de consagrar en la ConstituciÃ³n un Estado social y democrÃ¡tico de derechos efectivos.\\r\\nDe este modo, nuestro compromiso como gobierno asegurarÃ¡ un nuevo marco constitucional \\r\\nque garantice los derechos sociales mÃ¡s fundamentales, ademÃ¡s de combatir la corrupciÃ³n, la \\r\\ncolusiÃ³n y los abusos a travÃ©s de las siguientes medidas: \\r\\nConsagraremos una Nueva ConstituciÃ³n que asegure efectivamente derechos sociales esencia-\\r\\nles, que refuercen el rol social indelegable e insustituible del Estado y que, valorando el aporte del \\r\\nmercado, lo separe de la polÃ­tica y de la provisiÃ³n casi exclusiva de servicios sociales.\\r\\nProfundizaremos y daremos continuidad a todas las propuestas formuladas por el Consejo Ase-\\r\\nsor Presidencial contra los Conflictos de InterÃ©s, el TrÃ¡fico de Influencias y la CorrupciÃ³n. Para ello \\r\\nproponemos que futuras medidas y acciones que se desprendieron de esta materia recaigan en \\r\\nun responsable institucional Ãºnico permanente. Ello significarÃ¡ dotar de mÃ¡s atribuciones al Con-\\r\\nsejo para la Transparencia transformÃ¡ndolo en un Consejo Nacional para la Probidad, Transparen-\\r\\ncia y Fortalecimiento de la Democracia que perfeccione la Agenda presente en este gobierno, asÃ­ \\r\\ncomo otras materias que puedan ayudar al robustecimiento de la actividad pÃºblica y al sistema \\r\\npolÃ­tico en general. \\r\\nAmpliaremos la protecciÃ³n de los funcionarios pÃºblicos que denuncien irregularidades en el Esta-\\r\\ndo para que hechos deleznables no queden en la impunidad. \\r\\nProfundizaremos la ley de lobby en todo cuanto corresponda y dotaremos a la legislaciÃ³n vigen-\\r\\nte de las herramientas y penas de cÃ¡rcel ejemplificadoras en todo tipo de abusos y colusiones, \\r\\nespecialmente, delitos de corrupciÃ³n, cohecho y negociaciones incompatibles en aquellas Ã¡reas \\r\\nmÃ¡s sensibles de la gestiÃ³n pÃºblica donde la relaciÃ³n dinero-polÃ­tica es mÃ¡s intensa, como por \\r\\nejemplo, grandes inversiones, proyectos y obras de infraestructura. \\r\\nRenovaremos la polÃ­tica y el funcionamiento de los partidos invirtiendo medidas para asegurar \\r\\nmÃ¡s transparencia en el funcionamiento de Ã©stos; garantizando declaraciÃ³n de intereses y pa-\\r\\ntrimonio para todos sus dirigentes; asegurando una efectiva incorporaciÃ³n de mujeres, jÃ³venes \\r\\ny minorÃ­as en cargos de representaciÃ³n dirigencial y popular; creando la obligatoriedad de una \\r\\ncuenta pÃºblica que sea fiel reflejo del financiamiento que realiza el Estado a las colectividades en \\r\\nel paÃ­s. \\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n50\\r\\nCOMPROMISO 7: \\r\\nDESCENTRALIZACIÃN EFECTIVA \\r\\nY COMUNAS MÃ\\201S FUERTES.\\r\\nAvanzaremos en el proceso de regionalizaciÃ³n y en una efectiva descentralizaciÃ³n, como condi-\\r\\nciÃ³n necesaria para superar la pobreza y reducir las desigualdades. El fortalecimiento tÃ©cnico y \\r\\nadministrativo de los municipios es clave para facilitar el acceso al sistema de protecciÃ³n social \\r\\nen cada comuna. Por medio de capacitaciones a los profesionales, buscaremos crear mayores \\r\\ncapacidades y conocimiento de al interior de los Gobiernos Locales.\\r\\n1. DescentralizaciÃ³n administrativa\\r\\n2. DescentralizaciÃ³n PolÃ­tica\\r\\n3. DescentralizaciÃ³n Fiscal\\r\\n4. Planes regionales y locales\\r\\n5. Fortalecimiento institucional de los municipios\\r\\n6. ParticipaciÃ³n Ciudadana\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n51\\r\\nDESCENTRALIZACIÃN ADMINISTRATIVA\\r\\nLa descentralizaciÃ³n necesita nuevas fuentes de ingreso y de recursos. Un proceso de transfor-\\r\\nmaciÃ³n del sistema de administraciÃ³n interior del Estado imperativamente necesita estudiar im-\\r\\npuestos territoriales regionales que graven algunas actividades productivas locales que puedan \\r\\nafectar condiciones excepcionales en cada uno de los territorios (por ejemplo: glaciares en AysÃ©n, \\r\\ngeiser en San Pedro de Atacama o las Torres del Paine en Magallanes).\\r\\nHemos sido impulsores junto con el gobierno de la presidenta Michelle Bachelet en creer que las \\r\\nregiones son capaces de decidir sobre las polÃ­ticas pÃºblicas que crean que sea mÃ¡s pertinente \\r\\npara ellos. Por eso, esta medida va en aras de dotar de mÃ¡s funciones y atribuciones a los Gobier-\\r\\nnos Regionales y Municipios, para abordar las soluciones desde niveles cercanos a los problemas \\r\\ny oportunidades. \\r\\nPor eso, en nuestro gobierno:\\r\\nInstalar la nueva la estructura administrativa de los gobiernos regionales\\r\\nVelar por la debida instalaciÃ³n de las nuevas funciones que tendrÃ¡n los Gobiernos Regio-\\r\\nnales y que habrÃ¡n sido traspasados desde el gobierno central. \\r\\nTrabajaremos para que cada RegiÃ³n cuente con estrategias de desarrollo regional y polÃ­ti-\\r\\ncas regionales de internacionalizaciÃ³n, donde confluya el trabajo de los gobiernos locales \\r\\ny regionales, las universidades, agrupaciones empresariales y laborales y organizaciones \\r\\nsociales.\\r\\nTransitaremos desde un Estado gobernado por la decisiÃ³n de polÃ­ticas por cada ministerio a \\r\\notro que pone el Ã©nfasis en la gestiÃ³n territorial, con una institucionalidad regional y comu-\\r\\nnal empoderadas. \\r\\nAcompaÃ±aremos con recursos y capacidades suficientes el proceso de instalaciÃ³n de la nue-\\r\\nva regiÃ³n de Ãuble.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n52\\r\\nDESCENTRALIZACIÃN POLÃ\\215TICA\\r\\nLa descentralizaciÃ³n necesita nuevas fuentes de ingreso y de recursos. Un proceso de transfor-\\r\\nmaciÃ³n del sistema de administraciÃ³n interior del Estado imperativamente necesita estudiar im-\\r\\npuestos territoriales regionales que graven algunas actividades productivas locales que puedan \\r\\nafectar condiciones excepcionales en cada uno de los territorios (por ejemplo: glaciares en AysÃ©n, \\r\\ngeiser en San Pedro de Atacama o las Torres del Paine en Magallanes).\\r\\nHemos sido impulsores junto con el gobierno de la presidenta Michelle Bachelet en creer que las \\r\\nregiones son capaces de decidir sobre las polÃ­ticas pÃºblicas que crean que sea mÃ¡s pertinente \\r\\npara ellos. Por eso, esta medida va en aras de dotar de mÃ¡s funciones y atribuciones a los Gobier-\\r\\nnos Regionales y Municipios, para abordar las soluciones desde niveles cercanos a los problemas \\r\\ny oportunidades. \\r\\nPor eso, en nuestro gobierno:\\r\\nEste proceso debe estar liderado por una autoridad de carÃ¡cter regional y que sea legitimado por \\r\\nla ciudadanÃ­a. Hemos apoyado que exista mediante la democratizaciÃ³n de los Gobiernos Regio-\\r\\nnales, con elecciones directa de los Intendentes. Ellos serÃ¡n acompaÃ±ados por los consejeros \\r\\nregionales, que ya son electos y por los alcaldes que aportaran su visiÃ³n local a las problemÃ¡ticas \\r\\nque se requieran resolver de manera territorial.\\r\\nPor eso, en nuestro gobierno:\\r\\nVelaremos por una elecciÃ³n del gobernador regional que dinamice el proceso de empoderamiento \\r\\nde nuestras regiones.\\r\\nImpulsaremos una reforma de ley para fortalecer el rol de los concejales, ampliando sus faculta-\\r\\ndes en la tarea de fiscalizar la gestiÃ³n de las autoridades comunales, cumplimiento de planes y \\r\\nprogramas asÃ­ como la correcta ejecuciÃ³n del presupuesto.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n53\\r\\nDESCENTRALIZACIÃN FISCAL\\r\\nUn Gobernador Regional no va a tener poder sino cuenta con autonomÃ­a fiscal. Por ello, se bus-\\r\\nca dotar a las regiones y municipios de mayores recursos econÃ³micos, ya sea aumentando sus \\r\\ningresos propios, como asÃ­ tambiÃ©n, aumentando las transferencias (desde el nivel central a los \\r\\nGORES y Municipios), para financiar con autonomÃ­a la soluciÃ³n de sus problemas o puesta en \\r\\nvalor de sus oportunidades.\\r\\nPor eso, en nuestro gobierno:\\r\\nEstableceremos rentas regionales, impuestos regionales y abordaremos la considerable brecha \\r\\nen los recursos per cÃ¡pita entre municipios.\\r\\nCoordinaciÃ³n y disciplina fiscal. TratÃ¡ndose de una absoluta innovaciÃ³n en nuestras polÃ­ticas \\r\\npÃºblicas, este proceso de gradual traspaso de competencias y recursos a las regiones serÃ¡ \\r\\nacompaÃ±ado de un esfuerzo particular por robustecer la coordinaciÃ³n entre diferentes niveles \\r\\nde gobierno y por asegurar la disciplina fiscal.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n54\\r\\nPLANES REGIONALES Y LOCALES\\r\\nPara que exista una mirada regional con focalizando en lo local, creemos fundamental que las \\r\\nautoridades puedan contar con estrategias de desarrollo regional y polÃ­ticas regionales de inter-\\r\\nnacionalizaciÃ³n, donde confluya el trabajo de los gobiernos locales y regionales, las universidades, \\r\\nagrupaciones empresariales y laborales y organizaciones sociales.\\r\\nEs claro, que la nueva estructura va a requerir de capacitaciones a los nuevos profesionales y a \\r\\nlos funcionarios que estaban en el Gobierno Regional. Ellos serÃ¡n vitales para poder asesorar e \\r\\nimplementar las nuevas funciones, y asÃ­ tambiÃ©n la elaboraciÃ³n de instrumentos de planificaciÃ³n \\r\\ncon mirada territorial.\\r\\nPor eso, en nuestro gobierno:\\r\\nFortaleceremos el capital humano regional y local, en cuanto a cantidad (masa crÃ­tica) y calidad (for-\\r\\nmaciÃ³n y calificaciÃ³n), para asumir el desafÃ­o de implementaciÃ³n de la agenda descentralizadora.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n55\\r\\nFORTALECIMIENTO INSTITUCIONAL DE LOS MUNICIPIOS\\r\\nNuestra propuesta pone como horizonte de la descentralizaciÃ³n el desarrollo integral de regiones \\r\\ny muy especialmente las comunas, niveles donde se materializa la desigualdad. Esto implica un \\r\\nrediseÃ±o de la institucionalidad pÃºblica a nivel nacional y en cada una de sus escalas, pues se trata \\r\\nde construir desde abajo hacia arriba, respetando los grandes desafÃ­os nacionales con un foco \\r\\ndiferenciador de acuerdo a las distintas realidades socio-territoriales.\\r\\nImpulsaremos que los municipios sean un ente articulador y promotor del desarrollo local, con \\r\\napoyo, asistencia y ecuanimidad territorial en su relaciÃ³n con el nivel central.\\r\\nPromoveremos la gobernanza territorial a travÃ©s de instancias de participaciÃ³n vinculante en los \\r\\nterritorios, de tipo â\\200multiactoralâ\\200\\235, para la formulaciÃ³n y control de los procesos de desarrollo so-\\r\\ncio-territorial.\\r\\nALEJANDRO \\r\\nGUILLER 2017\\r\\n56\\r\\n PARTICIPACIÃN CIUDADANA\\r\\nLa descentralizaciÃ³n debe reconocer la pluralidad y diversidad territorial equiparÃ¡ndose con el \\r\\nprincipio unificador de la homogeneidad propia de un estado centralizado. Las polÃ­ticas, pro-\\r\\ngramas e instrumentos deben propender a reflejar estas particularidades, permitiendo a las in-\\r\\nstituciones y autoridades regionales avanzar en mayores grados de libertad a la hora de diseÃ±ar, \\r\\nformular y ejecutar proyectos especÃ­ficos en sus respectivos territorios.\\r\\nLa descentralizaciÃ³n necesita accountability. No es un proceso que garantice sÃ³lo transferencia \\r\\nde poder y recursos, sino que debe ir acompaÃ±ada de la institucionalidad necesaria para contrar-\\r\\nrestar principios de captura y evitar manejos discrecionales. La propuesta del gobierno de insta-\\r\\nlar unidades de AuditorÃ­a y generar obligatoriedad en los Convenios de ProgramaciÃ³n a travÃ©s \\r\\ndel Contrato-RegiÃ³n, debe ir acompaÃ±ada de agencias y mecanismos que garanticen la entrega \\r\\noportuna de informaciÃ³n a la ciudadanÃ­a, reportes periÃ³dicos asociados a la ejecuciÃ³n del gasto y \\r\\nde los principales proyectos ejecutables/ejecuciÃ³n en los territorios.\\r\\nPor eso, en nuestro gobierno:\\r\\nEstableceremos la iniciativa ciudadana de ley, donde la discusiÃ³n y propuestas de soluciÃ³n de los \\r\\ntemas que localmente mÃ¡s impactan a los ciudadanos tendrÃ¡n un decidido apoyo de la autoridad \\r\\npara su impulso y promociÃ³n.\\r\\nFortalecemos los Consejos Comunales de Organizaciones de la Sociedad Civil (COSOC) y propondre-\\r\\nmos una instancia que coordine su participaciÃ³n en la Asamblea Ciudadana por el Bienestar.\\r\\n\\r\\n\\r\\n&quot; (Ejercicio b) Crear una receta/función para esto Entonces estos son los pasos que queremos hacer: cargar el texto con tabulizer::extract_text() desde el nombre del archivo y luego quitar todos los guiones + saltos de línea. Genera una receta/función para hacer esto, que debería devolver el texto limpio con el siguiente comando: # f_extraer_texto_limpio(&quot;datos/programas_presidenciales_2017/Programa_Jose_Antonio_Kast_Rist.pdf&quot;) Ahora deberíamos tener una función, f_extraer_texto_limpio(), que carga el texto de cualquier pdf y conecta las palabras separadas por guión + salto de línea. Iterar para todos los programas Podemos obtener los archivos de una carpeta con la función list.files(), de R base: vector_archivos_programas &lt;- list.files(&quot;datos/programas_presidenciales_2017/&quot;, full.names = T) vector_archivos_programas ## [1] &quot;datos/programas_presidenciales_2017/Programa_Alejandro_Guillier_Alvarez.pdf&quot; &quot;datos/programas_presidenciales_2017/Programa_Alejandro_Navarro_Brain.pdf&quot; &quot;datos/programas_presidenciales_2017/Programa_Beatriz_Sanchez_Munoz.pdf&quot; ## [4] &quot;datos/programas_presidenciales_2017/Programa_Carolina_Goic_Boroevic.pdf&quot; &quot;datos/programas_presidenciales_2017/Programa_Eduardo_Artes_Brichetti.pdf&quot; &quot;datos/programas_presidenciales_2017/Programa_Jose_Antonio_Kast_Rist.pdf&quot; ## [7] &quot;datos/programas_presidenciales_2017/Programa_Marco_Enriquez-Ominami.pdf&quot; &quot;datos/programas_presidenciales_2017/Programa_Sebastian_Pinera_Echenique.pdf&quot; Ahora podemos iterar nuestra función en este objeto para obtener un vector con todos los textos (limpios): vector_textos_programas &lt;- map_chr(.x = vector_archivos_programas, .f = ~ f_extraer_texto_limpio(.x)) Ahora creemos nuestra base tidy, a partir de los dos vectores: df_programas &lt;- tibble(archivo = vector_archivos_programas, texto = vector_textos_programas) %&gt;% mutate(nombre = archivo %&gt;% str_extract(&quot;Programa_.*&quot;) %&gt;% str_remove(&quot;Programa_&quot;) %&gt;% str_remove(&quot;\\\\.pdf&quot;) %&gt;% str_replace_all(&quot;_&quot;, &quot; &quot;)) %&gt;% select(archivo, nombre, texto) ¿Por qué no nos funcionó con el programa de Sebastián Piñera? Para el resto podemos correr cualquier análisis de texto que nos interese, por ejemplo, las palabras más distintivas de cada programa: df_palabras_distintivas &lt;- df_programas %&gt;% unnest_tokens(output = word, input = texto, token = &quot;words&quot;) %&gt;% count(word, nombre) %&gt;% bind_tf_idf(term = word, document = nombre, n = n) %&gt;% group_by(nombre) %&gt;% arrange(-tf_idf) %&gt;% slice(1:10) %&gt;% ungroup() df_palabras_distintivas ## # A tibble: 70 x 6 ## word nombre n tf idf tf_idf ## &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 guiller Alejandro Guillier Alvarez 51 0.00415 1.95 0.00808 ## 2 alejandro Alejandro Guillier Alvarez 53 0.00431 1.25 0.00540 ## 3 2017 Alejandro Guillier Alvarez 51 0.00415 0.336 0.00140 ## 4 dinero Alejandro Guillier Alvarez 8 0.000651 1.25 0.000816 ## 5 comprometidos Alejandro Guillier Alvarez 5 0.000407 1.95 0.000792 ## 6 velaremos Alejandro Guillier Alvarez 5 0.000407 1.95 0.000792 ## 7 municipios Alejandro Guillier Alvarez 15 0.00122 0.560 0.000683 ## 8 eso Alejandro Guillier Alvarez 24 0.00195 0.336 0.000657 ## 9 afps Alejandro Guillier Alvarez 4 0.000325 1.95 0.000633 ## 10 avanzando Alejandro Guillier Alvarez 4 0.000325 1.95 0.000633 ## # ... with 60 more rows Aplicación 2: varios archivos Excel Es muy común que datos gubernamentales estén en múltiples planillas con el mismo formato, que queramos unir. Por ejemplo, así están las estadísticas delictuales para las comunas de la Región de Magallanes. Descargué esos Excel en la carpeta datos/delitos_comunales/. Queremos llegar a una sola base. Obtengamos la base con la tasa de delitos para la comuna de Punta Arenas: readxl::read_excel(&quot;datos/delitos_comunales/Punta Arenas.xlsx&quot;, sheet = &quot;Pag7&quot;, range = &quot;B13:G26&quot;, # dónde está la info que queremos col_names = c(&quot;tipo_delito&quot;, 2012:2016)) %&gt;% # creamos nombres de variables &quot;a mano&quot; filter(!is.na(tipo_delito)) %&gt;% # eliminamos la fila de más # ahora pasamos la base a long: pivot_longer(cols = -tipo_delito, names_to = &quot;anio&quot;, values_to = &quot;tasa_casos&quot;) %&gt;% mutate(anio = as.numeric(anio)) ## # A tibble: 65 x 3 ## tipo_delito anio tasa_casos ## &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Robo con violencia o intimidación 2012 95.6 ## 2 Robo con violencia o intimidación 2013 80.3 ## 3 Robo con violencia o intimidación 2014 73.8 ## 4 Robo con violencia o intimidación 2015 58.6 ## 5 Robo con violencia o intimidación 2016 78.3 ## 6 Robo por sorpresa 2012 15.1 ## 7 Robo por sorpresa 2013 19.1 ## 8 Robo por sorpresa 2014 15.9 ## 9 Robo por sorpresa 2015 18.2 ## 10 Robo por sorpresa 2016 20.6 ## # ... with 55 more rows (Ejercicio c) Genera una función f_procesar_excel_delitos() y testea que funcione con el Excel de la comuna de Porvenir. Tu código: (Ejercicio d) Obtén la lista de archivos Excel que queremos procesar, como un vector llamado vector_archivos_delitos. Iteración Podemos generar la iteración con map_dfr(): map_dfr(.x = vector_archivos_delitos, .f = ~f_procesar_excel_delitos(.x)) ## # A tibble: 715 x 3 ## tipo_delito anio tasa_casos ## &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Robo con violencia o intimidación 2012 0 ## 2 Robo con violencia o intimidación 2013 0 ## 3 Robo con violencia o intimidación 2014 0 ## 4 Robo con violencia o intimidación 2015 0 ## 5 Robo con violencia o intimidación 2016 0 ## 6 Robo por sorpresa 2012 0 ## 7 Robo por sorpresa 2013 0 ## 8 Robo por sorpresa 2014 0 ## 9 Robo por sorpresa 2015 0 ## 10 Robo por sorpresa 2016 0 ## # ... with 705 more rows En efecto se pegaron hacia abajo todos nuestros resultados, pero no es posible distinguir entre ellos. Lo que querríamos es una fila comuna que nos permita saber a qué comuna pertenecen los datos de la fila. Comencemos creando, a partir del vector de los archivos, otro vector con los nombres de las comunas: vector_comunas &lt;- vector_archivos_delitos %&gt;% str_extract(&quot;[\\\\w\\\\s]+\\\\.xlsx$&quot;) %&gt;% str_remove(&quot;\\\\.xlsx&quot;) vector_comunas ## [1] &quot;Antartica&quot; &quot;Cabo de Hornos&quot; &quot;Laguna Blanca&quot; &quot;Natales&quot; &quot;Porvenir&quot; &quot;Primavera&quot; &quot;Punta Arenas&quot; &quot;Rio Verde&quot; &quot;San Gregorio&quot; &quot;Timaukel&quot; &quot;Torres del Paine&quot; Ahora hagamos que estos sean los nombres del objeto en el que estamos iterando, vector_archivos_delitos: names(vector_archivos_delitos) &lt;- vector_comunas vector_archivos_delitos ## Antartica Cabo de Hornos Laguna Blanca Natales Porvenir ## &quot;datos/delitos_comunales/Antartica.xlsx&quot; &quot;datos/delitos_comunales/Cabo de Hornos.xlsx&quot; &quot;datos/delitos_comunales/Laguna Blanca.xlsx&quot; &quot;datos/delitos_comunales/Natales.xlsx&quot; &quot;datos/delitos_comunales/Porvenir.xlsx&quot; ## Primavera Punta Arenas Rio Verde San Gregorio Timaukel ## &quot;datos/delitos_comunales/Primavera.xlsx&quot; &quot;datos/delitos_comunales/Punta Arenas.xlsx&quot; &quot;datos/delitos_comunales/Rio Verde.xlsx&quot; &quot;datos/delitos_comunales/San Gregorio.xlsx&quot; &quot;datos/delitos_comunales/Timaukel.xlsx&quot; ## Torres del Paine ## &quot;datos/delitos_comunales/Torres del Paine.xlsx&quot; Listo, ahora podremos realizar la iteración y en el resultado incluir una columna con la comuna, gracias al argumento .id =: df_delitos_magallanes &lt;- map_dfr( .x = vector_archivos_delitos, .f = ~f_procesar_excel_delitos(.x), .id = &quot;comuna&quot; ) df_delitos_magallanes ## # A tibble: 715 x 4 ## comuna tipo_delito anio tasa_casos ## &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Antartica Robo con violencia o intimidación 2012 0 ## 2 Antartica Robo con violencia o intimidación 2013 0 ## 3 Antartica Robo con violencia o intimidación 2014 0 ## 4 Antartica Robo con violencia o intimidación 2015 0 ## 5 Antartica Robo con violencia o intimidación 2016 0 ## 6 Antartica Robo por sorpresa 2012 0 ## 7 Antartica Robo por sorpresa 2013 0 ## 8 Antartica Robo por sorpresa 2014 0 ## 9 Antartica Robo por sorpresa 2015 0 ## 10 Antartica Robo por sorpresa 2016 0 ## # ... with 705 more rows Ahora podemos ocupar esta base para hacer nuestros análisis. (Ejercicio e) Realiza un gráfico para explorar la base de datos que creamos. "],["part-minería-de-datos.html", "(PART) Minería de datos", " (PART) Minería de datos "],["web-scraping.html", "08A - Web scraping Inicio: cargar paquetes Web scraping Descargar múltiples páginas con una iteración Generalizar el proceso de limpieza de los datos con una función", " 08A - Web scraping Si quieres correr estos scripts localmente, acá puedes descargar el proyecto comprimido en .zip. Paquetes que necesitas tener instalados antes de comenzar con el proyecto: tidyverse, glue, rvest. Inicio: cargar paquetes library(tidyverse) library(glue) ## ## Attaching package: &#39;glue&#39; ## The following object is masked from &#39;package:dplyr&#39;: ## ## collapse library(rvest) # para hacer web scraping ## Loading required package: xml2 ## ## Attaching package: &#39;rvest&#39; ## The following object is masked from &#39;package:purrr&#39;: ## ## pluck ## The following object is masked from &#39;package:readr&#39;: ## ## guess_encoding glue::glue() nombre &lt;- &quot;Andrés&quot; glue(&quot;Hola, mi nombre es {nombre}&quot;) ## Hola, mi nombre es Andrés glue(&quot;HOLA, MI NOMBRE ES {str_to_upper(nombre)}&quot;) ## HOLA, MI NOMBRE ES ANDRÉS Web scraping El web scraping es la extracción automatizada de información a partir de sitios web. Aparte de alimentar sitios como Knasta, que lo realizan periódicamente, nos permite obtener datos de fuentes no tradicionales (¡cualquier sitio web!). La información que podemos obtener es igual a la que podríamos hacer manualmente (copiando y pegando a un Excel, por ejemplo), pero podemos automatizar tareas muy tediosas. Hoy veremos web scraping para páginas estáticas en vez de dinámicas. Descargar un sitio web Comenzaremos trabajando con las columnas de El Mostrador. Dejé el código comentado porque ya hice la descarga y no tenemos para qué correr todos/as esto (no queremos colapsar un sitio haciendo web scraping). download_html(url = &quot;https://www.elmostrador.cl/noticias/opinion/columnas/&quot;, file = &quot;webs/mostrador_1.html&quot;) Cargar el html web_mostrador_p1 &lt;- read_html(&quot;webs/mostrador_1.html&quot;, encoding = &quot;UTF-8&quot;) # buena idea para páginas en español Extraer la información a partir de la estructura de la página, con rvest El primer paso es encontrar el selector de CSS que contiene nuestra información. En la mayoría de los casos nos bastará con usar SelectorGadget. Tus apuntes sobre cómo usar SelectorGadget: Comencemos con los títulos: titulos_mostrador_p1 &lt;- web_mostrador_p1 %&gt;% html_nodes(&quot;h4 a&quot;) %&gt;% html_text() titulos_mostrador_p1 ## [1] &quot;Carta abierta a las alcaldesas y los alcaldes de Chile&quot; &quot;We the people&quot; ## [3] &quot;Enfrentar la sequía a corto y largo plazo&quot; &quot;Escaños reservados: el día clave para cambiar la historia&quot; ## [5] &quot;Rodrigo Delgado y su responsabilidad en los guetos verticales de Estación Central&quot; &quot;El aprendizaje político de nuestro presidencialismo&quot; ## [7] &quot;Dumping chino en la industria de las bolas de acero&quot; &quot;Tiltil: el sacrificio de Chile&quot; ## [9] &quot;EE.UU., el acuerdo climático de París y los beneficios económicos&quot; &quot;EE.UU. y el valor de las instituciones&quot; Para sacar los links de un elemento, en vez de su texto, debemos reemplazar html_text() por html_attr(\"href\"): links_mostrador_p1 &lt;- web_mostrador_p1 %&gt;% html_nodes(&quot;h4 a&quot;) %&gt;% html_attr(&quot;href&quot;) links_mostrador_p1 ## [1] &quot;https://www.elmostrador.cl/noticias/opinion/columnas/2020/11/12/carta-abierta-a-las-alcaldesas-y-los-alcaldes-de-chile/&quot; ## [2] &quot;https://www.elmostrador.cl/noticias/opinion/columnas/2020/11/12/we-the-people/&quot; ## [3] &quot;https://www.elmostrador.cl/noticias/opinion/columnas/2020/11/12/enfrentar-la-sequia-a-corto-y-largo-plazo/&quot; ## [4] &quot;https://www.elmostrador.cl/destacado/2020/11/12/escanos-reservados-el-dia-clave-para-cambiar-la-historia/&quot; ## [5] &quot;https://www.elmostrador.cl/destacado/2020/11/12/rodrigo-delgado-y-su-responsabilidad-en-los-guetos-verticales-de-estacion-central/&quot; ## [6] &quot;https://www.elmostrador.cl/destacado/2020/11/12/el-aprendizaje-politico-de-nuestro-presidencialismo/&quot; ## [7] &quot;https://www.elmostrador.cl/noticias/opinion/2020/11/11/dumping-chino-en-la-industria-de-las-bolas-de-acero/&quot; ## [8] &quot;https://www.elmostrador.cl/noticias/opinion/columnas/2020/11/11/tiltil-el-sacrificio-de-chile/&quot; ## [9] &quot;https://www.elmostrador.cl/noticias/opinion/2020/11/11/ee-uu-el-acuerdo-climatico-de-paris-y-los-beneficios-economicos/&quot; ## [10] &quot;https://www.elmostrador.cl/destacado/2020/11/11/ee-uu-y-el-valor-de-las-instituciones/&quot; (Ejercicio a) Obtén el autor/a de cada artículo. Llama al vector autores_mostrador_p1. Tu código: Ahora podemos crear un data frame con toda información: df_mostrador_p1 &lt;- tibble( titulo = titulos_mostrador_p1, link = links_mostrador_p1, autor = autores_mostrador_p1, ) df_mostrador_p1 ## # A tibble: 10 x 3 ## titulo link autor ## &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; ## 1 Carta abierta a las alcaldesas y los alcaldes de Chile https://www.elmostrador.cl/noticias/opinion/columnas/2020/11/12/carta-abierta-a-las-alcaldesas-y-los-alcaldes-de-chile/ Francois Richard ## 2 We the people https://www.elmostrador.cl/noticias/opinion/columnas/2020/11/12/we-the-people/ Alejandro Reyes ## 3 Enfrentar la sequía a corto y largo plazo https://www.elmostrador.cl/noticias/opinion/columnas/2020/11/12/enfrentar-la-sequia-a-corto-y-largo-plazo/ Miguel Ángel Sánchez ## 4 Escaños reservados: el día clave para cambiar la historia https://www.elmostrador.cl/destacado/2020/11/12/escanos-reservados-el-dia-clave-para-cambiar-la-historia/ Jorge Millaquén ## 5 Rodrigo Delgado y su responsabilidad en los guetos verticales de Estación Cen~ https://www.elmostrador.cl/destacado/2020/11/12/rodrigo-delgado-y-su-responsabilidad-en-los-guetos-verticales-de-estacion-c~ Patricio Herman ## 6 El aprendizaje político de nuestro presidencialismo https://www.elmostrador.cl/destacado/2020/11/12/el-aprendizaje-politico-de-nuestro-presidencialismo/ Juan Carlos Arellano ## 7 Dumping chino en la industria de las bolas de acero https://www.elmostrador.cl/noticias/opinion/2020/11/11/dumping-chino-en-la-industria-de-las-bolas-de-acero/ Rene González Aguilera y Héctor Medina Ale~ ## 8 Tiltil: el sacrificio de Chile https://www.elmostrador.cl/noticias/opinion/columnas/2020/11/11/tiltil-el-sacrificio-de-chile/ Eva Aburto ## 9 EE.UU., el acuerdo climático de París y los beneficios económicos https://www.elmostrador.cl/noticias/opinion/2020/11/11/ee-uu-el-acuerdo-climatico-de-paris-y-los-beneficios-economicos/ Alejandro Bernales ## 10 EE.UU. y el valor de las instituciones https://www.elmostrador.cl/destacado/2020/11/11/ee-uu-y-el-valor-de-las-instituciones/ Santiago Escobar Descargar múltiples páginas con una iteración walk(.x = 2:5, .f = ~ { download_html(url = glue(&quot;https://www.elmostrador.cl/noticias/opinion/columnas/page/{.x}/&quot;), file = glue(&quot;webs/mostrador_{.x}.html&quot;)) Sys.sleep(2) # pausa }) Nuestros pasos siguientes tendrán el objetivo de procesar estos sitios web (5, pero podrían ser muchos más) para crear una base de datos única. Ocuparemos funciones personalizadas e iteraciones en el proceso. Generalizar el proceso de limpieza de los datos con una función Lo que hicimos para obtener nuestro data frame con información (df_mostrador_p1) se puede resumir en los siguientes pasos: Descargar el sitio (ya está hecho) Cargar el html a R Extraer los vectores para título, link y autor(a), usando selectores. Crear el data frame con estos vectores. Esto puede pensarse como una receta, que debería funcionar para cualquier archivo (página de columnas descargada desde El Mostrador). La vamos a crear como una función personalizada: f_procesar_sitio &lt;- function(archivo){ web &lt;- read_html(archivo, encoding = &quot;UTF-8&quot;) titulos &lt;- web %&gt;% html_nodes(&quot;h4 a&quot;) %&gt;% html_text() links &lt;- web %&gt;% html_nodes(&quot;h4 a&quot;) %&gt;% html_attr(&quot;href&quot;) autores &lt;- web %&gt;% html_nodes(&quot;.col-md-10 p&quot;) %&gt;% html_text() %&gt;% str_remove(&quot;^por &quot;) df_info &lt;- tibble( titulo = titulos, link = links, autor = autores ) return(df_info) # lo que devuelve/entrega la función } Ahora la función toma cualquier archivo como argumento y nos entrega lo que esperamos: f_procesar_sitio(archivo = &quot;webs/mostrador_3.html&quot;) ## # A tibble: 10 x 3 ## titulo link autor ## &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; ## 1 Un nuevo pacto social para la función pública https://www.elmostrador.cl/noticias/opinion/columnas/2020/11/09/un-nuevo-pacto-social-para-la-funcion-publica/ Eduardo Abarzúa Cruz ## 2 ¿Quién quiere ser constituyente? https://www.elmostrador.cl/destacado/2020/11/09/quien-quiere-ser-constituyente/ Germán Silva Cuadra ## 3 Estados Unidos: el ocaso de un imperio https://www.elmostrador.cl/destacado/2020/11/09/estados-unidos-el-ocaso-de-un-imperio/ Felipe Herrera Aguirre ## 4 FF.AA. y Defensa Nacional en la Constitución del 2022 https://www.elmostrador.cl/destacado/2020/11/09/ff-aa-y-defensa-nacional-en-la-constitucion-del-2022/ Richard Kouyoumdjian In~ ## 5 El riesgo del endeudamiento y la quiebra de los negocios https://www.elmostrador.cl/destacado/2020/11/09/por-que-tras-la-crisis-covid-19aumentara-el-endeudamiento-y-la-quiebra-de-los-negocios/ Max Campillay Viñas ## 6 Convención Constitucional Abierta: Los mecanismos de participación ciudadana que debi~ https://www.elmostrador.cl/noticias/opinion/2020/11/08/convencion-constitucional-abierta-los-mecanismos-de-participacion-ciudadana-que~ Patricio Contreras ## 7 La ciudadanía aleccionando a la política https://www.elmostrador.cl/noticias/opinion/2020/11/08/la-ciudadania-aleccionando-a-la-politica/ Pablo Paniagua ## 8 Educación en Derechos Humanos: una deuda del Estado por una sociedad más democrática https://www.elmostrador.cl/noticias/opinion/columnas/2020/11/08/educacion-en-derechos-humanos-una-deuda-del-estado-por-una-sociedad-ma~ Sebastián Santos ## 9 Día del Urbanismo: los nuevos desafíos en la transformación de los territorios https://www.elmostrador.cl/noticias/opinion/columnas/2020/11/08/dia-del-urbanismo-los-nuevos-desafios-en-la-transformacion-de-los-terr~ Pía Monardes ## 10 Una brutalidad geográfica https://www.elmostrador.cl/noticias/opinion/columnas/2020/11/08/una-brutalidad-geografica/ Enrique Aliste Así, podemos iterar esta función en nuestros cinco archivos para crear una base completa (páginas 1-5). Ahora no utilizaremos walk(), sino que map_dfr() (aquí decidí no conservar el número de página). archivos &lt;- list.files(&quot;webs/&quot;, full.names = T) archivos ## [1] &quot;webs/mostrador_1.html&quot; &quot;webs/mostrador_2.html&quot; &quot;webs/mostrador_3.html&quot; &quot;webs/mostrador_4.html&quot; &quot;webs/mostrador_5.html&quot; df_mostrador_1_5 &lt;- map_dfr(.x = archivos, .f = ~ {f_procesar_sitio(.x)}) df_mostrador_1_5 ## # A tibble: 50 x 3 ## titulo link autor ## &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; ## 1 Carta abierta a las alcaldesas y los alcaldes de Chile https://www.elmostrador.cl/noticias/opinion/columnas/2020/11/12/carta-abierta-a-las-alcaldesas-y-los-alcaldes-de-chile/ Francois Richard ## 2 We the people https://www.elmostrador.cl/noticias/opinion/columnas/2020/11/12/we-the-people/ Alejandro Reyes ## 3 Enfrentar la sequía a corto y largo plazo https://www.elmostrador.cl/noticias/opinion/columnas/2020/11/12/enfrentar-la-sequia-a-corto-y-largo-plazo/ Miguel Ángel Sánchez ## 4 Escaños reservados: el día clave para cambiar la historia https://www.elmostrador.cl/destacado/2020/11/12/escanos-reservados-el-dia-clave-para-cambiar-la-historia/ Jorge Millaquén ## 5 Rodrigo Delgado y su responsabilidad en los guetos verticales de Estación Cen~ https://www.elmostrador.cl/destacado/2020/11/12/rodrigo-delgado-y-su-responsabilidad-en-los-guetos-verticales-de-estacion-c~ Patricio Herman ## 6 El aprendizaje político de nuestro presidencialismo https://www.elmostrador.cl/destacado/2020/11/12/el-aprendizaje-politico-de-nuestro-presidencialismo/ Juan Carlos Arellano ## 7 Dumping chino en la industria de las bolas de acero https://www.elmostrador.cl/noticias/opinion/2020/11/11/dumping-chino-en-la-industria-de-las-bolas-de-acero/ Rene González Aguilera y Héctor Medina Ale~ ## 8 Tiltil: el sacrificio de Chile https://www.elmostrador.cl/noticias/opinion/columnas/2020/11/11/tiltil-el-sacrificio-de-chile/ Eva Aburto ## 9 EE.UU., el acuerdo climático de París y los beneficios económicos https://www.elmostrador.cl/noticias/opinion/2020/11/11/ee-uu-el-acuerdo-climatico-de-paris-y-los-beneficios-economicos/ Alejandro Bernales ## 10 EE.UU. y el valor de las instituciones https://www.elmostrador.cl/destacado/2020/11/11/ee-uu-y-el-valor-de-las-instituciones/ Santiago Escobar ## # ... with 40 more rows (Ejercicio b) Obtén el texto de la columna más reciente. Generaliza lo anterior en una función que tome una URL (columna de El Mostrador) y devuelva su texto. Itera la función para completar df_mostrador_p1 con una nueva columna de texto. "],["web-apis.html", "08B - Web APIs Inicio: cargar paquetes Twitter Google Trends Google Scholar Otras Web APIs Ejercicios", " 08B - Web APIs Como al principio de todo script, recomiendo reiniciar R. Esto lo conseguimos en RStudio Cloud con Session &gt; Restart R y clickeando en la escoba del panel de Environment (superior derecho). Inicio: cargar paquetes library(tidyverse) library(lubridate) # trabajar con fechas ## ## Attaching package: &#39;lubridate&#39; ## The following objects are masked from &#39;package:base&#39;: ## ## date, intersect, setdiff, union Como vimos en el script anterior, es posible hacer web scraping en R con el paquete rvest. Sin embargo, algunos sitios prohiben el web scraping y, en cambio, ponen (algunos de) sus datos a disposición del público a través de una Web API. En general, estos son sitios grandes con muchísimo flujo (Twitter, Facebook, Reddit, Wikipedia, etcétera). Las Web APIs también sirven para interactuar en general con estos sitios, por ejemplo, para postear contenido automáticamente (¿bots?). Twitter A continuación veremos cómo acceder a la Web API de Twitter, por medio del paquete rtweet. Las dos funciones más importantes de rtweet son las siguientes: search_tweets() buscará los tweets más recientes según un query (criterio de búsqueda): usualmente queremos buscar hashtags o términos comunes. Esto tiene dos limitaciones: Primero, no siempre devuelve el número exacto de tweets que pedimos. Así lo explica el archivo de ayuda de la función: [n]umber of tweets returned will often be less than what was specified by the user. This can happen because (a) the search query did not return many results (the search pool is already thinned out from the population of tweets to begin with), (b) because user hitting rate limit for a given token, or (c) of recent activity (either more tweets, which affect pagination in returned results or deletion of tweets). Segundo, tiene una ventana de 6-9 días de alcance. Solo podemos buscar fenómenos recientes, en otras palabras. get_timelines() nos permite obtener todos los tweets públicos de 1+ usuarios/as de Twitter. Solo permite acceder a los 3200 tweets más recientes. install.packages(&quot;rtweet&quot;) library(rtweet) tweets_busqueda &lt;- search_tweets( q = &quot;sernac&quot;, n = 10000, include_rts = FALSE ) tweets_cuentas &lt;- get_timelines( user = c(&quot;sebastianpinera&quot;, &quot;mbachelet&quot;, &quot;ricardolagos&quot;), n = 300 ) tweets_busqueda &lt;- read_rds(&quot;datos/tweets_busqueda.rds&quot;) tweets_cuentas &lt;- read_rds(&quot;datos/tweets_cuentas.rds&quot;) Los datos vienen en un formato muy ameno (una base de datos). Por ejemplo: tweets_cuentas %&gt;% select(screen_name, text) ## # A tibble: 2,765 x 2 ## screen_name text ## &lt;chr&gt; &lt;chr&gt; ## 1 sebastianpinera &quot;Millones de chilenos están en cuarentena. Para acompañarlos en este #DiaDelPatrimonioEnCasa preparamos esta guía con mucho cariño para su familia, que incluye lo mejor de la cultura, naturaleza y maravillas de Chile y el mundo. E~ ## 2 sebastianpinera &quot;[VIVO] Pdte da inicio a jornada de distribución de suministros del plan #AlimentosParaChile https://t.co/PXfxrwOWQQ&quot; ## 3 sebastianpinera &quot;Este año celebramos de forma diferente nuestro #DíaDelPatrimonioEnCasa. \\n\\nHoy debemos cuidarnos, pero la tecnología nos permite conmemorarlo de forma virtual, por eso los invito a esta visita guiada donde les mostraré los lugar~ ## 4 sebastianpinera &quot;Hoy comenzó pago del #IngresoMínimoGarantizado q beneficiará con un complemento de hasta $59.200 mensuales a 700 mil trabajadores dependientes de bajos ingresos. \\n\\nEste beneficio es parte de la Red de Proteccion Social q juntos~ ## 5 sebastianpinera &quot;Una sociedad no puede vivir con temor. \\n\\nJunto con valorar avances, redoblamos nuestro compromiso y esfuerzo en lucha contra delincuencia. \\n\\nInauguramos #NuevasTecnologíasPoliciales para combatir con más eficacia delincuencia~ ## 6 sebastianpinera &quot;Tendremos tolerancia 0 frente a cualquier tipo de agresión o maltrato contra la mujer.\\n\\nAgradezco a ministra @macasante quien lidera proyecto de Ley de #MonitoreoTelemático que le impide al agresor acercarse a su víctima. https~ ## 7 sebastianpinera &quot;Tengo plena fe que como chilenos nos pondremos de pie y saldremos adelante. Juntos hemos superado tantas adversidades y esta vez volveremos a hacerlo.\\n\\nDepende de ti. Depende de nosotros.\\n\\n#RespetemosLaCuarentena https://t.co~ ## 8 sebastianpinera &quot;Red de #ResidenciasSanitarias q hemos construido en Chile provee alojamiento, alimentación, cuidados básicos y trato digno para quienes no pueden tener el aislamiento necesario en sus propios hogares.\\n\\nEsta red los protege a el~ ## 9 sebastianpinera &quot;Para continuar conversando sobre estos temas mañana me reuniré con Presidentes de partidos de Chile Vamos y jefes de bancada. \\n\\nEs importante avanzar juntos hacia un acuerdo que nos permita superar estas pandemias. Los escuchar~ ## 10 sebastianpinera &quot;CUARTO: Plan de Reactivación Económica, con énfasis en creación de empleos, mejorar salarios e incrementar inversión\\n\\nQUINTO:Plan Fiscal para enfrentar necesidades presentes y desafíos futuros q permita recuperar equilibrio fis~ ## # ... with 2,755 more rows Podemos ocupar todas las herramientas que hemos aprendido en el curso para analizar sus distintas variables. Aquí es importante la información temporal (fecha/hora), ocuparemos algunas funciones del paquete lubridate (parte del tidyverse) para trabajar con esto. Comencemos haciendo algunas modificaciones en la base de tweets sobre el SERNAC: tweets_busqueda2 &lt;- tweets_busqueda %&gt;% mutate( # pasar a la zona horaria de Santiago (por defecto está en UTC) created_at = with_tz(created_at, &quot;America/Santiago&quot;), # crear variable de hora, que nos permitirá agregar hora = floor_date(created_at, &quot;hour&quot;) ) %&gt;% # solo quedarnos con mensajes desde ayer filter(created_at &gt;= as_datetime(&quot;2020-11-11&quot;)) Podemos graficar el conteo de tweets por hora: ggplot(tweets_busqueda2 %&gt;% count(hora), aes(x = hora, y = n)) + geom_line() + # en el eje x queremos cortes cada tres horas: scale_x_datetime(date_breaks = &quot;3 hour&quot;, date_labels = &quot;%H:%M&quot;) Ahora pasemos a la otra base: tweets_cuentas %&gt;% count(screen_name) ## # A tibble: 3 x 2 ## screen_name n ## &lt;chr&gt; &lt;int&gt; ## 1 mbachelet 848 ## 2 RicardoLagos 918 ## 3 sebastianpinera 999 tweets_cuentas %&gt;% group_by(screen_name) %&gt;% summarize(min_fecha = min(created_at)) ## `summarise()` ungrouping output (override with `.groups` argument) ## # A tibble: 3 x 2 ## screen_name min_fecha ## &lt;chr&gt; &lt;dttm&gt; ## 1 mbachelet 2016-10-07 10:43:30 ## 2 RicardoLagos 2010-05-31 15:15:11 ## 3 sebastianpinera 2018-07-03 19:56:17 ¿Por qué vemos este patrón? Vamos a corregirlo: tweets_cuentas2 &lt;- tweets_cuentas %&gt;% # pasar a la zona horaria y filtrar tweets desde el 18O: mutate(created_at = with_tz(created_at, &quot;America/Santiago&quot;)) %&gt;% filter(created_at &gt;= &quot;2019-10-18&quot;) tweets_cuentas2 %&gt;% count(screen_name) ## # A tibble: 3 x 2 ## screen_name n ## &lt;chr&gt; &lt;int&gt; ## 1 mbachelet 189 ## 2 RicardoLagos 45 ## 3 sebastianpinera 359 Ahora podemos hacer cualquier análisis que nos interese. Por ejemplo, cuándo fueron los primeros tweets de cada cuenta (desde el 18/O). tweets_cuentas2 %&gt;% group_by(screen_name) %&gt;% filter(created_at == min(created_at)) %&gt;% ungroup() %&gt;% select(created_at, screen_name, text) ## # A tibble: 3 x 3 ## created_at screen_name text ## &lt;dttm&gt; &lt;chr&gt; &lt;chr&gt; ## 1 2019-10-19 00:13:02 sebastianpinera [EN VIVO] https://t.co/XAXPzmUgqn ## 2 2019-10-21 12:54:46 mbachelet Estoy muy preocupada y triste de ver violencia, muertes y lesiones en #Chile. Exhorto al Gobierno a trabajar con todos los sectores y encontrar soluciones para abordar agravios. Urjo a los que planean participar~ ## 3 2019-10-23 09:39:33 RicardoLagos Tenemos que encontrar el rumbo para lograr un consenso que convoque a chilenos y chilenas, representantes de los partidos políticos y de los sectores vivos de la ciudadanía, que permita construir un nuevo pacto ~ Google Trends # install.packages(&quot;gtrendsR&quot;) library(gtrendsR) ## Warning: package &#39;gtrendsR&#39; was built under R version 4.0.3 Vamos a explorar búsquedas por organismos de DDHH en los últimos doce meses: orgs_ddhh &lt;- gtrends(keyword = c(&quot;Human Rights Watch&quot;, &quot;Amnistía Internacional&quot;, &quot;CIDH&quot;, &quot;INDH&quot;), geo = &quot;CL&quot;, time = &quot;today 12-m&quot;) df_orgs_ddhh &lt;- as_tibble(orgs_ddhh$interest_over_time) Arreglemos la columnas de fechas: df_orgs_ddhh2 &lt;- df_orgs_ddhh %&gt;% mutate(date = as_date(date)) ggplot(df_orgs_ddhh2, aes(x = date, y = hits, group = keyword, color = keyword)) + geom_line() + ggthemes::scale_color_colorblind() + # cortes en el eje x cada dos meses scale_x_date(date_breaks = &quot;2 months&quot;, date_labels = &quot;%m/%y&quot;) Google Scholar Otra Web API sencilla es la de Google Scholar. Por ejemplo, podemos obtener la lista de publicaciones de Elinor Ostrom: install.packages(&quot;scholar&quot;) library(scholar) elinor_ostrom &lt;- get_publications(&quot;RKN66-kAAAAJ&quot;) %&gt;% as_tibble() elinor_ostrom ## # A tibble: 1,204 x 8 ## title author journal number cites year cid pubid ## &lt;fct&gt; &lt;fct&gt; &lt;fct&gt; &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt; ## 1 &quot;Governing the commons: The evolution of institutions for collective action&quot; E Ostrom Cambridge university press &quot;&quot; 39685 1990 3890556834294913616,13417789038701955244 u5HHmVD_~ ## 2 &quot;The science of\\&quot; muddling through\\&quot;&quot; CE Lindblom Public administration review &quot;79-88&quot; 14704 1959 12697815037321572847 QNfnWKgK~ ## 3 &quot;Understanding institutional diversity&quot; E Ostrom Princeton university press &quot;&quot; 8179 2009 15101681925026143505,133323073711233491~ ThYxFsVA~ ## 4 &quot;Rules, games, and common-pool resources&quot; E Ostrom, R Gardner, J Walker, JM Walker, J ~ University of Michigan Press &quot;&quot; 5760 1994 8192222936357315454,10895932034490496719 u-x6o8yS~ ## 5 &quot;A general framework for analyzing sustainability of social-ecological systems&quot; E Ostrom Science &quot;325 (5939), 41~ 5393 2009 10357978884305814464 3fE2CSJI~ ## 6 &quot;Collective action and the evolution of social norms&quot; E Ostrom Journal of economic perspec~ &quot;14 (3), 137-15~ 4356 2000 494656908153206772 qjMakFHD~ ## 7 &quot;The struggle to govern the commons&quot; T Dietz, E Ostrom, PC Stern science &quot;302 (5652), 19~ 4353 2003 14836008273418948812,6886193046964774027 TPlbvKeU~ ## 8 &quot;A behavioral approach to the rational choice theory of collective action: Presidential add~ E Ostrom American political science ~ &quot;92 (1), 1-22&quot; 4229 1998 14706553558091068945,170343611817159876~ 9yKSN-GC~ ## 9 &quot;Linking social and ecological systems: management practices and social mechanisms for buil~ F Berkes, C Folke, J Colding Cambridge University Press &quot;&quot; 4055 2000 1448813686244049658 CdxZDUzt~ ## 10 &quot;Resilience and sustainable development: building adaptive capacity in a world of transform~ C Folke, S Carpenter, T Elmqvist, L Gunderso~ AMBIO: A journal of the hum~ &quot;31 (5), 437-44~ 3394 2002 16289318559207801846 CmbFvBri~ ## # ... with 1,194 more rows Curiosamente, entran artículos de otros autores (probablemente porque Ostrom estuvo en el proceso de edición, o algo por el estilo). Podemos hacer un filtro para limpiar la base: elinor_ostrom %&gt;% filter(str_detect(author, &quot;Ostrom&quot;)) ## # A tibble: 879 x 8 ## title author journal number cites year cid pubid ## &lt;fct&gt; &lt;fct&gt; &lt;fct&gt; &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt; ## 1 Governing the commons: The evolution of institutions for collective action E Ostrom Cambridge university pre~ &quot;&quot; 39685 1990 3890556834294913616,13417789038701955244 u5HHmVD_~ ## 2 Understanding institutional diversity E Ostrom Princeton university pre~ &quot;&quot; 8179 2009 15101681925026143505,13332307371123349123 ThYxFsVA~ ## 3 Rules, games, and common-pool resources E Ostrom, R Gardner, J Walker, JM Walke~ University of Michigan P~ &quot;&quot; 5760 1994 8192222936357315454,10895932034490496719 u-x6o8yS~ ## 4 A general framework for analyzing sustainability of social-ecological systems E Ostrom Science &quot;325 (5939), 419~ 5393 2009 10357978884305814464 3fE2CSJI~ ## 5 Collective action and the evolution of social norms E Ostrom Journal of economic pers~ &quot;14 (3), 137-158&quot; 4356 2000 494656908153206772 qjMakFHD~ ## 6 The struggle to govern the commons T Dietz, E Ostrom, PC Stern science &quot;302 (5652), 190~ 4353 2003 14836008273418948812,6886193046964774027 TPlbvKeU~ ## 7 A behavioral approach to the rational choice theory of collective action: Presidential address, ~ E Ostrom American political scien~ &quot;92 (1), 1-22&quot; 4229 1998 14706553558091068945,17034361181715987693~ 9yKSN-GC~ ## 8 Revisiting the commons: local lessons, global challenges E Ostrom, J Burger, CB Field, RB Norgaa~ science &quot;284 (5412), 278~ 3251 1999 1543491137003347668 IjCSPb-O~ ## 9 Beyond markets and states: polycentric governance of complex economic systems E Ostrom American economic review &quot;100 (3), 641-72&quot; 3123 2010 2976854498562800954 GnPB-g6t~ ## 10 Property-rights regimes and natural resources: a conceptual analysis E Schlager, E Ostrom Land economics &quot;249-262&quot; 2873 1992 5774084778917733435,16959520377304276402 Tyk-4Ss8~ ## # ... with 869 more rows Bastián González-Bustamente usó datos de Google Scholar para mapear a la ciencia política académica chilena. Otras Web APIs sinimr para extraer datos desde el Sistema Nacional de Información Municipal (SINIM). lobbyR para extraer información disponible a través de la Ley de Lobby. owmr para obtener datos de climáticos desde Open Weather Map. gmailr para leer y enviar mails, enviar borradores, etc., usando Gmail. googlesheets4 para interactuar con planillas de Google Docs. airtabler para interactuar con planillas de Airtable (muchas más funciones disponibles que Google Sheets). pastebin para extraer datos desde Pastebin. RedditExtractoR para conseguir datos desde Reddit. Ejercicios Analiza el texto de las tres cuentas de Twitter que obtuvimos. ¿Cuáles son las palabras más distintivas de c/u? Realiza alguna otra búsqueda de términos en Google Trends y grafica sus resultados. "],["part-generación-de-mapas.html", "(PART) Generación de mapas", " (PART) Generación de mapas "],["mapas.html", "09A - Generación de mapas Inicio: cargar paquetes Objetos geográficos (sf) Operaciones de dplyr en objetos geográficos (sf) Primeros mapas con la sintaxis de ggplot2 Shape de cuarteles Gráficos con más de una fuente de datos geográficos", " 09A - Generación de mapas Si quieres correr estos scripts localmente, acá puedes descargar el proyecto comprimido en .zip. Paquetes que necesitas tener instalados antes de comenzar con el proyecto: tidyverse, sf, janitor. Inicio: cargar paquetes library(tidyverse) # install.packages(&quot;sf&quot;) library(sf) # datos espaciales ## Warning: package &#39;sf&#39; was built under R version 4.0.3 ## Linking to GEOS 3.8.0, GDAL 3.0.4, PROJ 6.3.1 library(janitor) Objetos geográficos (sf) El paquete sf permite trabajar con información geográfica en R. Lo que vamos a cargar a continuación, con la función read_sf(), es un shapefile, la forma más común de almacenar información geográfica. Noten que este shapefile está en nuestra carpeta shapefile_comunas: no es solo un archivo, sino que varios. Todos los shapefiles tienen por lo menos tres archivos: uno .shp (al que debemos apuntar con la función), otro .shx y otro .dbf. Es común que tengan también otros archivos: .sbx, .sbn, .shp.xml, .prj, etc. Estos múltiples archivos son necesarios para leer la información geográfica, y necesitamos que estén todos en una misma carpeta, con el mismo nombre de archivo (distinta extensión). Un consejo es que usualmente los shapefiles vendrán como una carpeta comprimida (.zip), y no queremos eliminar ninguno de los archivos dentro. Los shapefiles registran información vectorial: puntos, líneas o polígonos en el espacio. Vamos a cargar un shapefile con las comunas de Chile, cuya fuente es la Biblioteca del Congreso Nacional (2019): shp_comunas &lt;- read_sf(&quot;shapefile_comunas/division_comunal.shp&quot;) Examinemos lo que cargamos con el visor de RStudio: View(shp_comunas) # lo mismo que clickear en la pestaña de &quot;Environment&quot; Operaciones de dplyr en objetos geográficos (sf) La maravilla de sf es que el objeto geográfico se interpreta como una base de datos (data frame) tradicional de R, por lo que podemos utilizar cualquier operación de dplyr: shp_comunas_13 &lt;- shp_comunas %&gt;% clean_names() %&gt;% mutate(comuna_id = as.numeric(comuna_id)) %&gt;% filter(region_id == &quot;13&quot;) De hecho, podemos cargar otros datos (no geográficos) y unirlos sin problemas. Carguemos una base con datos comunales, adaptada desde Políticamente (2020): datos_comunales_rm &lt;- read_csv(&quot;datos/datos_comunales_rm.csv&quot;) ## Parsed with column specification: ## cols( ## comuna_id = col_double(), ## comuna = col_character(), ## zona = col_character(), ## ine2017_poblacion = col_double(), ## casen2013_porc_pobreza = col_double(), ## ine2013_porc_ruralidad = col_double(), ## idh2003 = col_double(), ## idh2003_salud = col_double(), ## idh2003_ed = col_double(), ## idh2003_ing = col_double(), ## n_imm = col_double(), ## n_imm_pc = col_double(), ## n_imm_by1000 = col_double(), ## gini = col_double(), ## porc_indigena = col_double(), ## tasa_controles_identidad = col_double(), ## tasa_detenciones_robos = col_double() ## ) datos_comunales_rm ## # A tibble: 52 x 17 ## comuna_id comuna zona ine2017_poblacion casen2013_porc_pobreza ine2013_porc_ruralidad idh2003 idh2003_salud idh2003_ed idh2003_ing n_imm n_imm_pc n_imm_by1000 gini porc_indigena tasa_controles_identidad tasa_detenciones_robos ## &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 13124 Pudahuel Urbana 237938 9.31 0 0.735 0.805 0.744 0.655 6731 0.0283 28.3 0.459 447. 274. 1.66 ## 2 13125 Quilicura Urbana 224468 9.24 0 0.782 0.873 0.807 0.668 17089 0.0761 76.1 0.465 358. 77.5 3.16 ## 3 13301 Colina Rural 128760 7.28 17.0 0.726 0.82 0.704 0.654 9132 0.0709 70.9 0.533 302. 99.3 2.84 ## 4 13302 Lampa Rural 97124 8.47 33.7 0.697 0.78 0.699 0.613 2724 0.0280 28.0 0.493 314. 123. 2.10 ## 5 13303 Tiltil Rural 17940 9.84 47.0 0.706 0.791 0.701 0.626 311 0.0173 17.3 0.464 191. 250. 1.70 ## 6 13104 Conchalí Urbana 141225 10.0 0 0.707 0.709 0.746 0.667 12862 0.0911 91.1 0.466 274. 338. 5.14 ## 7 13107 Huechuraba Urbana 99019 5.20 0 0.737 0.781 0.742 0.689 5053 0.0510 51.0 0.511 416. 150. 9.38 ## 8 13128 Renca Urbana 153266 8.99 0 0.709 0.76 0.728 0.638 5207 0.0340 34.0 0.457 477. 144. 2.07 ## 9 13103 Cerro Navia Urbana 158641 15.4 0 0.683 0.735 0.693 0.622 6653 0.0419 41.9 0.453 664. 266. 1.49 ## 10 13117 Lo Prado Urbana 113370 7.11 0 0.715 0.75 0.726 0.669 8762 0.0773 77.3 0.464 492. 199. 4.41 ## # ... with 42 more rows Podemos agregar estos datos a nuestro objeto geográfico sin problemas, con left_join(): shp_comunas_13_info &lt;- shp_comunas_13 %&gt;% left_join(datos_comunales_rm, by = &quot;comuna_id&quot;) Veamos el archivo que tenemos hasta ahora: View(shp_comunas_13_info) Primeros mapas con la sintaxis de ggplot2 ggplot2 trae un geom especial para entidades geográficas, geom_sf(). Su uso es muy simple: ggplot(data = shp_comunas_13_info) + geom_sf() La gracia es que podemos especificar mapeos estéticos, como fill: ggplot(data = shp_comunas_13_info, mapping = aes(fill = zona)) + geom_sf() (Ejercicio a) Colorea cada comuna según su porcentaje de pobreza (esto se llama choropleth). Solo considera comunas urbanas en el mapa y utiliza la escala de colores viridis con scale_fill_viridis_c(). Tu código: Por cierto, con estas dos líneas de código finales podemos conseguir un mapa sin las grillas de ggplot2 (también añadí un par de labs): ggplot(data = shp_comunas_13_info, mapping = aes(fill = zona)) + geom_sf() + labs(title = &quot;Comunas de la RM según tipo de zona&quot;, fill = &quot;Zona&quot;, caption = &quot;Fuente: Censo 2017&quot;) + theme_void() + coord_sf(datum = NA) Shape de cuarteles (Ejercicio b) Carga el shapefile de la carpeta shapefile_cuarteles: llámalo shp_cuarteles. Su fuente es Infraestructura de Datos Geoespaciales de Chile, 2019. Examínalo y luego crea un nuevo objeto shp_cuarteles_13, con mejores nombres (clean_names()) y solo con información de la Región Metropolitana. Tu código: Crucialmente, estos datos son de puntos, mientras los anteriores eran polígonos. Según un Reglamento Oficial de Carabineros (2000, p. 33), en este shapefile tenemos unidades y destacamentos: shp_cuarteles_13 %&gt;% count(TIPO_DE_UN, sort = T) ## Simple feature collection with 7 features and 2 fields ## geometry type: GEOMETRY ## dimension: XYZ ## bbox: xmin: -71.46973 ymin: -34.17152 xmax: -69.96611 ymax: -33.00525 ## z_range: zmin: 0 zmax: 0 ## geographic CRS: WGS 84 ## # A tibble: 7 x 3 ## TIPO_DE_UN n geometry ## * &lt;chr&gt; &lt;int&gt; &lt;GEOMETRY [°]&gt; ## 1 COMISARIA 58 MULTIPOINT Z ((-71.21539 -33.68794 0), (-71.12008 -33.40134 0), (-70.93879 -33.67065 0), (-70.901... ## 2 TENENCIA 25 MULTIPOINT Z ((-71.45432 -33.89544 0), (-71.21137 -33.56896 0), (-71.11842 -33.51567 0), (-71.100... ## 3 SUBCOMISARIA 22 MULTIPOINT Z ((-70.97904 -33.67892 0), (-70.81537 -33.569 0), (-70.78973 -33.55822 0), (-70.77475... ## 4 RETEN 16 MULTIPOINT Z ((-71.46973 -33.97633 0), (-71.32402 -33.75717 0), (-71.15118 -33.65074 0), (-71.053... ## 5 TENENCIA CARRETERAS 5 MULTIPOINT Z ((-71.18889 -33.40567 0), (-71.03295 -33.69754 0), (-70.76079 -33.23231 0), (-70.735... ## 6 AVANZADA 1 POINT Z (-69.96611 -34.17152 0) ## 7 COMISARÍA 1 POINT Z (-70.66124 -33.41911 0) Unidades. Estarán consideradas en esta clasificación las Comisarías, Subcomisarías, Grupos y Escuadrones de las Escuelas, Grupos de Instrucción y, en general, los organismos que cuenten con dotación depersonal operativo para efectuar servicios policiales. Destacamentos. Se comprenderán dentro de esta clasificación a las Tenencias, Retenes, Garitas y Avanzadas. Gráficos con más de una fuente de datos geográficos Este sería el gráfico solo con la información de los cuarteles: ggplot(data = shp_cuarteles_13) + geom_sf() Usualmente queremos contextualizar estos puntos. Hacerlo con ggplot() es simple, asignando distintos argumentos data = a nuestros geoms: ggplot() + geom_sf(data = shp_comunas_13) + geom_sf(data = shp_cuarteles_13) Podríamos hacer filtros en las bases o añadir mapeos estéticos (argumento mapping =) en cada geom_sf(), también. (Ejercicio c) Grafica solo las comisarías en un mapa de las comunas urbanas de Santiago (coloreadas según alguna variable de interés en la base). Tu código: (Ejercicio d) La fuente de los cuarteles es IDE, la Infraestructura de Datos de Chile. En dicho sitio hay muchos shapefiles públicos. Elige uno de tu interés, cárgalo en R y genera un gráfico (mapa). "],["part-replicación-y-reportes.html", "(PART) Replicación y reportes", " (PART) Replicación y reportes "],["replicacion.html", "10A - Replicación Replicación en las ciencias sociales El rol del código (y R Markdown) en reproducibilidad y replicación R Markdown avanzado: opciones de chunks", " 10A - Replicación Si quieres correr estos scripts localmente, acá puedes descargar el proyecto comprimido en .zip. Paquetes que necesitas tener instalados antes de comenzar con el proyecto: tidyverse, kableExtra. Replicación en las ciencias sociales La legitimidad del trabajo publicado depende de si es que se puede replicar su análisis y llegar a las mismas conclusiones (Janz, 2015, p. 1). Dos conceptos clave (Janz, 2015): Reproducibilidad. Capacidad de una investigación de mantener sus resultados luego de un reanálisis. Los/as autores/as pueden aumentar esta capacidad poniendo a disposición información sistematizada sobre su análisis (proceso de recolección de datos, bases de datos, códigos / otros procedimientos). Replicación. Proceso de reanálisis de las hipótesis y resultados de una investigación, con el fin de confirmar o cuestionar los resultados. ¿Cuál es la relevancia de la replicación? Siguiendo a Janz (2015): Permite comprobar los resultados y minimizar errores. Las replicaciones pueden añadir valor a los resultados originales, por ejemplo, actualizando datos, realizando pruebas de robustez, explorando nuevas hipótesis alternativas. La posibilidad de replicación es un mecanismo de accountability: puede servir para prevenir malas prácticas en la investigación Aunque el movimiento por la replicación en ciencia política es usualmente asociado a la investigación cuantitativa (véase King, 1995), en la última década este se ha expandido a los estudios de métodos mixtos y cualitativos (por ejemplo, véase Dunning &amp; Rosenblatt, 2016; Piñeiro &amp; Rosenblatt, 2016). Los esfuerzos por la reproducibilidad pueden separarse en tres dimensiones: transparencia en datos, transparencia en producción, transparencia en análisis (Corti, 2018). Figure 2: Dimensiones de la reproducibilidad, con aplicaciones según enfoque metodológico. Fuente: Corti (2018). El rol del código (y R Markdown) en reproducibilidad y replicación El código permite reproducir exactamente los procedimientos que procesan los datos para convertirlo en resultados (modelos, gráficos, etc.). Esto es, transparencia analítica. Además, como vimos en la primera clase, gracias al código: Podemos repetir nuestros análisis todas las veces que queramos, con las modificaciones que queramos. Podemos automatizar procesos tediosos. Podemos compartir la totalidad de nuestro flujo de trabajo con colegas. Podemos buscar ayuda con facilidad: nuestro código es igual de transparente que el de los/as demás, y los mensajes de error están estandarizados. R Markdown ofrece la posibilidad de generar reportes reproducibles. Esto no solo incluye el código, sino que también el texto mismo. No necesitamos tener el código en un script (R, Stata, SPSS, etc.) y nuestro reporte en otro (Word, Google Docs, etc.): todo está junto. Aparte de ser cómodo, esto tiene al menos dos ventajas (véase Frank &amp; Hartgerink, 2017): Permite actualizar los reportes con facilidad. Esto baja sustantivamente el costo en tiempo de volver a correr un análisis, por lo que genera productos finales de mayor calidad. Además, permite generar reportes periódicos fácilmente. Evita errores de tipeo, en especial en la transcripción de tablas. Esto no es trivial, como evidencian Nuijten et al. (2016). Analizan 16,695 artículos de Psicología que realizan estadística inferencial (1985-2013). Sus conclusiones son muy sorprendentes: el 49.6% de los artículos tiene al menos una inconsistencia entre valor-p y estadístico/gl; y el 12.9% de los artículos tiene al menos una inconsistencia grave, en donde valor-p y estadístico/gl apuntan en direcciones contrarias con respecto a la significancia. (Ejercicio a) ¿Para qué problema/trabajo podría ser útil generar reportes periódicos con R Markdown? Por favor explica tu ejemplo en un párrafo: R Markdown avanzado: opciones de chunks La gracia de R Markdown es que muestra el código y los resultados (gráficos, tablas, mensajes de advertencia, etc.) en nuestro reporte compilado. A menudo es útil cambiar estos comportamientos para casos específicos, como veremos a continuación. Carguemos el tidyverse, como de costumbre: library(tidyverse) ¿Y si queremos correr un comando sin mostrar sus mensajes explicativos en el reporte compilado? Ocupamos la opción message = F para el chunk. library(tidyverse) Por cierto, la opción warning = F es parecida, no mostrará mensajes de advertencia. Ahora carguemos una base de datos. Voy a usar message = F, para ahorrarme el mensaje explicativo en el reporte compilado: datos_midwest &lt;- read_csv(&quot;datos/midwest.csv&quot;) Realicemos un gráfico sencillo: ggplot(datos_midwest, aes(x = log(popdensity), y = percbelowpoverty)) + geom_point() ¿Y si queríamos solo el gráfico, sin el código que lo genera? Ocupamos la opción echo = F para chunk: También podemos correr un bloque de código silenciosamente, sin mostrar ni el código ni su resultado en el reporte. Por ejemplo, ahora voy a hacer dos bloques, uno que cargue el paquete lubridate silenciosamente y otro que nos muestre una de sus bases de datos de prueba, lakers. El primero lleva la opción include = F. lakers &lt;- lakers head(lakers) ## date opponent game_type time period etype team player result points type x y ## 1 20081028 POR home 12:00 1 jump ball OFF 0 NA NA ## 2 20081028 POR home 11:39 1 shot LAL Pau Gasol missed 0 hook 23 13 ## 3 20081028 POR home 11:37 1 rebound LAL Vladimir Radmanovic 0 off NA NA ## 4 20081028 POR home 11:25 1 shot LAL Derek Fisher missed 0 layup 25 6 ## 5 20081028 POR home 11:23 1 rebound LAL Pau Gasol 0 off NA NA ## 6 20081028 POR home 11:22 1 shot LAL Pau Gasol made 2 hook 25 10 Por último, si solo queremos mostrar un código, sin correrlo, podemos ocupar la opción eval = F. glimpse(datos_midwest) (Ejercicio b) Vimos las siguientes opciones de chunk. ¿Qué hace cada una? Opción ¿Qué hace? message = F No muestra mensajes explicativos que nuestro código genere. warning = F echo = F include = F results = \"hide\" ? eval = F "],["reportes.html", "10B - Reportes en R Markdown Inicio Generación de tablas desde data frames Imágenes y gráficos Ecuaciones Tipos de documento generados por R Markdown", " 10B - Reportes en R Markdown Inicio Comencemos cargando el tidyverse y nuestros datos: library(tidyverse) datos_midwest &lt;- read_csv(&quot;datos/midwest.csv&quot;) ## Parsed with column specification: ## cols( ## .default = col_double(), ## county = col_character(), ## state = col_character(), ## category = col_character() ## ) ## See spec(...) for full column specifications. Generación de tablas desde data frames Como hemos visto, podemos generar tablas a mano con R Markdown: Nombre Descripción Juan Un estudiante Ana Una estudiante Supongamos que tenemos un data frame, como el siguiente, y queremos insertarlo como tabla en nuestro reporte. conteo_estados &lt;- datos_midwest %&gt;% count(state) Podemos insertarlo como tabla HTML gracias al paquete kableExtra: # install.packages(&quot;kableExtra&quot;) library(kableExtra) kable(conteo_estados) state n IL 102 IN 92 MI 83 OH 88 WI 72 Ojo con la opción del chunk (results=\"asis\"): estamos dándole HTML directo a R Markdown, por lo que debemos decirlo explícitamente. Como siempre en los paquetes de R, hay muchas opciones en kableExtra. Aquí está la guía de HTML, de las viñetas del paquete. Aquí con unas opciones simples, que hacen que la tabla se vea mejor: kable(conteo_estados) %&gt;% kable_styling(bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;), full_width = F) state n IL 102 IN 92 MI 83 OH 88 WI 72 Imágenes y gráficos Imágenes Hemos visto la siguiente forma, muy simple, para insertar imágenes: A menudo queremos personalizar cómo se muestran las imágenes, lo que podemos conseguir con las opciones del chunk. En este caso, bajamos a un 50% el tamaño de la imágenes y la alineamos en el centro. Por cierto, ¿qué está haciendo la opción echo=F aquí? Gráficos Las mismas opciones de chunk funcionan con gráficos! ggplot(datos_midwest, aes(x = log(popdensity), y = percbelowpoverty)) + geom_point() ggplot(datos_midwest, aes(x = log(popdensity), y = percbelowpoverty)) + geom_point() Ecuaciones Podemos hacer ecuaciones en R Markdown usando la sintaxis de \\(\\LaTeX\\). Es bastante difícil de leer, pero muy completa (podemos hacer de todo). Un buen torpedo es DIMACS (s.f.). \\[ x^n + y^n = z^n \\] Tipos de documento generados por R Markdown R Markdown puede compilarse a HTML o PDF (\\(\\LaTeX\\)). Esto permite generar múltiples tipos de documento. A continuación veremos algunas características básicas de algunos tipos de documento. Algunos consejos aplican solo para computadores personales (como instalar \\(\\LaTeX\\) o paquetes), y los documentos van a funcionar de inmediato en esta sesión de RStudio Cloud. Reportes en HTML Este es el formato que hemos estado utilizando. Una de las gracias del HTML es que es interactivo, permite GIFs, videos, etc, que no podríamos poner en PDF. Hay muchas plantillas. Por ejemplo, las de prettydoc. Diapositivas en HTML (paquete revealjs) Hay un ejemplo en los archivos 11c_diapos_html.... Una vez que tengamos instalado el paquete revealjs, podemos crear una nueva presentación con File &gt; New File &gt; R Markdown &gt; From Template &gt; Reveal.js Presentation (HTML). Esta guía contiene las opciones. Reportes en PDF Hay un ejemplo en los archivos 11d_reporte_pdf.... Podemos crear un nuevo reporte con File &gt; New File &gt; R Markdown &gt; PDF. Para que funcionen, debemos tener \\(\\LaTeX\\) en nuestro computador (aquí en RStudio Cloud ya viene). La forma más fácil instalarlo localmente es con el paquete de R tinytex. Algunas cosas en nuestro código podrían tener que cambiar. Por ejemplo, kableExtra va a funcionar un poco distinto; aquí está la guía de kableExtra para reportes en PDF. Diapositivas en PDF (paquete beamer) Hay un ejemplo en los archivos 04_diapos_pdf.... No debemos instalar el paquete beamer antes, RStudio lo instalará por nosotros si no lo tenemos. Podemos crear diapositivas en pdf con File &gt; New File &gt; R Markdown &gt; Presentation &gt; PDF (Beamer). Para que funcionen, debemos tener \\(\\LaTeX\\) en nuestro computador (aquí en RStudio Cloud ya viene). La forma más fácil instalarlo localmente es con el paquete de R tinytex. Aquí hay una guía para presentaciones con beamer. Plantillas para otros tipos de documento con el paquete pagedown Creo que vale la pena mirar la página de dicho paquete. Tiene excelentes plantillas para hacer CVs, pósters, cartas, etc. El paquete no funciona en RStudio Cloud, por ahora. "],["part-cierre.html", "(PART) Cierre", " (PART) Cierre "],["recursos.html", "Recursos adicionales Instalación local Guías y recursos", " Recursos adicionales Instalación local Instalar R y RStudio. Algunas opciones de RStudio para hacer la experiencia más familiar: General &gt; Desmarcar Restore .RData into workspace at startup General &gt; Save Workspace to .RData on exit &gt; Never General &gt; Appearance y General &gt; Pane Layout (cambiar como prefieran) Guías y recursos Comunidad (online) R Weekly: newsletter con nuevos desarrollos, post de blogs, etc. de R Tidy Tuesday (ver entregas) / Datos de Miércoles Comunidad (presencial en tiempos normales) RLadies (Santiago, Valparaíso, Concepción) useR Santiago Latin-R (conferencia anual) Recursos generales Bibliografía del curso (R4DS, R4DS en español, SocViz, Tidy Text Mining, ADP) RStudio Primers Wilke - Fundamentals of Data Visualization Cursos Data wrangling, exploration, and analysis with R - University of British Columbia (Jenny Bryan) Computing for the Social Sciences - UChicago (Benjamin Soltoff) Recursos avanzados con enfoque en modelamiento Ismay &amp; Kim - Statistical Inference via Data Science (ModernDive) Irizarri - Introduction to Data Science: Data Analysis and Prediction Algorithms with R Recursos avanzados con enfoque en programación (funciones, paquetes, etc) Wickham - Advanced R (2a ed) Wickham &amp; Bryan - R Packages (2a ed) "]]

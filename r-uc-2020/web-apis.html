<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>08B - Web APIs | Programación para las Ciencias Sociales</title>
  <meta name="description" content="Sitio web ICP0506" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="08B - Web APIs | Programación para las Ciencias Sociales" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Sitio web ICP0506" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="08B - Web APIs | Programación para las Ciencias Sociales" />
  
  <meta name="twitter:description" content="Sitio web ICP0506" />
  

<meta name="author" content="Andrés Cruz" />


<meta name="date" content="2020-12-03" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="web-scraping.html"/>
<link rel="next" href="part-generación-de-mapas.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./index.html">Prog. Cs. Sociales</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Inicio</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#links-importantes"><i class="fa fa-check"></i>Links importantes</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#cronograma-y-materiales-del-curso"><i class="fa fa-check"></i>Cronograma y materiales del curso</a></li>
</ul></li>
<li class="part"><span><b>I Intro a R, RStudio y R Markdown</b></span></li>
<li class="chapter" data-level="" data-path="rbasico.html"><a href="rbasico.html"><i class="fa fa-check"></i>01 - R básico</a><ul>
<li class="chapter" data-level="" data-path="rbasico.html"><a href="rbasico.html#introducción-comandos-y-código"><i class="fa fa-check"></i>Introducción: comandos y código</a></li>
<li class="chapter" data-level="" data-path="rbasico.html"><a href="rbasico.html#paquetes"><i class="fa fa-check"></i>Paquetes</a></li>
<li class="chapter" data-level="" data-path="rbasico.html"><a href="rbasico.html#comandos-básicos-y-tipos-de-objeto-en-r"><i class="fa fa-check"></i>Comandos básicos y tipos de objeto en R</a></li>
<li class="chapter" data-level="" data-path="rbasico.html"><a href="rbasico.html#sintaxis-de-r-markdown"><i class="fa fa-check"></i>Sintaxis de R Markdown</a></li>
<li class="chapter" data-level="" data-path="rbasico.html"><a href="rbasico.html#siguiente-script"><i class="fa fa-check"></i>Siguiente script</a></li>
</ul></li>
<li class="part"><span><b>II Manejo de datos</b></span></li>
<li class="chapter" data-level="" data-path="manejo-2a.html"><a href="manejo-2a.html"><i class="fa fa-check"></i>02A - Manejo de datos</a><ul>
<li class="chapter" data-level="" data-path="manejo-2a.html"><a href="manejo-2a.html#repaso-de-la-clase-pasada-r-markdown"><i class="fa fa-check"></i>Repaso de la clase pasada: R Markdown</a></li>
<li class="chapter" data-level="" data-path="manejo-2a.html"><a href="manejo-2a.html#manejo-de-bases-de-datos"><i class="fa fa-check"></i>Manejo de bases de datos</a></li>
<li class="chapter" data-level="" data-path="manejo-2a.html"><a href="manejo-2a.html#la-base-de-datos-ideal-tidy"><i class="fa fa-check"></i>La base de datos ideal: tidy</a></li>
<li><a href="manejo-2a.html#operaciones-básicas-en-bases-de-datos-wickham-2014">Operaciones básicas en bases de datos <span>(Wickham, 2014)</span></a></li>
<li class="chapter" data-level="" data-path="manejo-2a.html"><a href="manejo-2a.html#trabajo-con-r"><i class="fa fa-check"></i>Trabajo con R</a></li>
<li class="chapter" data-level="" data-path="manejo-2a.html"><a href="manejo-2a.html#manejo-de-datos-operaciones-básicas"><i class="fa fa-check"></i>Manejo de datos: operaciones básicas</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="manejo-2b.html"><a href="manejo-2b.html"><i class="fa fa-check"></i>02B - Manejo de datos (ejercicio)</a><ul>
<li class="chapter" data-level="" data-path="manejo-2b.html"><a href="manejo-2b.html#contexto"><i class="fa fa-check"></i>Contexto</a></li>
<li class="chapter" data-level="" data-path="manejo-2b.html"><a href="manejo-2b.html#a."><i class="fa fa-check"></i>A.</a></li>
<li class="chapter" data-level="" data-path="manejo-2b.html"><a href="manejo-2b.html#b."><i class="fa fa-check"></i>B.</a></li>
<li class="chapter" data-level="" data-path="manejo-2b.html"><a href="manejo-2b.html#c."><i class="fa fa-check"></i>C.</a></li>
<li class="chapter" data-level="" data-path="manejo-2b.html"><a href="manejo-2b.html#d."><i class="fa fa-check"></i>D.</a></li>
<li class="chapter" data-level="" data-path="manejo-2b.html"><a href="manejo-2b.html#e."><i class="fa fa-check"></i>E.</a></li>
<li class="chapter" data-level="" data-path="manejo-2b.html"><a href="manejo-2b.html#f."><i class="fa fa-check"></i>F.</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="manejo-2c.html"><a href="manejo-2c.html"><i class="fa fa-check"></i>02C - Manejo de datos (extras)</a><ul>
<li class="chapter" data-level="" data-path="manejo-2c.html"><a href="manejo-2c.html#cargar-y-guardar-bases-de-datos"><i class="fa fa-check"></i>Cargar y guardar bases de datos</a></li>
<li><a href="manejo-2c.html#versiones-iterativas-de-summarize-y-mutate">Versiones iterativas de <code>summarize()</code> y <code>mutate()</code></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="manejo-2d.html"><a href="manejo-2d.html"><i class="fa fa-check"></i>02D - Manejo de datos (ejercicio int.)</a></li>
<li class="part"><span><b>III Visualización de datos</b></span></li>
<li class="chapter" data-level="" data-path="visualizacion-preceptos.html"><a href="visualizacion-preceptos.html"><i class="fa fa-check"></i>03 - Visualización de datos (preceptos)</a></li>
<li class="chapter" data-level="" data-path="visualizacion-intro.html"><a href="visualizacion-intro.html"><i class="fa fa-check"></i>03A - Visualización de datos (intro)</a><ul>
<li class="chapter" data-level="" data-path="visualizacion-intro.html"><a href="visualizacion-intro.html#inicio-cargar-paquetes-base-de-datos"><i class="fa fa-check"></i>Inicio: cargar paquetes, base de datos</a></li>
<li class="chapter" data-level="" data-path="visualizacion-intro.html"><a href="visualizacion-intro.html#gráficos-univariados"><i class="fa fa-check"></i>Gráficos univariados</a></li>
<li class="chapter" data-level="" data-path="visualizacion-intro.html"><a href="visualizacion-intro.html#gráficos-bivariados"><i class="fa fa-check"></i>Gráficos bivariados</a></li>
<li class="chapter" data-level="" data-path="visualizacion-intro.html"><a href="visualizacion-intro.html#un-poco-de-personalización-etiquetas"><i class="fa fa-check"></i>Un poco de personalización: etiquetas</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="visualizacion-ext.html"><a href="visualizacion-ext.html"><i class="fa fa-check"></i>03B - Visualización de datos (extensiones)</a><ul>
<li class="chapter" data-level="" data-path="visualizacion-ext.html"><a href="visualizacion-ext.html#cargar-paquetes-y-datos"><i class="fa fa-check"></i>Cargar paquetes y datos</a></li>
<li class="chapter" data-level="" data-path="visualizacion-ext.html"><a href="visualizacion-ext.html#gráfico-de-ránking"><i class="fa fa-check"></i>Gráfico de ránking</a></li>
<li class="chapter" data-level="" data-path="visualizacion-ext.html"><a href="visualizacion-ext.html#facetas"><i class="fa fa-check"></i>Facetas</a></li>
<li class="chapter" data-level="" data-path="visualizacion-ext.html"><a href="visualizacion-ext.html#gráficos-de-líneas"><i class="fa fa-check"></i>Gráficos de líneas</a></li>
<li class="chapter" data-level="" data-path="visualizacion-ext.html"><a href="visualizacion-ext.html#más-personalización"><i class="fa fa-check"></i>Más personalización</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="visualizacion-personalizacion.html"><a href="visualizacion-personalizacion.html"><i class="fa fa-check"></i>03C - Visualización de datos (personalización)</a><ul>
<li class="chapter" data-level="" data-path="visualizacion-personalizacion.html"><a href="visualizacion-personalizacion.html#inicio-cargar-paquetes-base-de-datos-1"><i class="fa fa-check"></i>Inicio: cargar paquetes, base de datos</a></li>
<li class="chapter" data-level="" data-path="visualizacion-personalizacion.html"><a href="visualizacion-personalizacion.html#gráfico-de-ejemplo"><i class="fa fa-check"></i>Gráfico de ejemplo</a></li>
<li class="chapter" data-level="" data-path="visualizacion-personalizacion.html"><a href="visualizacion-personalizacion.html#gráficos-como-objetos-guardar-gráficos-en-el-disco"><i class="fa fa-check"></i>Gráficos como objetos / guardar gráficos en el disco</a></li>
<li class="chapter" data-level="" data-path="visualizacion-personalizacion.html"><a href="visualizacion-personalizacion.html#personalización-de-gráficos"><i class="fa fa-check"></i>Personalización de gráficos</a></li>
</ul></li>
<li class="part"><span><b>IV Búsqueda de ayuda</b></span></li>
<li class="chapter" data-level="" data-path="busqueda-ayuda.html"><a href="busqueda-ayuda.html"><i class="fa fa-check"></i>04 - Guía búsqueda de ayuda</a><ul>
<li class="chapter" data-level="" data-path="busqueda-ayuda.html"><a href="busqueda-ayuda.html#leer-archivos-de-ayuda-de-r"><i class="fa fa-check"></i>Leer archivos de ayuda de R</a></li>
<li class="chapter" data-level="" data-path="busqueda-ayuda.html"><a href="busqueda-ayuda.html#encontrar-funciones-en-línea"><i class="fa fa-check"></i>Encontrar funciones en línea</a></li>
<li class="chapter" data-level="" data-path="busqueda-ayuda.html"><a href="busqueda-ayuda.html#solucionar-problemas"><i class="fa fa-check"></i>Solucionar problemas</a></li>
<li class="chapter" data-level="" data-path="busqueda-ayuda.html"><a href="busqueda-ayuda.html#pedir-ayuda-con-ejemplos-reproducibles-reprex"><i class="fa fa-check"></i>Pedir ayuda con ejemplos reproducibles (reprex)</a></li>
</ul></li>
<li class="part"><span><b>V Manejo avanzado de datos</b></span></li>
<li class="chapter" data-level="" data-path="manejo-av.html"><a href="manejo-av.html"><i class="fa fa-check"></i>05A - Manejo avanzado de datos</a><ul>
<li class="chapter" data-level="" data-path="manejo-av.html"><a href="manejo-av.html#inicio-cargar-paquetes-base-de-datos-2"><i class="fa fa-check"></i>Inicio: cargar paquetes, base de datos</a></li>
<li class="chapter" data-level="" data-path="manejo-av.html"><a href="manejo-av.html#pivotear-bases-de-datos-wide---long"><i class="fa fa-check"></i>Pivotear bases de datos (wide &lt;-&gt; long)</a></li>
<li class="chapter" data-level="" data-path="manejo-av.html"><a href="manejo-av.html#recodificar-variables"><i class="fa fa-check"></i>Recodificar variables</a></li>
<li class="chapter" data-level="" data-path="manejo-av.html"><a href="manejo-av.html#valores-perdidosmissingna"><i class="fa fa-check"></i>Valores perdidos/missing/NA</a></li>
<li class="chapter" data-level="" data-path="manejo-av.html"><a href="manejo-av.html#unir-bases-de-datos"><i class="fa fa-check"></i>Unir bases de datos</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="manejo-av-ej.html"><a href="manejo-av-ej.html"><i class="fa fa-check"></i>05B - Manejo avanzado de datos (ejercicio)</a></li>
<li class="part"><span><b>VI Análisis de texto</b></span></li>
<li class="chapter" data-level="" data-path="texto-analisis.html"><a href="texto-analisis.html"><i class="fa fa-check"></i>06A - Análisis de texto</a><ul>
<li class="chapter" data-level="" data-path="texto-analisis.html"><a href="texto-analisis.html#inicio-cargar-paquetes-base-de-datos-3"><i class="fa fa-check"></i>Inicio: cargar paquetes, base de datos</a></li>
<li class="chapter" data-level="" data-path="texto-analisis.html"><a href="texto-analisis.html#tokens-y-frecuencias"><i class="fa fa-check"></i>Tokens y frecuencias</a></li>
<li class="chapter" data-level="" data-path="texto-analisis.html"><a href="texto-analisis.html#separar-el-análisis-de-frecuencias-por-secciones"><i class="fa fa-check"></i>Separar el análisis de frecuencias por secciones</a></li>
<li class="chapter" data-level="" data-path="texto-analisis.html"><a href="texto-analisis.html#obtener-las-palabras-más-distintivas-al-comparar-documentos"><i class="fa fa-check"></i>Obtener las palabras más distintivas al comparar documentos</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="texto-cadenas.html"><a href="texto-cadenas.html"><i class="fa fa-check"></i>06B - Cadenas de texto</a><ul>
<li class="chapter" data-level="" data-path="texto-cadenas.html"><a href="texto-cadenas.html#inicio-cargar-paquetes-base-de-datos-4"><i class="fa fa-check"></i>Inicio: cargar paquetes, base de datos</a></li>
<li class="chapter" data-level="" data-path="texto-cadenas.html"><a href="texto-cadenas.html#cadenas-de-texto"><i class="fa fa-check"></i>Cadenas de texto</a></li>
<li class="chapter" data-level="" data-path="texto-cadenas.html"><a href="texto-cadenas.html#algunas-operaciones-simples-con-texto"><i class="fa fa-check"></i>Algunas operaciones simples con texto</a></li>
<li class="chapter" data-level="" data-path="texto-cadenas.html"><a href="texto-cadenas.html#funciones-para-trabajar-con-patrones"><i class="fa fa-check"></i>Funciones para trabajar con patrones</a></li>
<li><a href="texto-cadenas.html#patrones-más-complejos-con-expresiones-regulares-regex">Patrones más complejos con expresiones regulares (<em>regex</em>)</a></li>
<li class="chapter" data-level="" data-path="texto-cadenas.html"><a href="texto-cadenas.html#ejercicio-f"><i class="fa fa-check"></i>(Ejercicio f)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="texto-libros.html"><a href="texto-libros.html"><i class="fa fa-check"></i>06C - Descarga de libros</a></li>
<li class="part"><span><b>VII R avanzado</b></span></li>
<li class="chapter" data-level="" data-path="r-avanzado.html"><a href="r-avanzado.html"><i class="fa fa-check"></i>07A - R avanzado</a><ul>
<li class="chapter" data-level="" data-path="r-avanzado.html"><a href="r-avanzado.html#inicio-cargar-paquetes"><i class="fa fa-check"></i>Inicio: cargar paquetes</a></li>
<li class="chapter" data-level="" data-path="r-avanzado.html"><a href="r-avanzado.html#funciones-personalizadas-y-control-de-flujo"><i class="fa fa-check"></i>Funciones personalizadas y control de flujo</a></li>
<li><a href="r-avanzado.html#iteraciones-con-purrr">Iteraciones con <code>purrr</code></a></li>
<li class="chapter" data-level="" data-path="r-avanzado.html"><a href="r-avanzado.html#aplicación-1-programas-presidenciales"><i class="fa fa-check"></i>Aplicación 1: programas presidenciales</a></li>
<li class="chapter" data-level="" data-path="r-avanzado.html"><a href="r-avanzado.html#aplicación-2-varios-archivos-excel"><i class="fa fa-check"></i>Aplicación 2: varios archivos Excel</a></li>
</ul></li>
<li class="part"><span><b>VIII Minería de datos</b></span></li>
<li class="chapter" data-level="" data-path="web-scraping.html"><a href="web-scraping.html"><i class="fa fa-check"></i>08A - Web scraping</a><ul>
<li class="chapter" data-level="" data-path="web-scraping.html"><a href="web-scraping.html#inicio-cargar-paquetes-1"><i class="fa fa-check"></i>Inicio: cargar paquetes</a></li>
<li class="chapter" data-level="" data-path="web-scraping.html"><a href="web-scraping.html#web-scraping-1"><i class="fa fa-check"></i>Web scraping</a></li>
<li class="chapter" data-level="" data-path="web-scraping.html"><a href="web-scraping.html#descargar-múltiples-páginas-con-una-iteración"><i class="fa fa-check"></i>Descargar múltiples páginas con una iteración</a></li>
<li class="chapter" data-level="" data-path="web-scraping.html"><a href="web-scraping.html#generalizar-el-proceso-de-limpieza-de-los-datos-con-una-función"><i class="fa fa-check"></i>Generalizar el proceso de limpieza de los datos con una función</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="web-apis.html"><a href="web-apis.html"><i class="fa fa-check"></i>08B - Web APIs</a><ul>
<li class="chapter" data-level="" data-path="web-apis.html"><a href="web-apis.html#inicio-cargar-paquetes-2"><i class="fa fa-check"></i>Inicio: cargar paquetes</a></li>
<li class="chapter" data-level="" data-path="web-apis.html"><a href="web-apis.html#twitter"><i class="fa fa-check"></i>Twitter</a></li>
<li><a href="web-apis.html#google-trends"><span>Google Trends</span></a></li>
<li class="chapter" data-level="" data-path="web-apis.html"><a href="web-apis.html#google-scholar"><i class="fa fa-check"></i>Google Scholar</a></li>
<li class="chapter" data-level="" data-path="web-apis.html"><a href="web-apis.html#otras-web-apis"><i class="fa fa-check"></i>Otras Web APIs</a></li>
<li class="chapter" data-level="" data-path="web-apis.html"><a href="web-apis.html#ejercicios"><i class="fa fa-check"></i>Ejercicios</a></li>
</ul></li>
<li class="part"><span><b>IX Generación de mapas</b></span></li>
<li class="chapter" data-level="" data-path="mapas.html"><a href="mapas.html"><i class="fa fa-check"></i>09A - Generación de mapas</a><ul>
<li class="chapter" data-level="" data-path="mapas.html"><a href="mapas.html#inicio-cargar-paquetes-3"><i class="fa fa-check"></i>Inicio: cargar paquetes</a></li>
<li class="chapter" data-level="" data-path="mapas.html"><a href="mapas.html#objetos-geográficos-sf"><i class="fa fa-check"></i>Objetos geográficos (sf)</a></li>
<li><a href="mapas.html#operaciones-de-dplyr-en-objetos-geográficos-sf">Operaciones de <code>dplyr</code> en objetos geográficos (sf)</a></li>
<li><a href="mapas.html#primeros-mapas-con-la-sintaxis-de-ggplot2">Primeros mapas con la sintaxis de <code>ggplot2</code></a></li>
<li class="chapter" data-level="" data-path="mapas.html"><a href="mapas.html#shape-de-cuarteles"><i class="fa fa-check"></i>Shape de cuarteles</a></li>
<li class="chapter" data-level="" data-path="mapas.html"><a href="mapas.html#gráficos-con-más-de-una-fuente-de-datos-geográficos"><i class="fa fa-check"></i>Gráficos con más de una fuente de datos geográficos</a></li>
</ul></li>
<li class="part"><span><b>X Replicación y reportes</b></span></li>
<li class="chapter" data-level="" data-path="replicacion.html"><a href="replicacion.html"><i class="fa fa-check"></i>10A - Replicación</a><ul>
<li class="chapter" data-level="" data-path="replicacion.html"><a href="replicacion.html#replicación-en-las-ciencias-sociales"><i class="fa fa-check"></i>Replicación en las ciencias sociales</a></li>
<li class="chapter" data-level="" data-path="replicacion.html"><a href="replicacion.html#el-rol-del-código-y-r-markdown-en-reproducibilidad-y-replicación"><i class="fa fa-check"></i>El rol del código (y R Markdown) en reproducibilidad y replicación</a></li>
<li><a href="replicacion.html#r-markdown-avanzado-opciones-de-chunks">R Markdown avanzado: opciones de <em>chunks</em></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="reportes.html"><a href="reportes.html"><i class="fa fa-check"></i>10B - Reportes en R Markdown</a><ul>
<li class="chapter" data-level="" data-path="reportes.html"><a href="reportes.html#inicio-1"><i class="fa fa-check"></i>Inicio</a></li>
<li><a href="reportes.html#generación-de-tablas-desde-data-frames">Generación de tablas desde <em>data frames</em></a></li>
<li class="chapter" data-level="" data-path="reportes.html"><a href="reportes.html#imágenes-y-gráficos"><i class="fa fa-check"></i>Imágenes y gráficos</a></li>
<li class="chapter" data-level="" data-path="reportes.html"><a href="reportes.html#ecuaciones"><i class="fa fa-check"></i>Ecuaciones</a></li>
<li class="chapter" data-level="" data-path="reportes.html"><a href="reportes.html#tipos-de-documento-generados-por-r-markdown"><i class="fa fa-check"></i>Tipos de documento generados por R Markdown</a></li>
</ul></li>
<li class="part"><span><b>XI Cierre</b></span></li>
<li class="chapter" data-level="" data-path="recursos.html"><a href="recursos.html"><i class="fa fa-check"></i>Recursos adicionales</a><ul>
<li class="chapter" data-level="" data-path="recursos.html"><a href="recursos.html#instalación-local"><i class="fa fa-check"></i>Instalación local</a></li>
<li class="chapter" data-level="" data-path="recursos.html"><a href="recursos.html#guías-y-recursos"><i class="fa fa-check"></i>Guías y recursos</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Publicado con bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Programación para las Ciencias Sociales</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="web-apis" class="section level1 unnumbered">
<h1>08B - Web APIs</h1>
<p>Como al principio de todo script, recomiendo reiniciar R. Esto lo conseguimos en RStudio Cloud con Session &gt; Restart R y clickeando en la escoba del panel de “Environment” (superior derecho).</p>
<div id="inicio-cargar-paquetes-2" class="section level2">
<h2>Inicio: cargar paquetes</h2>
<div class="sourceCode" id="cb483"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb483-1"><a href="web-apis.html#cb483-1"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb483-2"><a href="web-apis.html#cb483-2"></a><span class="kw">library</span>(lubridate) <span class="co"># trabajar con fechas</span></span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;lubridate&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     date, intersect, setdiff, union</code></pre>
<p>Como vimos en el script anterior, es posible hacer web scraping en R con el paquete <code>rvest</code>. Sin embargo, algunos sitios prohiben el web scraping y, en cambio, ponen (algunos de) sus datos a disposición del público a través de una Web API. En general, estos son sitios grandes con muchísimo flujo (Twitter, Facebook, Reddit, Wikipedia, etcétera). Las Web APIs también sirven para interactuar en general con estos sitios, por ejemplo, para postear contenido automáticamente (¿bots?).</p>
</div>
<div id="twitter" class="section level2">
<h2>Twitter</h2>
<p>A continuación veremos cómo acceder a la Web API de Twitter, por medio del <a href="https://rtweet.info/">paquete <code>rtweet</code></a>.</p>
<p>Las dos funciones más importantes de <code>rtweet</code> son las siguientes:</p>
<ul>
<li><code>search_tweets()</code> buscará los tweets más recientes según un query (criterio de búsqueda): usualmente queremos buscar hashtags o términos comunes. Esto tiene dos limitaciones:
<ul>
<li>Primero, no siempre devuelve el número exacto de tweets que pedimos. Así lo explica el archivo de ayuda de la función: “[n]umber of tweets returned will often be less than what was specified by the user. This can happen because (a) the search query did not return many results (the search pool is already thinned out from the population of tweets to begin with), (b) because user hitting rate limit for a given token, or (c) of recent activity (either more tweets, which affect pagination in returned results or deletion of tweets)”.</li>
<li>Segundo, tiene una ventana de 6-9 días de alcance. Solo podemos buscar fenómenos recientes, en otras palabras.</li>
</ul></li>
<li><code>get_timelines()</code> nos permite obtener todos los tweets públicos de 1+ usuarios/as de Twitter.
<ul>
<li>Solo permite acceder a los 3200 tweets más recientes.</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb486"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb486-1"><a href="web-apis.html#cb486-1"></a><span class="kw">install.packages</span>(<span class="st">&quot;rtweet&quot;</span>)</span>
<span id="cb486-2"><a href="web-apis.html#cb486-2"></a><span class="kw">library</span>(rtweet)</span>
<span id="cb486-3"><a href="web-apis.html#cb486-3"></a></span>
<span id="cb486-4"><a href="web-apis.html#cb486-4"></a>tweets_busqueda &lt;-<span class="st"> </span><span class="kw">search_tweets</span>(</span>
<span id="cb486-5"><a href="web-apis.html#cb486-5"></a>  <span class="dt">q =</span> <span class="st">&quot;sernac&quot;</span>, <span class="dt">n =</span> <span class="dv">10000</span>, <span class="dt">include_rts =</span> <span class="ot">FALSE</span></span>
<span id="cb486-6"><a href="web-apis.html#cb486-6"></a>)</span>
<span id="cb486-7"><a href="web-apis.html#cb486-7"></a></span>
<span id="cb486-8"><a href="web-apis.html#cb486-8"></a>tweets_cuentas &lt;-<span class="st"> </span><span class="kw">get_timelines</span>(</span>
<span id="cb486-9"><a href="web-apis.html#cb486-9"></a>  <span class="dt">user =</span> <span class="kw">c</span>(<span class="st">&quot;sebastianpinera&quot;</span>, <span class="st">&quot;mbachelet&quot;</span>, <span class="st">&quot;ricardolagos&quot;</span>), <span class="dt">n =</span> <span class="dv">300</span></span>
<span id="cb486-10"><a href="web-apis.html#cb486-10"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb487"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb487-1"><a href="web-apis.html#cb487-1"></a>tweets_busqueda &lt;-<span class="st"> </span><span class="kw">read_rds</span>(<span class="st">&quot;datos/tweets_busqueda.rds&quot;</span>)</span>
<span id="cb487-2"><a href="web-apis.html#cb487-2"></a>tweets_cuentas &lt;-<span class="st"> </span><span class="kw">read_rds</span>(<span class="st">&quot;datos/tweets_cuentas.rds&quot;</span>)</span></code></pre></div>
<p>Los datos vienen en un formato muy ameno (una base de datos). Por ejemplo:</p>
<div class="sourceCode" id="cb488"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb488-1"><a href="web-apis.html#cb488-1"></a>tweets_cuentas <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb488-2"><a href="web-apis.html#cb488-2"></a><span class="st">  </span><span class="kw">select</span>(screen_name, text)</span></code></pre></div>
<pre><code>## # A tibble: 2,765 x 2
##    screen_name     text                                                                                                                                                                                                                                   
##    &lt;chr&gt;           &lt;chr&gt;                                                                                                                                                                                                                                  
##  1 sebastianpinera &quot;Millones de chilenos están en cuarentena. Para acompañarlos en este #DiaDelPatrimonioEnCasa preparamos esta guía con mucho cariño para su familia, que incluye lo mejor de la cultura, naturaleza y maravillas de Chile y el mundo. E~
##  2 sebastianpinera &quot;[VIVO] Pdte da inicio a jornada de distribución de suministros del plan #AlimentosParaChile https://t.co/PXfxrwOWQQ&quot;                                                                                                                  
##  3 sebastianpinera &quot;Este año celebramos de forma diferente nuestro #DíaDelPatrimonioEnCasa. \n\nHoy debemos cuidarnos, pero la tecnología nos permite conmemorarlo de forma virtual, por eso los invito a esta visita guiada donde les mostraré los lugar~
##  4 sebastianpinera &quot;Hoy comenzó pago del #IngresoMínimoGarantizado q beneficiará con un complemento de hasta $59.200 mensuales a 700 mil trabajadores dependientes de bajos ingresos. \n\nEste beneficio es parte de la Red de Proteccion Social q juntos~
##  5 sebastianpinera &quot;Una sociedad no puede vivir con temor. \n\nJunto con valorar avances, redoblamos nuestro compromiso y esfuerzo en lucha contra delincuencia. \n\nInauguramos #NuevasTecnologíasPoliciales para combatir con más eficacia delincuencia~
##  6 sebastianpinera &quot;Tendremos tolerancia 0 frente a cualquier tipo de agresión o maltrato contra la mujer.\n\nAgradezco a ministra @macasante quien lidera proyecto de Ley de #MonitoreoTelemático que le impide al agresor acercarse a su víctima. https~
##  7 sebastianpinera &quot;Tengo plena fe que como chilenos nos pondremos de pie y saldremos adelante. Juntos hemos superado tantas adversidades y esta vez volveremos a hacerlo.\n\nDepende de ti. Depende de nosotros.\n\n#RespetemosLaCuarentena https://t.co~
##  8 sebastianpinera &quot;Red de #ResidenciasSanitarias q hemos construido en Chile provee alojamiento, alimentación, cuidados básicos y trato digno para quienes no pueden tener el aislamiento necesario en sus propios hogares.\n\nEsta red los protege a el~
##  9 sebastianpinera &quot;Para continuar conversando sobre estos temas mañana me reuniré con Presidentes de partidos de Chile Vamos y jefes de bancada. \n\nEs importante avanzar juntos hacia un acuerdo que nos permita superar estas pandemias. Los escuchar~
## 10 sebastianpinera &quot;CUARTO: Plan de Reactivación Económica, con énfasis en creación de empleos, mejorar salarios e incrementar inversión\n\nQUINTO:Plan Fiscal para enfrentar necesidades presentes y desafíos futuros q permita recuperar equilibrio fis~
## # ... with 2,755 more rows</code></pre>
<p>Podemos ocupar todas las herramientas que hemos aprendido en el curso para analizar sus distintas variables. Aquí es importante la información temporal (fecha/hora), ocuparemos algunas funciones del paquete <code>lubridate</code> (parte del <code>tidyverse</code>) para trabajar con esto.</p>
<p>Comencemos haciendo algunas modificaciones en la base de tweets sobre el SERNAC:</p>
<div class="sourceCode" id="cb490"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb490-1"><a href="web-apis.html#cb490-1"></a>tweets_busqueda2 &lt;-<span class="st"> </span>tweets_busqueda <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb490-2"><a href="web-apis.html#cb490-2"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb490-3"><a href="web-apis.html#cb490-3"></a>    <span class="co"># pasar a la zona horaria de Santiago (por defecto está en UTC)</span></span>
<span id="cb490-4"><a href="web-apis.html#cb490-4"></a>    <span class="dt">created_at =</span> <span class="kw">with_tz</span>(created_at, <span class="st">&quot;America/Santiago&quot;</span>),</span>
<span id="cb490-5"><a href="web-apis.html#cb490-5"></a>    <span class="co"># crear variable de hora, que nos permitirá agregar</span></span>
<span id="cb490-6"><a href="web-apis.html#cb490-6"></a>    <span class="dt">hora       =</span> <span class="kw">floor_date</span>(created_at, <span class="st">&quot;hour&quot;</span>)</span>
<span id="cb490-7"><a href="web-apis.html#cb490-7"></a>  ) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb490-8"><a href="web-apis.html#cb490-8"></a><span class="st">  </span><span class="co"># solo quedarnos con mensajes desde ayer</span></span>
<span id="cb490-9"><a href="web-apis.html#cb490-9"></a><span class="st">  </span><span class="kw">filter</span>(created_at <span class="op">&gt;=</span><span class="st"> </span><span class="kw">as_datetime</span>(<span class="st">&quot;2020-11-11&quot;</span>))</span></code></pre></div>
<p>Podemos graficar el conteo de tweets por hora:</p>
<div class="sourceCode" id="cb491"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb491-1"><a href="web-apis.html#cb491-1"></a><span class="kw">ggplot</span>(tweets_busqueda2 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">count</span>(hora), </span>
<span id="cb491-2"><a href="web-apis.html#cb491-2"></a>       <span class="kw">aes</span>(<span class="dt">x =</span> hora, <span class="dt">y =</span> n)) <span class="op">+</span></span>
<span id="cb491-3"><a href="web-apis.html#cb491-3"></a><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span></span>
<span id="cb491-4"><a href="web-apis.html#cb491-4"></a><span class="st">  </span><span class="co"># en el eje x queremos cortes cada tres horas:</span></span>
<span id="cb491-5"><a href="web-apis.html#cb491-5"></a><span class="st">  </span><span class="kw">scale_x_datetime</span>(<span class="dt">date_breaks =</span> <span class="st">&quot;3 hour&quot;</span>, </span>
<span id="cb491-6"><a href="web-apis.html#cb491-6"></a>                   <span class="dt">date_labels =</span> <span class="st">&quot;%H:%M&quot;</span>)</span></code></pre></div>
<p><img src="uc_2020_bookdown_files/figure-html/unnamed-chunk-278-1.png" width="672" /></p>
<p>Ahora pasemos a la otra base:</p>
<div class="sourceCode" id="cb492"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb492-1"><a href="web-apis.html#cb492-1"></a>tweets_cuentas <span class="op">%&gt;%</span></span>
<span id="cb492-2"><a href="web-apis.html#cb492-2"></a><span class="st">  </span><span class="kw">count</span>(screen_name)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##   screen_name         n
##   &lt;chr&gt;           &lt;int&gt;
## 1 mbachelet         848
## 2 RicardoLagos      918
## 3 sebastianpinera   999</code></pre>
<div class="sourceCode" id="cb494"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb494-1"><a href="web-apis.html#cb494-1"></a>tweets_cuentas <span class="op">%&gt;%</span></span>
<span id="cb494-2"><a href="web-apis.html#cb494-2"></a><span class="st">  </span><span class="kw">group_by</span>(screen_name) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb494-3"><a href="web-apis.html#cb494-3"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">min_fecha =</span> <span class="kw">min</span>(created_at))</span></code></pre></div>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<pre><code>## # A tibble: 3 x 2
##   screen_name     min_fecha          
##   &lt;chr&gt;           &lt;dttm&gt;             
## 1 mbachelet       2016-10-07 10:43:30
## 2 RicardoLagos    2010-05-31 15:15:11
## 3 sebastianpinera 2018-07-03 19:56:17</code></pre>
<p>¿Por qué vemos este patrón?</p>
<p>Vamos a corregirlo:</p>
<div class="sourceCode" id="cb497"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb497-1"><a href="web-apis.html#cb497-1"></a>tweets_cuentas2 &lt;-<span class="st"> </span>tweets_cuentas <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb497-2"><a href="web-apis.html#cb497-2"></a><span class="st">  </span><span class="co"># pasar a la zona horaria y filtrar tweets desde el 18O:</span></span>
<span id="cb497-3"><a href="web-apis.html#cb497-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">created_at =</span> <span class="kw">with_tz</span>(created_at, <span class="st">&quot;America/Santiago&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb497-4"><a href="web-apis.html#cb497-4"></a><span class="st">  </span><span class="kw">filter</span>(created_at <span class="op">&gt;=</span><span class="st"> &quot;2019-10-18&quot;</span>)</span>
<span id="cb497-5"><a href="web-apis.html#cb497-5"></a></span>
<span id="cb497-6"><a href="web-apis.html#cb497-6"></a>tweets_cuentas2 <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb497-7"><a href="web-apis.html#cb497-7"></a><span class="st">  </span><span class="kw">count</span>(screen_name)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##   screen_name         n
##   &lt;chr&gt;           &lt;int&gt;
## 1 mbachelet         189
## 2 RicardoLagos       45
## 3 sebastianpinera   359</code></pre>
<p>Ahora podemos hacer cualquier análisis que nos interese. Por ejemplo, cuándo fueron los primeros tweets de cada cuenta (desde el 18/O).</p>
<div class="sourceCode" id="cb499"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb499-1"><a href="web-apis.html#cb499-1"></a>tweets_cuentas2 <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb499-2"><a href="web-apis.html#cb499-2"></a><span class="st">  </span><span class="kw">group_by</span>(screen_name) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb499-3"><a href="web-apis.html#cb499-3"></a><span class="st">  </span><span class="kw">filter</span>(created_at <span class="op">==</span><span class="st"> </span><span class="kw">min</span>(created_at)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb499-4"><a href="web-apis.html#cb499-4"></a><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb499-5"><a href="web-apis.html#cb499-5"></a><span class="st">  </span><span class="kw">select</span>(created_at, screen_name, text)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   created_at          screen_name     text                                                                                                                                                                                                                
##   &lt;dttm&gt;              &lt;chr&gt;           &lt;chr&gt;                                                                                                                                                                                                               
## 1 2019-10-19 00:13:02 sebastianpinera [EN VIVO] https://t.co/XAXPzmUgqn                                                                                                                                                                                   
## 2 2019-10-21 12:54:46 mbachelet       Estoy muy preocupada y triste de ver violencia, muertes y lesiones en #Chile. Exhorto al Gobierno a trabajar con todos los sectores y encontrar soluciones para abordar agravios. Urjo a los que planean participar~
## 3 2019-10-23 09:39:33 RicardoLagos    Tenemos que encontrar el rumbo para lograr un consenso que convoque a chilenos y chilenas, representantes de los partidos políticos y de los sectores vivos de la ciudadanía, que permita construir un nuevo pacto ~</code></pre>
</div>
<div id="google-trends" class="section level2">
<h2><a href="https://trends.google.com/trends/">Google Trends</a></h2>
<div class="sourceCode" id="cb501"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb501-1"><a href="web-apis.html#cb501-1"></a><span class="co"># install.packages(&quot;gtrendsR&quot;)</span></span>
<span id="cb501-2"><a href="web-apis.html#cb501-2"></a><span class="kw">library</span>(gtrendsR)</span></code></pre></div>
<pre><code>## Warning: package &#39;gtrendsR&#39; was built under R version 4.0.3</code></pre>
<p>Vamos a explorar búsquedas por organismos de DDHH en los últimos doce meses:</p>
<div class="sourceCode" id="cb503"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb503-1"><a href="web-apis.html#cb503-1"></a>orgs_ddhh &lt;-<span class="st"> </span><span class="kw">gtrends</span>(<span class="dt">keyword =</span> <span class="kw">c</span>(<span class="st">&quot;Human Rights Watch&quot;</span>,</span>
<span id="cb503-2"><a href="web-apis.html#cb503-2"></a>                                 <span class="st">&quot;Amnistía Internacional&quot;</span>,</span>
<span id="cb503-3"><a href="web-apis.html#cb503-3"></a>                                 <span class="st">&quot;CIDH&quot;</span>,</span>
<span id="cb503-4"><a href="web-apis.html#cb503-4"></a>                                 <span class="st">&quot;INDH&quot;</span>), </span>
<span id="cb503-5"><a href="web-apis.html#cb503-5"></a>                     <span class="dt">geo =</span> <span class="st">&quot;CL&quot;</span>, <span class="dt">time =</span> <span class="st">&quot;today 12-m&quot;</span>)</span>
<span id="cb503-6"><a href="web-apis.html#cb503-6"></a></span>
<span id="cb503-7"><a href="web-apis.html#cb503-7"></a>df_orgs_ddhh &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(orgs_ddhh<span class="op">$</span>interest_over_time)</span></code></pre></div>
<p>Arreglemos la columnas de fechas:</p>
<div class="sourceCode" id="cb504"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb504-1"><a href="web-apis.html#cb504-1"></a>df_orgs_ddhh2 &lt;-<span class="st"> </span>df_orgs_ddhh <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb504-2"><a href="web-apis.html#cb504-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">date =</span> <span class="kw">as_date</span>(date))</span></code></pre></div>
<div class="sourceCode" id="cb505"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb505-1"><a href="web-apis.html#cb505-1"></a><span class="kw">ggplot</span>(df_orgs_ddhh2, </span>
<span id="cb505-2"><a href="web-apis.html#cb505-2"></a>       <span class="kw">aes</span>(<span class="dt">x =</span> date, <span class="dt">y =</span> hits, <span class="dt">group =</span> keyword, <span class="dt">color =</span> keyword)) <span class="op">+</span></span>
<span id="cb505-3"><a href="web-apis.html#cb505-3"></a><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span></span>
<span id="cb505-4"><a href="web-apis.html#cb505-4"></a><span class="st">  </span>ggthemes<span class="op">::</span><span class="kw">scale_color_colorblind</span>() <span class="op">+</span></span>
<span id="cb505-5"><a href="web-apis.html#cb505-5"></a><span class="st">  </span><span class="co"># cortes en el eje x cada dos meses</span></span>
<span id="cb505-6"><a href="web-apis.html#cb505-6"></a><span class="st">  </span><span class="kw">scale_x_date</span>(<span class="dt">date_breaks =</span> <span class="st">&quot;2 months&quot;</span>, </span>
<span id="cb505-7"><a href="web-apis.html#cb505-7"></a>               <span class="dt">date_labels =</span> <span class="st">&quot;%m/%y&quot;</span>)</span></code></pre></div>
<p><img src="uc_2020_bookdown_files/figure-html/unnamed-chunk-286-1.png" width="672" /></p>
</div>
<div id="google-scholar" class="section level2">
<h2>Google Scholar</h2>
<p>Otra Web API sencilla es la de Google Scholar. Por ejemplo, podemos obtener la <a href="https://scholar.google.com/citations?user=RKN66-kAAAAJ&amp;hl=es&amp;oi=ao">lista de publicaciones de Elinor Ostrom</a>:</p>
<div class="sourceCode" id="cb506"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb506-1"><a href="web-apis.html#cb506-1"></a><span class="kw">install.packages</span>(<span class="st">&quot;scholar&quot;</span>)</span>
<span id="cb506-2"><a href="web-apis.html#cb506-2"></a><span class="kw">library</span>(scholar)</span>
<span id="cb506-3"><a href="web-apis.html#cb506-3"></a></span>
<span id="cb506-4"><a href="web-apis.html#cb506-4"></a>elinor_ostrom &lt;-<span class="st"> </span><span class="kw">get_publications</span>(<span class="st">&quot;RKN66-kAAAAJ&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb506-5"><a href="web-apis.html#cb506-5"></a><span class="st">  </span><span class="kw">as_tibble</span>()</span>
<span id="cb506-6"><a href="web-apis.html#cb506-6"></a>elinor_ostrom</span></code></pre></div>
<pre><code>## # A tibble: 1,204 x 8
##    title                                                                                        author                                        journal                      number           cites  year cid                                      pubid    
##    &lt;fct&gt;                                                                                        &lt;fct&gt;                                         &lt;fct&gt;                        &lt;fct&gt;            &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;                                    &lt;fct&gt;    
##  1 &quot;Governing the commons: The evolution of institutions for collective action&quot;                 E Ostrom                                      Cambridge university press   &quot;&quot;               39685  1990 3890556834294913616,13417789038701955244 u5HHmVD_~
##  2 &quot;The science of\&quot; muddling through\&quot;&quot;                                                        CE Lindblom                                   Public administration review &quot;79-88&quot;          14704  1959 12697815037321572847                     QNfnWKgK~
##  3 &quot;Understanding institutional diversity&quot;                                                      E Ostrom                                      Princeton university press   &quot;&quot;                8179  2009 15101681925026143505,133323073711233491~ ThYxFsVA~
##  4 &quot;Rules, games, and common-pool resources&quot;                                                    E Ostrom, R Gardner, J Walker, JM Walker, J ~ University of Michigan Press &quot;&quot;                5760  1994 8192222936357315454,10895932034490496719 u-x6o8yS~
##  5 &quot;A general framework for analyzing sustainability of social-ecological systems&quot;              E Ostrom                                      Science                      &quot;325 (5939), 41~  5393  2009 10357978884305814464                     3fE2CSJI~
##  6 &quot;Collective action and the evolution of social norms&quot;                                        E Ostrom                                      Journal of economic perspec~ &quot;14 (3), 137-15~  4356  2000 494656908153206772                       qjMakFHD~
##  7 &quot;The struggle to govern the commons&quot;                                                         T Dietz, E Ostrom, PC Stern                   science                      &quot;302 (5652), 19~  4353  2003 14836008273418948812,6886193046964774027 TPlbvKeU~
##  8 &quot;A behavioral approach to the rational choice theory of collective action: Presidential add~ E Ostrom                                      American political science ~ &quot;92 (1), 1-22&quot;    4229  1998 14706553558091068945,170343611817159876~ 9yKSN-GC~
##  9 &quot;Linking social and ecological systems: management practices and social mechanisms for buil~ F Berkes, C Folke, J Colding                  Cambridge University Press   &quot;&quot;                4055  2000 1448813686244049658                      CdxZDUzt~
## 10 &quot;Resilience and sustainable development: building adaptive capacity in a world of transform~ C Folke, S Carpenter, T Elmqvist, L Gunderso~ AMBIO: A journal of the hum~ &quot;31 (5), 437-44~  3394  2002 16289318559207801846                     CmbFvBri~
## # ... with 1,194 more rows</code></pre>
<p>Curiosamente, entran artículos de otros autores (probablemente porque Ostrom estuvo en el proceso de edición, o algo por el estilo). Podemos hacer un filtro para limpiar la base:</p>
<div class="sourceCode" id="cb508"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb508-1"><a href="web-apis.html#cb508-1"></a>elinor_ostrom <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb508-2"><a href="web-apis.html#cb508-2"></a><span class="st">  </span><span class="kw">filter</span>(<span class="kw">str_detect</span>(author, <span class="st">&quot;Ostrom&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 879 x 8
##    title                                                                                             author                                   journal                   number            cites  year cid                                        pubid    
##    &lt;fct&gt;                                                                                             &lt;fct&gt;                                    &lt;fct&gt;                     &lt;fct&gt;             &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;                                      &lt;fct&gt;    
##  1 Governing the commons: The evolution of institutions for collective action                        E Ostrom                                 Cambridge university pre~ &quot;&quot;                39685  1990 3890556834294913616,13417789038701955244   u5HHmVD_~
##  2 Understanding institutional diversity                                                             E Ostrom                                 Princeton university pre~ &quot;&quot;                 8179  2009 15101681925026143505,13332307371123349123  ThYxFsVA~
##  3 Rules, games, and common-pool resources                                                           E Ostrom, R Gardner, J Walker, JM Walke~ University of Michigan P~ &quot;&quot;                 5760  1994 8192222936357315454,10895932034490496719   u-x6o8yS~
##  4 A general framework for analyzing sustainability of social-ecological systems                     E Ostrom                                 Science                   &quot;325 (5939), 419~  5393  2009 10357978884305814464                       3fE2CSJI~
##  5 Collective action and the evolution of social norms                                               E Ostrom                                 Journal of economic pers~ &quot;14 (3), 137-158&quot;  4356  2000 494656908153206772                         qjMakFHD~
##  6 The struggle to govern the commons                                                                T Dietz, E Ostrom, PC Stern              science                   &quot;302 (5652), 190~  4353  2003 14836008273418948812,6886193046964774027   TPlbvKeU~
##  7 A behavioral approach to the rational choice theory of collective action: Presidential address, ~ E Ostrom                                 American political scien~ &quot;92 (1), 1-22&quot;     4229  1998 14706553558091068945,17034361181715987693~ 9yKSN-GC~
##  8 Revisiting the commons: local lessons, global challenges                                          E Ostrom, J Burger, CB Field, RB Norgaa~ science                   &quot;284 (5412), 278~  3251  1999 1543491137003347668                        IjCSPb-O~
##  9 Beyond markets and states: polycentric governance of complex economic systems                     E Ostrom                                 American economic review  &quot;100 (3), 641-72&quot;  3123  2010 2976854498562800954                        GnPB-g6t~
## 10 Property-rights regimes and natural resources: a conceptual analysis                              E Schlager, E Ostrom                     Land economics            &quot;249-262&quot;          2873  1992 5774084778917733435,16959520377304276402   Tyk-4Ss8~
## # ... with 869 more rows</code></pre>
<p>Bastián González-Bustamente usó datos de Google Scholar para mapear a la <a href="http://users.ox.ac.uk/~shil5311/ranking/networks/2020-03-05-network/">ciencia política académica chilena</a>.</p>
</div>
<div id="otras-web-apis" class="section level2">
<h2>Otras Web APIs</h2>
<ul>
<li><p><a href="https://github.com/robsalasco/sinimr"><code>sinimr</code></a> para extraer datos desde el Sistema Nacional de Información Municipal (SINIM).</p></li>
<li><p><a href="https://github.com/Dalcatruz/lobbyR"><code>lobbyR</code></a> para extraer información disponible a través de la Ley de Lobby.</p></li>
<li><p><a href="https://github.com/crazycapivara/owmr/"><code>owmr</code></a> para obtener datos de climáticos desde Open Weather Map.</p></li>
<li><p><a href="https://github.com/r-lib/gmailr"><code>gmailr</code></a> para leer y enviar mails, enviar borradores, etc., usando Gmail.</p></li>
<li><p><a href="https://github.com/tidyverse/googlesheets4"><code>googlesheets4</code></a> para interactuar con planillas de Google Docs.</p></li>
<li><p><a href="https://github.com/bergant/airtabler"><code>airtabler</code></a> para interactuar con planillas de Airtable (muchas más funciones disponibles que Google Sheets).</p></li>
<li><p><a href="https://github.com/hrbrmstr/pastebin"><code>pastebin</code></a> para extraer datos desde Pastebin.</p></li>
<li><p><a href="https://github.com/ivan-rivera/RedditExtractoR"><code>RedditExtractoR</code></a> para conseguir datos desde Reddit.</p></li>
</ul>
</div>
<div id="ejercicios" class="section level2">
<h2>Ejercicios</h2>
<ul>
<li><p>Analiza el texto de las tres cuentas de Twitter que obtuvimos. ¿Cuáles son las palabras más distintivas de c/u?</p></li>
<li><p>Realiza alguna otra búsqueda de términos en Google Trends y grafica sus resultados.</p></li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="web-scraping.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="part-generación-de-mapas.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "serif",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
},
"search": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
